(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

// 3rd party libs

require("./lib/angular.min.js");
require("./lib/angular-sanitize.min.js");
require("./lib/angular-animate.min.js");
require("./lib/angular-animate.min.js");
require("./lib/angular-route.min.js");
require("./lib/angular-mocks.js");

// main application imports

require("./slides");
require("./quiz");
require("./datasources");
require("./ime");

// angular startup

var app = angular.module("quizzer", [
    "ngAnimate",
    "ngSanitize",
    "ngRoute",
    "app.quiz",
    "app.slides",
    "app.sources",
    "app.ime"
]);

var config = function($interpolateProvider, $locationProvider, $routeProvider) {

    $interpolateProvider.startSymbol('{$');
    $interpolateProvider.endSymbol('$}');
    $locationProvider.html5Mode(true);

    $routeProvider.when("/conjugation", {
        templateUrl : "/static/partials/conjugation.html",
        controller : "SlideController",
        controllerAs : "slides"
    });

};

var startup = function(SourceRegistry) {

    SourceRegistry.register("conjugation", "ConjugationService");
    SourceRegistry.register("Particle", "ParticleService");

}

app.config(config);
app.run(startup);


},{"./datasources":3,"./ime":7,"./lib/angular-animate.min.js":8,"./lib/angular-mocks.js":9,"./lib/angular-route.min.js":10,"./lib/angular-sanitize.min.js":11,"./lib/angular.min.js":12,"./quiz":16,"./slides":19}],2:[function(require,module,exports){
"use strict";


// given a string a, and a string transform, returns the transformed a.
// example transforms : "a>b", "a>b,b>c", ">a", "a>", "a>b|b>c"

// Why not regex? Because I also need to present the transformations to
// laymen users as a guide on how it was mechanicall conjugated.

var T = function(w, t) {

    var segs  = t.split("|");

    // for each | delimited part

    for(var s = 0; s < segs.length; s++) {

        var parts = segs[s].split(",");

        // for each , delimited part

        for(var p = 0; p < parts.length; p++) {

            var changed = false;
            var oper = parts[p];

            // perform the > operation

            if(oper.contains(">")) {

                var befr = oper.split(">")[0];
                var aftr = oper.split(">")[1];

                if(w.endsWith(befr)){
                    w = w.substring(0, w.length - befr.length) + aftr;
                    changed = true;
                }

            }

            // break after the first change

            if(changed) {
                break;
            }

        }

    }

    return w;

}

// the conjugations

var godan_conjugations = function() {
        
    this.dict = "",
    this.stem = "u>",
    this.ta   = "nu>nda,mu>nda,bu>nda,ru>tta,u>tta,tsu>tta,ku>ita,gu>ida,su>shita",
    this.te   = "nu>nde,mu>nde,bu>nde,ru>tte,u>tte,tsu>tte,ku>ite,gu>ide,su>shite",

    this.indicative = {

        present : {
            positive : { plain : "", formal : "u>imasu" },
            negative : { plain : "u>anai", formal : "u>imasen" }
        },

        past : {
            positive : { plain : this.ta, formal : "u>imashita" },
            negative : { plain : "u>anakatta", formal : "u>imasen deshita" }
        }

    };

    this.potential = {

        present : {
            positive : { plain : "u>eru", formal : "u>emasu" },
            negative : { plain : "u>enai", formal : "u>emasen" }
        }

    }; 

    this.causative = {

        present : {
            positive : { plain : "u>aseru", formal : "u>asemasu" },
            negative : { plain : "u>asenai", formal : "u>asemasen" }
        }

    };

    this.imperative = {

        present : {
            positive : { plain : "u>e", formal : this.te+"|>kudasai" },
            negative : { plain : ">na", formal : "u>anai kudasai" }
        }

    };

    this.progressive = {

        present : {
            positive : { plain : this.te+"|>iru", formal : this.te+"|>imasu" },
            negative : { plain : "", formal : this.te+"|>imasen" }
        },

        past : {
            positive : { plain : this.te+"|>ita", formal : this.te+"|>imashita" },
            negative : { plain : "", formal : this.te+"|>imasen deshita" }
        }

    };

    this.presumptive_probable = {

        present : {
            positive : { plain : "> daro", formal : "> desho" },
            negative : { plain : "u>anai|> daro", formal : "u>anai|> desho" }
        },

        past : {
            positive : { plain : this.ta+"|> daro", formal : this.ta+"|> desho"},
            negative : { plain : "u>anakatta|> daro", formal : "u>anakatta|> desho" }
        }

    };

	this.presumptive_intent = {

        present : {
            positive : { plain : "u>o", formal : "u>masho" }
        }

    };

};

var ichidan_conjugations = function() {
        
    this.dict = "",
    this.stem = "ru>",
    this.ta   = "ru>ta",
    this.te   = "ru>te",

    this.indicative = {

        present : {
            positive : { plain : "", formal : "ru>masu" },
            negative : { plain : "ru>nai", formal : "ru>masen" }
        },

        past : {
            positive : { plain : "ru>ta", formal : "ru>mashita" },
            negative : { plain : "ru>nakatta", formal : "ru>masen deshita" }
        }

    };

    this.potential = {

        present : {
            positive : { plain : "ru>rareru", formal : "ru>raremasu" },
            negative : { plain : "ru>rarenai", formal : "ru>raremasen" }
        }

    }; 

    this.causative = {

        present : {
            positive : { plain : "ru>saseru", formal : "ru>sasemasu" },
            negative : { plain : "ru>sasenai", formal : "ru>sasemasen" }
        }

    };

    this.imperative = {

        present : {
            positive : { plain : "ru>ro", formal : "ru>te|>kudasai" },
            negative : { plain : ">na", formal : "ru>nai|>de kudasai" }
        }

    };

    this.progressive = {

        present : {
            positive : { plain : "ru>te|>iru", formal : "ru>te|>imasu" },
            negative : { plain : "", formal : "ru>te|>imasen" }
        },

        past : {
            positive : { plain : "ru>te|>ita", formal : "ru>te|>imashita" },
            negative : { plain : "", formal : "ru>te|>imasen deshita" }
        }

    };

    this.presumptive_probable = {

        present : {
            positive : { plain : "> daro", formal : "ru>nai daro" },
            negative : { plain : "> desho", formal : "ru>nai desho" }
        },

        past : {
            positive : { plain : "ru>ta|> daro", formal : "ru>ta|> desho" },
            negative : { plain : "ru>nakatta|> daro", formal : "ru>nakatta|> desho" }
        }

    };

    this.presumptive_intent = {

        present : {
            positive : { plain : "ru>yo", formal : "ru> masho" }
        }

    };

};

var ConjugationService = function() {

    return {

    	godan_conjugations : new godan_conjugations(),
        ichidan_conjugations : new ichidan_conjugations(),

    	conjugate : function(w, c) {
    		return T(w, c);
    	},

        all : function() {
            return [{
                item : "HODOR?",
                question : "What's that hodor?",
                answers : ["HODOR", "HODOR", "HODOR"],
                explanation : "HODOR",
                example : "HODOR"
            }, {
                item : "BRODOR?",
                question : "What's that brodor?",
                answers : ["BRODOR"],
                explanation : "BRODOR",
                example : "BRODOR"
            }];
        },

        checkAnswer : function(question, ans) {
            var normalisedAns = ans.replace(" ", "\\W*");
            return question.answers.filter(
                function(f){ return f.match(normalisedAns) !== null }
            ).length > 0;
        }
    };

};

angular.module("app.sources").factory("ConjugationService", ConjugationService);

module.exports = ConjugationService;

},{}],3:[function(require,module,exports){

angular.module("app.sources", []);

module.exports.ConjugationService = require("./conjugation.js");
module.exports.ParticleService = require("./particles.js");
module.exports.SourceRegistry = require("./registry.js");


},{"./conjugation.js":2,"./particles.js":4,"./registry.js":5}],4:[function(require,module,exports){
"use strict";

var ParticleService = function() {

    return {

        all : function() {
            return [{
                item : "に",
                question : "What's that particle?",
                answers : ["time", "destination", "direction"],
                explanation : "に can be thought of as the 'target' of a verb. It can come after time, destination",
                example : "にほん <strong>に</strong> いきます / went to Japan"
            },{
                item : "で",
                question : "What's that particle?",
                answers : ["place", "at", "by way of"],
                explanation : "で denotes the 'how' or 'where' of a verb",
                example : "くるま <strong>で</strong> いきます / to go by car"
            },{
                item : "は",
                question : "What's that particle?",
                answers : ["topic marker", "topic"],
                explanation : "は is the Topic Marker, it places emphasis on what came before it",
                example : "牛 <strong>は</strong> たべます / I ate the cow"
            },{
                item : "にほん <span class='light'>?</span> いきます",
                question : "What's that particle?",
                answers : ["に"],
                explanation : "に can be thought of as the 'target' of a verb. It can come after time, destination, direction",
                ime: true
            }];
        },

        checkAnswer : function(question, ans) {
            var normalisedAns = ans.replace(" ", "\\W*");
            return question.answers.filter(
                function(f){ return f.match(normalisedAns) !== null }
            ).length > 0;
        }

    }
};

angular.module("app.sources").service("ParticleService", ParticleService);

module.exports = ParticleService;

},{}],5:[function(require,module,exports){
"use strict";

var SourceRegistry = function($injector) {

	this.sources = {};

	this.register = function(name, canonicalName) {
		this.sources[name] = $injector.get(canonicalName);
	}

	this.get = function(name) {
		return this.sources[name];
	}

}

angular.module("app.sources").service("SourceRegistry", SourceRegistry);

module.exports = SourceRegistry;
},{}],6:[function(require,module,exports){
"use strict";

var wanakana = require("../lib/wanakana.js");

var ImeDirective = function() {

    return {
        restrict: "AC",
        link: function(scope, elem, attrs) {

            elem.bind("keypress", function(event){
                if(event.which == 13){
                    scope.$apply(function() {
                        if(scope.quiz.answered){
                            scope.quiz.next();
                        } else {
                            scope.quiz.attempt();
                        }
                    });
                }
            });

            scope.$watch("quiz.questions.current", function(n, o){
                wanakana.unbind(elem[0]);
                if(scope.finished && scope.quiz.questions.current.ime){
                    wanakana.bind(elem[0]);
                }
            });

        }
    };
};

angular.module("app.ime").directive("ngIme", ImeDirective);

module.exports = ImeDirective;

},{"../lib/wanakana.js":13}],7:[function(require,module,exports){

angular.module("app.ime", []);

module.exports.ImeDirective = require("./directives.js");

},{"./directives.js":6}],8:[function(require,module,exports){
/*
 AngularJS v1.5.0
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(D,r,Va){'use strict';function ya(a,b,c){if(!a)throw Ka("areq",b||"?",c||"required");return a}function za(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;ba(a)&&(a=a.join(" "));ba(b)&&(b=b.join(" "));return a+" "+b}function La(a){var b={};a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from);return b}function X(a,b,c){var d="";a=ba(a)?a:a&&R(a)&&a.length?a.split(/\s+/):[];s(a,function(a,g){a&&0<a.length&&(d+=0<g?" ":"",d+=c?b+a:a+b)});return d}function Ma(a){if(a instanceof I)switch(a.length){case 0:return[];
case 1:if(1===a[0].nodeType)return a;break;default:return I(oa(a))}if(1===a.nodeType)return I(a)}function oa(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(1==c.nodeType)return c}}function Na(a,b,c){s(b,function(b){a.addClass(b,c)})}function Oa(a,b,c){s(b,function(b){a.removeClass(b,c)})}function U(a){return function(b,c){c.addClass&&(Na(a,b,c.addClass),c.addClass=null);c.removeClass&&(Oa(a,b,c.removeClass),c.removeClass=null)}}function ka(a){a=a||{};if(!a.$$prepared){var b=a.domOperation||
Q;a.domOperation=function(){a.$$domOperationFired=!0;b();b=Q};a.$$prepared=!0}return a}function fa(a,b){Aa(a,b);Ba(a,b)}function Aa(a,b){b.from&&(a.css(b.from),b.from=null)}function Ba(a,b){b.to&&(a.css(b.to),b.to=null)}function V(a,b,c){var d=b.options||{};c=c.options||{};var e=(d.addClass||"")+" "+(c.addClass||""),g=(d.removeClass||"")+" "+(c.removeClass||"");a=Pa(a.attr("class"),e,g);c.preparationClasses&&(d.preparationClasses=ca(c.preparationClasses,d.preparationClasses),delete c.preparationClasses);
e=d.domOperation!==Q?d.domOperation:null;Ca(d,c);e&&(d.domOperation=e);d.addClass=a.addClass?a.addClass:null;d.removeClass=a.removeClass?a.removeClass:null;b.addClass=d.addClass;b.removeClass=d.removeClass;return d}function Pa(a,b,c){function d(a){R(a)&&(a=a.split(" "));var b={};s(a,function(a){a.length&&(b[a]=!0)});return b}var e={};a=d(a);b=d(b);s(b,function(a,b){e[b]=1});c=d(c);s(c,function(a,b){e[b]=1===e[b]?null:-1});var g={addClass:"",removeClass:""};s(e,function(b,c){var d,e;1===b?(d="addClass",
e=!a[c]):-1===b&&(d="removeClass",e=a[c]);e&&(g[d].length&&(g[d]+=" "),g[d]+=c)});return g}function G(a){return a instanceof r.element?a[0]:a}function Qa(a,b,c){var d="";b&&(d=X(b,"ng-",!0));c.addClass&&(d=ca(d,X(c.addClass,"-add")));c.removeClass&&(d=ca(d,X(c.removeClass,"-remove")));d.length&&(c.preparationClasses=d,a.addClass(d))}function la(a,b){var c=b?"-"+b+"s":"";ha(a,[ia,c]);return[ia,c]}function pa(a,b){var c=b?"paused":"",d=Y+"PlayState";ha(a,[d,c]);return[d,c]}function ha(a,b){a.style[b[0]]=
b[1]}function ca(a,b){return a?b?a+" "+b:a:b}function Da(a,b,c){var d=Object.create(null),e=a.getComputedStyle(b)||{};s(c,function(a,b){var c=e[a];if(c){var C=c.charAt(0);if("-"===C||"+"===C||0<=C)c=Ra(c);0===c&&(c=null);d[b]=c}});return d}function Ra(a){var b=0;a=a.split(/\s*,\s*/);s(a,function(a){"s"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));a=parseFloat(a)||0;b=b?Math.max(a,b):a});return b}function qa(a){return 0===a||null!=a}function Ea(a,b){var c=S,d=a+"s";b?c+="Duration":d+=" linear all";
return[c,d]}function Fa(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){return(b=a[b])?b.total:0},get:function(b){return(b=a[b])&&b.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function Ga(a,b,c){s(c,function(c){a[c]=Z(a[c])?a[c]:b.style.getPropertyValue(c)})}var Q=r.noop,Ha=r.copy,Ca=r.extend,I=r.element,s=r.forEach,ba=r.isArray,R=r.isString,ra=r.isObject,P=r.isUndefined,Z=r.isDefined,Ia=r.isFunction,sa=r.isElement,S,ta,Y,ua;P(D.ontransitionend)&&
Z(D.onwebkittransitionend)?(S="WebkitTransition",ta="webkitTransitionEnd transitionend"):(S="transition",ta="transitionend");P(D.onanimationend)&&Z(D.onwebkitanimationend)?(Y="WebkitAnimation",ua="webkitAnimationEnd animationend"):(Y="animation",ua="animationend");var ma=Y+"Delay",va=Y+"Duration",ia=S+"Delay";D=S+"Duration";var Ka=r.$$minErr("ng"),Sa={transitionDuration:D,transitionDelay:ia,transitionProperty:S+"Property",animationDuration:va,animationDelay:ma,animationIterationCount:Y+"IterationCount"},
Ta={transitionDuration:D,transitionDelay:ia,animationDuration:va,animationDelay:ma};r.module("ngAnimate",[]).directive("ngAnimateSwap",["$animate","$rootScope",function(a,b){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(b,d,e,g,H){var A,C;b.$watchCollection(e.ngAnimateSwap||e["for"],function(e){A&&a.leave(A);C&&(C.$destroy(),C=null);if(e||0===e)C=b.$new(),H(C,function(b){A=b;a.enter(b,null,d)})})}}}]).directive("ngAnimateChildren",["$interpolate",function(a){return{link:function(b,
c,d){function e(a){c.data("$$ngAnimateChildren","on"===a||"true"===a)}var g=d.ngAnimateChildren;r.isString(g)&&0===g.length?c.data("$$ngAnimateChildren",!0):(e(a(g)(b)),d.$observe("ngAnimateChildren",e))}}}]).factory("$$rAFScheduler",["$$rAF",function(a){function b(a){d=d.concat(a);c()}function c(){if(d.length){for(var b=d.shift(),H=0;H<b.length;H++)b[H]();e||a(function(){e||c()})}}var d,e;d=b.queue=[];b.waitUntilQuiet=function(b){e&&e();e=a(function(){e=null;b();c()})};return b}]).provider("$$animateQueue",
["$animateProvider",function(a){function b(a){if(!a)return null;a=a.split(" ");var b=Object.create(null);s(a,function(a){b[a]=!0});return b}function c(a,c){if(a&&c){var d=b(c);return a.split(" ").some(function(a){return d[a]})}}function d(a,b,c,d){return g[a].some(function(a){return a(b,c,d)})}function e(a,b){var c=0<(a.addClass||"").length,d=0<(a.removeClass||"").length;return b?c&&d:c||d}var g=this.rules={skip:[],cancel:[],join:[]};g.join.push(function(a,b,c){return!b.structural&&e(b)});g.skip.push(function(a,
b,c){return!b.structural&&!e(b)});g.skip.push(function(a,b,c){return"leave"==c.event&&b.structural});g.skip.push(function(a,b,c){return c.structural&&2===c.state&&!b.structural});g.cancel.push(function(a,b,c){return c.structural&&b.structural});g.cancel.push(function(a,b,c){return 2===c.state&&b.structural});g.cancel.push(function(a,b,d){a=b.addClass;b=b.removeClass;var e=d.addClass;d=d.removeClass;return P(a)&&P(b)||P(e)&&P(d)?!1:c(a,d)||c(b,e)});this.$get=["$$rAF","$rootScope","$rootElement","$document",
"$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(b,c,g,m,M,r,u,na,v,z){function K(){var a=!1;return function(b){a?b():c.$$postDigest(function(){a=!0;b()})}}function J(a,b,c){var f=G(b),d=G(a),h=[];(a=x[c])&&s(a,function(a){y.call(a.node,f)?h.push(a.callback):"leave"===c&&y.call(a.node,d)&&h.push(a.callback)});return h}function h(a,f,h){function l(c,f,d,h){g(function(){var c=J(y,a,f);c.length&&b(function(){s(c,function(b){b(a,d,h)})})});c.progress(f,
d,h)}function x(b){var c=a,f=n;f.preparationClasses&&(c.removeClass(f.preparationClasses),f.preparationClasses=null);f.activeClasses&&(c.removeClass(f.activeClasses),f.activeClasses=null);Ja(a,n);fa(a,n);n.domOperation();k.complete(!b)}var n=Ha(h),z,y;if(a=Ma(a))z=G(a),y=a.parent();var n=ka(n),k=new u,g=K();ba(n.addClass)&&(n.addClass=n.addClass.join(" "));n.addClass&&!R(n.addClass)&&(n.addClass=null);ba(n.removeClass)&&(n.removeClass=n.removeClass.join(" "));n.removeClass&&!R(n.removeClass)&&(n.removeClass=
null);n.from&&!ra(n.from)&&(n.from=null);n.to&&!ra(n.to)&&(n.to=null);if(!z)return x(),k;h=[z.className,n.addClass,n.removeClass].join(" ");if(!Ua(h))return x(),k;var C=0<=["enter","move","leave"].indexOf(f),w=!L||m[0].hidden||E.get(z);h=!w&&B.get(z)||{};var v=!!h.state;w||v&&1==h.state||(w=!q(a,y,f));if(w)return x(),k;C&&xa(a);w={structural:C,element:a,event:f,addClass:n.addClass,removeClass:n.removeClass,close:x,options:n,runner:k};if(v){if(d("skip",a,w,h)){if(2===h.state)return x(),k;V(a,h,w);
return h.runner}if(d("cancel",a,w,h))if(2===h.state)h.runner.end();else if(h.structural)h.close();else return V(a,h,w),h.runner;else if(d("join",a,w,h))if(2===h.state)V(a,w,{});else return Qa(a,C?f:null,n),f=w.event=h.event,n=V(a,h,w),h.runner}else V(a,w,{});(v=w.structural)||(v="animate"===w.event&&0<Object.keys(w.options.to||{}).length||e(w));if(!v)return x(),N(a),k;var M=(h.counter||0)+1;w.counter=M;t(a,1,w);c.$$postDigest(function(){var b=B.get(z),c=!b,b=b||{},d=0<(a.parent()||[]).length&&("animate"===
b.event||b.structural||e(b));if(c||b.counter!==M||!d){c&&(Ja(a,n),fa(a,n));if(c||C&&b.event!==f)n.domOperation(),k.end();d||N(a)}else f=!b.structural&&e(b,!0)?"setClass":b.event,t(a,2),b=r(a,f,b.options),b.done(function(b){x(!b);(b=B.get(z))&&b.counter===M&&N(G(a));l(k,f,"close",{})}),k.setHost(b),l(k,f,"start",{})});return k}function xa(a){a=G(a).querySelectorAll("[data-ng-animate]");s(a,function(a){var b=parseInt(a.getAttribute("data-ng-animate")),c=B.get(a);if(c)switch(b){case 2:c.runner.end();
case 1:B.remove(a)}})}function N(a){a=G(a);a.removeAttribute("data-ng-animate");B.remove(a)}function k(a,b){return G(a)===G(b)}function q(a,b,c){c=I(m[0].body);var f=k(a,c)||"HTML"===a[0].nodeName,d=k(a,g),h=!1,l,e=E.get(G(a));for((a=a.data("$ngAnimatePin"))&&(b=a);b&&b.length;){d||(d=k(b,g));var x=b[0];if(1!==x.nodeType)break;a=B.get(x)||{};if(!h){x=E.get(x);if(!0===x&&!1!==e){e=!0;break}else!1===x&&(e=!1);h=a.structural}if(P(l)||!0===l)a=b.data("$$ngAnimateChildren"),Z(a)&&(l=a);if(h&&!1===l)break;
f||(f=k(b,c));if(f&&d)break;if(!d&&(a=b.data("$ngAnimatePin"))){b=a;continue}b=b.parent()}return(!h||l)&&!0!==e&&d&&f}function t(a,b,c){c=c||{};c.state=b;a=G(a);a.setAttribute("data-ng-animate",b);c=(b=B.get(a))?Ca(b,c):c;B.put(a,c)}var B=new M,E=new M,L=null,f=c.$watch(function(){return 0===na.totalPendingRequests},function(a){a&&(f(),c.$$postDigest(function(){c.$$postDigest(function(){null===L&&(L=!0)})}))}),x={},l=a.classNameFilter(),Ua=l?function(a){return l.test(a)}:function(){return!0},Ja=U(v),
y=Node.prototype.contains||function(a){return this===a||!!(this.compareDocumentPosition(a)&16)};return{on:function(a,b,c){b=oa(b);x[a]=x[a]||[];x[a].push({node:b,callback:c})},off:function(a,b,c){function f(a,b,c){var d=oa(b);return a.filter(function(a){return!(a.node===d&&(!c||a.callback===c))})}var d=x[a];d&&(x[a]=1===arguments.length?null:f(d,b,c))},pin:function(a,b){ya(sa(a),"element","not an element");ya(sa(b),"parentElement","not an element");a.data("$ngAnimatePin",b)},push:function(a,b,c,f){c=
c||{};c.domOperation=f;return h(a,b,c)},enabled:function(a,b){var c=arguments.length;if(0===c)b=!!L;else if(sa(a)){var f=G(a),d=E.get(f);1===c?b=!d:E.put(f,!b)}else b=L=!!a;return b}}}]}]).provider("$$animation",["$animateProvider",function(a){function b(a){return a.data("$$animationRunner")}var c=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(a,e,g,H,A,C){function m(a){function b(a){if(a.processed)return a;a.processed=!0;var d=
a.domNode,N=d.parentNode;e.put(d,a);for(var k;N;){if(k=e.get(N)){k.processed||(k=b(k));break}N=N.parentNode}(k||c).children.push(a);return a}var c={children:[]},d,e=new A;for(d=0;d<a.length;d++){var g=a[d];e.put(g.domNode,a[d]={domNode:g.domNode,fn:g.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return function(a){var b=[],c=[],d;for(d=0;d<a.children.length;d++)c.push(a.children[d]);a=c.length;var e=0,t=[];for(d=0;d<c.length;d++){var g=c[d];0>=a&&(a=e,e=0,b.push(t),t=[]);t.push(g.fn);g.children.forEach(function(a){e++;
c.push(a)});a--}t.length&&b.push(t);return b}(c)}var M=[],r=U(a);return function(u,A,v){function z(a){a=a.hasAttribute("ng-animate-ref")?[a]:a.querySelectorAll("[ng-animate-ref]");var b=[];s(a,function(a){var c=a.getAttribute("ng-animate-ref");c&&c.length&&b.push(a)});return b}function K(a){var b=[],c={};s(a,function(a,f){var d=G(a.element),h=0<=["enter","move"].indexOf(a.event),d=a.structural?z(d):[];if(d.length){var e=h?"to":"from";s(d,function(a){var b=a.getAttribute("ng-animate-ref");c[b]=c[b]||
{};c[b][e]={animationID:f,element:I(a)}})}else b.push(a)});var d={},h={};s(c,function(c,e){var l=c.from,t=c.to;if(l&&t){var g=a[l.animationID],E=a[t.animationID],k=l.animationID.toString();if(!h[k]){var z=h[k]={structural:!0,beforeStart:function(){g.beforeStart();E.beforeStart()},close:function(){g.close();E.close()},classes:J(g.classes,E.classes),from:g,to:E,anchors:[]};z.classes.length?b.push(z):(b.push(g),b.push(E))}h[k].anchors.push({out:l.element,"in":t.element})}else l=l?l.animationID:t.animationID,
t=l.toString(),d[t]||(d[t]=!0,b.push(a[l]))});return b}function J(a,b){a=a.split(" ");b=b.split(" ");for(var c=[],d=0;d<a.length;d++){var h=a[d];if("ng-"!==h.substring(0,3))for(var e=0;e<b.length;e++)if(h===b[e]){c.push(h);break}}return c.join(" ")}function h(a){for(var b=c.length-1;0<=b;b--){var d=c[b];if(g.has(d)&&(d=g.get(d)(a)))return d}}function xa(a,c){a.from&&a.to?(b(a.from.element).setHost(c),b(a.to.element).setHost(c)):b(a.element).setHost(c)}function N(){var a=b(u);!a||"leave"===A&&v.$$domOperationFired||
a.end()}function k(b){u.off("$destroy",N);u.removeData("$$animationRunner");r(u,v);fa(u,v);v.domOperation();E&&a.removeClass(u,E);u.removeClass("ng-animate");t.complete(!b)}v=ka(v);var q=0<=["enter","move","leave"].indexOf(A),t=new H({end:function(){k()},cancel:function(){k(!0)}});if(!c.length)return k(),t;u.data("$$animationRunner",t);var B=za(u.attr("class"),za(v.addClass,v.removeClass)),E=v.tempClasses;E&&(B+=" "+E,v.tempClasses=null);var L;q&&(L="ng-"+A+"-prepare",a.addClass(u,L));M.push({element:u,
classes:B,event:A,structural:q,options:v,beforeStart:function(){u.addClass("ng-animate");E&&a.addClass(u,E);L&&(a.removeClass(u,L),L=null)},close:k});u.on("$destroy",N);if(1<M.length)return t;e.$$postDigest(function(){var a=[];s(M,function(c){b(c.element)?a.push(c):c.close()});M.length=0;var c=K(a),d=[];s(c,function(a){d.push({domNode:G(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var c,d=a.close;if(b(a.anchors?a.from.element||a.to.element:a.element)){var f=h(a);f&&(c=f.start)}c?
(c=c(),c.done(function(a){d(!a)}),xa(a,c)):d()}})});C(m(d))});return t}}]}]).provider("$animateCss",["$animateProvider",function(a){var b=Fa(),c=Fa();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(a,e,g,H,A,C,m,M){function r(a,b){var c=a.parentNode;return(c.$$ngAnimateParentKey||(c.$$ngAnimateParentKey=++K))+"-"+a.getAttribute("class")+"-"+b}function u(h,g,z,k){var q;0<b.count(z)&&(q=c.get(z),q||(g=X(g,"-stagger"),
e.addClass(h,g),q=Da(a,h,k),q.animationDuration=Math.max(q.animationDuration,0),q.transitionDuration=Math.max(q.transitionDuration,0),e.removeClass(h,g),c.put(z,q)));return q||{}}function na(a){J.push(a);m.waitUntilQuiet(function(){b.flush();c.flush();for(var a=A(),d=0;d<J.length;d++)J[d](a);J.length=0})}function v(c,e,g){e=b.get(g);e||(e=Da(a,c,Sa),"infinite"===e.animationIterationCount&&(e.animationIterationCount=1));b.put(g,e);c=e;g=c.animationDelay;e=c.transitionDelay;c.maxDelay=g&&e?Math.max(g,
e):g||e;c.maxDuration=Math.max(c.animationDuration*c.animationIterationCount,c.transitionDuration);return c}var z=U(e),K=0,J=[];return function(a,c){function d(){q()}function k(){q(!0)}function q(b){if(!(A||wa&&K)){A=!0;K=!1;f.$$skipPreparationClasses||e.removeClass(a,da);e.removeClass(a,ca);pa(l,!1);la(l,!1);s(m,function(a){l.style[a[0]]=""});z(a,f);fa(a,f);Object.keys(x).length&&s(x,function(a,b){a?l.style.setProperty(b,a):l.style.removeProperty(b)});if(f.onDone)f.onDone();ea&&ea.length&&a.off(ea.join(" "),
E);var c=a.data("$$animateCss");c&&(H.cancel(c[0].timer),a.removeData("$$animateCss"));D&&D.complete(!b)}}function t(a){p.blockTransition&&la(l,a);p.blockKeyframeAnimation&&pa(l,!!a)}function B(){D=new g({end:d,cancel:k});na(Q);q();return{$$willAnimate:!1,start:function(){return D},end:d}}function E(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(3));Math.max(a-U,0)>=P&&b>=O&&(wa=!0,q())}function L(){function b(){if(!A){t(!1);s(m,
function(a){l.style[a[0]]=a[1]});z(a,f);e.addClass(a,ca);if(p.recalculateTimingStyles){ja=l.className+" "+da;ga=r(l,ja);F=v(l,ja,ga);$=F.maxDelay;n=Math.max($,0);O=F.maxDuration;if(0===O){q();return}p.hasTransitions=0<F.transitionDuration;p.hasAnimations=0<F.animationDuration}p.applyAnimationDelay&&($="boolean"!==typeof f.delay&&qa(f.delay)?parseFloat(f.delay):$,n=Math.max($,0),F.animationDelay=$,aa=[ma,$+"s"],m.push(aa),l.style[aa[0]]=aa[1]);P=1E3*n;R=1E3*O;if(f.easing){var d,g=f.easing;p.hasTransitions&&
(d=S+"TimingFunction",m.push([d,g]),l.style[d]=g);p.hasAnimations&&(d=Y+"TimingFunction",m.push([d,g]),l.style[d]=g)}F.transitionDuration&&ea.push(ta);F.animationDuration&&ea.push(ua);U=Date.now();var k=P+1.5*R;d=U+k;var g=a.data("$$animateCss")||[],L=!0;if(g.length){var B=g[0];(L=d>B.expectedEndTime)?H.cancel(B.timer):g.push(q)}L&&(k=H(c,k,!1),g[0]={timer:k,expectedEndTime:d},g.push(q),a.data("$$animateCss",g));if(ea.length)a.on(ea.join(" "),E);f.to&&(f.cleanupStyles&&Ga(x,l,Object.keys(f.to)),Ba(a,
f))}}function c(){var b=a.data("$$animateCss");if(b){for(var d=1;d<b.length;d++)b[d]();a.removeData("$$animateCss")}}if(!A)if(l.parentNode){var d=function(a){if(wa)K&&a&&(K=!1,q());else if(K=!a,F.animationDuration)if(a=pa(l,K),K)m.push(a);else{var b=m,c=b.indexOf(a);0<=a&&b.splice(c,1)}},g=0<Z&&(F.transitionDuration&&0===W.transitionDuration||F.animationDuration&&0===W.animationDuration)&&Math.max(W.animationDelay,W.transitionDelay);g?H(b,Math.floor(g*Z*1E3),!1):b();I.resume=function(){d(!0)};I.pause=
function(){d(!1)}}else q()}var f=c||{};f.$$prepared||(f=ka(Ha(f)));var x={},l=G(a);if(!l||!l.parentNode||!M.enabled())return B();var m=[],J=a.attr("class"),y=La(f),A,K,wa,D,I,n,P,O,R,U,ea=[];if(0===f.duration||!C.animations&&!C.transitions)return B();var w=f.event&&ba(f.event)?f.event.join(" "):f.event,V="",T="";w&&f.structural?V=X(w,"ng-",!0):w&&(V=w);f.addClass&&(T+=X(f.addClass,"-add"));f.removeClass&&(T.length&&(T+=" "),T+=X(f.removeClass,"-remove"));f.applyClassesEarly&&T.length&&z(a,f);var da=
[V,T].join(" ").trim(),ja=J+" "+da,ca=X(da,"-active"),J=y.to&&0<Object.keys(y.to).length;if(!(0<(f.keyframeStyle||"").length||J||da))return B();var ga,W;0<f.stagger?(y=parseFloat(f.stagger),W={transitionDelay:y,animationDelay:y,transitionDuration:0,animationDuration:0}):(ga=r(l,ja),W=u(l,da,ga,Ta));f.$$skipPreparationClasses||e.addClass(a,da);f.transitionStyle&&(y=[S,f.transitionStyle],ha(l,y),m.push(y));0<=f.duration&&(y=0<l.style[S].length,y=Ea(f.duration,y),ha(l,y),m.push(y));f.keyframeStyle&&
(y=[Y,f.keyframeStyle],ha(l,y),m.push(y));var Z=W?0<=f.staggerIndex?f.staggerIndex:b.count(ga):0;(w=0===Z)&&!f.skipBlocking&&la(l,9999);var F=v(l,ja,ga),$=F.maxDelay;n=Math.max($,0);O=F.maxDuration;var p={};p.hasTransitions=0<F.transitionDuration;p.hasAnimations=0<F.animationDuration;p.hasTransitionAll=p.hasTransitions&&"all"==F.transitionProperty;p.applyTransitionDuration=J&&(p.hasTransitions&&!p.hasTransitionAll||p.hasAnimations&&!p.hasTransitions);p.applyAnimationDuration=f.duration&&p.hasAnimations;
p.applyTransitionDelay=qa(f.delay)&&(p.applyTransitionDuration||p.hasTransitions);p.applyAnimationDelay=qa(f.delay)&&p.hasAnimations;p.recalculateTimingStyles=0<T.length;if(p.applyTransitionDuration||p.applyAnimationDuration)O=f.duration?parseFloat(f.duration):O,p.applyTransitionDuration&&(p.hasTransitions=!0,F.transitionDuration=O,y=0<l.style[S+"Property"].length,m.push(Ea(O,y))),p.applyAnimationDuration&&(p.hasAnimations=!0,F.animationDuration=O,m.push([va,O+"s"]));if(0===O&&!p.recalculateTimingStyles)return B();
if(null!=f.delay){var aa;"boolean"!==typeof f.delay&&(aa=parseFloat(f.delay),n=Math.max(aa,0));p.applyTransitionDelay&&m.push([ia,aa+"s"]);p.applyAnimationDelay&&m.push([ma,aa+"s"])}null==f.duration&&0<F.transitionDuration&&(p.recalculateTimingStyles=p.recalculateTimingStyles||w);P=1E3*n;R=1E3*O;f.skipBlocking||(p.blockTransition=0<F.transitionDuration,p.blockKeyframeAnimation=0<F.animationDuration&&0<W.animationDelay&&0===W.animationDuration);f.from&&(f.cleanupStyles&&Ga(x,l,Object.keys(f.from)),
Aa(a,f));p.blockTransition||p.blockKeyframeAnimation?t(O):f.skipBlocking||la(l,!1);return{$$willAnimate:!0,end:d,start:function(){if(!A)return I={end:d,cancel:k,resume:null,pause:null},D=new g(I),na(L),D}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(a){a.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,c,d,e,g,H,A){function C(a){return a.replace(/\bng-\S+\b/g,"")}function m(a,
b){R(a)&&(a=a.split(" "));R(b)&&(b=b.split(" "));return a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function M(c,e,g){function h(a){var b={},c=G(a).getBoundingClientRect();s(["width","height","top","left"],function(a){var d=c[a];switch(a){case "top":d+=D.scrollTop;break;case "left":d+=D.scrollLeft}b[a]=Math.floor(d)+"px"});return b}function A(){var c=C(g.attr("class")||""),d=m(c,q),c=m(q,c),d=a(k,{to:h(g),addClass:"ng-anchor-in "+d,removeClass:"ng-anchor-out "+c,delay:!0});return d.$$willAnimate?
d:null}function H(){k.remove();e.removeClass("ng-animate-shim");g.removeClass("ng-animate-shim")}var k=I(G(e).cloneNode(!0)),q=C(k.attr("class")||"");e.addClass("ng-animate-shim");g.addClass("ng-animate-shim");k.addClass("ng-anchor");v.append(k);var t;c=function(){var c=a(k,{addClass:"ng-anchor-out",delay:!0,from:h(e)});return c.$$willAnimate?c:null}();if(!c&&(t=A(),!t))return H();var B=c||t;return{start:function(){function a(){c&&c.end()}var b,c=B.start();c.done(function(){c=null;if(!t&&(t=A()))return c=
t.start(),c.done(function(){c=null;H();b.complete()}),c;H();b.complete()});return b=new d({end:a,cancel:a})}}}function r(a,b,c,e){var g=u(a,Q),m=u(b,Q),k=[];s(e,function(a){(a=M(c,a.out,a["in"]))&&k.push(a)});if(g||m||0!==k.length)return{start:function(){function a(){s(b,function(a){a.end()})}var b=[];g&&b.push(g.start());m&&b.push(m.start());s(k,function(a){b.push(a.start())});var c=new d({end:a,cancel:a});d.all(b,function(a){c.complete(a)});return c}}}function u(c){var d=c.element,e=c.options||
{};c.structural&&(e.event=c.event,e.structural=!0,e.applyClassesEarly=!0,"leave"===c.event&&(e.onDone=e.domOperation));e.preparationClasses&&(e.event=ca(e.event,e.preparationClasses));c=a(d,e);return c.$$willAnimate?c:null}if(!g.animations&&!g.transitions)return Q;var D=A[0].body;c=G(e);var v=I(c.parentNode&&11===c.parentNode.nodeType||D.contains(c)?c:D);U(H);return function(a){return a.from&&a.to?r(a.from,a.to,a.classes,a.anchors):u(a)}}]}]).provider("$$animateJs",["$animateProvider",function(a){this.$get=
["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function e(c){c=ba(c)?c:c.split(" ");for(var d=[],e={},g=0;g<c.length;g++){var s=c[g],r=a.$$registeredAnimations[s];r&&!e[s]&&(d.push(b.get(r)),e[s]=!0)}return d}var g=U(d);return function(a,b,d,m){function r(){m.domOperation();g(a,m)}function D(a,b,d,e,f){switch(d){case "animate":b=[b,e.from,e.to,f];break;case "setClass":b=[b,z,K,f];break;case "addClass":b=[b,z,f];break;case "removeClass":b=[b,K,f];break;default:b=[b,f]}b.push(e);if(a=a.apply(a,
b))if(Ia(a.start)&&(a=a.start()),a instanceof c)a.done(f);else if(Ia(a))return a;return Q}function u(a,b,d,e,f){var g=[];s(e,function(e){var h=e[f];h&&g.push(function(){var e,f,g=!1,k=function(a){g||(g=!0,(f||Q)(a),e.complete(!a))};e=new c({end:function(){k()},cancel:function(){k(!0)}});f=D(h,a,b,d,function(a){k(!1===a)});return e})});return g}function G(a,b,d,e,f){var g=u(a,b,d,e,f);if(0===g.length){var h,k;"beforeSetClass"===f?(h=u(a,"removeClass",d,e,"beforeRemoveClass"),k=u(a,"addClass",d,e,"beforeAddClass")):
"setClass"===f&&(h=u(a,"removeClass",d,e,"removeClass"),k=u(a,"addClass",d,e,"addClass"));h&&(g=g.concat(h));k&&(g=g.concat(k))}if(0!==g.length)return function(a){var b=[];g.length&&s(g,function(a){b.push(a())});b.length?c.all(b,a):a();return function(a){s(b,function(b){a?b.cancel():b.end()})}}}var v=!1;3===arguments.length&&ra(d)&&(m=d,d=null);m=ka(m);d||(d=a.attr("class")||"",m.addClass&&(d+=" "+m.addClass),m.removeClass&&(d+=" "+m.removeClass));var z=m.addClass,K=m.removeClass,J=e(d),h,I;if(J.length){var N,
k;"leave"==b?(k="leave",N="afterLeave"):(k="before"+b.charAt(0).toUpperCase()+b.substr(1),N=b);"enter"!==b&&"move"!==b&&(h=G(a,b,m,J,k));I=G(a,b,m,J,N)}if(h||I){var q;return{$$willAnimate:!0,end:function(){q?q.end():(v=!0,r(),fa(a,m),q=new c,q.complete(!0));return q},start:function(){function b(c){v=!0;r();fa(a,m);q.complete(c)}if(q)return q;q=new c;var d,e=[];h&&e.push(function(a){d=h(a)});e.length?e.push(function(a){r();a(!0)}):r();I&&e.push(function(a){d=I(a)});q.setHost({end:function(){v||((d||
Q)(void 0),b(void 0))},cancel:function(){v||((d||Q)(!0),b(!0))}});c.chain(e,b);return q}}}}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(a,c){function d(c){return a(c.element,c.event,c.classes,c.options)}return function(a){if(a.from&&a.to){var b=d(a.from),r=d(a.to);if(b||r)return{start:function(){function a(){return function(){s(d,function(a){a.end()})}}var d=[];b&&d.push(b.start());r&&
d.push(r.start());c.all(d,function(a){e.complete(a)});var e=new c({end:a(),cancel:a()});return e}}}else return d(a)}}]}])})(window,window.angular);


},{}],9:[function(require,module,exports){
/**
 * @license AngularJS v1.5.0
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window, angular, undefined) {

'use strict';

/**
 * @ngdoc object
 * @name angular.mock
 * @description
 *
 * Namespace from 'angular-mocks.js' which contains testing related code.
 */
angular.mock = {};

/**
 * ! This is a private undocumented service !
 *
 * @name $browser
 *
 * @description
 * This service is a mock implementation of {@link ng.$browser}. It provides fake
 * implementation for commonly used browser apis that are hard to test, e.g. setTimeout, xhr,
 * cookies, etc...
 *
 * The api of this service is the same as that of the real {@link ng.$browser $browser}, except
 * that there are several helper methods available which can be used in tests.
 */
angular.mock.$BrowserProvider = function() {
  this.$get = function() {
    return new angular.mock.$Browser();
  };
};

angular.mock.$Browser = function() {
  var self = this;

  this.isMock = true;
  self.$$url = "http://server/";
  self.$$lastUrl = self.$$url; // used by url polling fn
  self.pollFns = [];

  // TODO(vojta): remove this temporary api
  self.$$completeOutstandingRequest = angular.noop;
  self.$$incOutstandingRequestCount = angular.noop;


  // register url polling fn

  self.onUrlChange = function(listener) {
    self.pollFns.push(
      function() {
        if (self.$$lastUrl !== self.$$url || self.$$state !== self.$$lastState) {
          self.$$lastUrl = self.$$url;
          self.$$lastState = self.$$state;
          listener(self.$$url, self.$$state);
        }
      }
    );

    return listener;
  };

  self.$$applicationDestroyed = angular.noop;
  self.$$checkUrlChange = angular.noop;

  self.deferredFns = [];
  self.deferredNextId = 0;

  self.defer = function(fn, delay) {
    delay = delay || 0;
    self.deferredFns.push({time:(self.defer.now + delay), fn:fn, id: self.deferredNextId});
    self.deferredFns.sort(function(a, b) { return a.time - b.time;});
    return self.deferredNextId++;
  };


  /**
   * @name $browser#defer.now
   *
   * @description
   * Current milliseconds mock time.
   */
  self.defer.now = 0;


  self.defer.cancel = function(deferId) {
    var fnIndex;

    angular.forEach(self.deferredFns, function(fn, index) {
      if (fn.id === deferId) fnIndex = index;
    });

    if (angular.isDefined(fnIndex)) {
      self.deferredFns.splice(fnIndex, 1);
      return true;
    }

    return false;
  };


  /**
   * @name $browser#defer.flush
   *
   * @description
   * Flushes all pending requests and executes the defer callbacks.
   *
   * @param {number=} number of milliseconds to flush. See {@link #defer.now}
   */
  self.defer.flush = function(delay) {
    if (angular.isDefined(delay)) {
      self.defer.now += delay;
    } else {
      if (self.deferredFns.length) {
        self.defer.now = self.deferredFns[self.deferredFns.length - 1].time;
      } else {
        throw new Error('No deferred tasks to be flushed');
      }
    }

    while (self.deferredFns.length && self.deferredFns[0].time <= self.defer.now) {
      self.deferredFns.shift().fn();
    }
  };

  self.$$baseHref = '/';
  self.baseHref = function() {
    return this.$$baseHref;
  };
};
angular.mock.$Browser.prototype = {

/**
  * @name $browser#poll
  *
  * @description
  * run all fns in pollFns
  */
  poll: function poll() {
    angular.forEach(this.pollFns, function(pollFn) {
      pollFn();
    });
  },

  url: function(url, replace, state) {
    if (angular.isUndefined(state)) {
      state = null;
    }
    if (url) {
      this.$$url = url;
      // Native pushState serializes & copies the object; simulate it.
      this.$$state = angular.copy(state);
      return this;
    }

    return this.$$url;
  },

  state: function() {
    return this.$$state;
  },

  notifyWhenNoOutstandingRequests: function(fn) {
    fn();
  }
};


/**
 * @ngdoc provider
 * @name $exceptionHandlerProvider
 *
 * @description
 * Configures the mock implementation of {@link ng.$exceptionHandler} to rethrow or to log errors
 * passed to the `$exceptionHandler`.
 */

/**
 * @ngdoc service
 * @name $exceptionHandler
 *
 * @description
 * Mock implementation of {@link ng.$exceptionHandler} that rethrows or logs errors passed
 * to it. See {@link ngMock.$exceptionHandlerProvider $exceptionHandlerProvider} for configuration
 * information.
 *
 *
 * ```js
 *   describe('$exceptionHandlerProvider', function() {
 *
 *     it('should capture log messages and exceptions', function() {
 *
 *       module(function($exceptionHandlerProvider) {
 *         $exceptionHandlerProvider.mode('log');
 *       });
 *
 *       inject(function($log, $exceptionHandler, $timeout) {
 *         $timeout(function() { $log.log(1); });
 *         $timeout(function() { $log.log(2); throw 'banana peel'; });
 *         $timeout(function() { $log.log(3); });
 *         expect($exceptionHandler.errors).toEqual([]);
 *         expect($log.assertEmpty());
 *         $timeout.flush();
 *         expect($exceptionHandler.errors).toEqual(['banana peel']);
 *         expect($log.log.logs).toEqual([[1], [2], [3]]);
 *       });
 *     });
 *   });
 * ```
 */

angular.mock.$ExceptionHandlerProvider = function() {
  var handler;

  /**
   * @ngdoc method
   * @name $exceptionHandlerProvider#mode
   *
   * @description
   * Sets the logging mode.
   *
   * @param {string} mode Mode of operation, defaults to `rethrow`.
   *
   *   - `log`: Sometimes it is desirable to test that an error is thrown, for this case the `log`
   *            mode stores an array of errors in `$exceptionHandler.errors`, to allow later
   *            assertion of them. See {@link ngMock.$log#assertEmpty assertEmpty()} and
   *            {@link ngMock.$log#reset reset()}
   *   - `rethrow`: If any errors are passed to the handler in tests, it typically means that there
   *                is a bug in the application or test, so this mock will make these tests fail.
   *                For any implementations that expect exceptions to be thrown, the `rethrow` mode
   *                will also maintain a log of thrown errors.
   */
  this.mode = function(mode) {

    switch (mode) {
      case 'log':
      case 'rethrow':
        var errors = [];
        handler = function(e) {
          if (arguments.length == 1) {
            errors.push(e);
          } else {
            errors.push([].slice.call(arguments, 0));
          }
          if (mode === "rethrow") {
            throw e;
          }
        };
        handler.errors = errors;
        break;
      default:
        throw new Error("Unknown mode '" + mode + "', only 'log'/'rethrow' modes are allowed!");
    }
  };

  this.$get = function() {
    return handler;
  };

  this.mode('rethrow');
};


/**
 * @ngdoc service
 * @name $log
 *
 * @description
 * Mock implementation of {@link ng.$log} that gathers all logged messages in arrays
 * (one array per logging level). These arrays are exposed as `logs` property of each of the
 * level-specific log function, e.g. for level `error` the array is exposed as `$log.error.logs`.
 *
 */
angular.mock.$LogProvider = function() {
  var debug = true;

  function concat(array1, array2, index) {
    return array1.concat(Array.prototype.slice.call(array2, index));
  }

  this.debugEnabled = function(flag) {
    if (angular.isDefined(flag)) {
      debug = flag;
      return this;
    } else {
      return debug;
    }
  };

  this.$get = function() {
    var $log = {
      log: function() { $log.log.logs.push(concat([], arguments, 0)); },
      warn: function() { $log.warn.logs.push(concat([], arguments, 0)); },
      info: function() { $log.info.logs.push(concat([], arguments, 0)); },
      error: function() { $log.error.logs.push(concat([], arguments, 0)); },
      debug: function() {
        if (debug) {
          $log.debug.logs.push(concat([], arguments, 0));
        }
      }
    };

    /**
     * @ngdoc method
     * @name $log#reset
     *
     * @description
     * Reset all of the logging arrays to empty.
     */
    $log.reset = function() {
      /**
       * @ngdoc property
       * @name $log#log.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#log `log()`}.
       *
       * @example
       * ```js
       * $log.log('Some Log');
       * var first = $log.log.logs.unshift();
       * ```
       */
      $log.log.logs = [];
      /**
       * @ngdoc property
       * @name $log#info.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#info `info()`}.
       *
       * @example
       * ```js
       * $log.info('Some Info');
       * var first = $log.info.logs.unshift();
       * ```
       */
      $log.info.logs = [];
      /**
       * @ngdoc property
       * @name $log#warn.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#warn `warn()`}.
       *
       * @example
       * ```js
       * $log.warn('Some Warning');
       * var first = $log.warn.logs.unshift();
       * ```
       */
      $log.warn.logs = [];
      /**
       * @ngdoc property
       * @name $log#error.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#error `error()`}.
       *
       * @example
       * ```js
       * $log.error('Some Error');
       * var first = $log.error.logs.unshift();
       * ```
       */
      $log.error.logs = [];
        /**
       * @ngdoc property
       * @name $log#debug.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#debug `debug()`}.
       *
       * @example
       * ```js
       * $log.debug('Some Error');
       * var first = $log.debug.logs.unshift();
       * ```
       */
      $log.debug.logs = [];
    };

    /**
     * @ngdoc method
     * @name $log#assertEmpty
     *
     * @description
     * Assert that all of the logging methods have no logged messages. If any messages are present,
     * an exception is thrown.
     */
    $log.assertEmpty = function() {
      var errors = [];
      angular.forEach(['error', 'warn', 'info', 'log', 'debug'], function(logLevel) {
        angular.forEach($log[logLevel].logs, function(log) {
          angular.forEach(log, function(logItem) {
            errors.push('MOCK $log (' + logLevel + '): ' + String(logItem) + '\n' +
                        (logItem.stack || ''));
          });
        });
      });
      if (errors.length) {
        errors.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or " +
          "an expected log message was not checked and removed:");
        errors.push('');
        throw new Error(errors.join('\n---------\n'));
      }
    };

    $log.reset();
    return $log;
  };
};


/**
 * @ngdoc service
 * @name $interval
 *
 * @description
 * Mock implementation of the $interval service.
 *
 * Use {@link ngMock.$interval#flush `$interval.flush(millis)`} to
 * move forward by `millis` milliseconds and trigger any functions scheduled to run in that
 * time.
 *
 * @param {function()} fn A function that should be called repeatedly.
 * @param {number} delay Number of milliseconds between each function call.
 * @param {number=} [count=0] Number of times to repeat. If not set, or 0, will repeat
 *   indefinitely.
 * @param {boolean=} [invokeApply=true] If set to `false` skips model dirty checking, otherwise
 *   will invoke `fn` within the {@link ng.$rootScope.Scope#$apply $apply} block.
 * @param {...*=} Pass additional parameters to the executed function.
 * @returns {promise} A promise which will be notified on each iteration.
 */
angular.mock.$IntervalProvider = function() {
  this.$get = ['$browser', '$rootScope', '$q', '$$q',
       function($browser,   $rootScope,   $q,   $$q) {
    var repeatFns = [],
        nextRepeatId = 0,
        now = 0;

    var $interval = function(fn, delay, count, invokeApply) {
      var hasParams = arguments.length > 4,
          args = hasParams ? Array.prototype.slice.call(arguments, 4) : [],
          iteration = 0,
          skipApply = (angular.isDefined(invokeApply) && !invokeApply),
          deferred = (skipApply ? $$q : $q).defer(),
          promise = deferred.promise;

      count = (angular.isDefined(count)) ? count : 0;
      promise.then(null, null, (!hasParams) ? fn : function() {
        fn.apply(null, args);
      });

      promise.$$intervalId = nextRepeatId;

      function tick() {
        deferred.notify(iteration++);

        if (count > 0 && iteration >= count) {
          var fnIndex;
          deferred.resolve(iteration);

          angular.forEach(repeatFns, function(fn, index) {
            if (fn.id === promise.$$intervalId) fnIndex = index;
          });

          if (angular.isDefined(fnIndex)) {
            repeatFns.splice(fnIndex, 1);
          }
        }

        if (skipApply) {
          $browser.defer.flush();
        } else {
          $rootScope.$apply();
        }
      }

      repeatFns.push({
        nextTime:(now + delay),
        delay: delay,
        fn: tick,
        id: nextRepeatId,
        deferred: deferred
      });
      repeatFns.sort(function(a, b) { return a.nextTime - b.nextTime;});

      nextRepeatId++;
      return promise;
    };
    /**
     * @ngdoc method
     * @name $interval#cancel
     *
     * @description
     * Cancels a task associated with the `promise`.
     *
     * @param {promise} promise A promise from calling the `$interval` function.
     * @returns {boolean} Returns `true` if the task was successfully cancelled.
     */
    $interval.cancel = function(promise) {
      if (!promise) return false;
      var fnIndex;

      angular.forEach(repeatFns, function(fn, index) {
        if (fn.id === promise.$$intervalId) fnIndex = index;
      });

      if (angular.isDefined(fnIndex)) {
        repeatFns[fnIndex].deferred.reject('canceled');
        repeatFns.splice(fnIndex, 1);
        return true;
      }

      return false;
    };

    /**
     * @ngdoc method
     * @name $interval#flush
     * @description
     *
     * Runs interval tasks scheduled to be run in the next `millis` milliseconds.
     *
     * @param {number=} millis maximum timeout amount to flush up until.
     *
     * @return {number} The amount of time moved forward.
     */
    $interval.flush = function(millis) {
      now += millis;
      while (repeatFns.length && repeatFns[0].nextTime <= now) {
        var task = repeatFns[0];
        task.fn();
        task.nextTime += task.delay;
        repeatFns.sort(function(a, b) { return a.nextTime - b.nextTime;});
      }
      return millis;
    };

    return $interval;
  }];
};


/* jshint -W101 */
/* The R_ISO8061_STR regex is never going to fit into the 100 char limit!
 * This directive should go inside the anonymous function but a bug in JSHint means that it would
 * not be enacted early enough to prevent the warning.
 */
var R_ISO8061_STR = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;

function jsonStringToDate(string) {
  var match;
  if (match = string.match(R_ISO8061_STR)) {
    var date = new Date(0),
        tzHour = 0,
        tzMin  = 0;
    if (match[9]) {
      tzHour = toInt(match[9] + match[10]);
      tzMin = toInt(match[9] + match[11]);
    }
    date.setUTCFullYear(toInt(match[1]), toInt(match[2]) - 1, toInt(match[3]));
    date.setUTCHours(toInt(match[4] || 0) - tzHour,
                     toInt(match[5] || 0) - tzMin,
                     toInt(match[6] || 0),
                     toInt(match[7] || 0));
    return date;
  }
  return string;
}

function toInt(str) {
  return parseInt(str, 10);
}

function padNumber(num, digits, trim) {
  var neg = '';
  if (num < 0) {
    neg =  '-';
    num = -num;
  }
  num = '' + num;
  while (num.length < digits) num = '0' + num;
  if (trim) {
    num = num.substr(num.length - digits);
  }
  return neg + num;
}


/**
 * @ngdoc type
 * @name angular.mock.TzDate
 * @description
 *
 * *NOTE*: this is not an injectable instance, just a globally available mock class of `Date`.
 *
 * Mock of the Date type which has its timezone specified via constructor arg.
 *
 * The main purpose is to create Date-like instances with timezone fixed to the specified timezone
 * offset, so that we can test code that depends on local timezone settings without dependency on
 * the time zone settings of the machine where the code is running.
 *
 * @param {number} offset Offset of the *desired* timezone in hours (fractions will be honored)
 * @param {(number|string)} timestamp Timestamp representing the desired time in *UTC*
 *
 * @example
 * !!!! WARNING !!!!!
 * This is not a complete Date object so only methods that were implemented can be called safely.
 * To make matters worse, TzDate instances inherit stuff from Date via a prototype.
 *
 * We do our best to intercept calls to "unimplemented" methods, but since the list of methods is
 * incomplete we might be missing some non-standard methods. This can result in errors like:
 * "Date.prototype.foo called on incompatible Object".
 *
 * ```js
 * var newYearInBratislava = new TzDate(-1, '2009-12-31T23:00:00Z');
 * newYearInBratislava.getTimezoneOffset() => -60;
 * newYearInBratislava.getFullYear() => 2010;
 * newYearInBratislava.getMonth() => 0;
 * newYearInBratislava.getDate() => 1;
 * newYearInBratislava.getHours() => 0;
 * newYearInBratislava.getMinutes() => 0;
 * newYearInBratislava.getSeconds() => 0;
 * ```
 *
 */
angular.mock.TzDate = function(offset, timestamp) {
  var self = new Date(0);
  if (angular.isString(timestamp)) {
    var tsStr = timestamp;

    self.origDate = jsonStringToDate(timestamp);

    timestamp = self.origDate.getTime();
    if (isNaN(timestamp)) {
      throw {
        name: "Illegal Argument",
        message: "Arg '" + tsStr + "' passed into TzDate constructor is not a valid date string"
      };
    }
  } else {
    self.origDate = new Date(timestamp);
  }

  var localOffset = new Date(timestamp).getTimezoneOffset();
  self.offsetDiff = localOffset * 60 * 1000 - offset * 1000 * 60 * 60;
  self.date = new Date(timestamp + self.offsetDiff);

  self.getTime = function() {
    return self.date.getTime() - self.offsetDiff;
  };

  self.toLocaleDateString = function() {
    return self.date.toLocaleDateString();
  };

  self.getFullYear = function() {
    return self.date.getFullYear();
  };

  self.getMonth = function() {
    return self.date.getMonth();
  };

  self.getDate = function() {
    return self.date.getDate();
  };

  self.getHours = function() {
    return self.date.getHours();
  };

  self.getMinutes = function() {
    return self.date.getMinutes();
  };

  self.getSeconds = function() {
    return self.date.getSeconds();
  };

  self.getMilliseconds = function() {
    return self.date.getMilliseconds();
  };

  self.getTimezoneOffset = function() {
    return offset * 60;
  };

  self.getUTCFullYear = function() {
    return self.origDate.getUTCFullYear();
  };

  self.getUTCMonth = function() {
    return self.origDate.getUTCMonth();
  };

  self.getUTCDate = function() {
    return self.origDate.getUTCDate();
  };

  self.getUTCHours = function() {
    return self.origDate.getUTCHours();
  };

  self.getUTCMinutes = function() {
    return self.origDate.getUTCMinutes();
  };

  self.getUTCSeconds = function() {
    return self.origDate.getUTCSeconds();
  };

  self.getUTCMilliseconds = function() {
    return self.origDate.getUTCMilliseconds();
  };

  self.getDay = function() {
    return self.date.getDay();
  };

  // provide this method only on browsers that already have it
  if (self.toISOString) {
    self.toISOString = function() {
      return padNumber(self.origDate.getUTCFullYear(), 4) + '-' +
            padNumber(self.origDate.getUTCMonth() + 1, 2) + '-' +
            padNumber(self.origDate.getUTCDate(), 2) + 'T' +
            padNumber(self.origDate.getUTCHours(), 2) + ':' +
            padNumber(self.origDate.getUTCMinutes(), 2) + ':' +
            padNumber(self.origDate.getUTCSeconds(), 2) + '.' +
            padNumber(self.origDate.getUTCMilliseconds(), 3) + 'Z';
    };
  }

  //hide all methods not implemented in this mock that the Date prototype exposes
  var unimplementedMethods = ['getUTCDay',
      'getYear', 'setDate', 'setFullYear', 'setHours', 'setMilliseconds',
      'setMinutes', 'setMonth', 'setSeconds', 'setTime', 'setUTCDate', 'setUTCFullYear',
      'setUTCHours', 'setUTCMilliseconds', 'setUTCMinutes', 'setUTCMonth', 'setUTCSeconds',
      'setYear', 'toDateString', 'toGMTString', 'toJSON', 'toLocaleFormat', 'toLocaleString',
      'toLocaleTimeString', 'toSource', 'toString', 'toTimeString', 'toUTCString', 'valueOf'];

  angular.forEach(unimplementedMethods, function(methodName) {
    self[methodName] = function() {
      throw new Error("Method '" + methodName + "' is not implemented in the TzDate mock");
    };
  });

  return self;
};

//make "tzDateInstance instanceof Date" return true
angular.mock.TzDate.prototype = Date.prototype;
/* jshint +W101 */


/**
 * @ngdoc service
 * @name $animate
 *
 * @description
 * Mock implementation of the {@link ng.$animate `$animate`} service. Exposes two additional methods
 * for testing animations.
 */
angular.mock.animate = angular.module('ngAnimateMock', ['ng'])

  .config(['$provide', function($provide) {

    $provide.factory('$$forceReflow', function() {
      function reflowFn() {
        reflowFn.totalReflows++;
      }
      reflowFn.totalReflows = 0;
      return reflowFn;
    });

    $provide.factory('$$animateAsyncRun', function() {
      var queue = [];
      var queueFn = function() {
        return function(fn) {
          queue.push(fn);
        };
      };
      queueFn.flush = function() {
        if (queue.length === 0) return false;

        for (var i = 0; i < queue.length; i++) {
          queue[i]();
        }
        queue = [];

        return true;
      };
      return queueFn;
    });

    $provide.decorator('$$animateJs', ['$delegate', function($delegate) {
      var runners = [];

      var animateJsConstructor = function() {
        var animator = $delegate.apply($delegate, arguments);
        // If no javascript animation is found, animator is undefined
        if (animator) {
          runners.push(animator);
        }
        return animator;
      };

      animateJsConstructor.$closeAndFlush = function() {
        runners.forEach(function(runner) {
          runner.end();
        });
        runners = [];
      };

      return animateJsConstructor;
    }]);

    $provide.decorator('$animateCss', ['$delegate', function($delegate) {
      var runners = [];

      var animateCssConstructor = function(element, options) {
        var animator = $delegate(element, options);
        runners.push(animator);
        return animator;
      };

      animateCssConstructor.$closeAndFlush = function() {
        runners.forEach(function(runner) {
          runner.end();
        });
        runners = [];
      };

      return animateCssConstructor;
    }]);

    $provide.decorator('$animate', ['$delegate', '$timeout', '$browser', '$$rAF', '$animateCss', '$$animateJs',
                                    '$$forceReflow', '$$animateAsyncRun', '$rootScope',
                            function($delegate,   $timeout,   $browser,   $$rAF,   $animateCss,   $$animateJs,
                                     $$forceReflow,   $$animateAsyncRun,  $rootScope) {
      var animate = {
        queue: [],
        cancel: $delegate.cancel,
        on: $delegate.on,
        off: $delegate.off,
        pin: $delegate.pin,
        get reflows() {
          return $$forceReflow.totalReflows;
        },
        enabled: $delegate.enabled,
        /**
         * @ngdoc method
         * @name $animate#closeAndFlush
         * @description
         *
         * This method will close all pending animations (both {@link ngAnimate#javascript-based-animations Javascript}
         * and {@link ngAnimate.$animateCss CSS}) and it will also flush any remaining animation frames and/or callbacks.
         */
        closeAndFlush: function() {
          // we allow the flush command to swallow the errors
          // because depending on whether CSS or JS animations are
          // used, there may not be a RAF flush. The primary flush
          // at the end of this function must throw an exception
          // because it will track if there were pending animations
          this.flush(true);
          $animateCss.$closeAndFlush();
          $$animateJs.$closeAndFlush();
          this.flush();
        },
        /**
         * @ngdoc method
         * @name $animate#flush
         * @description
         *
         * This method is used to flush the pending callbacks and animation frames to either start
         * an animation or conclude an animation. Note that this will not actually close an
         * actively running animation (see {@link ngMock.$animate#closeAndFlush `closeAndFlush()`} for that).
         */
        flush: function(hideErrors) {
          $rootScope.$digest();

          var doNextRun, somethingFlushed = false;
          do {
            doNextRun = false;

            if ($$rAF.queue.length) {
              $$rAF.flush();
              doNextRun = somethingFlushed = true;
            }

            if ($$animateAsyncRun.flush()) {
              doNextRun = somethingFlushed = true;
            }
          } while (doNextRun);

          if (!somethingFlushed && !hideErrors) {
            throw new Error('No pending animations ready to be closed or flushed');
          }

          $rootScope.$digest();
        }
      };

      angular.forEach(
        ['animate','enter','leave','move','addClass','removeClass','setClass'], function(method) {
        animate[method] = function() {
          animate.queue.push({
            event: method,
            element: arguments[0],
            options: arguments[arguments.length - 1],
            args: arguments
          });
          return $delegate[method].apply($delegate, arguments);
        };
      });

      return animate;
    }]);

  }]);


/**
 * @ngdoc function
 * @name angular.mock.dump
 * @description
 *
 * *NOTE*: this is not an injectable instance, just a globally available function.
 *
 * Method for serializing common angular objects (scope, elements, etc..) into strings, useful for
 * debugging.
 *
 * This method is also available on window, where it can be used to display objects on debug
 * console.
 *
 * @param {*} object - any object to turn into string.
 * @return {string} a serialized string of the argument
 */
angular.mock.dump = function(object) {
  return serialize(object);

  function serialize(object) {
    var out;

    if (angular.isElement(object)) {
      object = angular.element(object);
      out = angular.element('<div></div>');
      angular.forEach(object, function(element) {
        out.append(angular.element(element).clone());
      });
      out = out.html();
    } else if (angular.isArray(object)) {
      out = [];
      angular.forEach(object, function(o) {
        out.push(serialize(o));
      });
      out = '[ ' + out.join(', ') + ' ]';
    } else if (angular.isObject(object)) {
      if (angular.isFunction(object.$eval) && angular.isFunction(object.$apply)) {
        out = serializeScope(object);
      } else if (object instanceof Error) {
        out = object.stack || ('' + object.name + ': ' + object.message);
      } else {
        // TODO(i): this prevents methods being logged,
        // we should have a better way to serialize objects
        out = angular.toJson(object, true);
      }
    } else {
      out = String(object);
    }

    return out;
  }

  function serializeScope(scope, offset) {
    offset = offset ||  '  ';
    var log = [offset + 'Scope(' + scope.$id + '): {'];
    for (var key in scope) {
      if (Object.prototype.hasOwnProperty.call(scope, key) && !key.match(/^(\$|this)/)) {
        log.push('  ' + key + ': ' + angular.toJson(scope[key]));
      }
    }
    var child = scope.$$childHead;
    while (child) {
      log.push(serializeScope(child, offset + '  '));
      child = child.$$nextSibling;
    }
    log.push('}');
    return log.join('\n' + offset);
  }
};

/**
 * @ngdoc service
 * @name $httpBackend
 * @description
 * Fake HTTP backend implementation suitable for unit testing applications that use the
 * {@link ng.$http $http service}.
 *
 * *Note*: For fake HTTP backend implementation suitable for end-to-end testing or backend-less
 * development please see {@link ngMockE2E.$httpBackend e2e $httpBackend mock}.
 *
 * During unit testing, we want our unit tests to run quickly and have no external dependencies so
 * we don’t want to send [XHR](https://developer.mozilla.org/en/xmlhttprequest) or
 * [JSONP](http://en.wikipedia.org/wiki/JSONP) requests to a real server. All we really need is
 * to verify whether a certain request has been sent or not, or alternatively just let the
 * application make requests, respond with pre-trained responses and assert that the end result is
 * what we expect it to be.
 *
 * This mock implementation can be used to respond with static or dynamic responses via the
 * `expect` and `when` apis and their shortcuts (`expectGET`, `whenPOST`, etc).
 *
 * When an Angular application needs some data from a server, it calls the $http service, which
 * sends the request to a real server using $httpBackend service. With dependency injection, it is
 * easy to inject $httpBackend mock (which has the same API as $httpBackend) and use it to verify
 * the requests and respond with some testing data without sending a request to a real server.
 *
 * There are two ways to specify what test data should be returned as http responses by the mock
 * backend when the code under test makes http requests:
 *
 * - `$httpBackend.expect` - specifies a request expectation
 * - `$httpBackend.when` - specifies a backend definition
 *
 *
 * ## Request Expectations vs Backend Definitions
 *
 * Request expectations provide a way to make assertions about requests made by the application and
 * to define responses for those requests. The test will fail if the expected requests are not made
 * or they are made in the wrong order.
 *
 * Backend definitions allow you to define a fake backend for your application which doesn't assert
 * if a particular request was made or not, it just returns a trained response if a request is made.
 * The test will pass whether or not the request gets made during testing.
 *
 *
 * <table class="table">
 *   <tr><th width="220px"></th><th>Request expectations</th><th>Backend definitions</th></tr>
 *   <tr>
 *     <th>Syntax</th>
 *     <td>.expect(...).respond(...)</td>
 *     <td>.when(...).respond(...)</td>
 *   </tr>
 *   <tr>
 *     <th>Typical usage</th>
 *     <td>strict unit tests</td>
 *     <td>loose (black-box) unit testing</td>
 *   </tr>
 *   <tr>
 *     <th>Fulfills multiple requests</th>
 *     <td>NO</td>
 *     <td>YES</td>
 *   </tr>
 *   <tr>
 *     <th>Order of requests matters</th>
 *     <td>YES</td>
 *     <td>NO</td>
 *   </tr>
 *   <tr>
 *     <th>Request required</th>
 *     <td>YES</td>
 *     <td>NO</td>
 *   </tr>
 *   <tr>
 *     <th>Response required</th>
 *     <td>optional (see below)</td>
 *     <td>YES</td>
 *   </tr>
 * </table>
 *
 * In cases where both backend definitions and request expectations are specified during unit
 * testing, the request expectations are evaluated first.
 *
 * If a request expectation has no response specified, the algorithm will search your backend
 * definitions for an appropriate response.
 *
 * If a request didn't match any expectation or if the expectation doesn't have the response
 * defined, the backend definitions are evaluated in sequential order to see if any of them match
 * the request. The response from the first matched definition is returned.
 *
 *
 * ## Flushing HTTP requests
 *
 * The $httpBackend used in production always responds to requests asynchronously. If we preserved
 * this behavior in unit testing, we'd have to create async unit tests, which are hard to write,
 * to follow and to maintain. But neither can the testing mock respond synchronously; that would
 * change the execution of the code under test. For this reason, the mock $httpBackend has a
 * `flush()` method, which allows the test to explicitly flush pending requests. This preserves
 * the async api of the backend, while allowing the test to execute synchronously.
 *
 *
 * ## Unit testing with mock $httpBackend
 * The following code shows how to setup and use the mock backend when unit testing a controller.
 * First we create the controller under test:
 *
  ```js
  // The module code
  angular
    .module('MyApp', [])
    .controller('MyController', MyController);

  // The controller code
  function MyController($scope, $http) {
    var authToken;

    $http.get('/auth.py').then(function(response) {
      authToken = response.headers('A-Token');
      $scope.user = response.data;
    });

    $scope.saveMessage = function(message) {
      var headers = { 'Authorization': authToken };
      $scope.status = 'Saving...';

      $http.post('/add-msg.py', message, { headers: headers } ).then(function(response) {
        $scope.status = '';
      }).catch(function() {
        $scope.status = 'Failed...';
      });
    };
  }
  ```
 *
 * Now we setup the mock backend and create the test specs:
 *
  ```js
    // testing controller
    describe('MyController', function() {
       var $httpBackend, $rootScope, createController, authRequestHandler;

       // Set up the module
       beforeEach(module('MyApp'));

       beforeEach(inject(function($injector) {
         // Set up the mock http service responses
         $httpBackend = $injector.get('$httpBackend');
         // backend definition common for all tests
         authRequestHandler = $httpBackend.when('GET', '/auth.py')
                                .respond({userId: 'userX'}, {'A-Token': 'xxx'});

         // Get hold of a scope (i.e. the root scope)
         $rootScope = $injector.get('$rootScope');
         // The $controller service is used to create instances of controllers
         var $controller = $injector.get('$controller');

         createController = function() {
           return $controller('MyController', {'$scope' : $rootScope });
         };
       }));


       afterEach(function() {
         $httpBackend.verifyNoOutstandingExpectation();
         $httpBackend.verifyNoOutstandingRequest();
       });


       it('should fetch authentication token', function() {
         $httpBackend.expectGET('/auth.py');
         var controller = createController();
         $httpBackend.flush();
       });


       it('should fail authentication', function() {

         // Notice how you can change the response even after it was set
         authRequestHandler.respond(401, '');

         $httpBackend.expectGET('/auth.py');
         var controller = createController();
         $httpBackend.flush();
         expect($rootScope.status).toBe('Failed...');
       });


       it('should send msg to server', function() {
         var controller = createController();
         $httpBackend.flush();

         // now you don’t care about the authentication, but
         // the controller will still send the request and
         // $httpBackend will respond without you having to
         // specify the expectation and response for this request

         $httpBackend.expectPOST('/add-msg.py', 'message content').respond(201, '');
         $rootScope.saveMessage('message content');
         expect($rootScope.status).toBe('Saving...');
         $httpBackend.flush();
         expect($rootScope.status).toBe('');
       });


       it('should send auth header', function() {
         var controller = createController();
         $httpBackend.flush();

         $httpBackend.expectPOST('/add-msg.py', undefined, function(headers) {
           // check if the header was sent, if it wasn't the expectation won't
           // match the request and the test will fail
           return headers['Authorization'] == 'xxx';
         }).respond(201, '');

         $rootScope.saveMessage('whatever');
         $httpBackend.flush();
       });
    });
  ```
 *
 * ## Dynamic responses
 *
 * You define a response to a request by chaining a call to `respond()` onto a definition or expectation.
 * If you provide a **callback** as the first parameter to `respond(callback)` then you can dynamically generate
 * a response based on the properties of the request.
 *
 * The `callback` function should be of the form `function(method, url, data, headers, params)`.
 *
 * ### Query parameters
 *
 * By default, query parameters on request URLs are parsed into the `params` object. So a request URL
 * of `/list?q=searchstr&orderby=-name` would set `params` to be `{q: 'searchstr', orderby: '-name'}`.
 *
 * ### Regex parameter matching
 *
 * If an expectation or definition uses a **regex** to match the URL, you can provide an array of **keys** via a
 * `params` argument. The index of each **key** in the array will match the index of a **group** in the
 * **regex**.
 *
 * The `params` object in the **callback** will now have properties with these keys, which hold the value of the
 * corresponding **group** in the **regex**.
 *
 * This also applies to the `when` and `expect` shortcut methods.
 *
 *
 * ```js
 *   $httpBackend.expect('GET', /\/user\/(.+)/, undefined, undefined, ['id'])
 *     .respond(function(method, url, data, headers, params) {
 *       // for requested url of '/user/1234' params is {id: '1234'}
 *     });
 *
 *   $httpBackend.whenPATCH(/\/user\/(.+)\/article\/(.+)/, undefined, undefined, ['user', 'article'])
 *     .respond(function(method, url, data, headers, params) {
 *       // for url of '/user/1234/article/567' params is {user: '1234', article: '567'}
 *     });
 * ```
 *
 * ## Matching route requests
 *
 * For extra convenience, `whenRoute` and `expectRoute` shortcuts are available. These methods offer colon
 * delimited matching of the url path, ignoring the query string. This allows declarations
 * similar to how application routes are configured with `$routeProvider`. Because these methods convert
 * the definition url to regex, declaration order is important. Combined with query parameter parsing,
 * the following is possible:
 *
  ```js
    $httpBackend.whenRoute('GET', '/users/:id')
      .respond(function(method, url, data, headers, params) {
        return [200, MockUserList[Number(params.id)]];
      });

    $httpBackend.whenRoute('GET', '/users')
      .respond(function(method, url, data, headers, params) {
        var userList = angular.copy(MockUserList),
          defaultSort = 'lastName',
          count, pages, isPrevious, isNext;

        // paged api response '/v1/users?page=2'
        params.page = Number(params.page) || 1;

        // query for last names '/v1/users?q=Archer'
        if (params.q) {
          userList = $filter('filter')({lastName: params.q});
        }

        pages = Math.ceil(userList.length / pagingLength);
        isPrevious = params.page > 1;
        isNext = params.page < pages;

        return [200, {
          count:    userList.length,
          previous: isPrevious,
          next:     isNext,
          // sort field -> '/v1/users?sortBy=firstName'
          results:  $filter('orderBy')(userList, params.sortBy || defaultSort)
                      .splice((params.page - 1) * pagingLength, pagingLength)
        }];
      });
  ```
 */
angular.mock.$HttpBackendProvider = function() {
  this.$get = ['$rootScope', '$timeout', createHttpBackendMock];
};

/**
 * General factory function for $httpBackend mock.
 * Returns instance for unit testing (when no arguments specified):
 *   - passing through is disabled
 *   - auto flushing is disabled
 *
 * Returns instance for e2e testing (when `$delegate` and `$browser` specified):
 *   - passing through (delegating request to real backend) is enabled
 *   - auto flushing is enabled
 *
 * @param {Object=} $delegate Real $httpBackend instance (allow passing through if specified)
 * @param {Object=} $browser Auto-flushing enabled if specified
 * @return {Object} Instance of $httpBackend mock
 */
function createHttpBackendMock($rootScope, $timeout, $delegate, $browser) {
  var definitions = [],
      expectations = [],
      responses = [],
      responsesPush = angular.bind(responses, responses.push),
      copy = angular.copy;

  function createResponse(status, data, headers, statusText) {
    if (angular.isFunction(status)) return status;

    return function() {
      return angular.isNumber(status)
          ? [status, data, headers, statusText]
          : [200, status, data, headers];
    };
  }

  // TODO(vojta): change params to: method, url, data, headers, callback
  function $httpBackend(method, url, data, callback, headers, timeout, withCredentials) {
    var xhr = new MockXhr(),
        expectation = expectations[0],
        wasExpected = false;

    function prettyPrint(data) {
      return (angular.isString(data) || angular.isFunction(data) || data instanceof RegExp)
          ? data
          : angular.toJson(data);
    }

    function wrapResponse(wrapped) {
      if (!$browser && timeout) {
        timeout.then ? timeout.then(handleTimeout) : $timeout(handleTimeout, timeout);
      }

      return handleResponse;

      function handleResponse() {
        var response = wrapped.response(method, url, data, headers, wrapped.params(url));
        xhr.$$respHeaders = response[2];
        callback(copy(response[0]), copy(response[1]), xhr.getAllResponseHeaders(),
                 copy(response[3] || ''));
      }

      function handleTimeout() {
        for (var i = 0, ii = responses.length; i < ii; i++) {
          if (responses[i] === handleResponse) {
            responses.splice(i, 1);
            callback(-1, undefined, '');
            break;
          }
        }
      }
    }

    if (expectation && expectation.match(method, url)) {
      if (!expectation.matchData(data)) {
        throw new Error('Expected ' + expectation + ' with different data\n' +
            'EXPECTED: ' + prettyPrint(expectation.data) + '\nGOT:      ' + data);
      }

      if (!expectation.matchHeaders(headers)) {
        throw new Error('Expected ' + expectation + ' with different headers\n' +
                        'EXPECTED: ' + prettyPrint(expectation.headers) + '\nGOT:      ' +
                        prettyPrint(headers));
      }

      expectations.shift();

      if (expectation.response) {
        responses.push(wrapResponse(expectation));
        return;
      }
      wasExpected = true;
    }

    var i = -1, definition;
    while ((definition = definitions[++i])) {
      if (definition.match(method, url, data, headers || {})) {
        if (definition.response) {
          // if $browser specified, we do auto flush all requests
          ($browser ? $browser.defer : responsesPush)(wrapResponse(definition));
        } else if (definition.passThrough) {
          $delegate(method, url, data, callback, headers, timeout, withCredentials);
        } else throw new Error('No response defined !');
        return;
      }
    }
    throw wasExpected ?
        new Error('No response defined !') :
        new Error('Unexpected request: ' + method + ' ' + url + '\n' +
                  (expectation ? 'Expected ' + expectation : 'No more request expected'));
  }

  /**
   * @ngdoc method
   * @name $httpBackend#when
   * @description
   * Creates a new backend definition.
   *
   * @param {string} method HTTP method.
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
   *   data string and returns true if the data is as expected.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   *
   *  - respond –
   *      `{function([status,] data[, headers, statusText])
   *      | function(function(method, url, data, headers, params)}`
   *    – The respond method takes a set of static data to be returned or a function that can
   *    return an array containing response status (number), response data (string), response
   *    headers (Object), and the text for the status (string). The respond method returns the
   *    `requestHandler` object for possible overrides.
   */
  $httpBackend.when = function(method, url, data, headers, keys) {
    var definition = new MockHttpExpectation(method, url, data, headers, keys),
        chain = {
          respond: function(status, data, headers, statusText) {
            definition.passThrough = undefined;
            definition.response = createResponse(status, data, headers, statusText);
            return chain;
          }
        };

    if ($browser) {
      chain.passThrough = function() {
        definition.response = undefined;
        definition.passThrough = true;
        return chain;
      };
    }

    definitions.push(definition);
    return chain;
  };

  /**
   * @ngdoc method
   * @name $httpBackend#whenGET
   * @description
   * Creates a new backend definition for GET requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(Object|function(Object))=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenHEAD
   * @description
   * Creates a new backend definition for HEAD requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(Object|function(Object))=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenDELETE
   * @description
   * Creates a new backend definition for DELETE requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(Object|function(Object))=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenPOST
   * @description
   * Creates a new backend definition for POST requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
   *   data string and returns true if the data is as expected.
   * @param {(Object|function(Object))=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenPUT
   * @description
   * Creates a new backend definition for PUT requests.  For more info see `when()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
   *   data string and returns true if the data is as expected.
   * @param {(Object|function(Object))=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenJSONP
   * @description
   * Creates a new backend definition for JSONP requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */
  createShortMethods('when');

  /**
   * @ngdoc method
   * @name $httpBackend#whenRoute
   * @description
   * Creates a new backend definition that compares only with the requested route.
   *
   * @param {string} method HTTP method.
   * @param {string} url HTTP url string that supports colon param matching.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled. See #when for more info.
   */
  $httpBackend.whenRoute = function(method, url) {
    var pathObj = parseRoute(url);
    return $httpBackend.when(method, pathObj.regexp, undefined, undefined, pathObj.keys);
  };

  function parseRoute(url) {
    var ret = {
      regexp: url
    },
    keys = ret.keys = [];

    if (!url || !angular.isString(url)) return ret;

    url = url
      .replace(/([().])/g, '\\$1')
      .replace(/(\/)?:(\w+)([\?\*])?/g, function(_, slash, key, option) {
        var optional = option === '?' ? option : null;
        var star = option === '*' ? option : null;
        keys.push({ name: key, optional: !!optional });
        slash = slash || '';
        return ''
          + (optional ? '' : slash)
          + '(?:'
          + (optional ? slash : '')
          + (star && '(.+?)' || '([^/]+)')
          + (optional || '')
          + ')'
          + (optional || '');
      })
      .replace(/([\/$\*])/g, '\\$1');

    ret.regexp = new RegExp('^' + url, 'i');
    return ret;
  }

  /**
   * @ngdoc method
   * @name $httpBackend#expect
   * @description
   * Creates a new request expectation.
   *
   * @param {string} method HTTP method.
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string)|Object)=} data HTTP request body or function that
   *  receives data string and returns true if the data is as expected, or Object if request body
   *  is in JSON format.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *  request is handled. You can save this object for later use and invoke `respond` again in
   *  order to change how a matched request is handled.
   *
   *  - respond –
   *    `{function([status,] data[, headers, statusText])
   *    | function(function(method, url, data, headers, params)}`
   *    – The respond method takes a set of static data to be returned or a function that can
   *    return an array containing response status (number), response data (string), response
   *    headers (Object), and the text for the status (string). The respond method returns the
   *    `requestHandler` object for possible overrides.
   */
  $httpBackend.expect = function(method, url, data, headers, keys) {
    var expectation = new MockHttpExpectation(method, url, data, headers, keys),
        chain = {
          respond: function(status, data, headers, statusText) {
            expectation.response = createResponse(status, data, headers, statusText);
            return chain;
          }
        };

    expectations.push(expectation);
    return chain;
  };

  /**
   * @ngdoc method
   * @name $httpBackend#expectGET
   * @description
   * Creates a new request expectation for GET requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {Object=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled. See #expect for more info.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectHEAD
   * @description
   * Creates a new request expectation for HEAD requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {Object=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectDELETE
   * @description
   * Creates a new request expectation for DELETE requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {Object=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectPOST
   * @description
   * Creates a new request expectation for POST requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string)|Object)=} data HTTP request body or function that
   *  receives data string and returns true if the data is as expected, or Object if request body
   *  is in JSON format.
   * @param {Object=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectPUT
   * @description
   * Creates a new request expectation for PUT requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string)|Object)=} data HTTP request body or function that
   *  receives data string and returns true if the data is as expected, or Object if request body
   *  is in JSON format.
   * @param {Object=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectPATCH
   * @description
   * Creates a new request expectation for PATCH requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string)|Object)=} data HTTP request body or function that
   *  receives data string and returns true if the data is as expected, or Object if request body
   *  is in JSON format.
   * @param {Object=} headers HTTP headers.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectJSONP
   * @description
   * Creates a new request expectation for JSONP requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)} url HTTP url or function that receives an url
   *   and returns true if the url matches the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */
  createShortMethods('expect');

  /**
   * @ngdoc method
   * @name $httpBackend#expectRoute
   * @description
   * Creates a new request expectation that compares only with the requested route.
   *
   * @param {string} method HTTP method.
   * @param {string} url HTTP url string that supports colon param matching.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled. See #expect for more info.
   */
  $httpBackend.expectRoute = function(method, url) {
    var pathObj = parseRoute(url);
    return $httpBackend.expect(method, pathObj.regexp, undefined, undefined, pathObj.keys);
  };


  /**
   * @ngdoc method
   * @name $httpBackend#flush
   * @description
   * Flushes all pending requests using the trained responses.
   *
   * @param {number=} count Number of responses to flush (in the order they arrived). If undefined,
   *   all pending requests will be flushed. If there are no pending requests when the flush method
   *   is called an exception is thrown (as this typically a sign of programming error).
   */
  $httpBackend.flush = function(count, digest) {
    if (digest !== false) $rootScope.$digest();
    if (!responses.length) throw new Error('No pending request to flush !');

    if (angular.isDefined(count) && count !== null) {
      while (count--) {
        if (!responses.length) throw new Error('No more pending request to flush !');
        responses.shift()();
      }
    } else {
      while (responses.length) {
        responses.shift()();
      }
    }
    $httpBackend.verifyNoOutstandingExpectation(digest);
  };


  /**
   * @ngdoc method
   * @name $httpBackend#verifyNoOutstandingExpectation
   * @description
   * Verifies that all of the requests defined via the `expect` api were made. If any of the
   * requests were not made, verifyNoOutstandingExpectation throws an exception.
   *
   * Typically, you would call this method following each test case that asserts requests using an
   * "afterEach" clause.
   *
   * ```js
   *   afterEach($httpBackend.verifyNoOutstandingExpectation);
   * ```
   */
  $httpBackend.verifyNoOutstandingExpectation = function(digest) {
    if (digest !== false) $rootScope.$digest();
    if (expectations.length) {
      throw new Error('Unsatisfied requests: ' + expectations.join(', '));
    }
  };


  /**
   * @ngdoc method
   * @name $httpBackend#verifyNoOutstandingRequest
   * @description
   * Verifies that there are no outstanding requests that need to be flushed.
   *
   * Typically, you would call this method following each test case that asserts requests using an
   * "afterEach" clause.
   *
   * ```js
   *   afterEach($httpBackend.verifyNoOutstandingRequest);
   * ```
   */
  $httpBackend.verifyNoOutstandingRequest = function() {
    if (responses.length) {
      throw new Error('Unflushed requests: ' + responses.length);
    }
  };


  /**
   * @ngdoc method
   * @name $httpBackend#resetExpectations
   * @description
   * Resets all request expectations, but preserves all backend definitions. Typically, you would
   * call resetExpectations during a multiple-phase test when you want to reuse the same instance of
   * $httpBackend mock.
   */
  $httpBackend.resetExpectations = function() {
    expectations.length = 0;
    responses.length = 0;
  };

  return $httpBackend;


  function createShortMethods(prefix) {
    angular.forEach(['GET', 'DELETE', 'JSONP', 'HEAD'], function(method) {
     $httpBackend[prefix + method] = function(url, headers, keys) {
       return $httpBackend[prefix](method, url, undefined, headers, keys);
     };
    });

    angular.forEach(['PUT', 'POST', 'PATCH'], function(method) {
      $httpBackend[prefix + method] = function(url, data, headers, keys) {
        return $httpBackend[prefix](method, url, data, headers, keys);
      };
    });
  }
}

function MockHttpExpectation(method, url, data, headers, keys) {

  this.data = data;
  this.headers = headers;

  this.match = function(m, u, d, h) {
    if (method != m) return false;
    if (!this.matchUrl(u)) return false;
    if (angular.isDefined(d) && !this.matchData(d)) return false;
    if (angular.isDefined(h) && !this.matchHeaders(h)) return false;
    return true;
  };

  this.matchUrl = function(u) {
    if (!url) return true;
    if (angular.isFunction(url.test)) return url.test(u);
    if (angular.isFunction(url)) return url(u);
    return url == u;
  };

  this.matchHeaders = function(h) {
    if (angular.isUndefined(headers)) return true;
    if (angular.isFunction(headers)) return headers(h);
    return angular.equals(headers, h);
  };

  this.matchData = function(d) {
    if (angular.isUndefined(data)) return true;
    if (data && angular.isFunction(data.test)) return data.test(d);
    if (data && angular.isFunction(data)) return data(d);
    if (data && !angular.isString(data)) {
      return angular.equals(angular.fromJson(angular.toJson(data)), angular.fromJson(d));
    }
    return data == d;
  };

  this.toString = function() {
    return method + ' ' + url;
  };

  this.params = function(u) {
    return angular.extend(parseQuery(), pathParams());

    function pathParams() {
      var keyObj = {};
      if (!url || !angular.isFunction(url.test) || !keys || keys.length === 0) return keyObj;

      var m = url.exec(u);
      if (!m) return keyObj;
      for (var i = 1, len = m.length; i < len; ++i) {
        var key = keys[i - 1];
        var val = m[i];
        if (key && val) {
          keyObj[key.name || key] = val;
        }
      }

      return keyObj;
    }

    function parseQuery() {
      var obj = {}, key_value, key,
          queryStr = u.indexOf('?') > -1
          ? u.substring(u.indexOf('?') + 1)
          : "";

      angular.forEach(queryStr.split('&'), function(keyValue) {
        if (keyValue) {
          key_value = keyValue.replace(/\+/g,'%20').split('=');
          key = tryDecodeURIComponent(key_value[0]);
          if (angular.isDefined(key)) {
            var val = angular.isDefined(key_value[1]) ? tryDecodeURIComponent(key_value[1]) : true;
            if (!hasOwnProperty.call(obj, key)) {
              obj[key] = val;
            } else if (angular.isArray(obj[key])) {
              obj[key].push(val);
            } else {
              obj[key] = [obj[key],val];
            }
          }
        }
      });
      return obj;
    }
    function tryDecodeURIComponent(value) {
      try {
        return decodeURIComponent(value);
      } catch (e) {
        // Ignore any invalid uri component
      }
    }
  };
}

function createMockXhr() {
  return new MockXhr();
}

function MockXhr() {

  // hack for testing $http, $httpBackend
  MockXhr.$$lastInstance = this;

  this.open = function(method, url, async) {
    this.$$method = method;
    this.$$url = url;
    this.$$async = async;
    this.$$reqHeaders = {};
    this.$$respHeaders = {};
  };

  this.send = function(data) {
    this.$$data = data;
  };

  this.setRequestHeader = function(key, value) {
    this.$$reqHeaders[key] = value;
  };

  this.getResponseHeader = function(name) {
    // the lookup must be case insensitive,
    // that's why we try two quick lookups first and full scan last
    var header = this.$$respHeaders[name];
    if (header) return header;

    name = angular.lowercase(name);
    header = this.$$respHeaders[name];
    if (header) return header;

    header = undefined;
    angular.forEach(this.$$respHeaders, function(headerVal, headerName) {
      if (!header && angular.lowercase(headerName) == name) header = headerVal;
    });
    return header;
  };

  this.getAllResponseHeaders = function() {
    var lines = [];

    angular.forEach(this.$$respHeaders, function(value, key) {
      lines.push(key + ': ' + value);
    });
    return lines.join('\n');
  };

  this.abort = angular.noop;
}


/**
 * @ngdoc service
 * @name $timeout
 * @description
 *
 * This service is just a simple decorator for {@link ng.$timeout $timeout} service
 * that adds a "flush" and "verifyNoPendingTasks" methods.
 */

angular.mock.$TimeoutDecorator = ['$delegate', '$browser', function($delegate, $browser) {

  /**
   * @ngdoc method
   * @name $timeout#flush
   * @description
   *
   * Flushes the queue of pending tasks.
   *
   * @param {number=} delay maximum timeout amount to flush up until
   */
  $delegate.flush = function(delay) {
    $browser.defer.flush(delay);
  };

  /**
   * @ngdoc method
   * @name $timeout#verifyNoPendingTasks
   * @description
   *
   * Verifies that there are no pending tasks that need to be flushed.
   */
  $delegate.verifyNoPendingTasks = function() {
    if ($browser.deferredFns.length) {
      throw new Error('Deferred tasks to flush (' + $browser.deferredFns.length + '): ' +
          formatPendingTasksAsString($browser.deferredFns));
    }
  };

  function formatPendingTasksAsString(tasks) {
    var result = [];
    angular.forEach(tasks, function(task) {
      result.push('{id: ' + task.id + ', ' + 'time: ' + task.time + '}');
    });

    return result.join(', ');
  }

  return $delegate;
}];

angular.mock.$RAFDecorator = ['$delegate', function($delegate) {
  var rafFn = function(fn) {
    var index = rafFn.queue.length;
    rafFn.queue.push(fn);
    return function() {
      rafFn.queue.splice(index, 1);
    };
  };

  rafFn.queue = [];
  rafFn.supported = $delegate.supported;

  rafFn.flush = function() {
    if (rafFn.queue.length === 0) {
      throw new Error('No rAF callbacks present');
    }

    var length = rafFn.queue.length;
    for (var i = 0; i < length; i++) {
      rafFn.queue[i]();
    }

    rafFn.queue = rafFn.queue.slice(i);
  };

  return rafFn;
}];

/**
 *
 */
angular.mock.$RootElementProvider = function() {
  this.$get = function() {
    return angular.element('<div ng-app></div>');
  };
};

/**
 * @ngdoc service
 * @name $controller
 * @description
 * A decorator for {@link ng.$controller} with additional `bindings` parameter, useful when testing
 * controllers of directives that use {@link $compile#-bindtocontroller- `bindToController`}.
 *
 *
 * ## Example
 *
 * ```js
 *
 * // Directive definition ...
 *
 * myMod.directive('myDirective', {
 *   controller: 'MyDirectiveController',
 *   bindToController: {
 *     name: '@'
 *   }
 * });
 *
 *
 * // Controller definition ...
 *
 * myMod.controller('MyDirectiveController', ['$log', function($log) {
 *   $log.info(this.name);
 * })];
 *
 *
 * // In a test ...
 *
 * describe('myDirectiveController', function() {
 *   it('should write the bound name to the log', inject(function($controller, $log) {
 *     var ctrl = $controller('MyDirectiveController', { /* no locals &#42;/ }, { name: 'Clark Kent' });
 *     expect(ctrl.name).toEqual('Clark Kent');
 *     expect($log.info.logs).toEqual(['Clark Kent']);
 *   });
 * });
 *
 * ```
 *
 * @param {Function|string} constructor If called with a function then it's considered to be the
 *    controller constructor function. Otherwise it's considered to be a string which is used
 *    to retrieve the controller constructor using the following steps:
 *
 *    * check if a controller with given name is registered via `$controllerProvider`
 *    * check if evaluating the string on the current scope returns a constructor
 *    * if $controllerProvider#allowGlobals, check `window[constructor]` on the global
 *      `window` object (not recommended)
 *
 *    The string can use the `controller as property` syntax, where the controller instance is published
 *    as the specified property on the `scope`; the `scope` must be injected into `locals` param for this
 *    to work correctly.
 *
 * @param {Object} locals Injection locals for Controller.
 * @param {Object=} bindings Properties to add to the controller before invoking the constructor. This is used
 *                           to simulate the `bindToController` feature and simplify certain kinds of tests.
 * @return {Object} Instance of given controller.
 */
angular.mock.$ControllerDecorator = ['$delegate', function($delegate) {
  return function(expression, locals, later, ident) {
    if (later && typeof later === 'object') {
      var create = $delegate(expression, locals, true, ident);
      angular.extend(create.instance, later);
      return create();
    }
    return $delegate(expression, locals, later, ident);
  };
}];

/**
 * @ngdoc service
 * @name $componentController
 * @description
 * A service that can be used to create instances of component controllers.
 * <div class="alert alert-info">
 * Be aware that the controller will be instantiated and attached to the scope as specified in
 * the component definition object. That means that you must always provide a `$scope` object
 * in the `locals` param.
 * </div>
 * @param {string} componentName the name of the component whose controller we want to instantiate
 * @param {Object} locals Injection locals for Controller.
 * @param {Object=} bindings Properties to add to the controller before invoking the constructor. This is used
 *                           to simulate the `bindToController` feature and simplify certain kinds of tests.
 * @param {string=} ident Override the property name to use when attaching the controller to the scope.
 * @return {Object} Instance of requested controller.
 */
angular.mock.$ComponentControllerProvider = ['$compileProvider', function($compileProvider) {
  return {
    $get: ['$controller','$injector', function($controller,$injector) {
      return function $componentController(componentName, locals, bindings, ident) {
        // get all directives associated to the component name
        var directives = $injector.get(componentName + 'Directive');
        // look for those directives that are components
        var candidateDirectives = directives.filter(function(directiveInfo) {
          // components have controller, controllerAs and restrict:'E'
          return directiveInfo.controller && directiveInfo.controllerAs && directiveInfo.restrict === 'E';
        });
        // check if valid directives found
        if (candidateDirectives.length === 0) {
          throw new Error('No component found');
        }
        if (candidateDirectives.length > 1) {
          throw new Error('Too many components found');
        }
        // get the info of the component
        var directiveInfo = candidateDirectives[0];
        return $controller(directiveInfo.controller, locals, bindings, ident || directiveInfo.controllerAs);
      };
    }]
  };
}];


/**
 * @ngdoc module
 * @name ngMock
 * @packageName angular-mocks
 * @description
 *
 * # ngMock
 *
 * The `ngMock` module provides support to inject and mock Angular services into unit tests.
 * In addition, ngMock also extends various core ng services such that they can be
 * inspected and controlled in a synchronous manner within test code.
 *
 *
 * <div doc-module-components="ngMock"></div>
 *
 */
angular.module('ngMock', ['ng']).provider({
  $browser: angular.mock.$BrowserProvider,
  $exceptionHandler: angular.mock.$ExceptionHandlerProvider,
  $log: angular.mock.$LogProvider,
  $interval: angular.mock.$IntervalProvider,
  $httpBackend: angular.mock.$HttpBackendProvider,
  $rootElement: angular.mock.$RootElementProvider,
  $componentController: angular.mock.$ComponentControllerProvider
}).config(['$provide', function($provide) {
  $provide.decorator('$timeout', angular.mock.$TimeoutDecorator);
  $provide.decorator('$$rAF', angular.mock.$RAFDecorator);
  $provide.decorator('$rootScope', angular.mock.$RootScopeDecorator);
  $provide.decorator('$controller', angular.mock.$ControllerDecorator);
}]);

/**
 * @ngdoc module
 * @name ngMockE2E
 * @module ngMockE2E
 * @packageName angular-mocks
 * @description
 *
 * The `ngMockE2E` is an angular module which contains mocks suitable for end-to-end testing.
 * Currently there is only one mock present in this module -
 * the {@link ngMockE2E.$httpBackend e2e $httpBackend} mock.
 */
angular.module('ngMockE2E', ['ng']).config(['$provide', function($provide) {
  $provide.decorator('$httpBackend', angular.mock.e2e.$httpBackendDecorator);
}]);

/**
 * @ngdoc service
 * @name $httpBackend
 * @module ngMockE2E
 * @description
 * Fake HTTP backend implementation suitable for end-to-end testing or backend-less development of
 * applications that use the {@link ng.$http $http service}.
 *
 * *Note*: For fake http backend implementation suitable for unit testing please see
 * {@link ngMock.$httpBackend unit-testing $httpBackend mock}.
 *
 * This implementation can be used to respond with static or dynamic responses via the `when` api
 * and its shortcuts (`whenGET`, `whenPOST`, etc) and optionally pass through requests to the
 * real $httpBackend for specific requests (e.g. to interact with certain remote apis or to fetch
 * templates from a webserver).
 *
 * As opposed to unit-testing, in an end-to-end testing scenario or in scenario when an application
 * is being developed with the real backend api replaced with a mock, it is often desirable for
 * certain category of requests to bypass the mock and issue a real http request (e.g. to fetch
 * templates or static files from the webserver). To configure the backend with this behavior
 * use the `passThrough` request handler of `when` instead of `respond`.
 *
 * Additionally, we don't want to manually have to flush mocked out requests like we do during unit
 * testing. For this reason the e2e $httpBackend flushes mocked out requests
 * automatically, closely simulating the behavior of the XMLHttpRequest object.
 *
 * To setup the application to run with this http backend, you have to create a module that depends
 * on the `ngMockE2E` and your application modules and defines the fake backend:
 *
 * ```js
 *   myAppDev = angular.module('myAppDev', ['myApp', 'ngMockE2E']);
 *   myAppDev.run(function($httpBackend) {
 *     phones = [{name: 'phone1'}, {name: 'phone2'}];
 *
 *     // returns the current list of phones
 *     $httpBackend.whenGET('/phones').respond(phones);
 *
 *     // adds a new phone to the phones array
 *     $httpBackend.whenPOST('/phones').respond(function(method, url, data) {
 *       var phone = angular.fromJson(data);
 *       phones.push(phone);
 *       return [200, phone, {}];
 *     });
 *     $httpBackend.whenGET(/^\/templates\//).passThrough();
 *     //...
 *   });
 * ```
 *
 * Afterwards, bootstrap your app with this new module.
 */

/**
 * @ngdoc method
 * @name $httpBackend#when
 * @module ngMockE2E
 * @description
 * Creates a new backend definition.
 *
 * @param {string} method HTTP method.
 * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(string|RegExp)=} data HTTP request body.
 * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
 *   object and returns true if the headers match the current definition.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 *
 *  - respond –
 *    `{function([status,] data[, headers, statusText])
 *    | function(function(method, url, data, headers, params)}`
 *    – The respond method takes a set of static data to be returned or a function that can return
 *    an array containing response status (number), response data (string), response headers
 *    (Object), and the text for the status (string).
 *  - passThrough – `{function()}` – Any request matching a backend definition with
 *    `passThrough` handler will be passed through to the real backend (an XHR request will be made
 *    to the server.)
 *  - Both methods return the `requestHandler` object for possible overrides.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenGET
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for GET requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenHEAD
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for HEAD requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenDELETE
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for DELETE requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenPOST
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for POST requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(string|RegExp)=} data HTTP request body.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenPUT
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for PUT requests.  For more info see `when()`.
 *
 * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(string|RegExp)=} data HTTP request body.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenPATCH
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for PATCH requests.  For more info see `when()`.
 *
 * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(string|RegExp)=} data HTTP request body.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenJSONP
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for JSONP requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */
/**
 * @ngdoc method
 * @name $httpBackend#whenRoute
 * @module ngMockE2E
 * @description
 * Creates a new backend definition that compares only with the requested route.
 *
 * @param {string} method HTTP method.
 * @param {string} url HTTP url string that supports colon param matching.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */
angular.mock.e2e = {};
angular.mock.e2e.$httpBackendDecorator =
  ['$rootScope', '$timeout', '$delegate', '$browser', createHttpBackendMock];


/**
 * @ngdoc type
 * @name $rootScope.Scope
 * @module ngMock
 * @description
 * {@link ng.$rootScope.Scope Scope} type decorated with helper methods useful for testing. These
 * methods are automatically available on any {@link ng.$rootScope.Scope Scope} instance when
 * `ngMock` module is loaded.
 *
 * In addition to all the regular `Scope` methods, the following helper methods are available:
 */
angular.mock.$RootScopeDecorator = ['$delegate', function($delegate) {

  var $rootScopePrototype = Object.getPrototypeOf($delegate);

  $rootScopePrototype.$countChildScopes = countChildScopes;
  $rootScopePrototype.$countWatchers = countWatchers;

  return $delegate;

  // ------------------------------------------------------------------------------------------ //

  /**
   * @ngdoc method
   * @name $rootScope.Scope#$countChildScopes
   * @module ngMock
   * @description
   * Counts all the direct and indirect child scopes of the current scope.
   *
   * The current scope is excluded from the count. The count includes all isolate child scopes.
   *
   * @returns {number} Total number of child scopes.
   */
  function countChildScopes() {
    // jshint validthis: true
    var count = 0; // exclude the current scope
    var pendingChildHeads = [this.$$childHead];
    var currentScope;

    while (pendingChildHeads.length) {
      currentScope = pendingChildHeads.shift();

      while (currentScope) {
        count += 1;
        pendingChildHeads.push(currentScope.$$childHead);
        currentScope = currentScope.$$nextSibling;
      }
    }

    return count;
  }


  /**
   * @ngdoc method
   * @name $rootScope.Scope#$countWatchers
   * @module ngMock
   * @description
   * Counts all the watchers of direct and indirect child scopes of the current scope.
   *
   * The watchers of the current scope are included in the count and so are all the watchers of
   * isolate child scopes.
   *
   * @returns {number} Total number of watchers.
   */
  function countWatchers() {
    // jshint validthis: true
    var count = this.$$watchers ? this.$$watchers.length : 0; // include the current scope
    var pendingChildHeads = [this.$$childHead];
    var currentScope;

    while (pendingChildHeads.length) {
      currentScope = pendingChildHeads.shift();

      while (currentScope) {
        count += currentScope.$$watchers ? currentScope.$$watchers.length : 0;
        pendingChildHeads.push(currentScope.$$childHead);
        currentScope = currentScope.$$nextSibling;
      }
    }

    return count;
  }
}];


if (window.jasmine || window.mocha) {

  var currentSpec = null,
      annotatedFunctions = [],
      isSpecRunning = function() {
        return !!currentSpec;
      };

  angular.mock.$$annotate = angular.injector.$$annotate;
  angular.injector.$$annotate = function(fn) {
    if (typeof fn === 'function' && !fn.$inject) {
      annotatedFunctions.push(fn);
    }
    return angular.mock.$$annotate.apply(this, arguments);
  };


  (window.beforeEach || window.setup)(function() {
    annotatedFunctions = [];
    currentSpec = this;
  });

  (window.afterEach || window.teardown)(function() {
    var injector = currentSpec.$injector;

    annotatedFunctions.forEach(function(fn) {
      delete fn.$inject;
    });

    angular.forEach(currentSpec.$modules, function(module) {
      if (module && module.$$hashKey) {
        module.$$hashKey = undefined;
      }
    });

    currentSpec.$injector = null;
    currentSpec.$modules = null;
    currentSpec.$providerInjector = null;
    currentSpec = null;

    if (injector) {
      injector.get('$rootElement').off();
      injector.get('$rootScope').$destroy();
    }

    // clean up jquery's fragment cache
    angular.forEach(angular.element.fragments, function(val, key) {
      delete angular.element.fragments[key];
    });

    MockXhr.$$lastInstance = null;

    angular.forEach(angular.callbacks, function(val, key) {
      delete angular.callbacks[key];
    });
    angular.callbacks.counter = 0;
  });

  /**
   * @ngdoc function
   * @name angular.mock.module
   * @description
   *
   * *NOTE*: This function is also published on window for easy access.<br>
   * *NOTE*: This function is declared ONLY WHEN running tests with jasmine or mocha
   *
   * This function registers a module configuration code. It collects the configuration information
   * which will be used when the injector is created by {@link angular.mock.inject inject}.
   *
   * See {@link angular.mock.inject inject} for usage example
   *
   * @param {...(string|Function|Object)} fns any number of modules which are represented as string
   *        aliases or as anonymous module initialization functions. The modules are used to
   *        configure the injector. The 'ng' and 'ngMock' modules are automatically loaded. If an
   *        object literal is passed each key-value pair will be registered on the module via
   *        {@link auto.$provide $provide}.value, the key being the string name (or token) to associate
   *        with the value on the injector.
   */
  window.module = angular.mock.module = function() {
    var moduleFns = Array.prototype.slice.call(arguments, 0);
    return isSpecRunning() ? workFn() : workFn;
    /////////////////////
    function workFn() {
      if (currentSpec.$injector) {
        throw new Error('Injector already created, can not register a module!');
      } else {
        var fn, modules = currentSpec.$modules || (currentSpec.$modules = []);
        angular.forEach(moduleFns, function(module) {
          if (angular.isObject(module) && !angular.isArray(module)) {
            fn = function($provide) {
              angular.forEach(module, function(value, key) {
                $provide.value(key, value);
              });
            };
          } else {
            fn = module;
          }
          if (currentSpec.$providerInjector) {
            currentSpec.$providerInjector.invoke(fn);
          } else {
            modules.push(fn);
          }
        });
      }
    }
  };

  /**
   * @ngdoc function
   * @name angular.mock.inject
   * @description
   *
   * *NOTE*: This function is also published on window for easy access.<br>
   * *NOTE*: This function is declared ONLY WHEN running tests with jasmine or mocha
   *
   * The inject function wraps a function into an injectable function. The inject() creates new
   * instance of {@link auto.$injector $injector} per test, which is then used for
   * resolving references.
   *
   *
   * ## Resolving References (Underscore Wrapping)
   * Often, we would like to inject a reference once, in a `beforeEach()` block and reuse this
   * in multiple `it()` clauses. To be able to do this we must assign the reference to a variable
   * that is declared in the scope of the `describe()` block. Since we would, most likely, want
   * the variable to have the same name of the reference we have a problem, since the parameter
   * to the `inject()` function would hide the outer variable.
   *
   * To help with this, the injected parameters can, optionally, be enclosed with underscores.
   * These are ignored by the injector when the reference name is resolved.
   *
   * For example, the parameter `_myService_` would be resolved as the reference `myService`.
   * Since it is available in the function body as _myService_, we can then assign it to a variable
   * defined in an outer scope.
   *
   * ```
   * // Defined out reference variable outside
   * var myService;
   *
   * // Wrap the parameter in underscores
   * beforeEach( inject( function(_myService_){
   *   myService = _myService_;
   * }));
   *
   * // Use myService in a series of tests.
   * it('makes use of myService', function() {
   *   myService.doStuff();
   * });
   *
   * ```
   *
   * See also {@link angular.mock.module angular.mock.module}
   *
   * ## Example
   * Example of what a typical jasmine tests looks like with the inject method.
   * ```js
   *
   *   angular.module('myApplicationModule', [])
   *       .value('mode', 'app')
   *       .value('version', 'v1.0.1');
   *
   *
   *   describe('MyApp', function() {
   *
   *     // You need to load modules that you want to test,
   *     // it loads only the "ng" module by default.
   *     beforeEach(module('myApplicationModule'));
   *
   *
   *     // inject() is used to inject arguments of all given functions
   *     it('should provide a version', inject(function(mode, version) {
   *       expect(version).toEqual('v1.0.1');
   *       expect(mode).toEqual('app');
   *     }));
   *
   *
   *     // The inject and module method can also be used inside of the it or beforeEach
   *     it('should override a version and test the new version is injected', function() {
   *       // module() takes functions or strings (module aliases)
   *       module(function($provide) {
   *         $provide.value('version', 'overridden'); // override version here
   *       });
   *
   *       inject(function(version) {
   *         expect(version).toEqual('overridden');
   *       });
   *     });
   *   });
   *
   * ```
   *
   * @param {...Function} fns any number of functions which will be injected using the injector.
   */



  var ErrorAddingDeclarationLocationStack = function(e, errorForStack) {
    this.message = e.message;
    this.name = e.name;
    if (e.line) this.line = e.line;
    if (e.sourceId) this.sourceId = e.sourceId;
    if (e.stack && errorForStack)
      this.stack = e.stack + '\n' + errorForStack.stack;
    if (e.stackArray) this.stackArray = e.stackArray;
  };
  ErrorAddingDeclarationLocationStack.prototype.toString = Error.prototype.toString;

  window.inject = angular.mock.inject = function() {
    var blockFns = Array.prototype.slice.call(arguments, 0);
    var errorForStack = new Error('Declaration Location');
    return isSpecRunning() ? workFn.call(currentSpec) : workFn;
    /////////////////////
    function workFn() {
      var modules = currentSpec.$modules || [];
      var strictDi = !!currentSpec.$injectorStrict;
      modules.unshift(function($injector) {
        currentSpec.$providerInjector = $injector;
      });
      modules.unshift('ngMock');
      modules.unshift('ng');
      var injector = currentSpec.$injector;
      if (!injector) {
        if (strictDi) {
          // If strictDi is enabled, annotate the providerInjector blocks
          angular.forEach(modules, function(moduleFn) {
            if (typeof moduleFn === "function") {
              angular.injector.$$annotate(moduleFn);
            }
          });
        }
        injector = currentSpec.$injector = angular.injector(modules, strictDi);
        currentSpec.$injectorStrict = strictDi;
      }
      for (var i = 0, ii = blockFns.length; i < ii; i++) {
        if (currentSpec.$injectorStrict) {
          // If the injector is strict / strictDi, and the spec wants to inject using automatic
          // annotation, then annotate the function here.
          injector.annotate(blockFns[i]);
        }
        try {
          /* jshint -W040 *//* Jasmine explicitly provides a `this` object when calling functions */
          injector.invoke(blockFns[i] || angular.noop, this);
          /* jshint +W040 */
        } catch (e) {
          if (e.stack && errorForStack) {
            throw new ErrorAddingDeclarationLocationStack(e, errorForStack);
          }
          throw e;
        } finally {
          errorForStack = null;
        }
      }
    }
  };


  angular.mock.inject.strictDi = function(value) {
    value = arguments.length ? !!value : true;
    return isSpecRunning() ? workFn() : workFn;

    function workFn() {
      if (value !== currentSpec.$injectorStrict) {
        if (currentSpec.$injector) {
          throw new Error('Injector already created, can not modify strict annotations');
        } else {
          currentSpec.$injectorStrict = value;
        }
      }
    }
  };
}


})(window, window.angular);

},{}],10:[function(require,module,exports){
/*
 AngularJS v1.5.0
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(r,d,C){'use strict';function x(s,h,g){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,c,b,f,y){function k(){n&&(g.cancel(n),n=null);l&&(l.$destroy(),l=null);m&&(n=g.leave(m),n.then(function(){n=null}),m=null)}function z(){var b=s.current&&s.current.locals;if(d.isDefined(b&&b.$template)){var b=a.$new(),f=s.current;m=y(b,function(b){g.enter(b,null,m||c).then(function(){!d.isDefined(u)||u&&!a.$eval(u)||h()});k()});l=f.scope=b;l.$emit("$viewContentLoaded");
l.$eval(v)}else k()}var l,m,n,u=b.autoscroll,v=b.onload||"";a.$on("$routeChangeSuccess",z);z()}}}function A(d,h,g){return{restrict:"ECA",priority:-400,link:function(a,c){var b=g.current,f=b.locals;c.html(f.$template);var y=d(c.contents());if(b.controller){f.$scope=a;var k=h(b.controller,f);b.controllerAs&&(a[b.controllerAs]=k);c.data("$ngControllerController",k);c.children().data("$ngControllerController",k)}a[b.resolveAs||"$resolve"]=f;y(a)}}}r=d.module("ngRoute",["ng"]).provider("$route",function(){function s(a,
c){return d.extend(Object.create(a),c)}function h(a,d){var b=d.caseInsensitiveMatch,f={originalPath:a,regexp:a},g=f.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,d,b,c){a="?"===c?c:null;c="*"===c?c:null;g.push({name:b,optional:!!a});d=d||"";return""+(a?"":d)+"(?:"+(a?d:"")+(c&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1");f.regexp=new RegExp("^"+a+"$",b?"i":"");return f}var g={};this.when=function(a,c){var b=d.copy(c);d.isUndefined(b.reloadOnSearch)&&
(b.reloadOnSearch=!0);d.isUndefined(b.caseInsensitiveMatch)&&(b.caseInsensitiveMatch=this.caseInsensitiveMatch);g[a]=d.extend(b,a&&h(a,b));if(a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";g[f]=d.extend({redirectTo:a},h(f,b))}return this};this.caseInsensitiveMatch=!1;this.otherwise=function(a){"string"===typeof a&&(a={redirectTo:a});this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(a,c,b,f,h,k,r){function l(b){var e=
t.current;(x=(p=n())&&e&&p.$$route===e.$$route&&d.equals(p.pathParams,e.pathParams)&&!p.reloadOnSearch&&!v)||!e&&!p||a.$broadcast("$routeChangeStart",p,e).defaultPrevented&&b&&b.preventDefault()}function m(){var w=t.current,e=p;if(x)w.params=e.params,d.copy(w.params,b),a.$broadcast("$routeUpdate",w);else if(e||w)v=!1,(t.current=e)&&e.redirectTo&&(d.isString(e.redirectTo)?c.path(u(e.redirectTo,e.params)).search(e.params).replace():c.url(e.redirectTo(e.pathParams,c.path(),c.search())).replace()),f.when(e).then(function(){if(e){var a=
d.extend({},e.resolve),b,c;d.forEach(a,function(b,e){a[e]=d.isString(b)?h.get(b):h.invoke(b,null,null,e)});d.isDefined(b=e.template)?d.isFunction(b)&&(b=b(e.params)):d.isDefined(c=e.templateUrl)&&(d.isFunction(c)&&(c=c(e.params)),d.isDefined(c)&&(e.loadedTemplateUrl=r.valueOf(c),b=k(c)));d.isDefined(b)&&(a.$template=b);return f.all(a)}}).then(function(c){e==t.current&&(e&&(e.locals=c,d.copy(e.params,b)),a.$broadcast("$routeChangeSuccess",e,w))},function(b){e==t.current&&a.$broadcast("$routeChangeError",
e,w,b)})}function n(){var a,b;d.forEach(g,function(f,g){var q;if(q=!b){var h=c.path();q=f.keys;var l={};if(f.regexp)if(h=f.regexp.exec(h)){for(var k=1,n=h.length;k<n;++k){var m=q[k-1],p=h[k];m&&p&&(l[m.name]=p)}q=l}else q=null;else q=null;q=a=q}q&&(b=s(f,{params:d.extend({},c.search(),a),pathParams:a}),b.$$route=f)});return b||g[null]&&s(g[null],{params:{},pathParams:{}})}function u(a,b){var c=[];d.forEach((a||"").split(":"),function(a,d){if(0===d)c.push(a);else{var f=a.match(/(\w+)(?:[?*])?(.*)/),
g=f[1];c.push(b[g]);c.push(f[2]||"");delete b[g]}});return c.join("")}var v=!1,p,x,t={routes:g,reload:function(){v=!0;var b={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0;v=!1}};a.$evalAsync(function(){l(b);b.defaultPrevented||m()})},updateParams:function(a){if(this.current&&this.current.$$route)a=d.extend({},this.current.params,a),c.path(u(this.current.$$route.originalPath,a)),c.search(a);else throw B("norout");}};a.$on("$locationChangeStart",l);a.$on("$locationChangeSuccess",
m);return t}]});var B=d.$$minErr("ngRoute");r.provider("$routeParams",function(){this.$get=function(){return{}}});r.directive("ngView",x);r.directive("ngView",A);x.$inject=["$route","$anchorScroll","$animate"];A.$inject=["$compile","$controller","$route"]})(window,window.angular);


},{}],11:[function(require,module,exports){
/*
 AngularJS v1.4.7
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(n,h,p){'use strict';function E(a){var f=[];r(f,h.noop).chars(a);return f.join("")}function g(a,f){var d={},c=a.split(","),b;for(b=0;b<c.length;b++)d[f?h.lowercase(c[b]):c[b]]=!0;return d}function F(a,f){function d(a,b,d,l){b=h.lowercase(b);if(s[b])for(;e.last()&&t[e.last()];)c("",e.last());u[b]&&e.last()==b&&c("",b);(l=v[b]||!!l)||e.push(b);var m={};d.replace(G,function(b,a,f,c,d){m[a]=q(f||c||d||"")});f.start&&f.start(b,m,l)}function c(b,a){var c=0,d;if(a=h.lowercase(a))for(c=e.length-
1;0<=c&&e[c]!=a;c--);if(0<=c){for(d=e.length-1;d>=c;d--)f.end&&f.end(e[d]);e.length=c}}"string"!==typeof a&&(a=null===a||"undefined"===typeof a?"":""+a);var b,k,e=[],m=a,l;for(e.last=function(){return e[e.length-1]};a;){l="";k=!0;if(e.last()&&w[e.last()])a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+e.last()+"[^>]*>","i"),function(a,b){b=b.replace(H,"$1").replace(I,"$1");f.chars&&f.chars(q(b));return""}),c("",e.last());else{if(0===a.indexOf("\x3c!--"))b=a.indexOf("--",4),0<=b&&a.lastIndexOf("--\x3e",
b)===b&&(f.comment&&f.comment(a.substring(4,b)),a=a.substring(b+3),k=!1);else if(x.test(a)){if(b=a.match(x))a=a.replace(b[0],""),k=!1}else if(J.test(a)){if(b=a.match(y))a=a.substring(b[0].length),b[0].replace(y,c),k=!1}else K.test(a)&&((b=a.match(z))?(b[4]&&(a=a.substring(b[0].length),b[0].replace(z,d)),k=!1):(l+="<",a=a.substring(1)));k&&(b=a.indexOf("<"),l+=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),f.chars&&f.chars(q(l)))}if(a==m)throw L("badparse",a);m=a}c()}function q(a){if(!a)return"";A.innerHTML=
a.replace(/</g,"&lt;");return A.textContent}function B(a){return a.replace(/&/g,"&amp;").replace(M,function(a){var d=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(d-55296)+(a-56320)+65536)+";"}).replace(N,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(a,f){var d=!1,c=h.bind(a,a.push);return{start:function(a,k,e){a=h.lowercase(a);!d&&w[a]&&(d=a);d||!0!==C[a]||(c("<"),c(a),h.forEach(k,function(d,e){var k=h.lowercase(e),g="img"===a&&"src"===k||
"background"===k;!0!==O[k]||!0===D[k]&&!f(d,g)||(c(" "),c(e),c('="'),c(B(d)),c('"'))}),c(e?"/>":">"))},end:function(a){a=h.lowercase(a);d||!0!==C[a]||(c("</"),c(a),c(">"));a==d&&(d=!1)},chars:function(a){d||c(B(a))}}}var L=h.$$minErr("$sanitize"),z=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,y=/^<\/\s*([\w:-]+)[^>]*>/,G=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,K=/^</,J=/^<\//,H=/\x3c!--(.*?)--\x3e/g,x=/<!DOCTYPE([^>]*?)>/i,
I=/<!\[CDATA\[(.*?)]]\x3e/g,M=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,N=/([^\#-~| |!])/g,v=g("area,br,col,hr,img,wbr");n=g("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");p=g("rp,rt");var u=h.extend({},p,n),s=h.extend({},n,g("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),t=h.extend({},p,g("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));
n=g("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use");var w=g("script,style"),C=h.extend({},v,s,t,u,n),D=g("background,cite,href,longdesc,src,usemap,xlink:href");n=g("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width");
p=g("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0);var O=h.extend({},D,p,n),A=document.createElement("pre");h.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(f){var d=[];F(f,r(d,function(c,b){return!/^unsafe/.test(a(c,b))}));return d.join("")}}]});h.module("ngSanitize").filter("linky",["$sanitize",function(a){var f=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,d=/^mailto:/i;return function(c,b){function k(a){a&&g.push(E(a))}function e(a,
c){g.push("<a ");h.isDefined(b)&&g.push('target="',b,'" ');g.push('href="',a.replace(/"/g,"&quot;"),'">');k(c);g.push("</a>")}if(!c)return c;for(var m,l=c,g=[],n,p;m=l.match(f);)n=m[0],m[2]||m[4]||(n=(m[3]?"http://":"mailto:")+n),p=m.index,k(l.substr(0,p)),e(n,m[0].replace(d,"")),l=l.substring(p+m[0].length);k(l);return a(g.join(""))}}])})(window,window.angular);


},{}],12:[function(require,module,exports){
/*
 AngularJS v1.5.0
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(O,W,v){'use strict';function H(a){return function(){var b=arguments[0],d;d="["+(a?a+":":"")+b+"] http://errors.angularjs.org/1.5.0/"+(a?a+"/":"")+b;for(b=1;b<arguments.length;b++){d=d+(1==b?"?":"&")+"p"+(b-1)+"=";var c=encodeURIComponent,e;e=arguments[b];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;d+=c(e)}return Error(d)}}function Ca(a){if(null==a||Za(a))return!1;if(L(a)||F(a)||C&&a instanceof C)return!0;
var b="length"in Object(a)&&a.length;return N(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function n(a,b,d){var c,e;if(a)if(D(a))for(c in a)"prototype"==c||"length"==c||"name"==c||a.hasOwnProperty&&!a.hasOwnProperty(c)||b.call(d,a[c],c,a);else if(L(a)||Ca(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==n)a.forEach(b,d,a);else if(qc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&
b.call(d,a[c],c,a);else for(c in a)sa.call(a,c)&&b.call(d,a[c],c,a);return a}function rc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function sc(a){return function(b,d){a(d,b)}}function Yd(){return++pb}function Qb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(E(g)||D(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var m=h[k],r=g[m];d&&E(r)?V(r)?a[m]=new Date(r.valueOf()):$a(r)?a[m]=new RegExp(r):r.nodeName?a[m]=r.cloneNode(!0):
Rb(r)?a[m]=r.clone():(E(a[m])||(a[m]=L(r)?[]:{}),Qb(a[m],[r],!0)):a[m]=r}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function T(a){return Qb(a,wa.call(arguments,1),!1)}function Zd(a){return Qb(a,wa.call(arguments,1),!0)}function ca(a){return parseInt(a,10)}function Sb(a,b){return T(Object.create(a),b)}function B(){}function ab(a){return a}function ba(a){return function(){return a}}function tc(a){return D(a.toString)&&a.toString!==ga}function x(a){return"undefined"===typeof a}function y(a){return"undefined"!==
typeof a}function E(a){return null!==a&&"object"===typeof a}function qc(a){return null!==a&&"object"===typeof a&&!uc(a)}function F(a){return"string"===typeof a}function N(a){return"number"===typeof a}function V(a){return"[object Date]"===ga.call(a)}function D(a){return"function"===typeof a}function $a(a){return"[object RegExp]"===ga.call(a)}function Za(a){return a&&a.window===a}function bb(a){return a&&a.$evalAsync&&a.$watch}function Na(a){return"boolean"===typeof a}function $d(a){return a&&N(a.length)&&
ae.test(ga.call(a))}function Rb(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function be(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function ra(a){return G(a.nodeName||a[0]&&a[0].nodeName)}function cb(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function Oa(a,b){function d(a,b){var d=b.$$hashKey,e;if(L(a)){e=0;for(var f=a.length;e<f;e++)b.push(c(a[e]))}else if(qc(a))for(e in a)b[e]=c(a[e]);else if(a&&"function"===typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&
(b[e]=c(a[e]));else for(e in a)sa.call(a,e)&&(b[e]=c(a[e]));d?b.$$hashKey=d:delete b.$$hashKey;return b}function c(a){if(!E(a))return a;var b=f.indexOf(a);if(-1!==b)return g[b];if(Za(a)||bb(a))throw Da("cpws");var b=!1,c=e(a);c===v&&(c=L(a)?[]:Object.create(uc(a)),b=!0);f.push(a);g.push(c);return b?d(a,c):c}function e(a){switch(ga.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(c(a.buffer));
case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex,b}if(D(a.cloneNode))return a.cloneNode(!0)}var f=[],g=[];if(b){if($d(b)||"[object ArrayBuffer]"===ga.call(b))throw Da("cpta");
if(a===b)throw Da("cpi");L(b)?b.length=0:n(b,function(a,c){"$$hashKey"!==c&&delete b[c]});f.push(a);g.push(b);return d(a,b)}return c(a)}function na(a,b){if(L(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(E(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function oa(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d==typeof b&&"object"==d)if(L(a)){if(!L(b))return!1;if((d=a.length)==b.length){for(c=
0;c<d;c++)if(!oa(a[c],b[c]))return!1;return!0}}else{if(V(a))return V(b)?oa(a.getTime(),b.getTime()):!1;if($a(a))return $a(b)?a.toString()==b.toString():!1;if(bb(a)||bb(b)||Za(a)||Za(b)||L(b)||V(b)||$a(b))return!1;d=Z();for(c in a)if("$"!==c.charAt(0)&&!D(a[c])){if(!oa(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&y(b[c])&&!D(b[c]))return!1;return!0}return!1}function db(a,b,d){return a.concat(wa.call(b,d))}function vc(a,b){var d=2<arguments.length?wa.call(arguments,2):[];
return!D(b)||b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,db(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function ce(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=v:Za(b)?d="$WINDOW":b&&W===b?d="$DOCUMENT":bb(b)&&(d="$SCOPE");return d}function eb(a,b){if(x(a))return v;N(b)||(b=b?2:null);return JSON.stringify(a,ce,b)}function wc(a){return F(a)?JSON.parse(a):a}function xc(a,b){a=a.replace(de,
"");var d=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return isNaN(d)?b:d}function Tb(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=xc(b,c);d*=b-c;a=new Date(a.getTime());a.setMinutes(a.getMinutes()+d);return a}function ta(a){a=C(a).clone();try{a.empty()}catch(b){}var d=C("<div>").append(a).html();try{return a[0].nodeType===Pa?G(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+G(b)})}catch(c){return G(d)}}function yc(a){try{return decodeURIComponent(a)}catch(b){}}function zc(a){var b=
{};n((a||"").split("&"),function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=yc(e),y(e)&&(f=y(f)?yc(f):!0,sa.call(b,e)?L(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function Ub(a){var b=[];n(a,function(a,c){L(a)?n(a,function(a){b.push(ha(c,!0)+(!0===a?"":"="+ha(a,!0)))}):b.push(ha(c,!0)+(!0===a?"":"="+ha(a,!0)))});return b.length?b.join("&"):""}function qb(a){return ha(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,
"+")}function ha(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ee(a,b){var d,c,e=Qa.length;for(c=0;c<e;++c)if(d=Qa[c]+b,F(d=a.getAttribute(d)))return d;return null}function fe(a,b){var d,c,e={};n(Qa,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});n(Qa,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&
(d=e,c=e.getAttribute(b))});d&&(e.strictDi=null!==ee(d,"strict-di"),b(d,c?[c]:[],e))}function Ac(a,b,d){E(d)||(d={});d=T({strictDi:!1},d);var c=function(){a=C(a);if(a.injector()){var c=a[0]===W?"document":ta(a);throw Da("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=fb(b,d.strictDi);c.invoke(["$rootScope","$rootElement",
"$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;O&&e.test(O.name)&&(d.debugInfoEnabled=!0,O.name=O.name.replace(e,""));if(O&&!f.test(O.name))return c();O.name=O.name.replace(f,"");ia.resumeBootstrap=function(a){n(a,function(a){b.push(a)});return c()};D(ia.resumeDeferredBootstrap)&&ia.resumeDeferredBootstrap()}function ge(){O.name="NG_ENABLE_DEBUG_INFO!"+O.name;O.location.reload()}function he(a){a=
ia.element(a).injector();if(!a)throw Da("test");return a.get("$$testability")}function Bc(a,b){b=b||"_";return a.replace(ie,function(a,c){return(c?b:"")+a.toLowerCase()})}function je(){var a;if(!Cc){var b=rb();(ua=x(b)?O.jQuery:b?O[b]:v)&&ua.fn.on?(C=ua,T(ua.fn,{scope:Ra.scope,isolateScope:Ra.isolateScope,controller:Ra.controller,injector:Ra.injector,inheritedData:Ra.inheritedData}),a=ua.cleanData,ua.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=ua._data(f,"events"))&&c.$destroy&&ua(f).triggerHandler("$destroy");
a(b)}):C=U;ia.element=C;Cc=!0}}function sb(a,b,d){if(!a)throw Da("areq",b||"?",d||"required");return a}function Sa(a,b,d){d&&L(a)&&(a=a[a.length-1]);sb(D(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ta(a,b){if("hasOwnProperty"===a)throw Da("badname",b);}function Dc(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&D(a)?vc(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,
e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==b)c||(c=C(wa.call(a,0,e))),c.push(b);return c||a}function Z(){return Object.create(null)}function ke(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=H("$injector"),c=H("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||H;return b(a,"module",function(){var a={};return function(f,g,h){if("hasOwnProperty"===f)throw c("badname","module");g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,d,e,f){f||(f=c);return function(){f[e||"push"]([b,
d,arguments]);return K}}function b(a,d){return function(b,e){e&&D(e)&&(e.$$moduleName=f);c.push([a,d,arguments]);return K}}if(!g)throw d("nomod",f);var c=[],e=[],s=[],I=a("$injector","invoke","push",e),K={_invokeQueue:c,_configBlocks:e,_runBlocks:s,requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider",
"register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:I,run:function(a){s.push(a);return this}};h&&I(h);return K})}})}function le(a){T(a,{bootstrap:Ac,copy:Oa,extend:T,merge:Zd,equals:oa,element:C,forEach:n,injector:fb,noop:B,bind:vc,toJson:eb,fromJson:wc,identity:ab,isUndefined:x,isDefined:y,isString:F,isFunction:D,isObject:E,isNumber:N,isElement:Rb,isArray:L,
version:me,isDate:V,lowercase:G,uppercase:ub,callbacks:{counter:0},getTestability:he,$$minErr:H,$$csp:Ea,reloadWithDebugInfo:ge});Vb=ke(O);Vb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:ne});a.provider("$compile",Ec).directive({a:oe,input:Fc,textarea:Fc,form:pe,script:qe,select:re,style:se,option:te,ngBind:ue,ngBindHtml:ve,ngBindTemplate:we,ngClass:xe,ngClassEven:ye,ngClassOdd:ze,ngCloak:Ae,ngController:Be,ngForm:Ce,ngHide:De,ngIf:Ee,ngInclude:Fe,ngInit:Ge,ngNonBindable:He,
ngPluralize:Ie,ngRepeat:Je,ngShow:Ke,ngStyle:Le,ngSwitch:Me,ngSwitchWhen:Ne,ngSwitchDefault:Oe,ngOptions:Pe,ngTransclude:Qe,ngModel:Re,ngList:Se,ngChange:Te,pattern:Gc,ngPattern:Gc,required:Hc,ngRequired:Hc,minlength:Ic,ngMinlength:Ic,maxlength:Jc,ngMaxlength:Jc,ngValue:Ue,ngModelOptions:Ve}).directive({ngInclude:We}).directive(vb).directive(Kc);a.provider({$anchorScroll:Xe,$animate:Ye,$animateCss:Ze,$$animateJs:$e,$$animateQueue:af,$$AnimateRunner:bf,$$animateAsyncRun:cf,$browser:df,$cacheFactory:ef,
$controller:ff,$document:gf,$exceptionHandler:hf,$filter:Lc,$$forceReflow:jf,$interpolate:kf,$interval:lf,$http:mf,$httpParamSerializer:nf,$httpParamSerializerJQLike:of,$httpBackend:pf,$xhrFactory:qf,$location:rf,$log:sf,$parse:tf,$rootScope:uf,$q:vf,$$q:wf,$sce:xf,$sceDelegate:yf,$sniffer:zf,$templateCache:Af,$templateRequest:Bf,$$testability:Cf,$timeout:Df,$window:Ef,$$rAF:Ff,$$jqLite:Gf,$$HashMap:Hf,$$cookieReader:If})}])}function gb(a){return a.replace(Jf,function(a,d,c,e){return e?c.toUpperCase():
c}).replace(Kf,"Moz$1")}function Mc(a){a=a.nodeType;return 1===a||!a||9===a}function Nc(a,b){var d,c,e=b.createDocumentFragment(),f=[];if(Wb.test(a)){d=d||e.appendChild(b.createElement("div"));c=(Lf.exec(a)||["",""])[1].toLowerCase();c=da[c]||da._default;d.innerHTML=c[1]+a.replace(Mf,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=db(f,d.childNodes);d=e.firstChild;d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";n(f,function(a){e.appendChild(a)});return e}function Oc(a,
b){var d=a.parentNode;d&&d.replaceChild(b,a);b.appendChild(a)}function U(a){if(a instanceof U)return a;var b;F(a)&&(a=X(a),b=!0);if(!(this instanceof U)){if(b&&"<"!=a.charAt(0))throw Xb("nosel");return new U(a)}if(b){b=W;var d;a=(d=Nf.exec(a))?[b.createElement(d[1])]:(d=Nc(a,b))?d.childNodes:[]}Pc(this,a)}function Yb(a){return a.cloneNode(!0)}function wb(a,b){b||hb(a);if(a.querySelectorAll)for(var d=a.querySelectorAll("*"),c=0,e=d.length;c<e;c++)hb(d[c])}function Qc(a,b,d,c){if(y(c))throw Xb("offargs");
var e=(c=xb(a))&&c.events,f=c&&c.handle;if(f)if(b){var g=function(b){var c=e[b];y(d)&&cb(c||[],d);y(d)&&c&&0<c.length||(a.removeEventListener(b,f,!1),delete e[b])};n(b.split(" "),function(a){g(a);yb[a]&&g(yb[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f,!1),delete e[b]}function hb(a,b){var d=a.ng339,c=d&&ib[d];c&&(b?delete c.data[b]:(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),Qc(a)),delete ib[d],a.ng339=v))}function xb(a,b){var d=a.ng339,d=d&&ib[d];b&&!d&&(a.ng339=d=++Of,
d=ib[d]={events:{},data:{},handle:v});return d}function Zb(a,b,d){if(Mc(a)){var c=y(d),e=!c&&b&&!E(b),f=!b;a=(a=xb(a,!e))&&a.data;if(c)a[b]=d;else{if(f)return a;if(e)return a&&a[b];T(a,b)}}}function zb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Ab(a,b){b&&a.setAttribute&&n(b.split(" "),function(b){a.setAttribute("class",X((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+X(b)+" "," ")))})}function Bb(a,
b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");n(b.split(" "),function(a){a=X(a);-1===d.indexOf(" "+a+" ")&&(d+=a+" ")});a.setAttribute("class",X(d))}}function Pc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function Rc(a,b){return Cb(a,"$"+(b||"ngController")+"Controller")}function Cb(a,b,d){9==a.nodeType&&(a=a.documentElement);for(b=
L(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(y(d=C.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function Sc(a){for(wb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function $b(a,b){b||wb(a);var d=a.parentNode;d&&d.removeChild(a)}function Pf(a,b){b=b||O;if("complete"===b.document.readyState)b.setTimeout(a);else C(b).on("load",a)}function Tc(a,b){var d=Db[b.toLowerCase()];return d&&Uc[ra(a)]&&d}function Qf(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};
var f=b[d||c.type],g=f?f.length:0;if(g){if(x(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var k=f.specialHandlerWrapper||Rf;1<g&&(f=na(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||k(a,c,f[l])}};d.elem=a;return d}function Rf(a,b,d){d.call(a,b)}function Sf(a,b,
d){var c=b.relatedTarget;c&&(c===a||Tf.call(a,c))||d.call(a,b)}function Gf(){this.$get=function(){return T(U,{hasClass:function(a,b){a.attr&&(a=a[0]);return zb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Ab(a,b)}})}}function Fa(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||Yd)():d+":"+a}function Ua(a,b){if(b){var d=0;this.nextUid=
function(){return++d}}n(a,this.put,this)}function Vc(a){a=a.toString().replace(Uf,"");return a.match(Vf)||a.match(Wf)}function Xf(a){return(a=Vc(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function fb(a,b){function d(a){return function(b,c){if(E(b))n(b,sc(a));else return a(b,c)}}function c(a,b){Ta(a,"service");if(D(b)||L(b))b=s.instantiate(b);if(!b.$get)throw Ga("pget",a);return r[a+"Provider"]=b}function e(a,b){return function(){var c=t.invoke(b,this);if(x(c))throw Ga("undef",a);
return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){sb(x(a)||L(a),"modulesToLoad","not an array");var b=[],c;n(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=s.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,!0);try{F(a)?(c=Vb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):D(a)?b.push(s.invoke(a)):L(a)?b.push(s.invoke(a)):Sa(a,"module")}catch(e){throw L(a)&&(a=a[a.length-1]),e.message&&e.stack&&
-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ga("modulerr",a,e.stack||e.message||e);}}});return b}function h(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===k)throw Ga("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=c(b,e)}catch(f){throw a[b]===k&&delete a[b],f;}finally{l.shift()}}function e(a,c,f){var g=[];a=fb.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if("string"!==typeof l)throw Ga("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:
d(l,f))}return g}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);L(a)&&(a=a[a.length-1]);d=11>=xa?!1:"function"===typeof a&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(a));return d?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=L(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:fb.$$annotate,has:function(b){return r.hasOwnProperty(b+
"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],m=new Ua([],!0),r={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,ba(b),!1)}),constant:d(function(a,b){Ta(a,"constant");r[a]=b;I[a]=b}),decorator:function(a,b){var c=s.get(a+"Provider"),d=c.$get;c.$get=function(){var a=t.invoke(d,c);return t.invoke(b,null,{$delegate:a})}}}},s=r.$injector=h(r,function(a,b){ia.isString(b)&&l.push(b);
throw Ga("unpr",l.join(" <- "));}),I={},K=h(I,function(a,b){var c=s.get(a+"Provider",b);return t.invoke(c.$get,c,v,a)}),t=K;r.$injectorProvider={$get:ba(K)};var p=g(a),t=K.get("$injector");t.strictDi=b;n(p,function(a){a&&t.invoke(a)});return t}function Xe(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ra(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();
var c;c=g.yOffset;D(c)?c=c():Rb(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):N(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=F(a)?a:d.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||Pf(function(){c.$evalAsync(g)})});return g}]}function jb(a,b){if(!a&&!b)return"";
if(!a)return b;if(!b)return a;L(a)&&(a=a.join(" "));L(b)&&(b=b.join(" "));return a+" "+b}function Yf(a){F(a)&&(a=a.split(" "));var b=Z();n(a,function(a){a.length&&(b[a]=!0)});return b}function Ha(a){return E(a)?a:{}}function Zf(a,b,d,c){function e(a){try{a.apply(null,wa.call(arguments,1))}finally{if(K--,0===K)for(;t.length;)try{t.pop()()}catch(b){d.error(b)}}}function f(){z=null;g();h()}function g(){a:{try{p=m.state;break a}catch(a){}p=void 0}p=x(p)?null:p;oa(p,$)&&(p=$);$=p}function h(){if(u!==k.url()||
w!==p)u=k.url(),w=p,n(A,function(a){a(k.url(),p)})}var k=this,l=a.location,m=a.history,r=a.setTimeout,s=a.clearTimeout,I={};k.isMock=!1;var K=0,t=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){K++};k.notifyWhenNoOutstandingRequests=function(a){0===K?a():t.push(a)};var p,w,u=l.href,la=b.find("base"),z=null;g();w=p;k.url=function(b,d,e){x(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=w===e;if(u===b&&(!c.history||f))return k;var h=
u&&Ia(u)===Ia(b);u=b;w=e;if(!c.history||h&&f){if(!h||z)z=b;d?l.replace(b):h?(d=l,e=b.indexOf("#"),e=-1===e?"":b.substr(e),d.hash=e):l.href=b;l.href!==b&&(z=b)}else m[d?"replaceState":"pushState"](e,"",b),g(),w=p;return k}return z||l.href.replace(/%27/g,"'")};k.state=function(){return p};var A=[],Q=!1,$=null;k.onUrlChange=function(b){if(!Q){if(c.history)C(a).on("popstate",f);C(a).on("hashchange",f);Q=!0}A.push(b);return b};k.$$applicationDestroyed=function(){C(a).off("hashchange popstate",f)};k.$$checkUrlChange=
h;k.baseHref=function(){var a=la.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};k.defer=function(a,b){var c;K++;c=r(function(){delete I[c];e(a)},b||0);I[c]=!0;return c};k.defer.cancel=function(a){return I[a]?(delete I[a],s(a),e(B),!0):!1}}function df(){this.$get=["$window","$log","$sniffer","$document",function(a,b,d,c){return new Zf(a,c,b,d)}]}function ef(){this.$get=function(){function a(a,c){function e(a){a!=r&&(s?s==a&&(s=a.n):s=a,f(a.n,a.p),f(a,r),r=a,r.n=null)}function f(a,
b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw H("$cacheFactory")("iid",a);var g=0,h=T({},c,{id:a}),k=Z(),l=c&&c.capacity||Number.MAX_VALUE,m=Z(),r=null,s=null;return b[a]={put:function(a,b){if(!x(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in k||g++;k[a]=b;g>l&&this.remove(s.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return k[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b==r&&(r=b.p);b==s&&(s=b.n);f(b.n,b.p);delete m[a]}a in
k&&(delete k[a],g--)},removeAll:function(){k=Z();g=0;m=Z();r=s=null},destroy:function(){m=h=k=null;delete b[a]},info:function(){return T({},h,{size:g})}}}var b={};a.info=function(){var a={};n(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function Af(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Ec(a,b){function d(a,b,c){var d=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,e={};n(a,function(a,f){var g=a.match(d);if(!g)throw ja("iscp",b,f,a,c?
"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f}});return e}function c(a){var b=a.charAt(0);if(!b||b!==G(b))throw ja("baddir",a);if(a!==a.trim())throw ja("baddir",a);}var e={},f=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,g=/(([\w\-]+)(?:\:([^;]+))?;?)/,h=be("ngSrc,ngSrcset,src,srcset"),k=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,l=/^(on[a-z]+|formaction)$/;this.directive=function s(b,f){Ta(b,"directive");F(b)?(c(b),sb(f,"directiveFactory"),
e.hasOwnProperty(b)||(e[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var f=[];n(e[b],function(e,g){try{var h=a.invoke(e);D(h)?h={compile:ba(h)}:!h.compile&&h.link&&(h.compile=ba(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=h.require||h.controller&&h.name;h.restrict=h.restrict||"EA";var k=h,l=h,m=h.name,s={isolateScope:null,bindToController:null};E(l.scope)&&(!0===l.bindToController?(s.bindToController=d(l.scope,m,!0),s.isolateScope={}):s.isolateScope=
d(l.scope,m,!1));E(l.bindToController)&&(s.bindToController=d(l.bindToController,m,!0));if(E(s.bindToController)){var P=l.controller,S=l.controllerAs;if(!P)throw ja("noctrl",m);if(!Wc(P,S))throw ja("noident",m);}var ma=k.$$bindings=s;E(ma.isolateScope)&&(h.$$isolateBindings=ma.isolateScope);h.$$moduleName=e.$$moduleName;f.push(h)}catch(K){c(K)}});return f}])),e[b].push(f)):n(b,sc(s));return this};this.component=function(a,b){function c(a){function e(b){return D(b)||L(b)?function(c,d){return a.invoke(b,
this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"";return{controller:d,controllerAs:Wc(b.controller)||b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require}}var d=b.controller||function(){};n(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a)});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return y(a)?(b.aHrefSanitizationWhitelist(a),
this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return y(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var m=!0;this.debugInfoEnabled=function(a){return y(a)?(m=a,this):m};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,b,c,d,p,w,u,la,z,A){function Q(a,b,c){ba.innerHTML="<span "+b+">";b=ba.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);
d.value=c;a.attributes.setNamedItem(d)}function $(a,b){try{a.addClass(b)}catch(c){}}function M(a,b,c,d,e){a instanceof C||(a=C(a));for(var f=/\S+/,g=0,h=a.length;g<h;g++){var k=a[g];k.nodeType===Pa&&k.nodeValue.match(f)&&Oc(k,a[g]=W.createElement("span"))}var l=P(a,b,a,c,d,e);M.$$addScopeClass(a);var m=null;return function(b,c,d){sb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var f=d.parentBoundTranscludeFn,g=d.transcludeControllers;d=d.futureParentElement;f&&f.$$boundTransclude&&
(f=f.$$boundTransclude);m||(m=(d=d&&d[0])?"foreignobject"!==ra(d)&&ga.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==m?C(U(m,C("<div>").append(a).html())):c?Ra.clone.call(a):a;if(g)for(var h in g)d.data("$"+h+"Controller",g[h].instance);M.$$addScopeInfo(d,b);c&&c(d,b);l&&l(b,d,d,f);return d}}function P(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,p,s,u;if(A)for(u=Array(c.length),m=0;m<h.length;m+=3)f=h[m],u[f]=c[f];else u=c;m=0;for(p=h.length;m<p;)k=u[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=
a.$new(),M.$$addScopeInfo(C(k),l)):l=a,s=c.transcludeOnThisElement?S(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?S(a,b):null,c(f,l,k,d,s)):f&&f(a,k.childNodes,v,e)}for(var h=[],k,l,m,p,A,s=0;s<a.length;s++){k=new na;l=ma(a[s],[],k,0===s?d:v,e);(f=l.length?y(l,a[s],k,b,c,null,[],[],f):null)&&f.scope&&M.$$addScopeClass(k.$$element);k=f&&f.terminal||!(m=a[s].childNodes)||!m.length?null:P(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||k)h.push(s,f,k),p=!0,A=
A||f;f=null}return p?g:null}function S(a,b,c){var d=function(d,e,f,g,h){d||(d=a.$new(!1,h),d.$$transcluded=!0);return b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})},e=d.$$slots=Z(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?S(a,b.$$slots[f],c):null;return d}function ma(a,b,c,d,e){var h=c.$attr,k;switch(a.nodeType){case 1:H(b,va(ra(a)),"E",d,e);for(var l,m,p,s=a.attributes,A=0,u=s&&s.length;A<u;A++){var t=!1,w=!1;l=s[A];k=l.name;m=X(l.value);l=va(k);if(p=pa.test(l))k=
k.replace(Xc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});(l=l.match(ua))&&O(l[1])&&(t=k,w=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6));l=va(k.toLowerCase());h[l]=k;if(p||!c.hasOwnProperty(l))c[l]=m,Tc(a,l)&&(c[l]=!0);Y(a,b,m,l,p);H(b,l,"A",d,e,t,w)}a=a.className;E(a)&&(a=a.animVal);if(F(a)&&""!==a)for(;k=g.exec(a);)l=va(k[2]),H(b,l,"C",d,e)&&(c[l]=X(k[3])),a=a.substr(k.index+k[0].length);break;case Pa:if(11===xa)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===
Pa;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);N(b,a.nodeValue);break;case 8:try{if(k=f.exec(a.nodeValue))l=va(k[1]),H(b,l,"M",d,e)&&(c[l]=X(k[2]))}catch(M){}}b.sort(ya);return b}function q(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return C(d)}function Yc(a,b,c){return function(d,e,f,g,h){e=q(e[0],b,
c);return a(d,e,f,g,h)}}function ac(a,b,c,d,e,f){if(a)return M(b,c,d,e,f);var g;return function(){g||(g=M(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function y(a,b,d,e,f,g,h,l,m){function p(a,b,c,d){if(a){c&&(a=Yc(a,c,d));a.require=J.require;a.directiveName=H;if(P===J||J.$$isolateScope)a=ca(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=Yc(b,c,d));b.require=J.require;b.directiveName=H;if(P===J||J.$$isolateScope)b=ca(b,{isolateScope:!0});l.push(b)}}function s(a,b,c,d){var e;if(F(b)){var f=
b.match(k);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e=g?c.inheritedData(h):c.data(h)}if(!e&&!f)throw ja("ctreq",b,a);}else if(L(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=s(a,b[g],c,d);else E(b)&&(e={},n(b,function(b,f){e[f]=s(a,b,c,d)}));return e||null}function A(a,b,c,d,e,f){var g=Z(),h;for(h in d){var k=d[h],l={$scope:k===P||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},m=k.controller;"@"==m&&
(m=b[k.name]);l=w(m,l,!0,k.controllerAs);g[k.name]=l;B||a.data("$"+k.name+"Controller",l.instance)}return g}function u(a,c,e,f,g){function k(a,b,c,d){var e;bb(a)||(d=c,c=b,b=a,a=v);B&&(e=ma);c||(c=B?z.parent():z);if(d){var f=g.$$slots[d];if(f)return f(a,b,e,c,Eb);if(x(f))throw ja("noslot",d,ta(z));}else return g(a,b,e,c,Eb)}var m,p,t,w,ma,S,z,Ja;b===e?(f=d,z=d.$$element):(z=C(e),f=new na(z,d));t=c;P?w=c.$new(!0):Q&&(t=c.$parent);g&&(S=k,S.$$boundTransclude=g,S.isSlotFilled=function(a){return!!g.$$slots[a]});
I&&(ma=A(z,f,S,I,w,c));P&&(M.$$addScopeInfo(z,w,!0,!($&&($===P||$===P.$$originalDirective))),M.$$addScopeClass(z,!0),w.$$isolateBindings=P.$$isolateBindings,(Ja=ia(c,f,w,w.$$isolateBindings,P))&&w.$on("$destroy",Ja));for(p in ma){Ja=I[p];var K=ma[p],la=Ja.$$bindings.bindToController;K.identifier&&la&&(m=ia(t,f,K.instance,la,Ja));var q=K();q!==K.instance&&(K.instance=q,z.data("$"+Ja.name+"Controller",q),m&&m(),m=ia(t,f,K.instance,la,Ja))}n(I,function(a,b){var c=a.require;a.bindToController&&!L(c)&&
E(c)&&T(ma[b].instance,s(b,c,z,ma))});n(ma,function(a){D(a.instance.$onInit)&&a.instance.$onInit()});m=0;for(p=h.length;m<p;m++)t=h[m],ka(t,t.isolateScope?w:c,z,f,t.require&&s(t.directiveName,t.require,z,ma),S);var Eb=c;P&&(P.template||null===P.templateUrl)&&(Eb=w);a&&a(Eb,e.childNodes,v,g);for(m=l.length-1;0<=m;m--)t=l[m],ka(t,t.isolateScope?w:c,z,f,t.require&&s(t.directiveName,t.require,z,ma),S)}m=m||{};for(var t=-Number.MAX_VALUE,Q=m.newScopeDirective,I=m.controllerDirectives,P=m.newIsolateScopeDirective,
$=m.templateDirective,S=m.nonTlbTranscludeDirective,z=!1,la=!1,B=m.hasElementTranscludeDirective,ea=d.$$element=C(b),J,H,G,ya=e,O,N=!1,Fb=!1,fa,R=0,Va=a.length;R<Va;R++){J=a[R];var Y=J.$$start,ba=J.$$end;Y&&(ea=q(b,Y,ba));G=v;if(t>J.priority)break;if(fa=J.scope)J.templateUrl||(E(fa)?(Wa("new/isolated scope",P||Q,J,ea),P=J):Wa("new/isolated scope",P,J,ea)),Q=Q||J;H=J.name;if(!N&&(J.replace&&(J.templateUrl||J.template)||J.transclude&&!J.$$tlb)){for(fa=R+1;N=a[fa++];)if(N.transclude&&!N.$$tlb||N.replace&&
(N.templateUrl||N.template)){Fb=!0;break}N=!0}!J.templateUrl&&J.controller&&(fa=J.controller,I=I||Z(),Wa("'"+H+"' controller",I[H],J,ea),I[H]=J);if(fa=J.transclude)if(z=!0,J.$$tlb||(Wa("transclusion",S,J,ea),S=J),"element"==fa)B=!0,t=J.priority,G=ea,ea=d.$$element=C(W.createComment(" "+H+": "+d[H]+" ")),b=ea[0],aa(f,wa.call(G,0),b),ya=ac(Fb,G,e,t,g&&g.name,{nonTlbTranscludeDirective:S});else{var V=Z();G=C(Yb(b)).contents();if(E(fa)){G=[];var ha=Z(),da=Z();n(fa,function(a,b){var c="?"===a.charAt(0);
a=c?a.substring(1):a;ha[a]=b;V[b]=null;da[b]=c});n(ea.contents(),function(a){var b=ha[va(ra(a))];b?(da[b]=!0,V[b]=V[b]||[],V[b].push(a)):G.push(a)});n(da,function(a,b){if(!a)throw ja("reqslot",b);});for(var ga in V)V[ga]&&(V[ga]=ac(Fb,V[ga],e))}ea.empty();ya=ac(Fb,G,e,v,v,{needsNewScope:J.$$isolateScope||J.$$newScope});ya.$$slots=V}if(J.template)if(la=!0,Wa("template",$,J,ea),$=J,fa=D(J.template)?J.template(ea,d):J.template,fa=qa(fa),J.replace){g=J;G=Wb.test(fa)?Zc(U(J.templateNamespace,X(fa))):[];
b=G[0];if(1!=G.length||1!==b.nodeType)throw ja("tplrt",H,"");aa(f,ea,b);Va={$attr:{}};fa=ma(b,[],Va);var oa=a.splice(R+1,a.length-(R+1));(P||Q)&&$c(fa,P,Q);a=a.concat(fa).concat(oa);ad(d,Va);Va=a.length}else ea.html(fa);if(J.templateUrl)la=!0,Wa("template",$,J,ea),$=J,J.replace&&(g=J),u=$f(a.splice(R,a.length-R),ea,d,f,z&&ya,h,l,{controllerDirectives:I,newScopeDirective:Q!==J&&Q,newIsolateScopeDirective:P,templateDirective:$,nonTlbTranscludeDirective:S}),Va=a.length;else if(J.compile)try{O=J.compile(ea,
d,ya),D(O)?p(null,O,Y,ba):O&&p(O.pre,O.post,Y,ba)}catch(pa){c(pa,ta(ea))}J.terminal&&(u.terminal=!0,t=Math.max(t,J.priority))}u.scope=Q&&!0===Q.scope;u.transcludeOnThisElement=z;u.templateOnThisElement=la;u.transclude=ya;m.hasElementTranscludeDirective=B;return u}function $c(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=Sb(a[d],{$$isolateScope:b,$$newScope:c})}function H(b,d,f,g,h,k,l){if(d===h)return null;h=null;if(e.hasOwnProperty(d)){var m;d=a.get(d+"Directive");for(var p=0,A=d.length;p<A;p++)try{m=
d[p],(x(g)||g>m.priority)&&-1!=m.restrict.indexOf(f)&&(k&&(m=Sb(m,{$$start:k,$$end:l})),b.push(m),h=m)}catch(t){c(t)}}return h}function O(b){if(e.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,f=c.length;d<f;d++)if(b=c[d],b.multiElement)return!0;return!1}function ad(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;n(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});n(b,function(b,f){"class"==f?($(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+
b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function $f(a,b,c,e,f,g,h,k){var l=[],m,p,s=b[0],A=a.shift(),u=Sb(A,{templateUrl:null,transclude:null,replace:null,$$originalDirective:A}),w=D(A.templateUrl)?A.templateUrl(b,c):A.templateUrl,Q=A.templateNamespace;b.empty();d(w).then(function(d){var t,I;d=qa(d);if(A.replace){d=Wb.test(d)?Zc(U(Q,X(d))):[];t=d[0];if(1!=d.length||1!==t.nodeType)throw ja("tplrt",
A.name,w);d={$attr:{}};aa(e,b,t);var M=ma(t,[],d);E(A.scope)&&$c(M,!0);a=M.concat(a);ad(c,d)}else t=s,b.html(d);a.unshift(u);m=y(a,t,c,f,b,A,g,h,k);n(e,function(a,c){a==t&&(e[c]=b[0])});for(p=P(b[0].childNodes,f);l.length;){d=l.shift();I=l.shift();var z=l.shift(),K=l.shift(),M=b[0];if(!d.$$destroyed){if(I!==s){var la=I.className;k.hasElementTranscludeDirective&&A.replace||(M=Yb(t));aa(z,C(I),M);$(C(M),la)}I=m.transcludeOnThisElement?S(d,m.transclude,K):K;m(p,d,M,e,I)}}l=null});return function(a,b,
c,d,e){a=e;b.$$destroyed||(l?l.push(b,c,d,a):(m.transcludeOnThisElement&&(a=S(b,m.transclude,e)),m(p,b,c,d,a)))}}function ya(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Wa(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw ja("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,ta(d));}function N(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&M.$$addBindingClass(a);
return function(a,c){var e=c.parent();b||M.$$addBindingClass(e);M.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function U(a,b){a=G(a||"html");switch(a){case "svg":case "math":var c=W.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function R(a,b){if("srcdoc"==b)return la.HTML;var c=ra(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return la.RESOURCE_URL}function Y(a,c,d,e,
f){var g=R(a,e);f=h[e]||f;var k=b(d,!0,g,f);if(k){if("multiple"===e&&"select"===ra(a))throw ja("selmulti",ta(a));c.push({priority:100,compile:function(){return{pre:function(a,c,h){c=h.$$observers||(h.$$observers=Z());if(l.test(e))throw ja("nodomevents");var m=h[e];m!==d&&(k=m&&b(m,!0,g,f),d=m);k&&(h[e]=k(a),(c[e]||(c[e]=[])).$$inter=!0,(h.$$observers&&h.$$observers[e].$$scope||a).$watch(k,function(a,b){"class"===e&&a!=b?h.$updateClass(a,b):h.$set(e,a)}))}}}})}}function aa(a,b,c){var d=b[0],e=b.length,
f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=W.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);C.hasData(d)&&(C.data(c,C.data(d)),C(d).off("$destroy"));C.cleanData(a.querySelectorAll("*"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function ca(a,b){return T(function(){return a.apply(null,arguments)},a,b)}function ka(a,
b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,ta(d))}}function ia(a,c,d,e,f){var g=[];n(e,function(e,h){var k=e.attrName,l=e.optional,m,A,s,t;switch(e.mode){case "@":l||sa.call(c,k)||(d[h]=c[k]=void 0);c.$observe(k,function(a){F(a)&&(d[h]=a)});c.$$observers[k].$$scope=a;m=c[k];F(m)?d[h]=b(m)(a):Na(m)&&(d[h]=m);break;case "=":if(!sa.call(c,k)){if(l)break;c[k]=void 0}if(l&&!c[k])break;A=p(c[k]);t=A.literal?oa:function(a,b){return a===b||a!==a&&b!==b};s=A.assign||function(){m=d[h]=A(a);throw ja("nonassign",
c[k],k,f.name);};m=d[h]=A(a);l=function(b){t(b,d[h])||(t(b,m)?s(a,b=d[h]):d[h]=b);return m=b};l.$stateful=!0;l=e.collection?a.$watchCollection(c[k],l):a.$watch(p(c[k],l),null,A.literal);g.push(l);break;case "<":if(!sa.call(c,k)){if(l)break;c[k]=void 0}if(l&&!c[k])break;A=p(c[k]);d[h]=A(a);l=a.$watch(A,function(a){d[h]=a},A.literal);g.push(l);break;case "&":A=c.hasOwnProperty(k)?p(c[k]):B;if(A===B&&l)break;d[h]=function(b){return A(a,b)}}});return g.length&&function(){for(var a=0,b=g.length;a<b;++a)g[a]()}}
var V=/^\w/,ba=W.createElement("div"),na=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a};na.prototype={$normalize:va,$addClass:function(a){a&&0<a.length&&z.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&z.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=bd(a,b);c&&c.length&&z.addClass(this.$$element,c);(c=bd(b,a))&&c.length&&z.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=
Tc(this.$$element[0],a),g=cd[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Bc(a,"-"));f=ra(this.$$element);if("a"===f&&("href"===a||"xlinkHref"===a)||"img"===f&&"src"===a)this[a]=b=A(b,"src"===a);else if("img"===f&&"srcset"===a){for(var f="",g=X(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),l=0;l<k;l++)var m=2*l,f=f+A(X(g[m]),!0),f=f+(" "+X(g[m+1]));g=X(g[2*l]).split(/\s/);
f+=A(X(g[0]),!0);2===g.length&&(f+=" "+X(g[1]));this[a]=b=f}!1!==d&&(null===b||x(b)?this.$$element.removeAttr(e):V.test(e)?this.$$element.attr(e,b):Q(this.$$element[0],e,b));(a=this.$$observers)&&n(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=Z()),e=d[a]||(d[a]=[]);e.push(b);u.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||x(c[a])||b(c[a])});return function(){cb(e,b)}}};var ha=b.startSymbol(),da=b.endSymbol(),qa="{{"==ha&&"}}"==
da?ab:function(a){return a.replace(/\{\{/g,ha).replace(/}}/g,da)},pa=/^ngAttr[A-Z]/,ua=/^(.+)Start$/;M.$$addBindingInfo=m?function(a,b){var c=a.data("$binding")||[];L(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:B;M.$$addBindingClass=m?function(a){$(a,"ng-binding")}:B;M.$$addScopeInfo=m?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:B;M.$$addScopeClass=m?function(a,b){$(a,b?"ng-isolate-scope":"ng-scope")}:B;return M}]}function va(a){return gb(a.replace(Xc,
""))}function bd(a,b){var d="",c=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],h=0;h<e.length;h++)if(g==e[h])continue a;d+=(0<d.length?" ":"")+g}return d}function Zc(a){a=C(a);var b=a.length;if(1>=b)return a;for(;b--;)8===a[b].nodeType&&ag.call(a,b,1);return a}function Wc(a,b){if(b&&F(b))return b;if(F(a)){var d=dd.exec(a);if(d)return d[3]}}function ff(){var a={},b=!1;this.register=function(b,c){Ta(b,"controller");E(b)?T(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=
["$injector","$window",function(d,c){function e(a,b,c,d){if(!a||!E(a.$scope))throw H("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,h,k){var l,m,r;h=!0===h;k&&F(k)&&(r=k);if(F(f)){k=f.match(dd);if(!k)throw bg("ctrlfmt",f);m=k[1];r=r||k[3];f=a.hasOwnProperty(m)?a[m]:Dc(g.$scope,m,!0)||(b?Dc(c,m,!0):v);Sa(f,m,!0)}if(h)return h=(L(f)?f[f.length-1]:f).prototype,l=Object.create(h||null),r&&e(g,r,l,m||f.name),T(function(){var a=d.invoke(f,l,g,m);a!==l&&(E(a)||D(a))&&(l=a,r&&e(g,r,l,m||f.name));
return l},{instance:l,identifier:r});l=d.instantiate(f,g,m);r&&e(g,r,l,m||f.name);return l}}]}function gf(){this.$get=["$window",function(a){return C(a.document)}]}function hf(){this.$get=["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function bc(a){return E(a)?V(a)?a.toISOString():eb(a):a}function nf(){this.$get=function(){return function(a){if(!a)return"";var b=[];rc(a,function(a,c){null===a||x(a)||(L(a)?n(a,function(a,d){b.push(ha(c)+"="+ha(bc(a)))}):b.push(ha(c)+"="+ha(bc(a))))});
return b.join("&")}}}function of(){this.$get=function(){return function(a){function b(a,e,f){null===a||x(a)||(L(a)?n(a,function(a,c){b(a,e+"["+(E(a)?c:"")+"]")}):E(a)&&!V(a)?rc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push(ha(e)+"="+ha(bc(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function cc(a,b){if(F(a)){var d=a.replace(cg,"").trim();if(d){var c=b("Content-Type");(c=c&&0===c.indexOf(ed))||(c=(c=d.match(dg))&&eg[c[0]].test(d));c&&(a=wc(d))}}return a}function fd(a){var b=
Z(),d;F(a)?n(a.split("\n"),function(a){d=a.indexOf(":");var e=G(X(a.substr(0,d)));a=X(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):E(a)&&n(a,function(a,d){var f=G(d),g=X(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function gd(a){var b;return function(d){b||(b=fd(a));return d?(d=b[G(d)],void 0===d&&(d=null),d):b}}function hd(a,b,d,c){if(D(c))return c(a,b,d);n(c,function(c){a=c(a,b,d)});return a}function mf(){var a=this.defaults={transformResponse:[cc],transformRequest:[function(a){return E(a)&&"[object File]"!==
ga.call(a)&&"[object Blob]"!==ga.call(a)&&"[object FormData]"!==ga.call(a)?eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:na(dc),put:na(dc),patch:na(dc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},b=!1;this.useApplyAsync=function(a){return y(a)?(b=!!a,this):b};var d=!0;this.useLegacyPromiseExtensions=function(a){return y(a)?(d=!!a,this):d};var c=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory",
"$rootScope","$q","$injector",function(e,f,g,h,k,l){function m(b){function c(a){var b=T({},a);b.data=hd(a.data,a.headers,a.status,f.transformResponse);a=a.status;return 200<=a&&300>a?b:k.reject(b)}function e(a,b){var c,d={};n(a,function(a,e){D(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}if(!E(b))throw H("$http")("badreq",b);if(!F(b.url))throw H("$http")("badreq",b.url);var f=T({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},
b);f.headers=function(b){var c=a.headers,d=T({},b.headers),f,g,h,c=T({},c.common,c[G(b.method)]);a:for(f in c){g=G(f);for(h in d)if(G(h)===g)continue a;d[f]=c[f]}return e(d,na(b))}(b);f.method=ub(f.method);f.paramSerializer=F(f.paramSerializer)?l.get(f.paramSerializer):f.paramSerializer;var g=[function(b){var d=b.headers,e=hd(b.data,gd(d),v,b.transformRequest);x(e)&&n(d,function(a,b){"content-type"===G(b)&&delete d[b]});x(b.withCredentials)&&!x(a.withCredentials)&&(b.withCredentials=a.withCredentials);
return r(b,e).then(c,c)},v],h=k.when(f);for(n(K,function(a){(a.request||a.requestError)&&g.unshift(a.request,a.requestError);(a.response||a.responseError)&&g.push(a.response,a.responseError)});g.length;){b=g.shift();var m=g.shift(),h=h.then(b,m)}d?(h.success=function(a){Sa(a,"fn");h.then(function(b){a(b.data,b.status,b.headers,f)});return h},h.error=function(a){Sa(a,"fn");h.then(null,function(b){a(b.data,b.status,b.headers,f)});return h}):(h.success=id("success"),h.error=id("error"));return h}function r(c,
d){function g(a,c,d,e){function f(){l(c,a,d,e)}K&&(200<=a&&300>a?K.put(S,[a,c,fd(d),e]):K.remove(S));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function l(a,b,d,e){b=-1<=b?b:0;(200<=b&&300>b?A.resolve:A.reject)({data:a,status:b,headers:gd(d),config:c,statusText:e})}function r(a){l(a.data,a.status,na(a.headers()),a.statusText)}function z(){var a=m.pendingRequests.indexOf(c);-1!==a&&m.pendingRequests.splice(a,1)}var A=k.defer(),Q=A.promise,K,M,P=c.headers,S=s(c.url,c.paramSerializer(c.params));
m.pendingRequests.push(c);Q.then(z,z);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(K=E(c.cache)?c.cache:E(a.cache)?a.cache:I);K&&(M=K.get(S),y(M)?M&&D(M.then)?M.then(r,r):L(M)?l(M[1],M[0],na(M[2]),M[3]):l(M,200,{},"OK"):K.put(S,Q));x(M)&&((M=jd(c.url)?f()[c.xsrfCookieName||a.xsrfCookieName]:v)&&(P[c.xsrfHeaderName||a.xsrfHeaderName]=M),e(c.method,S,d,g,P,c.timeout,c.withCredentials,c.responseType));return Q}function s(a,b){0<b.length&&(a+=(-1==a.indexOf("?")?"?":"&")+b);
return a}var I=g("$http");a.paramSerializer=F(a.paramSerializer)?l.get(a.paramSerializer):a.paramSerializer;var K=[];n(c,function(a){K.unshift(F(a)?l.get(a):l.invoke(a))});m.pendingRequests=[];(function(a){n(arguments,function(a){m[a]=function(b,c){return m(T({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){n(arguments,function(a){m[a]=function(b,c,d){return m(T({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");m.defaults=a;return m}]}function qf(){this.$get=
function(){return function(){return new O.XMLHttpRequest}}}function pf(){this.$get=["$browser","$window","$document","$xhrFactory",function(a,b,d,c){return fg(a,c,a.defer,b.angular.callbacks,d[0])}]}function fg(a,b,d,c,e){function f(a,b,d){var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m,!1);f.removeEventListener("error",m,!1);e.body.removeChild(f);f=null;var g=-1,I="unknown";a&&("load"!==a.type||c[b].called||(a={type:"error"}),
I=a.type,g="error"===a.type?404:200);d&&d(g,I)};f.addEventListener("load",m,!1);f.addEventListener("error",m,!1);e.body.appendChild(f);return m}return function(e,h,k,l,m,r,s,I){function K(){w&&w();u&&u.abort()}function t(b,c,e,f,g){y(z)&&d.cancel(z);w=u=null;b(c,e,f,g);a.$$completeOutstandingRequest(B)}a.$$incOutstandingRequestCount();h=h||a.url();if("jsonp"==G(e)){var p="_"+(c.counter++).toString(36);c[p]=function(a){c[p].data=a;c[p].called=!0};var w=f(h.replace("JSON_CALLBACK","angular.callbacks."+
p),p,function(a,b){t(l,a,c[p].data,"",b);c[p]=B})}else{var u=b(e,h);u.open(e,h,!0);n(m,function(a,b){y(a)&&u.setRequestHeader(b,a)});u.onload=function(){var a=u.statusText||"",b="response"in u?u.response:u.responseText,c=1223===u.status?204:u.status;0===c&&(c=b?200:"file"==za(h).protocol?404:0);t(l,c,b,u.getAllResponseHeaders(),a)};e=function(){t(l,-1,null,null,"")};u.onerror=e;u.onabort=e;s&&(u.withCredentials=!0);if(I)try{u.responseType=I}catch(la){if("json"!==I)throw la;}u.send(x(k)?null:k)}if(0<
r)var z=d(K,r);else r&&D(r.then)&&r.then(K)}}function kf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(r,a).replace(s,b)}function h(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function k(f,k,r,p){function s(a){try{var b=a;a=r?e.getTrusted(r,b):e.valueOf(b);var d;if(p&&!y(a))d=
a;else if(null==a)d="";else{switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=eb(a)}d=a}return d}catch(g){c(Ka.interr(f,g))}}if(!f.length||-1===f.indexOf(a)){var u;k||(k=g(f),u=ba(k),u.exp=f,u.expressions=[],u.$$watchDelegate=h);return u}p=!!p;var n,z,A=0,Q=[],$=[];u=f.length;for(var M=[],P=[];A<u;)if(-1!=(n=f.indexOf(a,A))&&-1!=(z=f.indexOf(b,n+l)))A!==n&&M.push(g(f.substring(A,n))),A=f.substring(n+l,z),Q.push(A),$.push(d(A,s)),A=z+m,P.push(M.length),M.push("");else{A!==u&&
M.push(g(f.substring(A)));break}r&&1<M.length&&Ka.throwNoconcat(f);if(!k||Q.length){var S=function(a){for(var b=0,c=Q.length;b<c;b++){if(p&&x(a[b]))return;M[P[b]]=a[b]}return M.join("")};return T(function(a){var b=0,d=Q.length,e=Array(d);try{for(;b<d;b++)e[b]=$[b](a);return S(e)}catch(g){c(Ka.interr(f,g))}},{exp:f,expressions:Q,$$watchDelegate:function(a,b){var c;return a.$watchGroup($,function(d,e){var f=S(d);D(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,r=new RegExp(a.replace(/./g,
f),"g"),s=new RegExp(b.replace(/./g,f),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function lf(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,d,c,e){function f(f,k,l,m){function r(){s?f.apply(null,I):f(p)}var s=4<arguments.length,I=s?wa.call(arguments,4):[],K=b.setInterval,t=b.clearInterval,p=0,w=y(m)&&!m,u=(w?c:d).defer(),n=u.promise;l=y(l)?l:0;n.$$intervalId=K(function(){w?e.defer(r):a.$evalAsync(r);u.notify(p++);0<l&&p>=l&&(u.resolve(p),
t(n.$$intervalId),delete g[n.$$intervalId]);w||a.$apply()},k);g[n.$$intervalId]=u;return n}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function ec(a){a=a.split("/");for(var b=a.length;b--;)a[b]=qb(a[b]);return a.join("/")}function kd(a,b){var d=za(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=ca(d.port)||gg[d.protocol]||null}function ld(a,b){var d="/"!==a.charAt(0);
d&&(a="/"+a);var c=za(a);b.$$path=decodeURIComponent(d&&"/"===c.pathname.charAt(0)?c.pathname.substring(1):c.pathname);b.$$search=zc(c.search);b.$$hash=decodeURIComponent(c.hash);b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function pa(a,b){if(0===b.indexOf(a))return b.substr(a.length)}function Ia(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function kb(a){return a.replace(/(#.+)|#$/,"$1")}function fc(a,b,d){this.$$html5=!0;d=d||"";kd(a,this);this.$$parse=function(a){var d=pa(b,
a);if(!F(d))throw Gb("ipthprfx",a,b);ld(d,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Ub(this.$$search),d=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=ec(this.$$path)+(a?"?"+a:"")+d;this.$$absUrl=b+this.$$url.substr(1)};this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;y(f=pa(a,c))?(g=f,g=y(f=pa(d,f))?b+(pa("/",f)||f):a+g):y(f=pa(b,c))?g=b+f:b==c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function gc(a,b,d){kd(a,this);
this.$$parse=function(c){var e=pa(a,c)||pa(b,c),f;x(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",x(e)&&(a=c,this.replace())):(f=pa(d,e),x(f)&&(f=e));ld(f,this);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;0===f.indexOf(e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};this.$$compose=function(){var b=Ub(this.$$search),e=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=ec(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?d+this.$$url:"")};this.$$parseLinkUrl=
function(b,d){return Ia(a)==Ia(b)?(this.$$parse(b),!0):!1}}function md(a,b,d){this.$$html5=!0;gc.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a==Ia(c)?f=c:(g=pa(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=Ub(this.$$search),e=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=ec(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+d+this.$$url}}function Hb(a){return function(){return this[a]}}function nd(a,
b){return function(d){if(x(d))return this[a];this[a]=b(d);this.$$compose();return this}}function rf(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return y(b)?(a=b,this):a};this.html5Mode=function(a){return Na(a)?(b.enabled=a,this):E(a)?(Na(a.enabled)&&(b.enabled=a.enabled),Na(a.requireBase)&&(b.requireBase=a.requireBase),Na(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,
c,e,f,g){function h(a,b,d){var e=l.url(),f=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(g){throw l.url(e),l.$$state=f,g;}}function k(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,m;m=c.baseHref();var r=c.url(),s;if(b.enabled){if(!m&&b.requireBase)throw Gb("nobase");s=r.substring(0,r.indexOf("/",r.indexOf("//")+2))+(m||"/");m=e.history?fc:md}else s=Ia(r),m=gc;var I=s.substr(0,Ia(s).lastIndexOf("/")+1);l=new m(s,I,"#"+a);l.$$parseLinkUrl(r,r);l.$$state=c.state();
var n=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=C(a.target);"a"!==ra(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),k=e.attr("href")||e.attr("xlink:href");E(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=za(h.animVal).href);n.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(h,k)||(a.preventDefault(),l.absUrl()!=c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=
!0))}});kb(l.absUrl())!=kb(r)&&c.url(l.absUrl(),!0);var t=!0;c.onUrlChange(function(a,b){x(pa(I,a))?g.location.href=a:(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,f;a=kb(a);l.$$parse(a);l.$$state=b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;l.absUrl()===a&&(f?(l.$$parse(c),l.$$state=e,h(c,!1,e)):(t=!1,k(c,e)))}),d.$$phase||d.$digest())});d.$watch(function(){var a=kb(c.url()),b=kb(l.absUrl()),f=c.state(),g=l.$$replace,m=a!==b||l.$$html5&&e.history&&f!==l.$$state;if(t||
m)t=!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,f).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=f):(m&&h(b,g,f===l.$$state?null:l.$$state),k(a,f)))});l.$$replace=!1});return l}]}function sf(){var a=!0,b=this;this.debugEnabled=function(b){return y(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&
(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||B;a=!1;try{a=!!e.apply}catch(k){}return a?function(){var a=[];n(arguments,function(b){a.push(c(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Xa(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===
a||"__proto__"===a)throw ka("isecfld",b);return a}function hg(a){return a+""}function Aa(a,b){if(a){if(a.constructor===a)throw ka("isecfn",b);if(a.window===a)throw ka("isecwindow",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw ka("isecdom",b);if(a===Object)throw ka("isecobj",b);}return a}function od(a,b){if(a){if(a.constructor===a)throw ka("isecfn",b);if(a===ig||a===jg||a===kg)throw ka("isecff",b);}}function Ib(a,b){if(a&&(a===(0).constructor||a===(!1).constructor||a==="".constructor||
a==={}.constructor||a===[].constructor||a===Function.constructor))throw ka("isecaf",b);}function lg(a,b){return"undefined"!==typeof a?a:b}function pd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function R(a,b){var d,c;switch(a.type){case q.Program:d=!0;n(a.body,function(a){R(a.expression,b);d=d&&a.expression.constant});a.constant=d;break;case q.Literal:a.constant=!0;a.toWatch=[];break;case q.UnaryExpression:R(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;
break;case q.BinaryExpression:R(a.left,b);R(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case q.LogicalExpression:R(a.left,b);R(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case q.ConditionalExpression:R(a.test,b);R(a.alternate,b);R(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case q.Identifier:a.constant=!1;a.toWatch=
[a];break;case q.MemberExpression:R(a.object,b);a.computed&&R(a.property,b);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=[a];break;case q.CallExpression:d=a.filter?!b(a.callee.name).$stateful:!1;c=[];n(a.arguments,function(a){R(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=a.filter&&!b(a.callee.name).$stateful?c:[a];break;case q.AssignmentExpression:R(a.left,b);R(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];
break;case q.ArrayExpression:d=!0;c=[];n(a.elements,function(a){R(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=c;break;case q.ObjectExpression:d=!0;c=[];n(a.properties,function(a){R(a.value,b);d=d&&a.value.constant;a.value.constant||c.push.apply(c,a.value.toWatch)});a.constant=d;a.toWatch=c;break;case q.ThisExpression:a.constant=!1;a.toWatch=[];break;case q.LocalsExpression:a.constant=!1,a.toWatch=[]}}function qd(a){if(1==a.length){a=a[0].expression;var b=a.toWatch;
return 1!==b.length?b:b[0]!==a?b:v}}function rd(a){return a.type===q.Identifier||a.type===q.MemberExpression}function sd(a){if(1===a.body.length&&rd(a.body[0].expression))return{type:q.AssignmentExpression,left:a.body[0].expression,right:{type:q.NGValueParameter},operator:"="}}function td(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===q.Literal||a.body[0].expression.type===q.ArrayExpression||a.body[0].expression.type===q.ObjectExpression)}function ud(a,b){this.astBuilder=
a;this.$filter=b}function vd(a,b){this.astBuilder=a;this.$filter=b}function Jb(a){return"constructor"==a}function hc(a){return D(a.valueOf)?a.valueOf():mg.call(a)}function tf(){var a=Z(),b=Z();this.$get=["$filter",function(d){function c(c,f,r){var u,n,z;r=r||K;switch(typeof c){case "string":z=c=c.trim();var A=r?b:a;u=A[z];if(!u){":"===c.charAt(0)&&":"===c.charAt(1)&&(n=!0,c=c.substring(2));u=r?I:s;var Q=new ic(u);u=(new jc(Q,d,u)).parse(c);u.constant?u.$$watchDelegate=l:n?u.$$watchDelegate=u.literal?
k:h:u.inputs&&(u.$$watchDelegate=g);r&&(u=e(u));A[z]=u}return m(u,f);case "function":return m(c,f);default:return m(B,f)}}function e(a){function b(c,d,e,f){var g=K;K=!0;try{return a(c,d,e,f)}finally{K=g}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate;b.assign=e(a.assign);b.constant=a.constant;b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=e(a.inputs[c]);b.inputs=a.inputs;return b}function f(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=hc(a),"object"===
typeof a)?!1:a===b||a!==a&&b!==b}function g(a,b,c,d,e){var g=d.inputs,h;if(1===g.length){var k=f,g=g[0];return a.$watch(function(a){var b=g(a);f(b,k)||(h=d(a,v,v,[b]),k=b&&hc(b));return h},b,c,e)}for(var l=[],m=[],r=0,s=g.length;r<s;r++)l[r]=f,m[r]=null;return a.$watch(function(a){for(var b=!1,c=0,e=g.length;c<e;c++){var k=g[c](a);if(b||(b=!f(k,l[c])))m[c]=k,l[c]=k&&hc(k)}b&&(h=d(a,v,v,m));return h},b,c,e)}function h(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;
D(b)&&b.apply(this,arguments);y(a)&&d.$$postDigest(function(){y(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;n(a,function(a){y(a)||(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a;D(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function l(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function m(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,c=c!==k&&c!==h?function(c,e,f,g){f=d&&g?g[0]:a(c,e,f,g);return b(f,
c,e)}:function(c,d,e,f){e=a(c,d,e,f);c=b(e,c,d);return y(e)?c:e};a.$$watchDelegate&&a.$$watchDelegate!==g?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=g,d=!a.inputs,c.inputs=a.inputs?a.inputs:[a]);return c}var r=Ea().noUnsafeEval,s={csp:r,expensiveChecks:!1},I={csp:r,expensiveChecks:!0},K=!1;c.$$runningExpensiveChecks=function(){return K};return c}]}function vf(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return wd(function(b){a.$evalAsync(b)},b)}]}function wf(){this.$get=
["$browser","$exceptionHandler",function(a,b){return wd(function(b){a.defer(b)},b)}]}function wd(a,b){function d(){this.$$state={status:0}}function c(a,b){return function(c){b.call(a,c)}}function e(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,a(function(){var a,d,e;e=c.pending;c.processScheduled=!1;c.pending=v;for(var f=0,g=e.length;f<g;++f){d=e[f][0];a=e[f][c.status];try{D(a)?d.resolve(a(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),b(h)}}}))}function f(){this.promise=
new d}var g=H("$q",TypeError);T(d.prototype,{then:function(a,b,c){if(x(a)&&x(b)&&x(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&e(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}});T(f.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(g("qcycle",
a)):this.$$resolve(a))},$$resolve:function(a){function d(a){k||(k=!0,h.$$resolve(a))}function f(a){k||(k=!0,h.$$reject(a))}var g,h=this,k=!1;try{if(E(a)||D(a))g=a&&a.then;D(g)?(this.promise.$$state.status=-1,g.call(a,d,f,c(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,e(this.promise.$$state))}catch(l){f(l),b(l)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;e(this.promise.$$state)},
notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;f<g;f++){e=d[f][0];a=d[f][3];try{e.notify(D(a)?a(c):c)}catch(h){b(h)}}})}});var h=function(a,b){var c=new f;b?c.resolve(a):c.reject(a);return c.promise},k=function(a,b,c){var d=null;try{D(c)&&(d=c())}catch(e){return h(e,!1)}return d&&D(d.then)?d.then(function(){return h(a,b)},function(a){return h(a,!1)}):h(a,b)},l=function(a,b,c,d){var e=new f;e.resolve(a);return e.promise.then(b,
c,d)},m=function(a){if(!D(a))throw g("norslvr",a);var b=new f;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};m.prototype=d.prototype;m.defer=function(){var a=new f;a.resolve=c(a,a.resolve);a.reject=c(a,a.reject);a.notify=c(a,a.notify);return a};m.reject=function(a){var b=new f;b.reject(a);return b.promise};m.when=l;m.resolve=l;m.all=function(a){var b=new f,c=0,d=L(a)?[]:{};n(a,function(a,e){c++;l(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||
b.reject(a)})});0===c&&b.resolve(d);return b.promise};return m}function Ff(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function uf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=
this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++pb;this.$$ChildScope=null}b.prototype=a;return b}var b=10,d=H("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,h){function k(a){a.currentScope.$$destroyed=!0}function l(a){9===xa&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=
a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++pb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function r(a){if(w.$$phase)throw d("inprog",w.$$phase);w.$$phase=a}function s(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function I(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&
delete a.$$listenerCount[c];while(a=a.$parent)}function q(){}function t(){for(;z.length;)try{z.shift()()}catch(a){f(a)}e=null}function p(){null===e&&(e=h.defer(function(){w.$apply(t)}))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!=this)&&d.$on("$destroy",
k);return d},$watch:function(a,b,d,e){var f=g(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:q,get:f,exp:e||a,eq:!!d};c=null;D(b)||(l.fn=B);k||(k=h.$$watchers=[]);k.unshift(l);s(this,1);return function(){0<=cb(k,l)&&s(h,-1);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=
!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});n(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!x(e)){if(E(e))if(Ca(e))for(f!==r&&(f=r,u=f.length=0,l++),a=e.length,u!==a&&(l++,f.length=u=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==s&&(f=s={},u=0,l++);a=0;for(b in e)sa.call(e,
b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(u++,f[b]=g,l++));if(u>a)for(b in l++,f)sa.call(e,b)||(u--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),r=[],s={},p=!0,u=0;return this.$watch(m,function(){p?(p=!1,b(e,e,d)):b(e,h,d);if(k)if(E(e))if(Ca(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)sa.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,k,l,m,s,p,n,I=b,z,y=[],x,C;
r("$digest");h.$$checkUrlChange();this===w&&null!==e&&(h.defer.cancel(e),t());c=null;do{n=!1;for(z=this;u.length;){try{C=u.shift(),C.scope.$eval(C.expression,C.locals)}catch(B){f(B)}c=null}a:do{if(s=z.$$watchers)for(p=s.length;p--;)try{if(a=s[p])if(m=a.get,(g=m(z))!==(k=a.last)&&!(a.eq?oa(g,k):"number"===typeof g&&"number"===typeof k&&isNaN(g)&&isNaN(k)))n=!0,c=a,a.last=a.eq?Oa(g,null):g,l=a.fn,l(g,k===q?g:k,z),5>I&&(x=4-I,y[x]||(y[x]=[]),y[x].push({msg:D(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):
a.exp,newVal:g,oldVal:k}));else if(a===c){n=!1;break a}}catch(E){f(E)}if(!(s=z.$$watchersCount&&z.$$childHead||z!==this&&z.$$nextSibling))for(;z!==this&&!(s=z.$$nextSibling);)z=z.$parent}while(z=s);if((n||u.length)&&!I--)throw w.$$phase=null,d("infdig",b,y);}while(n||u.length);for(w.$$phase=null;v.length;)try{v.shift()()}catch(H){f(H)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===w&&h.$$applicationDestroyed();s(this,-this.$$watchersCount);
for(var b in this.$$listenerCount)I(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=B;this.$on=this.$watch=this.$watchGroup=function(){return B};this.$$listeners={};this.$$nextSibling=
null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){w.$$phase||u.length||h.defer(function(){u.length&&w.$digest()});u.push({scope:this,expression:g(a),locals:b})},$$postDigest:function(a){v.push(a)},$apply:function(a){try{r("$apply");try{return this.$eval(a)}finally{w.$$phase=null}}catch(b){f(b)}finally{try{w.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&z.push(b);a=g(a);p()},$on:function(a,b){var c=this.$$listeners[a];
c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,I(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=db([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,
k)}catch(r){f(r)}else d.splice(l,1),l--,m--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=db([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&
c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var w=new m,u=w.$$asyncQueue=[],v=w.$$postDigestQueue=[],z=w.$$applyAsyncQueue=[];return w}]}function ne(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=
c?b:a,f;f=za(d).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function ng(a){if("self"===a)return a;if(F(a)){if(-1<a.indexOf("***"))throw Ba("iwcard",a);a=xd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+a+"$")}if($a(a))return new RegExp("^"+a.source+"$");throw Ba("imatcher");}function yd(a){var b=[];y(a)&&n(a,function(a){b.push(ng(a))});return b}function yf(){this.SCE_CONTEXTS=qa;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=yd(b));return a};
this.resourceUrlBlacklist=function(a){arguments.length&&(b=yd(a));return b};this.$get=["$injector",function(d){function c(a,b){return"self"===a?jd(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw Ba("unsafe");};d.has("$sanitize")&&(f=d.get("$sanitize"));
var g=e(),h={};h[qa.HTML]=e(g);h[qa.CSS]=e(g);h[qa.URL]=e(g);h[qa.JS]=e(g);h[qa.RESOURCE_URL]=e(h[qa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ba("icontext",a,b);if(null===b||x(b)||""===b)return b;if("string"!==typeof b)throw Ba("itype",a);return new c(b)},getTrusted:function(d,e){if(null===e||x(e)||""===e)return e;var g=h.hasOwnProperty(d)?h[d]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(d===qa.RESOURCE_URL){var g=za(e.toString()),r,s,n=!1;
r=0;for(s=a.length;r<s;r++)if(c(a[r],g)){n=!0;break}if(n)for(r=0,s=b.length;r<s;r++)if(c(b[r],g)){n=!1;break}if(n)return e;throw Ba("insecurl",e.toString());}if(d===qa.HTML)return f(e);throw Ba("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function xf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>xa)throw Ba("iequirks");var c=na(qa);c.isEnabled=function(){return a};c.trustAs=d.trustAs;
c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=ab);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;n(qa,function(a,b){var d=G(b);c[gb("parse_as_"+d)]=function(b){return e(a,b)};c[gb("get_trusted_"+d)]=function(b){return f(a,b)};c[gb("trust_as_"+d)]=function(b){return g(a,b)}});return c}]}function zf(){this.$get=["$window","$document",
function(a,b){var d={},c=ca((/android (\d+)/.exec(G((a.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((a.navigator||{}).userAgent),f=b[0]||{},g,h=/^(Moz|webkit|ms)(?=[A-Z])/,k=f.body&&f.body.style,l=!1,m=!1;if(k){for(var r in k)if(l=h.exec(r)){g=l[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in k&&"webkit");l=!!("transition"in k||g+"Transition"in k);m=!!("animation"in k||g+"Animation"in k);!c||l&&m||(l=F(k.webkitTransition),m=F(k.webkitAnimation))}return{history:!(!a.history||
!a.history.pushState||4>c||e),hasEvent:function(a){if("input"===a&&11>=xa)return!1;if(x(d[a])){var b=f.createElement("div");d[a]="on"+a in b}return d[a]},csp:Ea(),vendorPrefix:g,transitions:l,animations:m,android:c}}]}function Bf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$templateCache","$http","$q","$sce",function(b,d,c,e){function f(g,h){f.totalPendingRequests++;F(g)&&b.get(g)||(g=e.getTrustedResourceUrl(g));var k=d.defaults&&d.defaults.transformResponse;L(k)?k=k.filter(function(a){return a!==
cc}):k===cc&&(k=null);return d.get(g,T({cache:b,transformResponse:k},a))["finally"](function(){f.totalPendingRequests--}).then(function(a){b.put(g,a.data);return a.data},function(a){if(!h)throw ja("tpload",g,a.status,a.statusText);return c.reject(a)})}f.totalPendingRequests=0;return f}]}function Cf(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];n(a,function(a){var c=ia.element(a).data("$binding");
c&&n(c,function(c){d?(new RegExp("(^|\\s)"+xd(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!=c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var k=a.querySelectorAll("["+g[h]+"model"+(d?"=":"*=")+'"'+b+'"]');if(k.length)return k}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Df(){this.$get=["$rootScope",
"$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,k,l){D(f)||(l=k,k=f,f=B);var m=wa.call(arguments,3),r=y(l)&&!l,s=(r?c:d).defer(),n=s.promise,q;q=b.defer(function(){try{s.resolve(f.apply(null,m))}catch(b){s.reject(b),e(b)}finally{delete g[n.$$timeoutId]}r||a.$apply()},k);n.$$timeoutId=q;g[q]=s;return n}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function za(a){xa&&
(Y.setAttribute("href",a),a=Y.href);Y.setAttribute("href",a);return{href:Y.href,protocol:Y.protocol?Y.protocol.replace(/:$/,""):"",host:Y.host,search:Y.search?Y.search.replace(/^\?/,""):"",hash:Y.hash?Y.hash.replace(/^#/,""):"",hostname:Y.hostname,port:Y.port,pathname:"/"===Y.pathname.charAt(0)?Y.pathname:"/"+Y.pathname}}function jd(a){a=F(a)?za(a):a;return a.protocol===zd.protocol&&a.host===zd.host}function Ef(){this.$get=ba(O)}function Ad(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}
var d=a[0]||{},c={},e="";return function(){var a,g,h,k,l;a=d.cookie||"";if(a!==e)for(e=a,a=e.split("; "),c={},h=0;h<a.length;h++)g=a[h],k=g.indexOf("="),0<k&&(l=b(g.substring(0,k)),x(c[l])&&(c[l]=b(g.substring(k+1))));return c}}function If(){this.$get=Ad}function Lc(a){function b(d,c){if(E(d)){var e={};n(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",Bd);b("date",Cd);
b("filter",og);b("json",pg);b("limitTo",qg);b("lowercase",rg);b("number",Dd);b("orderBy",Ed);b("uppercase",sg)}function og(){return function(a,b,d){if(!Ca(a)){if(null==a)return a;throw H("filter")("notarray",a);}var c;switch(kc(b)){case "function":break;case "boolean":case "null":case "number":case "string":c=!0;case "object":b=tg(b,d,c);break;default:return a}return Array.prototype.filter.call(a,b)}}function tg(a,b,d){var c=E(a)&&"$"in a;!0===b?b=oa:D(b)||(b=function(a,b){if(x(a))return!1;if(null===
a||null===b)return a===b;if(E(b)||E(a)&&!tc(a))return!1;a=G(""+a);b=G(""+b);return-1!==a.indexOf(b)});return function(e){return c&&!E(e)?La(e,a.$,b,!1):La(e,a,b,d)}}function La(a,b,d,c,e){var f=kc(a),g=kc(b);if("string"===g&&"!"===b.charAt(0))return!La(a,b.substring(1),d,c);if(L(a))return a.some(function(a){return La(a,b,d,c)});switch(f){case "object":var h;if(c){for(h in a)if("$"!==h.charAt(0)&&La(a[h],b,d,!0))return!0;return e?!1:La(a,b,d,!1)}if("object"===g){for(h in b)if(e=b[h],!D(e)&&!x(e)&&
(f="$"===h,!La(f?a:a[h],e,d,f,f)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function kc(a){return null===a?"null":typeof a}function Bd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){x(c)&&(c=b.CURRENCY_SYM);x(e)&&(e=b.PATTERNS[1].maxFrac);return null==a?a:Fd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(/\u00A4/g,c)}}function Dd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Fd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function ug(a){var b=
0,d,c,e,f,g;-1<(c=a.indexOf(Gd))&&(a=a.replace(Gd,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)==lc;e++);if(e==(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)==lc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Hd&&(d=d.splice(0,Hd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function vg(a,b,d,c){var e=a.d,f=e.length-a.i;b=x(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d)e.splice(d);else{a.i=1;e.length=d=b+1;for(var g=0;g<d;g++)e[g]=
0}for(5<=c&&e[d-1]++;f<b;f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Fd(a,b,d,c,e){if(!F(a)&&!N(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k="\u221e";else{g=ug(h);vg(g,e,b.minFrac,b.maxFrac);k=g.d;h=g.i;e=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h):(f=k,k=[0]);h=[];for(k.length>b.lgSize&&h.unshift(k.splice(-b.lgSize).join(""));k.length>b.gSize;)h.unshift(k.splice(-b.gSize).join(""));
k.length&&h.unshift(k.join(""));k=h.join(d);f.length&&(k+=c+f.join(""));e&&(k+="e+"+e)}return 0>a&&!g?b.negPre+k+b.negSuf:b.posPre+k+b.posSuf}function Kb(a,b,d){var c="";0>a&&(c="-",a=-a);for(a=""+a;a.length<b;)a=lc+a;d&&(a=a.substr(a.length-b));return c+a}function aa(a,b,d,c){d=d||0;return function(e){e=e["get"+a]();if(0<d||e>-d)e+=d;0===e&&-12==d&&(e=12);return Kb(e,b,c)}}function Lb(a,b){return function(d,c){var e=d["get"+a](),f=ub(b?"SHORT"+a:a);return c[f][e]}}function Id(a){var b=(new Date(a,
0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Jd(a){return function(b){var d=Id(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Kb(b,a)}}function mc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Cd(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,k=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=ca(b[9]+b[10]),g=ca(b[9]+b[11]));h.call(a,ca(b[1]),ca(b[2])-
1,ca(b[3]));f=ca(b[4]||0)-f;g=ca(b[5]||0)-g;h=ca(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));k.call(a,f,g,h,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;F(c)&&(c=wg.test(c)?ca(c):b(c));N(c)&&(c=new Date(c));if(!V(c)||!isFinite(c.getTime()))return c;for(;d;)(l=xg.exec(d))?(h=db(h,l,1),d=h.pop()):(h.push(d),d=null);var m=c.getTimezoneOffset();
f&&(m=xc(f,m),c=Tb(c,f,!0));n(h,function(b){k=yg[b];g+=k?k(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function pg(){return function(a,b){x(b)&&(b=2);return eb(a,b)}}function qg(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):ca(b);if(isNaN(b))return a;N(a)&&(a=a.toString());if(!L(a)&&!F(a))return a;d=!d||isNaN(d)?0:ca(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?a.slice(d,d+b):0===d?a.slice(b,a.length):a.slice(Math.max(0,d+b),
d)}}function Ed(a){function b(b,d){d=d?-1:1;return b.map(function(b){var c=1,h=ab;if(D(b))h=b;else if(F(b)){if("+"==b.charAt(0)||"-"==b.charAt(0))c="-"==b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(h=a(b),h.constant))var k=h(),h=function(a){return a[k]}}return{get:h,descending:c*d}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}return function(a,e,f){if(null==a)return a;if(!Ca(a))throw H("orderBy")("notarray",a);L(e)||(e=[e]);0===e.length&&
(e=["+"]);var g=b(e,f);g.push({get:function(){return{}},descending:f?-1:1});a=Array.prototype.map.call(a,function(a,b){return{value:a,predicateValues:g.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("string"===c)e=e.toLowerCase();else if("object"===c)a:{if("function"===typeof e.valueOf&&(e=e.valueOf(),d(e)))break a;if(tc(e)&&(e=e.toString(),d(e)))break a;e=b}return{value:e,type:c}})}});a.sort(function(a,b){for(var c=0,d=0,e=g.length;d<e;++d){var c=a.predicateValues[d],
f=b.predicateValues[d],n=0;c.type===f.type?c.value!==f.value&&(n=c.value<f.value?-1:1):n=c.type<f.type?-1:1;if(c=n*g[d].descending)break}return c});return a=a.map(function(a){return a.value})}}function Ma(a){D(a)&&(a={link:a});a.restrict=a.restrict||"AC";return ba(a)}function Kd(a,b,d,c,e){var f=this,g=[];f.$error={};f.$$success={};f.$pending=v;f.$name=e(b.name||b.ngForm||"")(d);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;f.$$parentForm=Mb;f.$rollbackViewValue=function(){n(g,
function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){n(g,function(a){a.$commitViewValue()})};f.$addControl=function(a){Ta(a.$name,"input");g.push(a);a.$name&&(f[a.$name]=a);a.$$parentForm=f};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=a;a.$name=b};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];n(f.$pending,function(b,c){f.$setValidity(c,null,a)});n(f.$error,function(b,c){f.$setValidity(c,null,a)});n(f.$$success,function(b,c){f.$setValidity(c,
null,a)});cb(g,a);a.$$parentForm=Mb};Ld({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(cb(d,c),0===d.length&&delete a[b])},$animate:c});f.$setDirty=function(){c.removeClass(a,Ya);c.addClass(a,Nb);f.$dirty=!0;f.$pristine=!1;f.$$parentForm.$setDirty()};f.$setPristine=function(){c.setClass(a,Ya,Nb+" ng-submitted");f.$dirty=!1;f.$pristine=!0;f.$submitted=!1;n(g,function(a){a.$setPristine()})};f.$setUntouched=function(){n(g,
function(a){a.$setUntouched()})};f.$setSubmitted=function(){c.addClass(a,"ng-submitted");f.$submitted=!0;f.$$parentForm.$setSubmitted()}}function nc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function lb(a,b,d,c,e,f){var g=G(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(a){h=!0});b.on("compositionend",function(){h=!1;k()})}var k=function(a){l&&(f.defer.cancel(l),l=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&"false"===d.ngTrim||
(e=X(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",k);else{var l,m=function(a,b,c){l||(l=f.defer(function(){l=null;b&&b.value===c||k(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",m)}b.on("change",k);c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Ob(a,b){return function(d,c){var e,
f;if(V(d))return d;if(F(d)){'"'==d.charAt(0)&&'"'==d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(zg.test(d))return new Date(d);a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},n(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function mb(a,b,d,c){return function(e,
f,g,h,k,l,m){function r(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function s(a){return y(a)&&!V(a)?d(a)||v:a}Md(e,f,g,h);lb(e,f,g,h,k,l);var n=h&&h.$options&&h.$options.timezone,q;h.$$parserName=a;h.$parsers.push(function(a){return h.$isEmpty(a)?null:b.test(a)?(a=d(a,q),n&&(a=Tb(a,n)),a):v});h.$formatters.push(function(a){if(a&&!V(a))throw nb("datefmt",a);if(r(a))return(q=a)&&n&&(q=Tb(q,n,!0)),m("date")(a,c,n);q=null;return""});if(y(g.min)||g.ngMin){var t;h.$validators.min=function(a){return!r(a)||
x(t)||d(a)>=t};g.$observe("min",function(a){t=s(a);h.$validate()})}if(y(g.max)||g.ngMax){var p;h.$validators.max=function(a){return!r(a)||x(p)||d(a)<=p};g.$observe("max",function(a){p=s(a);h.$validate()})}}}function Md(a,b,d,c){(c.$$hasNativeValidators=E(b[0].validity))&&c.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?v:a})}function Nd(a,b,d,c,e){if(y(c)){a=a(c);if(!a.constant)throw nb("constexpr",d,c);return a(b)}return e}function oc(a,b){a="ngClass"+a;
return["$animate",function(d){function c(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){var b=[];return L(a)?(n(a,function(a){b=b.concat(e(a))}),b):F(a)?a.split(" "):E(a)?(n(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(f,g,h){function k(a,b){var c=g.data("$classCounts")||Z(),d=[];n(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",
c);return d.join(" ")}function l(a){if(!0===b||f.$index%2===b){var l=e(a||[]);if(!m){var n=k(l,1);h.$addClass(n)}else if(!oa(a,m)){var q=e(m),n=c(l,q),l=c(q,l),n=k(n,1),l=k(l,-1);n&&n.length&&d.addClass(g,n);l&&l.length&&d.removeClass(g,l)}}m=na(a)}var m;f.$watch(h[a],l,!0);h.$observe("class",function(b){l(f.$eval(h[a]))});"ngClass"!==a&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var l=e(f.$eval(h[a]));g===b?(g=k(l,1),h.$addClass(g)):(g=k(l,-1),h.$removeClass(g))}})}}}]}function Ld(a){function b(a,
b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function d(a,c){a=a?"-"+Bc(a,"-"):"";b(ob+a,!0===c);b(Od+a,!1===c)}var c=a.ctrl,e=a.$element,f={},g=a.set,h=a.unset,k=a.$animate;f[Od]=!(f[ob]=e.hasClass(ob));c.$setValidity=function(a,e,f){x(e)?(c.$pending||(c.$pending={}),g(c.$pending,a,f)):(c.$pending&&h(c.$pending,a,f),Pd(c.$pending)&&(c.$pending=v));Na(e)?e?(h(c.$error,a,f),g(c.$$success,a,f)):(g(c.$error,a,f),h(c.$$success,a,f)):(h(c.$error,a,f),h(c.$$success,a,f));
c.$pending?(b(Qd,!0),c.$valid=c.$invalid=v,d("",null)):(b(Qd,!1),c.$valid=Pd(c.$error),c.$invalid=!c.$valid,d("",c.$valid));e=c.$pending&&c.$pending[a]?v:c.$error[a]?!1:c.$$success[a]?!0:null;d(a,e);c.$$parentForm.$setValidity(a,e,c)}}function Pd(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var Ag=/^\/(.+)\/([a-z]*)$/,sa=Object.prototype.hasOwnProperty,G=function(a){return F(a)?a.toLowerCase():a},ub=function(a){return F(a)?a.toUpperCase():a},xa,C,ua,wa=[].slice,ag=[].splice,Bg=
[].push,ga=Object.prototype.toString,uc=Object.getPrototypeOf,Da=H("ng"),ia=O.angular||(O.angular={}),Vb,pb=0;xa=W.documentMode;B.$inject=[];ab.$inject=[];var L=Array.isArray,ae=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,X=function(a){return F(a)?a.trim():a},xd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ea=function(){if(!y(Ea.rules)){var a=W.querySelector("[ng-csp]")||W.querySelector("[data-ng-csp]");
if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ea.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ea;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ea.rules},rb=function(){if(y(rb.name_))return rb.name_;var a,b,d=Qa.length,c,e;for(b=0;b<d;++b)if(c=Qa[b],a=W.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return rb.name_=e},de=/:/g,Qa=["ng-",
"data-ng-","ng:","x-ng-"],ie=/[A-Z]/g,Cc=!1,Pa=3,me={full:"1.5.0",major:1,minor:5,dot:0,codeName:"ennoblement-facilitation"};U.expando="ng339";var ib=U.cache={},Of=1;U._data=function(a){return this.cache[a[this.expando]]||{}};var Jf=/([\:\-\_]+(.))/g,Kf=/^moz([A-Z])/,yb={mouseleave:"mouseout",mouseenter:"mouseover"},Xb=H("jqLite"),Nf=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Wb=/<|&#?\w+;/,Lf=/<([\w:-]+)/,Mf=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,da={option:[1,'<select multiple="multiple">',
"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};da.optgroup=da.option;da.tbody=da.tfoot=da.colgroup=da.caption=da.thead;da.th=da.td;var Tf=Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Ra=U.prototype={ready:function(a){function b(){d||(d=!0,a())}var d=!1;"complete"===W.readyState?setTimeout(b):(this.on("DOMContentLoaded",
b),U(O).on("load",b))},toString:function(){var a=[];n(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?C(this[a]):C(this[this.length+a])},length:0,push:Bg,sort:[].sort,splice:[].splice},Db={};n("multiple selected checked disabled readOnly required open".split(" "),function(a){Db[G(a)]=a});var Uc={};n("input select option textarea button form details".split(" "),function(a){Uc[a]=!0});var cd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",
ngPattern:"pattern"};n({data:Zb,removeData:hb,hasData:function(a){for(var b in ib[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)hb(a[b])}},function(a,b){U[b]=a});n({data:Zb,inheritedData:Cb,scope:function(a){return C.data(a,"$scope")||Cb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return C.data(a,"$isolateScope")||C.data(a,"$isolateScopeNoTemplate")},controller:Rc,injector:function(a){return Cb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},
hasClass:zb,css:function(a,b,d){b=gb(b);if(y(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Pa&&2!==c&&8!==c)if(c=G(b),Db[c])if(y(d))d?(a[b]=!0,a.setAttribute(b,c)):(a[b]=!1,a.removeAttribute(c));else return a[b]||(a.attributes.getNamedItem(b)||B).specified?c:v;else if(y(d))a.setAttribute(b,d);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?v:a},prop:function(a,b,d){if(y(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(x(d)){var c=a.nodeType;
return 1===c||c===Pa?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(x(b)){if(a.multiple&&"select"===ra(a)){var d=[];n(a.options,function(a){a.selected&&d.push(a.value||a.text)});return 0===d.length?null:d}return a.value}a.value=b},html:function(a,b){if(x(b))return a.innerHTML;wb(a,!0);a.innerHTML=b},empty:Sc},function(a,b){U.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==Sc&&x(2==a.length&&a!==zb&&a!==Rc?b:c)){if(E(b)){for(e=0;e<g;e++)if(a===Zb)a(this[e],b);else for(f in b)a(this[e],
f,b[f]);return this}e=a.$dv;g=x(e)?Math.min(g,1):g;for(f=0;f<g;f++){var h=a(this[f],b,c);e=e?e+h:h}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});n({removeData:hb,on:function(a,b,d,c){if(y(c))throw Xb("onargs");if(Mc(a)){c=xb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=Qf(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,h=function(b,c,g){var h=e[b];h||(h=e[b]=[],h.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f,!1));h.push(d)};g--;)b=c[g],yb[b]?(h(yb[b],Sf),
h(b,v,!0)):h(b)}},off:Qc,one:function(a,b,d){a=C(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;wb(a);n(new U(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];n(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new U(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},
prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;n(new U(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){Oc(a,C(b).eq(0).clone()[0])},remove:$b,detach:function(a){$b(a,!0)},after:function(a,b){var d=a,c=a.parentNode;b=new U(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}},addClass:Bb,removeClass:Ab,toggleClass:function(a,b,d){b&&n(b.split(" "),function(b){var e=d;x(e)&&(e=!zb(a,b));(e?Bb:Ab)(a,b)})},parent:function(a){return(a=a.parentNode)&&
11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Yb,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=xb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},
stopPropagation:B,type:f,target:a},b.type&&(c=T(c,b)),b=na(g),e=d?[c].concat(d):[c],n(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){U.prototype[b]=function(b,c,e){for(var f,g=0,h=this.length;g<h;g++)x(f)?(f=a(this[g],b,c,e),y(f)&&(f=C(f))):Pc(f,a(this[g],b,c,e));return y(f)?f:this};U.prototype.bind=U.prototype.on;U.prototype.unbind=U.prototype.off});Ua.prototype={put:function(a,b){this[Fa(a,this.nextUid)]=b},get:function(a){return this[Fa(a,this.nextUid)]},remove:function(a){var b=
this[a=Fa(a,this.nextUid)];delete this[a];return b}};var Hf=[function(){this.$get=[function(){return Ua}]}],Vf=/^([^\(]+?)=>/,Wf=/^[^\(]*\(\s*([^\)]*)\)/m,Cg=/,/,Dg=/^\s*(_?)(\S+?)\1\s*$/,Uf=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ga=H("$injector");fb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw F(d)&&d||(d=a.name||Xf(a)),Ga("strictdi",d);b=Vc(a);n(b[1].split(Cg),function(a){a.replace(Dg,function(a,b,d){c.push(d)})})}a.$inject=c}}else L(a)?
(b=a.length-1,Sa(a[b],"fn"),c=a.slice(0,b)):Sa(a,"fn",!0);return c};var Rd=H("$animate"),$e=function(){this.$get=function(){}},af=function(){var a=new Ua,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=F(b)?b.split(" "):L(b)?b:[],n(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){n(b,function(b){var c=a.get(b);if(c){var d=Yf(b.attr("class")),e="",f="";n(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});n(b,function(a){e&&
Bb(a,e);f&&Ab(a,f)});a.remove(b)}});b.length=0}return{enabled:B,on:B,off:B,pin:B,push:function(g,h,k,l){l&&l();k=k||{};k.from&&g.css(k.from);k.to&&g.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(g)||{},h=e(k,h,!0),l=e(k,l,!1),h||l)a.put(g,k),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},Ye=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null);this.register=function(d,c){if(d&&"."!==d.charAt(0))throw Rd("notcsel",
d);var e=d+"-animation";b.$$registeredAnimations[d.substr(1)]=e;a.factory(e,c)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Rd("nongcls","ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var h;a:{for(h=0;h<d.length;h++){var k=d[h];if(1===k.nodeType){h=k;break a}}h=void 0}!h||h.parentNode||h.previousElementSibling||
(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(e,f,g,h){f=f&&C(f);g=g&&C(g);f=f||g.parent();b(e,f,g);return a.push(e,"enter",Ha(h))},move:function(e,f,g,h){f=f&&C(f);g=g&&C(g);f=f||g.parent();b(e,f,g);return a.push(e,"move",Ha(h))},leave:function(b,c){return a.push(b,"leave",Ha(c),function(){b.remove()})},addClass:function(b,c,g){g=Ha(g);g.addClass=jb(g.addclass,c);return a.push(b,"addClass",g)},removeClass:function(b,
c,g){g=Ha(g);g.removeClass=jb(g.removeClass,c);return a.push(b,"removeClass",g)},setClass:function(b,c,g,h){h=Ha(h);h.addClass=jb(h.addClass,c);h.removeClass=jb(h.removeClass,g);return a.push(b,"setClass",h)},animate:function(b,c,g,h,k){k=Ha(k);k.from=k.from?T(k.from,c):c;k.to=k.to?T(k.to,g):g;k.tempClasses=jb(k.tempClasses,h||"ng-inline-animate");return a.push(b,"animate",k)}}}]}],cf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();
d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},bf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){var d=c[0];d&&d.hidden?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===
a.length&&b(e)}var d=0,e=!0;n(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:B,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&
this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(n(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},Ze=function(){this.$get=["$$rAF","$q","$$AnimateRunner",
function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);h||k.complete();h=!0});return k}var g=e||{};g.$$prepared||(g=Oa(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var h,k=new d;return{start:f,end:f}}}]},ja=H("$compile");Ec.$inject=["$provide","$$sanitizeUriProvider"];var Xc=/^((?:x|data)[\:\-_])/i,bg=H("$controller"),
dd=/^(\S+)(\s+as\s+([\w$]+))?$/,jf=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof C&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},ed="application/json",dc={"Content-Type":ed+";charset=utf-8"},dg=/^\[|^\{(?!\{)/,eg={"[":/]$/,"{":/}$/},cg=/^\)\]\}',?\n/,Eg=H("$http"),id=function(a){return function(){throw Eg("legacy",a);}},Ka=ia.$interpolateMinErr=H("$interpolate");Ka.throwNoconcat=function(a){throw Ka("noconcat",a);};Ka.interr=function(a,b){return Ka("interr",
a,b.toString())};var Fg=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,gg={http:80,https:443,ftp:21},Gb=H("$location"),Gg={$$html5:!1,$$replace:!1,absUrl:Hb("$$absUrl"),url:function(a){if(x(a))return this.$$url;var b=Fg.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Hb("$$protocol"),host:Hb("$$host"),port:Hb("$$port"),path:nd("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,
b){switch(arguments.length){case 0:return this.$$search;case 1:if(F(a)||N(a))a=a.toString(),this.$$search=zc(a);else if(E(a))a=Oa(a,{}),n(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw Gb("isrcharg");break;default:x(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:nd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};n([md,gc,fc],function(a){a.prototype=Object.create(Gg);a.prototype.state=
function(b){if(!arguments.length)return this.$$state;if(a!==fc||!this.$$html5)throw Gb("nostate");this.$$state=x(b)?null:b;return this}});var ka=H("$parse"),ig=Function.prototype.call,jg=Function.prototype.apply,kg=Function.prototype.bind,Pb=Z();n("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Pb[a]=!0});var Hg={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},ic=function(a){this.options=a};ic.prototype={constructor:ic,lex:function(a){this.text=a;this.index=0;for(this.tokens=
[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(a))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Pb[b],e=Pb[d];Pb[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=
a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===
a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=y(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw ka("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=G(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"==d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||
c&&this.isNumber(c)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,e=!1;this.index<this.text.length;){var f=
this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=Hg[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var q=function(a,b){this.lexer=a;this.options=b};q.Program="Program";q.ExpressionStatement=
"ExpressionStatement";q.AssignmentExpression="AssignmentExpression";q.ConditionalExpression="ConditionalExpression";q.LogicalExpression="LogicalExpression";q.BinaryExpression="BinaryExpression";q.UnaryExpression="UnaryExpression";q.CallExpression="CallExpression";q.MemberExpression="MemberExpression";q.Identifier="Identifier";q.Literal="Literal";q.ArrayExpression="ArrayExpression";q.Property="Property";q.ObjectExpression="ObjectExpression";q.ThisExpression="ThisExpression";q.LocalsExpression="LocalsExpression";
q.NGValueParameter="NGValueParameter";q.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:q.Program,body:a}},expressionStatement:function(){return{type:q.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=
this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();this.expect("=")&&(a={type:q.AssignmentExpression,left:a,right:this.assignment(),operator:"="});return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:q.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a=
{type:q.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:q.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:q.BinaryExpression,
operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:q.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:
this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.constants.hasOwnProperty(this.peek().text)?a=Oa(this.constants[this.consume().text]):this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:q.CallExpression,callee:a,arguments:this.parseArguments()},
this.consume(")")):"["===b.text?(a={type:q.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:q.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:q.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.expression());
while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:q.Identifier,name:a.text}},constant:function(){return{type:q.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:q.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
b={type:q.Property,kind:"init"};this.peek().constant?b.key=this.constant():this.peek().identifier?b.key=this.identifier():this.throwError("invalid key",this.peek());this.consume(":");b.value=this.expression();a.push(b)}while(this.expect(","))}this.consume("}");return{type:q.ObjectExpression,properties:a}},throwError:function(a,b){throw ka("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw ka("ueoe",this.text);var b=this.expect(a);
b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw ka("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},constants:{"true":{type:q.Literal,value:!0},
"false":{type:q.Literal,value:!1},"null":{type:q.Literal,value:null},undefined:{type:q.Literal,value:v},"this":{type:q.ThisExpression},$locals:{type:q.LocalsExpression}}};ud.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};R(c,d.$filter);var e="",f;this.stage="assign";if(f=sd(c))this.state.computing="assign",e=this.nextId(),this.recurse(f,e),this.return_(e),
e="fn.assign="+this.generateFunction("assign","s,v,l");f=qd(c.body);d.stage="inputs";n(f,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}};d.state.computing=c;var e=d.nextId();d.recurse(a,e);d.return_(e);d.state.inputs.push(c);a.watchId=b});this.state.computing="fn";this.stage="main";this.recurse(c);e='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+e+this.watchFns()+"return fn;";e=(new Function("$filter","ensureSafeMemberName","ensureSafeObject",
"ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",e))(this.$filter,Xa,Aa,od,hg,Ib,lg,pd,a);this.state=this.stage=v;e.literal=td(c);e.constant=c.constant;return e},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;n(b,function(b){a.push("var "+b+"="+d.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+
"};"},filterPrefix:function(){var a=[],b=this;n(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,h,k=this,l,m;c=c||B;if(!f&&y(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,
c,e,!0));else switch(a.type){case q.Program:n(a.body,function(b,c){k.recurse(b.expression,v,v,function(a){h=a});c!==a.body.length-1?k.current().body.push(h,";"):k.return_(h)});break;case q.Literal:m=this.escape(a.value);this.assign(b,m);c(m);break;case q.UnaryExpression:this.recurse(a.argument,v,v,function(a){h=a});m=a.operator+"("+this.ifDefined(h,0)+")";this.assign(b,m);c(m);break;case q.BinaryExpression:this.recurse(a.left,v,v,function(a){g=a});this.recurse(a.right,v,v,function(a){h=a});m="+"===
a.operator?this.plus(g,h):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(h,0):"("+g+")"+a.operator+"("+h+")";this.assign(b,m);c(m);break;case q.LogicalExpression:b=b||this.nextId();k.recurse(a.left,b);k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,b));c(b);break;case q.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));c(b);break;case q.Identifier:b=b||this.nextId();d&&(d.context="inputs"===k.stage?
"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);Xa(a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){e&&1!==e&&k.if_(k.not(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));(k.state.expensiveChecks||Jb(a.name))&&k.addEnsureSafeObject(b);c(b);
break;case q.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();k.recurse(a.object,g,v,function(){k.if_(k.notNull(g),function(){e&&1!==e&&k.addEnsureSafeAssignContext(g);if(a.computed)h=k.nextId(),k.recurse(a.property,h),k.getStringValue(h),k.addEnsureSafeMemberName(h),e&&1!==e&&k.if_(k.not(k.computedMember(g,h)),k.lazyAssign(k.computedMember(g,h),"{}")),m=k.ensureSafeObject(k.computedMember(g,h)),k.assign(b,m),d&&(d.computed=!0,d.name=h);else{Xa(a.property.name);e&&
1!==e&&k.if_(k.not(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}"));m=k.nonComputedMember(g,a.property.name);if(k.state.expensiveChecks||Jb(a.property.name))m=k.ensureSafeObject(m);k.assign(b,m);d&&(d.computed=!1,d.name=a.property.name)}},function(){k.assign(b,"undefined")});c(b)},!!e);break;case q.CallExpression:b=b||this.nextId();a.filter?(h=k.filter(a.callee.name),l=[],n(a.arguments,function(a){var b=k.nextId();k.recurse(a,b);l.push(b)}),m=h+"("+
l.join(",")+")",k.assign(b,m),c(b)):(h=k.nextId(),g={},l=[],k.recurse(a.callee,h,g,function(){k.if_(k.notNull(h),function(){k.addEnsureSafeFunction(h);n(a.arguments,function(a){k.recurse(a,k.nextId(),v,function(a){l.push(k.ensureSafeObject(a))})});g.name?(k.state.expensiveChecks||k.addEnsureSafeObject(g.context),m=k.member(g.context,g.name,g.computed)+"("+l.join(",")+")"):m=h+"("+l.join(",")+")";m=k.ensureSafeObject(m);k.assign(b,m)},function(){k.assign(b,"undefined")});c(b)}));break;case q.AssignmentExpression:h=
this.nextId();g={};if(!rd(a.left))throw ka("lval");this.recurse(a.left,v,g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,h);k.addEnsureSafeObject(k.member(g.context,g.name,g.computed));k.addEnsureSafeAssignContext(g.context);m=k.member(g.context,g.name,g.computed)+a.operator+h;k.assign(b,m);c(b||m)})},1);break;case q.ArrayExpression:l=[];n(a.elements,function(a){k.recurse(a,k.nextId(),v,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(m);break;case q.ObjectExpression:l=
[];n(a.properties,function(a){k.recurse(a.value,k.nextId(),v,function(b){l.push(k.escape(a.key.type===q.Identifier?a.key.name:""+a.key.value)+":"+b)})});m="{"+l.join(",")+"}";this.assign(b,m);c(m);break;case q.ThisExpression:this.assign(b,"s");c("s");break;case q.LocalsExpression:this.assign(b,"l");c("l");break;case q.NGValueParameter:this.assign(b,"v"),c("v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+
a+")"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");
d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){return a+"."+b},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),
";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,d,c,e,f){var g=
this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(F(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(N(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw ka("esc");},nextId:function(a,
b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};vd.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.expression=a;this.expensiveChecks=b;R(c,d.$filter);var e,f;if(e=sd(c))f=this.recurse(e);e=qd(c.body);var g;e&&(g=[],n(e,function(a,b){var c=d.recurse(a);a.input=c;g.push(c);a.watchId=b}));var h=[];n(c.body,function(a){h.push(d.recurse(a.expression))});e=0===c.body.length?function(){}:
1===c.body.length?h[0]:function(a,b){var c;n(h,function(d){c=d(a,b)});return c};f&&(e.assign=function(a,b,c){return f(a,c,b)});g&&(e.inputs=g);e.literal=td(c);e.constant=c.constant;return e},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case q.Literal:return this.value(a.value,b);case q.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case q.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),
this["binary"+a.operator](c,e,b);case q.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case q.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case q.Identifier:return Xa(a.name,f.expression),f.identifier(a.name,f.expensiveChecks||Jb(a.name),b,d,f.expression);case q.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(Xa(a.property.name,f.expression),
e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d,f.expression):this.nonComputedMember(c,e,f.expensiveChecks,b,d,f.expression);case q.CallExpression:return g=[],n(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var r=[],n=0;n<g.length;++n)r.push(g[n](a,c,d,f));a=e.apply(v,r,f);return b?{context:v,name:v,value:a}:a}:function(a,c,d,m){var r=
e(a,c,d,m),n;if(null!=r.value){Aa(r.context,f.expression);od(r.value,f.expression);n=[];for(var q=0;q<g.length;++q)n.push(Aa(g[q](a,c,d,m),f.expression));n=Aa(r.value.apply(r.context,n),f.expression)}return b?{value:n}:n};case q.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,g,m){var r=c(a,d,g,m);a=e(a,d,g,m);Aa(r.value,f.expression);Ib(r.context);r.context[r.name]=a;return b?{value:a}:a};case q.ArrayExpression:return g=[],n(a.elements,function(a){g.push(f.recurse(a))}),
function(a,c,d,e){for(var f=[],n=0;n<g.length;++n)f.push(g[n](a,c,d,e));return b?{value:f}:f};case q.ObjectExpression:return g=[],n(a.properties,function(a){g.push({key:a.key.type===q.Identifier?a.key.name:""+a.key.value,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},n=0;n<g.length;++n)f[g[n].key]=g[n].value(a,c,d,e);return b?{value:f}:f};case q.ThisExpression:return function(a){return b?{value:a}:a};case q.LocalsExpression:return function(a,c){return b?{value:c}:c};case q.NGValueParameter:return function(a,
c,d,e){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=y(d)?+d:0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=y(d)?-d:0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=pd(h,c);return d?{value:h}:h}},"binary-":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);
h=(y(h)?h:0)-(y(c)?c:0);return d?{value:h}:h}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,
e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,
g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h)?b(e,f,g,h):d(e,f,g,h);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:v,
name:v,value:a}:a}},identifier:function(a,b,d,c,e){return function(f,g,h,k){f=g&&a in g?g:f;c&&1!==c&&f&&!f[a]&&(f[a]={});g=f?f[a]:v;b&&Aa(g,e);return d?{context:f,name:a,value:g}:g}},computedMember:function(a,b,d,c,e){return function(f,g,h,k){var l=a(f,g,h,k),m,n;null!=l&&(m=b(f,g,h,k),m+="",Xa(m,e),c&&1!==c&&(Ib(l),l&&!l[m]&&(l[m]={})),n=l[m],Aa(n,e));return d?{context:l,name:m,value:n}:n}},nonComputedMember:function(a,b,d,c,e,f){return function(g,h,k,l){g=a(g,h,k,l);e&&1!==e&&(Ib(g),g&&!g[b]&&
(g[b]={}));h=null!=g?g[b]:v;(d||Jb(b))&&Aa(h,f);return c?{context:g,name:b,value:h}:h}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};var jc=function(a,b,d){this.lexer=a;this.$filter=b;this.options=d;this.ast=new q(this.lexer);this.astCompiler=d.csp?new vd(this.ast,b):new ud(this.ast,b)};jc.prototype={constructor:jc,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var mg=Object.prototype.valueOf,Ba=H("$sce"),qa={HTML:"html",CSS:"css",URL:"url",
RESOURCE_URL:"resourceUrl",JS:"js"},ja=H("$compile"),Y=W.createElement("a"),zd=za(O.location.href);Ad.$inject=["$document"];Lc.$inject=["$provide"];var Hd=22,Gd=".",lc="0";Bd.$inject=["$locale"];Dd.$inject=["$locale"];var yg={yyyy:aa("FullYear",4),yy:aa("FullYear",2,0,!0),y:aa("FullYear",1),MMMM:Lb("Month"),MMM:Lb("Month",!0),MM:aa("Month",2,1),M:aa("Month",1,1),dd:aa("Date",2),d:aa("Date",1),HH:aa("Hours",2),H:aa("Hours",1),hh:aa("Hours",2,-12),h:aa("Hours",1,-12),mm:aa("Minutes",2),m:aa("Minutes",
1),ss:aa("Seconds",2),s:aa("Seconds",1),sss:aa("Milliseconds",3),EEEE:Lb("Day"),EEE:Lb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Kb(Math[0<a?"floor":"ceil"](a/60),2)+Kb(Math.abs(a%60),2))},ww:Jd(2),w:Jd(1),G:mc,GG:mc,GGG:mc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},xg=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,wg=/^\-?\d+$/;Cd.$inject=["$locale"];
var rg=ba(G),sg=ba(ub);Ed.$inject=["$parse"];var oe=ba({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===ga.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),vb={};n(Db,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!=a){var c=va("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,
e)});vb[c]=function(){return{restrict:"A",priority:100,link:e}}}});n(cd,function(a,b){vb[b]=function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"==e.ngPattern.charAt(0)&&(c=e.ngPattern.match(Ag))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});n(["src","srcset","href"],function(a){var b=va("ng-"+a);vb[b]=function(){return{priority:99,link:function(d,c,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ga.call(c.prop("href"))&&
(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),xa&&f&&c.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Mb={$addControl:B,$$renameControl:function(a,b){a.$name=b},$removeControl:B,$setValidity:B,$setDirty:B,$setPristine:B,$setSubmitted:B};Kd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Sd=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||B}return{name:"form",restrict:a?
"EAC":"E",require:["form","^^?form"],controller:Kd,compile:function(d,f){d.addClass(Ya).addClass(ob);var g=f.name?"name":a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var n=f[0];if(!("action"in e)){var s=function(b){a.$apply(function(){n.$commitViewValue();n.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",s,!1);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",s,!1)},0,!1)})}(f[1]||n.$$parentForm).$addControl(n);var q=g?c(n.$name):B;g&&(q(a,n),e.$observe(g,
function(b){n.$name!==b&&(q(a,v),n.$$parentForm.$$renameControl(n,b),q=c(n.$name),q(a,n))}));d.on("$destroy",function(){n.$$parentForm.$removeControl(n);q(a,v);T(n,Mb)})}}}}}]},pe=Sd(),Ce=Sd(!0),zg=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Ig=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Jg=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Kg=
/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Td=/^(\d{4})-(\d{2})-(\d{2})$/,Ud=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,pc=/^(\d{4})-W(\d\d)$/,Vd=/^(\d{4})-(\d\d)$/,Wd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Xd={text:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);nc(c)},date:mb("date",Td,Ob(Td,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mb("datetimelocal",Ud,Ob(Ud,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:mb("time",Wd,Ob(Wd,["HH","mm","ss",
"sss"]),"HH:mm:ss.sss"),week:mb("week",pc,function(a,b){if(V(a))return a;if(F(a)){pc.lastIndex=0;var d=pc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=0,h=0,k=Id(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(c,0,k.getDate()+e,d,f,g,h)}}return NaN},"yyyy-Www"),month:mb("month",Vd,Ob(Vd,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f){Md(a,b,d,c);lb(a,b,d,c,e,f);c.$$parserName="number";c.$parsers.push(function(a){return c.$isEmpty(a)?null:
Kg.test(a)?parseFloat(a):v});c.$formatters.push(function(a){if(!c.$isEmpty(a)){if(!N(a))throw nb("numfmt",a);a=a.toString()}return a});if(y(d.min)||d.ngMin){var g;c.$validators.min=function(a){return c.$isEmpty(a)||x(g)||a>=g};d.$observe("min",function(a){y(a)&&!N(a)&&(a=parseFloat(a,10));g=N(a)&&!isNaN(a)?a:v;c.$validate()})}if(y(d.max)||d.ngMax){var h;c.$validators.max=function(a){return c.$isEmpty(a)||x(h)||a<=h};d.$observe("max",function(a){y(a)&&!N(a)&&(a=parseFloat(a,10));h=N(a)&&!isNaN(a)?
a:v;c.$validate()})}},url:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);nc(c);c.$$parserName="url";c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||Ig.test(d)}},email:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);nc(c);c.$$parserName="email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||Jg.test(d)}},radio:function(a,b,d,c){x(d.name)&&b.attr("name",++pb);b.on("click",function(a){b[0].checked&&c.$setViewValue(d.value,a&&a.type)});c.$render=function(){b[0].checked=d.value==c.$viewValue};
d.$observe("value",c.$render)},checkbox:function(a,b,d,c,e,f,g,h){var k=Nd(h,a,"ngTrueValue",d.ngTrueValue,!0),l=Nd(h,a,"ngFalseValue",d.ngFalseValue,!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return oa(a,k)});c.$parsers.push(function(a){return a?k:l})},hidden:B,button:B,submit:B,reset:B,file:B},Fc=["$browser","$sniffer","$filter","$parse",function(a,b,d,
c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Xd[G(g.type)]||Xd.text)(e,f,g,h[0],b,a,d,c)}}}}],Lg=/^(true|false|\d+)$/,Ue=function(){return{restrict:"A",priority:100,compile:function(a,b){return Lg.test(b.ngValue)?function(a,b,e){e.$set("value",a.$eval(e.ngValue))}:function(a,b,e){a.$watch(e.ngValue,function(a){e.$set("value",a)})}}}},ue=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,
e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=x(a)?"":a})}}}}],we=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=x(a)?"":a})}}}}],ve=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});
d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){c.html(a.getTrustedHtml(f(b))||"")})}}}}],Te=ba({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),xe=oc("",!0),ze=oc("Odd",0),ye=oc("Even",1),Ae=Ma({compile:function(a,b){b.$set("ngCloak",v);a.removeClass("ng-cloak")}}),Be=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Kc={},Mg={blur:!0,focus:!0};n("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var b=va("ng-"+a);Kc[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(e,f){var g=d(f[b],null,!0);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};Mg[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Ee=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(b,d,c,e,f){var g,h,k;b.$watch(c.ngIf,function(b){b?h||f(function(b,e){h=e;b[b.length++]=W.createComment(" end ngIf: "+
c.ngIf+" ");g={clone:b};a.enter(b,d.parent(),d)}):(k&&(k.remove(),k=null),h&&(h.$destroy(),h=null),g&&(k=tb(g.clone),a.leave(k).then(function(){k=null}),g=null))})}}}],Fe=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ia.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(c,e,m,n,s){var q=0,v,t,p,w=function(){t&&(t.remove(),t=null);v&&(v.$destroy(),v=null);p&&
(d.leave(p).then(function(){t=null}),t=p,p=null)};c.$watch(f,function(f){var m=function(){!y(h)||h&&!c.$eval(h)||b()},z=++q;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&z===q){var b=c.$new();n.template=a;a=s(b,function(a){w();d.enter(a,null,e).then(m)});v=b;p=a;v.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||z!==q||(w(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(w(),n.template=null)})}}}}],We=["$compile",function(a){return{restrict:"ECA",
priority:-400,require:"ngInclude",link:function(b,d,c,e){ga.call(d[0]).match(/SVG/)?(d.empty(),a(Nc(e.template,W).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],Ge=Ma({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),Se=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=b.attr(d.$attr.ngList)||", ",f="false"!==d.ngTrim,g=f?X(e):e;c.$parsers.push(function(a){if(!x(a)){var b=
[];a&&n(a.split(g),function(a){a&&b.push(f?X(a):a)});return b}});c.$formatters.push(function(a){return L(a)?a.join(e):v});c.$isEmpty=function(a){return!a||!a.length}}}},ob="ng-valid",Od="ng-invalid",Ya="ng-pristine",Nb="ng-dirty",Qd="ng-pending",nb=H("ngModel"),Ng=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,c,e,f,g,h,k,l){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=v;this.$validators={};this.$asyncValidators=
{};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=v;this.$name=l(d.name||"",!1)(a);this.$$parentForm=Mb;var m=e(d.ngModel),r=m.assign,q=m,I=r,K=null,t,p=this;this.$$setOptions=function(a){if((p.$options=a)&&a.getterSetter){var b=e(d.ngModel+"()"),f=e(d.ngModel+"($$$p)");q=function(a){var c=m(a);D(c)&&(c=b(a));return c};I=function(a,
b){D(m(a))?f(a,{$$$p:p.$modelValue}):r(a,p.$modelValue)}}else if(!m.assign)throw nb("nonassign",d.ngModel,ta(c));};this.$render=B;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};this.$$updateEmptyClasses=function(a){p.$isEmpty(a)?(f.removeClass(c,"ng-not-empty"),f.addClass(c,"ng-empty")):(f.removeClass(c,"ng-empty"),f.addClass(c,"ng-not-empty"))};var w=0;Ld({ctrl:this,$element:c,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:f});this.$setPristine=function(){p.$dirty=
!1;p.$pristine=!0;f.removeClass(c,Nb);f.addClass(c,Ya)};this.$setDirty=function(){p.$dirty=!0;p.$pristine=!1;f.removeClass(c,Ya);f.addClass(c,Nb);p.$$parentForm.$setDirty()};this.$setUntouched=function(){p.$touched=!1;p.$untouched=!0;f.setClass(c,"ng-untouched","ng-touched")};this.$setTouched=function(){p.$touched=!0;p.$untouched=!1;f.setClass(c,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){g.cancel(K);p.$viewValue=p.$$lastCommittedViewValue;p.$render()};this.$validate=function(){if(!N(p.$modelValue)||
!isNaN(p.$modelValue)){var a=p.$$rawModelValue,b=p.$valid,c=p.$modelValue,d=p.$options&&p.$options.allowInvalid;p.$$runValidators(a,p.$$lastCommittedViewValue,function(e){d||b===e||(p.$modelValue=e?a:v,p.$modelValue!==c&&p.$$writeModelToScope())})}};this.$$runValidators=function(a,b,c){function d(){var c=!0;n(p.$validators,function(d,e){var g=d(a,b);c=c&&g;f(e,g)});return c?!0:(n(p.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;n(p.$asyncValidators,function(e,g){var h=e(a,
b);if(!h||!D(h.then))throw nb("nopromise",h);f(g,v);c.push(h.then(function(){f(g,!0)},function(a){d=!1;f(g,!1)}))});c.length?k.all(c).then(function(){g(d)},B):g(!0)}function f(a,b){h===w&&p.$setValidity(a,b)}function g(a){h===w&&c(a)}w++;var h=w;(function(){var a=p.$$parserName||"parse";if(x(t))f(a,null);else return t||(n(p.$validators,function(a,b){f(b,null)}),n(p.$asyncValidators,function(a,b){f(b,null)})),f(a,t),t;return!0})()?d()?e():g(!1):g(!1)};this.$commitViewValue=function(){var a=p.$viewValue;
g.cancel(K);if(p.$$lastCommittedViewValue!==a||""===a&&p.$$hasNativeValidators)p.$$updateEmptyClasses(a),p.$$lastCommittedViewValue=a,p.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=p.$$lastCommittedViewValue;if(t=x(b)?v:!0)for(var c=0;c<p.$parsers.length;c++)if(b=p.$parsers[c](b),x(b)){t=!1;break}N(p.$modelValue)&&isNaN(p.$modelValue)&&(p.$modelValue=q(a));var d=p.$modelValue,e=p.$options&&p.$options.allowInvalid;p.$$rawModelValue=b;e&&(p.$modelValue=
b,p.$modelValue!==d&&p.$$writeModelToScope());p.$$runValidators(b,p.$$lastCommittedViewValue,function(a){e||(p.$modelValue=a?b:v,p.$modelValue!==d&&p.$$writeModelToScope())})};this.$$writeModelToScope=function(){I(a,p.$modelValue);n(p.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})};this.$setViewValue=function(a,b){p.$viewValue=a;p.$options&&!p.$options.updateOnDefault||p.$$debounceViewValueCommit(b)};this.$$debounceViewValueCommit=function(b){var c=0,d=p.$options;d&&y(d.debounce)&&(d=d.debounce,
N(d)?c=d:N(d[b])?c=d[b]:N(d["default"])&&(c=d["default"]));g.cancel(K);c?K=g(function(){p.$commitViewValue()},c):h.$$phase?p.$commitViewValue():a.$apply(function(){p.$commitViewValue()})};a.$watch(function(){var b=q(a);if(b!==p.$modelValue&&(p.$modelValue===p.$modelValue||b===b)){p.$modelValue=p.$$rawModelValue=b;t=v;for(var c=p.$formatters,d=c.length,e=b;d--;)e=c[d](e);p.$viewValue!==e&&(p.$$updateEmptyClasses(e),p.$viewValue=p.$$lastCommittedViewValue=e,p.$render(),p.$$runValidators(b,e,B))}return b})}],
Re=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ng,priority:1,compile:function(b){b.addClass(Ya).addClass("ng-untouched").addClass(ob);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;g.$$setOptions(f[2]&&f[2].$options);b.$addControl(g);e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){var g=f[0];if(g.$options&&
g.$options.updateOn)c.on(g.$options.updateOn,function(a){g.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(c){g.$touched||(a.$$phase?b.$evalAsync(g.$setTouched):b.$apply(g.$setTouched))})}}}}}],Og=/(\s+|^)default(\s+|$)/,Ve=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=Oa(a.$eval(b.ngModelOptions));y(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=X(this.$options.updateOn.replace(Og,function(){d.$options.updateOnDefault=
!0;return" "}))):this.$options.updateOnDefault=!0}]}},He=Ma({terminal:!0,priority:1E3}),Pg=H("ngOptions"),Qg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Pe=["$compile","$parse",function(a,b){function d(a,c,d){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}
function l(a){var b;if(!q&&Ca(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var m=a.match(Qg);if(!m)throw Pg("iexp",a,ta(c));var n=m[5]||m[7],q=m[6];a=/ as /.test(m[0])&&m[1];var v=m[9];c=b(m[2]?m[1]:n);var y=a&&b(a)||c,t=v&&b(v),p=v?function(a,b){return t(d,b)}:function(a){return Fa(a)},w=function(a,b){return p(a,B(a,b))},u=b(m[2]||m[1]),x=b(m[3]||""),z=b(m[4]||""),A=b(m[8]),C={},B=q?function(a,b){C[q]=b;C[n]=a;return C}:function(a){C[n]=a;return C};return{trackBy:v,
getTrackByValue:w,getWatchables:b(A,function(a){var b=[];a=a||[];for(var c=l(a),e=c.length,f=0;f<e;f++){var g=a===c?f:c[f],k=B(a[g],g),g=p(a[g],k);b.push(g);if(m[2]||m[1])g=u(d,k),b.push(g);m[4]&&(k=z(d,k),b.push(k))}return b}),getOptions:function(){for(var a=[],b={},c=A(d)||[],f=l(c),g=f.length,m=0;m<g;m++){var n=c===f?m:f[m],r=B(c[n],n),q=y(d,r),n=p(q,r),s=u(d,r),t=x(d,r),r=z(d,r),q=new e(n,q,s,t,r);a.push(q);b[n]=q}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[w(a)]},
getViewValueFromOption:function(a){return v?ia.copy(a.viewValue):a.viewValue}}}}}var c=W.createElement("option"),e=W.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=B},post:function(b,g,h,k){function l(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);a.value!==b.value&&(b.value=a.selectValue)}function m(a,b,c,d){b&&G(b.nodeName)===c?c=b:(c=d.cloneNode(!1),b?a.insertBefore(c,
b):a.appendChild(c));return c}function r(a){for(var b;a;)b=a.nextSibling,$b(a),a=b}function q(a){var b=w&&w[0],c=A&&A[0];if(b||c)for(;a&&(a===b||a===c||8===a.nodeType||"option"===ra(a)&&""===a.value);)a=a.nextSibling;return a}function v(){var a=D&&x.readValue();D=E.getOptions();var b={},d=g[0].firstChild;z&&g.prepend(w);d=q(d);D.items.forEach(function(a){var f,h;y(a.group)?(f=b[a.group],f||(f=m(g[0],d,"optgroup",e),d=f.nextSibling,f.label=a.group,f=b[a.group]={groupElement:f,currentOptionElement:f.firstChild}),
h=m(f.groupElement,f.currentOptionElement,"option",c),l(a,h),f.currentOptionElement=h.nextSibling):(h=m(g[0],d,"option",c),l(a,h),d=h.nextSibling)});Object.keys(b).forEach(function(a){r(b[a].currentOptionElement)});r(d);t.$render();if(!t.$isEmpty(a)){var f=x.readValue();(E.trackBy||p?oa(a,f):a===f)||(t.$setViewValue(f),t.$render())}}var x=k[0],t=k[1],p=h.multiple,w;k=0;for(var u=g.children(),B=u.length;k<B;k++)if(""===u[k].value){w=u.eq(k);break}var z=!!w,A=C(c.cloneNode(!1));A.val("?");var D,E=d(h.ngOptions,
g,b);p?(t.$isEmpty=function(a){return!a||0===a.length},x.writeValue=function(a){D.items.forEach(function(a){a.element.selected=!1});a&&a.forEach(function(a){(a=D.getOptionFromViewValue(a))&&!a.disabled&&(a.element.selected=!0)})},x.readValue=function(){var a=g.val()||[],b=[];n(a,function(a){(a=D.selectValueMap[a])&&!a.disabled&&b.push(D.getViewValueFromOption(a))});return b},E.trackBy&&b.$watchCollection(function(){if(L(t.$viewValue))return t.$viewValue.map(function(a){return E.getTrackByValue(a)})},
function(){t.$render()})):(x.writeValue=function(a){var b=D.getOptionFromViewValue(a);b&&!b.disabled?g[0].value!==b.selectValue&&(A.remove(),z||w.remove(),g[0].value=b.selectValue,b.element.selected=!0,b.element.setAttribute("selected","selected")):null===a||z?(A.remove(),z||g.prepend(w),g.val(""),w.prop("selected",!0),w.attr("selected",!0)):(z||w.remove(),g.prepend(A),g.val("?"),A.prop("selected",!0),A.attr("selected",!0))},x.readValue=function(){var a=D.selectValueMap[g.val()];return a&&!a.disabled?
(z||w.remove(),A.remove(),D.getViewValueFromOption(a)):null},E.trackBy&&b.$watch(function(){return E.getTrackByValue(t.$viewValue)},function(){t.$render()}));z?(w.remove(),a(w)(b),w.removeClass("ng-scope")):w=C(c.cloneNode(!1));v();b.$watchCollection(E.getWatchables,v)}}}}],Ie=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,h){function k(a){g.text(a||"")}var l=h.count,m=h.$attr.when&&g.attr(h.$attr.when),r=h.offset||0,q=f.$eval(m)||{},v=
{},y=b.startSymbol(),t=b.endSymbol(),p=y+l+"-"+r+t,w=ia.noop,u;n(h,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+G(c[2]),q[c]=g.attr(h.$attr[b]))});n(q,function(a,d){v[d]=b(a.replace(c,p))});f.$watch(l,function(b){var c=parseFloat(b),e=isNaN(c);e||c in q||(c=a.pluralCat(c-r));c===u||e&&N(u)&&isNaN(u)||(w(),e=v[c],x(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),w=B,k()):w=f.$watch(e,k),u=c)})}}}],Je=["$parse","$animate",function(a,b){var d=H("ngRepeat"),c=function(a,b,
c,d,k,l,m){a[c]=d;k&&(a[k]=l);a.$index=b;a.$first=0===b;a.$last=b===m-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(e,f){var g=f.ngRepeat,h=W.createComment(" end ngRepeat: "+g+" "),k=g.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw d("iexp",g);var l=k[1],m=k[2],r=k[3],q=k[4],k=l.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);
if(!k)throw d("iidexp",l);var x=k[3]||k[1],y=k[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw d("badident",r);var t,p,w,u,B={$id:Fa};q?t=a(q):(w=function(a,b){return Fa(b)},u=function(a){return a});return function(a,e,f,k,l){t&&(p=function(b,c,d){y&&(B[y]=b);B[x]=c;B.$index=d;return t(a,B)});var q=Z();a.$watchCollection(m,function(f){var k,m,s=e[0],t,B=Z(),D,E,H,F,L,G,N;r&&(a[r]=f);if(Ca(f))L=
f,m=p||w;else for(N in m=p||u,L=[],f)sa.call(f,N)&&"$"!==N.charAt(0)&&L.push(N);D=L.length;N=Array(D);for(k=0;k<D;k++)if(E=f===L?k:L[k],H=f[E],F=m(E,H,k),q[F])G=q[F],delete q[F],B[F]=G,N[k]=G;else{if(B[F])throw n(N,function(a){a&&a.scope&&(q[a.id]=a)}),d("dupes",g,F,H);N[k]={id:F,scope:v,clone:v};B[F]=!0}for(t in q){G=q[t];F=tb(G.clone);b.leave(F);if(F[0].parentNode)for(k=0,m=F.length;k<m;k++)F[k].$$NG_REMOVED=!0;G.scope.$destroy()}for(k=0;k<D;k++)if(E=f===L?k:L[k],H=f[E],G=N[k],G.scope){t=s;do t=
t.nextSibling;while(t&&t.$$NG_REMOVED);G.clone[0]!=t&&b.move(tb(G.clone),null,C(s));s=G.clone[G.clone.length-1];c(G.scope,k,x,H,y,E,D)}else l(function(a,d){G.scope=d;var e=h.cloneNode(!1);a[a.length++]=e;b.enter(a,null,C(s));s=e;G.clone=a;B[G.id]=G;c(G.scope,k,x,H,y,E,D)});q=B})}}}}],Ke=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],De=["$animate",function(a){return{restrict:"A",
multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Le=Ma(function(a,b,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&n(d,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),Me=["$animate",function(a){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,d,c,e){var f=[],g=[],h=[],k=[],l=function(a,b){return function(){a.splice(b,1)}};b.$watch(c.ngSwitch||c.on,function(b){var c,
d;c=0;for(d=h.length;c<d;++c)a.cancel(h[c]);c=h.length=0;for(d=k.length;c<d;++c){var q=tb(g[c].clone);k[c].$destroy();(h[c]=a.leave(q)).then(l(h,c))}g.length=0;k.length=0;(f=e.cases["!"+b]||e.cases["?"])&&n(f,function(b){b.transclude(function(c,d){k.push(d);var e=b.element;c[c.length++]=W.createComment(" end ngSwitchWhen: ");g.push({clone:c});a.enter(c,e.parent(),e)})})})}}}],Ne=Ma({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["!"+d.ngSwitchWhen]=
c.cases["!"+d.ngSwitchWhen]||[];c.cases["!"+d.ngSwitchWhen].push({transclude:e,element:b})}}),Oe=Ma({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),Rg=H("ngTransclude"),Qe=Ma({restrict:"EAC",link:function(a,b,d,c,e){d.ngTransclude===d.$attr.ngTransclude&&(d.ngTransclude="");if(!e)throw Rg("orphan",ta(b));e(function(a){a.length&&(b.empty(),b.append(a))},null,d.ngTransclude||
d.ngTranscludeSlot)}}),qe=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"==d.type&&a.put(d.id,b[0].text)}}}],Sg={$setViewValue:B,$render:B},Tg=["$element","$scope","$attrs",function(a,b,d){var c=this,e=new Ua;c.ngModelCtrl=Sg;c.unknownOption=C(W.createElement("option"));c.renderUnknownOption=function(b){b="? "+Fa(b)+" ?";c.unknownOption.val(b);a.prepend(c.unknownOption);a.val(b)};b.$on("$destroy",function(){c.renderUnknownOption=B});c.removeUnknownOption=
function(){c.unknownOption.parent()&&c.unknownOption.remove()};c.readValue=function(){c.removeUnknownOption();return a.val()};c.writeValue=function(b){c.hasOption(b)?(c.removeUnknownOption(),a.val(b),""===b&&c.emptyOption.prop("selected",!0)):null==b&&c.emptyOption?(c.removeUnknownOption(),a.val("")):c.renderUnknownOption(b)};c.addOption=function(a,b){if(8!==b[0].nodeType){Ta(a,'"option value"');""===a&&(c.emptyOption=b);var d=e.get(a)||0;e.put(a,d+1);c.ngModelCtrl.$render();b[0].hasAttribute("selected")&&
(b[0].selected=!0)}};c.removeOption=function(a){var b=e.get(a);b&&(1===b?(e.remove(a),""===a&&(c.emptyOption=v)):e.put(a,b-1))};c.hasOption=function(a){return!!e.get(a)};c.registerOption=function(a,b,d,e,l){if(e){var m;d.$observe("value",function(a){y(m)&&c.removeOption(m);m=a;c.addOption(a,b)})}else l?a.$watch(l,function(a,e){d.$set("value",a);e!==a&&c.removeOption(e);c.addOption(a,b)}):c.addOption(d.value,b);b.on("$destroy",function(){c.removeOption(d.value);c.ngModelCtrl.$render()})}}],re=function(){return{restrict:"E",
require:["select","?ngModel"],controller:Tg,priority:1,link:{pre:function(a,b,d,c){var e=c[1];if(e){var f=c[0];f.ngModelCtrl=e;b.on("change",function(){a.$apply(function(){e.$setViewValue(f.readValue())})});if(d.multiple){f.readValue=function(){var a=[];n(b.find("option"),function(b){b.selected&&a.push(b.value)});return a};f.writeValue=function(a){var c=new Ua(a);n(b.find("option"),function(a){a.selected=y(c.get(a.value))})};var g,h=NaN;a.$watch(function(){h!==e.$viewValue||oa(g,e.$viewValue)||(g=
na(e.$viewValue),e.$render());h=e.$viewValue});e.$isEmpty=function(a){return!a||0===a.length}}}},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},te=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){if(y(d.value))var c=a(d.value,!0);else{var e=a(b.text(),!0);e||d.$set("value",b.text())}return function(a,b,d){var k=b.parent();(k=k.data("$selectController")||k.parent().data("$selectController"))&&k.registerOption(a,
b,d,c,e)}}}}],se=ba({restrict:"E",terminal:!1}),Hc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},Gc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe("pattern",function(a){F(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw H("ngPattern")("noregexp",
f,a,ta(b));e=a||v;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||x(e)||e.test(b)}}}}},Jc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=-1;d.$observe("maxlength",function(a){a=ca(a);e=isNaN(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||b.length<=e}}}}},Ic=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=0;d.$observe("minlength",function(a){e=ca(a)||0;c.$validate()});
c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};O.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(je(),le(ia),ia.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),
SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",
PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var e=a|0,f=c;v===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),C(W).ready(function(){fe(W,Ac)}))})(window,document);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');


},{}],13:[function(require,module,exports){
var wanakana,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

wanakana = wanakana || {};

wanakana.version = "1.3.7";

if (typeof define === "function" && define.amd) {
  define("wanakana", [], function() {
    return wanakana;
  });
}

wanakana.LOWERCASE_START = 0x61;

wanakana.LOWERCASE_END = 0x7A;

wanakana.UPPERCASE_START = 0x41;

wanakana.UPPERCASE_END = 0x5A;

wanakana.HIRAGANA_START = 0x3041;

wanakana.HIRAGANA_END = 0x3096;

wanakana.KATAKANA_START = 0x30A1;

wanakana.KATAKANA_END = 0x30FA;

wanakana.LOWERCASE_FULLWIDTH_START = 0xFF41;

wanakana.LOWERCASE_FULLWIDTH_END = 0xFF5A;

wanakana.UPPERCASE_FULLWIDTH_START = 0xFF21;

wanakana.UPPERCASE_FULLWIDTH_END = 0xFF3A;

wanakana.defaultOptions = {
  useObseleteKana: false,
  IMEMode: false
};

/**
 * Automatically sets up an input field to be an IME.
*/


wanakana.bind = function(input) {
  return input.addEventListener('input', wanakana._onInput);
};

wanakana.unbind = function(input) {
  return input.removeEventListener('input', wanakana._onInput);
};

wanakana._onInput = function(event) {
  var input, newText, normalizedInputString, range, startingCursor, startingLength;
  input = event.target;
  startingCursor = input.selectionStart;
  startingLength = input.value.length;
  normalizedInputString = wanakana._convertFullwidthCharsToASCII(input.value);
  newText = wanakana.toKana(normalizedInputString, {
    IMEMode: true
  });
  if (normalizedInputString !== newText) {
    input.value = newText;
    if (typeof input.selectionStart === "number") {
      return input.selectionStart = input.selectionEnd = input.value.length;
    } else if (typeof input.createTextRange !== "undefined") {
      input.focus();
      range = input.createTextRange();
      range.collapse(false);
      return range.select();
    }
  }
};

wanakana._extend = function(target, source) {
  var prop;
  if (target == null) {
    return source;
  }
  for (prop in source) {
    if ((target[prop] == null) && (source[prop] != null)) {
      target[prop] = source[prop];
    }
  }
  return target;
};

/**
 * Takes a character and a unicode range. Returns true if the char is in the range.
*/


wanakana._isCharInRange = function(char, start, end) {
  var code;
  code = char.charCodeAt(0);
  return (start <= code && code <= end);
};

wanakana._isCharVowel = function(char, includeY) {
  var regexp;
  if (includeY == null) {
    includeY = true;
  }
  regexp = includeY ? /[aeiouy]/ : /[aeiou]/;
  return char.toLowerCase().charAt(0).search(regexp) !== -1;
};

wanakana._isCharConsonant = function(char, includeY) {
  var regexp;
  if (includeY == null) {
    includeY = true;
  }
  regexp = includeY ? /[bcdfghjklmnpqrstvwxyz]/ : /[bcdfghjklmnpqrstvwxz]/;
  return char.toLowerCase().charAt(0).search(regexp) !== -1;
};

wanakana._isCharKatakana = function(char) {
  return wanakana._isCharInRange(char, wanakana.KATAKANA_START, wanakana.KATAKANA_END);
};

wanakana._isCharHiragana = function(char) {
  return wanakana._isCharInRange(char, wanakana.HIRAGANA_START, wanakana.HIRAGANA_END);
};

wanakana._isCharKana = function(char) {
  return wanakana._isCharHiragana(char) || wanakana._isCharKatakana(char);
};

wanakana._isCharNotKana = function(char) {
  return !wanakana._isCharHiragana(char) && !wanakana._isCharKatakana(char);
};

wanakana._convertFullwidthCharsToASCII = function(string) {
  var char, chars, code, i, _i, _len;
  chars = string.split("");
  for (i = _i = 0, _len = chars.length; _i < _len; i = ++_i) {
    char = chars[i];
    code = char.charCodeAt(0);
    if (wanakana._isCharInRange(char, wanakana.LOWERCASE_FULLWIDTH_START, wanakana.LOWERCASE_FULLWIDTH_END)) {
      chars[i] = String.fromCharCode(code - wanakana.LOWERCASE_FULLWIDTH_START + wanakana.LOWERCASE_START);
    }
    if (wanakana._isCharInRange(char, wanakana.UPPERCASE_FULLWIDTH_START, wanakana.UPPERCASE_FULLWIDTH_END)) {
      chars[i](String.fromCharCode(code - wanakana.UPPERCASE_FULLWIDTH_START + wanakana.UPPERCASE_START));
    }
  }
  return chars.join("");
};

wanakana._katakanaToHiragana = function(kata) {
  var code, hira, hiraChar, kataChar, _i, _len, _ref;
  hira = [];
  _ref = kata.split("");
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    kataChar = _ref[_i];
    if (wanakana._isCharKatakana(kataChar)) {
      code = kataChar.charCodeAt(0);
      code += wanakana.HIRAGANA_START - wanakana.KATAKANA_START;
      hiraChar = String.fromCharCode(code);
      hira.push(hiraChar);
    } else {
      hira.push(kataChar);
    }
  }
  return hira.join("");
};

wanakana._hiraganaToKatakana = function(hira) {
  var code, hiraChar, kata, kataChar, _i, _len, _ref;
  kata = [];
  _ref = hira.split("");
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    hiraChar = _ref[_i];
    if (wanakana._isCharHiragana(hiraChar)) {
      code = hiraChar.charCodeAt(0);
      code += wanakana.KATAKANA_START - wanakana.HIRAGANA_START;
      kataChar = String.fromCharCode(code);
      kata.push(kataChar);
    } else {
      kata.push(hiraChar);
    }
  }
  return kata.join("");
};

wanakana._hiraganaToRomaji = function(hira, options) {
  var chunk, chunkSize, cursor, getChunk, len, maxChunk, nextCharIsDoubleConsonant, resetChunkSize, roma, romaChar;
  options = wanakana._extend(options, wanakana.defaultOptions);
  len = hira.length;
  roma = [];
  cursor = 0;
  chunkSize = 0;
  maxChunk = 2;
  getChunk = function() {
    return hira.substr(cursor, chunkSize);
  };
  resetChunkSize = function() {
    return chunkSize = Math.min(maxChunk, len - cursor);
  };
  while (cursor < len) {
    resetChunkSize();
    while (chunkSize > 0) {
      chunk = getChunk();
      if (wanakana.isKatakana(chunk)) {
        chunk = wanakana._katakanaToHiragana(chunk);
      }
      if (chunk.charAt(0) === "っ" && chunkSize === 1 && cursor < (len - 1)) {
        nextCharIsDoubleConsonant = true;
        romaChar = "";
        break;
      }
      romaChar = wanakana.J_to_R[chunk];
      if ((romaChar != null) && nextCharIsDoubleConsonant) {
        romaChar = romaChar.charAt(0).concat(romaChar);
        nextCharIsDoubleConsonant = false;
      }
      if (romaChar != null) {
        break;
      }
      chunkSize--;
    }
    if (romaChar == null) {
      romaChar = chunk;
    }
    roma.push(romaChar);
    cursor += chunkSize || 1;
  }
  return roma.join("");
};

wanakana._romajiToHiragana = function(roma, options) {
  return wanakana._romajiToKana(roma, options, true);
};

wanakana._romajiToKana = function(roma, options, ignoreCase) {
  var chunk, chunkLC, chunkSize, cursor, getChunk, isCharUpperCase, kana, kanaChar, len, maxChunk;
  if (ignoreCase == null) {
    ignoreCase = false;
  }
  options = wanakana._extend(options, wanakana.defaultOptions);
  len = roma.length;
  kana = [];
  cursor = 0;
  maxChunk = 3;
  getChunk = function() {
    return roma.substr(cursor, chunkSize);
  };
  isCharUpperCase = function(char) {
    return wanakana._isCharInRange(char, wanakana.UPPERCASE_START, wanakana.UPPERCASE_END);
  };
  while (cursor < len) {
    chunkSize = Math.min(maxChunk, len - cursor);
    while (chunkSize > 0) {
      chunk = getChunk();
      chunkLC = chunk.toLowerCase();
      if (__indexOf.call(wanakana.FOUR_CHARACTER_EDGE_CASES, chunkLC) >= 0 && (len - cursor) >= 4) {
        chunkSize++;
        chunk = getChunk();
        chunkLC = chunk.toLowerCase();
      } else {
        if (chunkLC.charAt(0) === "n") {
          if (options.IMEMode && chunkLC.charAt(1) === "'" && chunkSize === 2) {
            kanaChar = "ん";
            break;
          }
          if (wanakana._isCharConsonant(chunkLC.charAt(1), false) && wanakana._isCharVowel(chunkLC.charAt(2))) {
            chunkSize = 1;
            chunk = getChunk();
            chunkLC = chunk.toLowerCase();
          }
        }
        if (chunkLC.charAt(0) !== "n" && wanakana._isCharConsonant(chunkLC.charAt(0)) && chunk.charAt(0) === chunk.charAt(1)) {
          chunkSize = 1;
          if (wanakana._isCharInRange(chunk.charAt(0), wanakana.UPPERCASE_START, wanakana.UPPERCASE_END)) {
            chunkLC = chunk = "ッ";
          } else {
            chunkLC = chunk = "っ";
          }
        }
      }
      kanaChar = wanakana.R_to_J[chunkLC];
      if (kanaChar != null) {
        break;
      }
      if (chunkSize === 4) {
        chunkSize -= 2;
      } else {
        chunkSize--;
      }
    }
    if (kanaChar == null) {
      chunk = wanakana._convertPunctuation(chunk);
      kanaChar = chunk;
    }
    if (options != null ? options.useObseleteKana : void 0) {
      if (chunkLC === "wi") {
        kanaChar = "ゐ";
      }
      if (chunkLC === "we") {
        kanaChar = "ゑ";
      }
    }
    if (options.IMEMode && chunkLC.charAt(0) === "n") {
      if (roma.charAt(cursor + 1).toLowerCase() === "y" && wanakana._isCharVowel(roma.charAt(cursor + 2)) === false || cursor === (len - 1) || wanakana.isKana(roma.charAt(cursor + 1))) {
        kanaChar = chunk.charAt(0);
      }
    }
    if (!ignoreCase) {
      if (isCharUpperCase(chunk.charAt(0))) {
        kanaChar = wanakana._hiraganaToKatakana(kanaChar);
      }
    }
    kana.push(kanaChar);
    cursor += chunkSize || 1;
  }
  return kana.join("");
};

wanakana._convertPunctuation = function(input, options) {
  if (input === '　') {
    return ' ';
  }
  if (input === '-') {
    return 'ー';
  }
  return input;
};

/**
* Returns true if input is entirely hiragana.
*/


wanakana.isHiragana = function(input) {
  var chars;
  chars = input.split("");
  return chars.every(wanakana._isCharHiragana);
};

wanakana.isKatakana = function(input) {
  var chars;
  chars = input.split("");
  return chars.every(wanakana._isCharKatakana);
};

wanakana.isKana = function(input) {
  var chars;
  chars = input.split("");
  return chars.every(function(char) {
    return (wanakana.isHiragana(char)) || (wanakana.isKatakana(char));
  });
};

wanakana.isRomaji = function(input) {
  var chars;
  chars = input.split("");
  return chars.every(function(char) {
    return (!wanakana.isHiragana(char)) && (!wanakana.isKatakana(char));
  });
};

wanakana.toHiragana = function(input, options) {
  if (wanakana.isRomaji(input)) {
    return input = wanakana._romajiToHiragana(input, options);
  }
  if (wanakana.isKatakana(input)) {
    return input = wanakana._katakanaToHiragana(input, options);
  }
  return input;
};

wanakana.toKatakana = function(input, options) {
  if (wanakana.isHiragana(input)) {
    return input = wanakana._hiraganaToKatakana(input, options);
  }
  if (wanakana.isRomaji(input)) {
    input = wanakana._romajiToHiragana(input, options);
    return input = wanakana._hiraganaToKatakana(input, options);
  }
  return input;
};

wanakana.toKana = function(input, options) {
  return input = wanakana._romajiToKana(input, options);
};

wanakana.toRomaji = function(input, options) {
  return input = wanakana._hiraganaToRomaji(input);
};

wanakana.R_to_J = {
  a: 'あ',
  i: 'い',
  u: 'う',
  e: 'え',
  o: 'お',
  yi: 'い',
  wu: 'う',
  whu: 'う',
  xa: 'ぁ',
  xi: 'ぃ',
  xu: 'ぅ',
  xe: 'ぇ',
  xo: 'ぉ',
  xyi: 'ぃ',
  xye: 'ぇ',
  ye: 'いぇ',
  wha: 'うぁ',
  whi: 'うぃ',
  whe: 'うぇ',
  who: 'うぉ',
  wi: 'うぃ',
  we: 'うぇ',
  va: 'ゔぁ',
  vi: 'ゔぃ',
  vu: 'ゔ',
  ve: 'ゔぇ',
  vo: 'ゔぉ',
  vya: 'ゔゃ',
  vyi: 'ゔぃ',
  vyu: 'ゔゅ',
  vye: 'ゔぇ',
  vyo: 'ゔょ',
  ka: 'か',
  ki: 'き',
  ku: 'く',
  ke: 'け',
  ko: 'こ',
  lka: 'ヵ',
  lke: 'ヶ',
  xka: 'ヵ',
  xke: 'ヶ',
  kya: 'きゃ',
  kyi: 'きぃ',
  kyu: 'きゅ',
  kye: 'きぇ',
  kyo: 'きょ',
  ca: 'か',
  ci: 'き',
  cu: 'く',
  ce: 'け',
  co: 'こ',
  lca: 'ヵ',
  lce: 'ヶ',
  xca: 'ヵ',
  xce: 'ヶ',
  qya: 'くゃ',
  qyu: 'くゅ',
  qyo: 'くょ',
  qwa: 'くぁ',
  qwi: 'くぃ',
  qwu: 'くぅ',
  qwe: 'くぇ',
  qwo: 'くぉ',
  qa: 'くぁ',
  qi: 'くぃ',
  qe: 'くぇ',
  qo: 'くぉ',
  kwa: 'くぁ',
  qyi: 'くぃ',
  qye: 'くぇ',
  ga: 'が',
  gi: 'ぎ',
  gu: 'ぐ',
  ge: 'げ',
  go: 'ご',
  gya: 'ぎゃ',
  gyi: 'ぎぃ',
  gyu: 'ぎゅ',
  gye: 'ぎぇ',
  gyo: 'ぎょ',
  gwa: 'ぐぁ',
  gwi: 'ぐぃ',
  gwu: 'ぐぅ',
  gwe: 'ぐぇ',
  gwo: 'ぐぉ',
  sa: 'さ',
  si: 'し',
  shi: 'し',
  su: 'す',
  se: 'せ',
  so: 'そ',
  za: 'ざ',
  zi: 'じ',
  zu: 'ず',
  ze: 'ぜ',
  zo: 'ぞ',
  ji: 'じ',
  sya: 'しゃ',
  syi: 'しぃ',
  syu: 'しゅ',
  sye: 'しぇ',
  syo: 'しょ',
  sha: 'しゃ',
  shu: 'しゅ',
  she: 'しぇ',
  sho: 'しょ',
  shya: 'しゃ',
  shyu: 'しゅ',
  shye: 'しぇ',
  shyo: 'しょ',
  swa: 'すぁ',
  swi: 'すぃ',
  swu: 'すぅ',
  swe: 'すぇ',
  swo: 'すぉ',
  zya: 'じゃ',
  zyi: 'じぃ',
  zyu: 'じゅ',
  zye: 'じぇ',
  zyo: 'じょ',
  ja: 'じゃ',
  ju: 'じゅ',
  je: 'じぇ',
  jo: 'じょ',
  jya: 'じゃ',
  jyi: 'じぃ',
  jyu: 'じゅ',
  jye: 'じぇ',
  jyo: 'じょ',
  ta: 'た',
  ti: 'ち',
  tu: 'つ',
  te: 'て',
  to: 'と',
  chi: 'ち',
  tsu: 'つ',
  ltu: 'っ',
  xtu: 'っ',
  tya: 'ちゃ',
  tyi: 'ちぃ',
  tyu: 'ちゅ',
  tye: 'ちぇ',
  tyo: 'ちょ',
  cha: 'ちゃ',
  chu: 'ちゅ',
  che: 'ちぇ',
  cho: 'ちょ',
  cya: 'ちゃ',
  cyi: 'ちぃ',
  cyu: 'ちゅ',
  cye: 'ちぇ',
  cyo: 'ちょ',
  chya: 'ちゃ',
  chyu: 'ちゅ',
  chye: 'ちぇ',
  chyo: 'ちょ',
  tsa: 'つぁ',
  tsi: 'つぃ',
  tse: 'つぇ',
  tso: 'つぉ',
  tha: 'てゃ',
  thi: 'てぃ',
  thu: 'てゅ',
  the: 'てぇ',
  tho: 'てょ',
  twa: 'とぁ',
  twi: 'とぃ',
  twu: 'とぅ',
  twe: 'とぇ',
  two: 'とぉ',
  da: 'だ',
  di: 'ぢ',
  du: 'づ',
  de: 'で',
  "do": 'ど',
  dya: 'ぢゃ',
  dyi: 'ぢぃ',
  dyu: 'ぢゅ',
  dye: 'ぢぇ',
  dyo: 'ぢょ',
  dha: 'でゃ',
  dhi: 'でぃ',
  dhu: 'でゅ',
  dhe: 'でぇ',
  dho: 'でょ',
  dwa: 'どぁ',
  dwi: 'どぃ',
  dwu: 'どぅ',
  dwe: 'どぇ',
  dwo: 'どぉ',
  na: 'な',
  ni: 'に',
  nu: 'ぬ',
  ne: 'ね',
  no: 'の',
  nya: 'にゃ',
  nyi: 'にぃ',
  nyu: 'にゅ',
  nye: 'にぇ',
  nyo: 'にょ',
  ha: 'は',
  hi: 'ひ',
  hu: 'ふ',
  he: 'へ',
  ho: 'ほ',
  fu: 'ふ',
  hya: 'ひゃ',
  hyi: 'ひぃ',
  hyu: 'ひゅ',
  hye: 'ひぇ',
  hyo: 'ひょ',
  fya: 'ふゃ',
  fyu: 'ふゅ',
  fyo: 'ふょ',
  fwa: 'ふぁ',
  fwi: 'ふぃ',
  fwu: 'ふぅ',
  fwe: 'ふぇ',
  fwo: 'ふぉ',
  fa: 'ふぁ',
  fi: 'ふぃ',
  fe: 'ふぇ',
  fo: 'ふぉ',
  fyi: 'ふぃ',
  fye: 'ふぇ',
  ba: 'ば',
  bi: 'び',
  bu: 'ぶ',
  be: 'べ',
  bo: 'ぼ',
  bya: 'びゃ',
  byi: 'びぃ',
  byu: 'びゅ',
  bye: 'びぇ',
  byo: 'びょ',
  pa: 'ぱ',
  pi: 'ぴ',
  pu: 'ぷ',
  pe: 'ぺ',
  po: 'ぽ',
  pya: 'ぴゃ',
  pyi: 'ぴぃ',
  pyu: 'ぴゅ',
  pye: 'ぴぇ',
  pyo: 'ぴょ',
  ma: 'ま',
  mi: 'み',
  mu: 'む',
  me: 'め',
  mo: 'も',
  mya: 'みゃ',
  myi: 'みぃ',
  myu: 'みゅ',
  mye: 'みぇ',
  myo: 'みょ',
  ya: 'や',
  yu: 'ゆ',
  yo: 'よ',
  xya: 'ゃ',
  xyu: 'ゅ',
  xyo: 'ょ',
  ra: 'ら',
  ri: 'り',
  ru: 'る',
  re: 'れ',
  ro: 'ろ',
  rya: 'りゃ',
  ryi: 'りぃ',
  ryu: 'りゅ',
  rye: 'りぇ',
  ryo: 'りょ',
  la: 'ら',
  li: 'り',
  lu: 'る',
  le: 'れ',
  lo: 'ろ',
  lya: 'りゃ',
  lyi: 'りぃ',
  lyu: 'りゅ',
  lye: 'りぇ',
  lyo: 'りょ',
  wa: 'わ',
  wo: 'を',
  lwe: 'ゎ',
  xwa: 'ゎ',
  n: 'ん',
  nn: 'ん',
  'n ': 'ん',
  xn: 'ん',
  ltsu: 'っ'
};

wanakana.FOUR_CHARACTER_EDGE_CASES = ['lts', 'chy', 'shy'];

wanakana.J_to_R = {
  あ: 'a',
  い: 'i',
  う: 'u',
  え: 'e',
  お: 'o',
  ゔぁ: 'va',
  ゔぃ: 'vi',
  ゔ: 'vu',
  ゔぇ: 've',
  ゔぉ: 'vo',
  か: 'ka',
  き: 'ki',
  きゃ: 'kya',
  きぃ: 'kyi',
  きゅ: 'kyu',
  く: 'ku',
  け: 'ke',
  こ: 'ko',
  が: 'ga',
  ぎ: 'gi',
  ぐ: 'gu',
  げ: 'ge',
  ご: 'go',
  ぎゃ: 'gya',
  ぎぃ: 'gyi',
  ぎゅ: 'gyu',
  ぎぇ: 'gye',
  ぎょ: 'gyo',
  さ: 'sa',
  す: 'su',
  せ: 'se',
  そ: 'so',
  ざ: 'za',
  ず: 'zu',
  ぜ: 'ze',
  ぞ: 'zo',
  し: 'shi',
  しゃ: 'sha',
  しゅ: 'shu',
  しょ: 'sho',
  じ: 'ji',
  じゃ: 'ja',
  じゅ: 'ju',
  じょ: 'jo',
  た: 'ta',
  ち: 'chi',
  ちゃ: 'cha',
  ちゅ: 'chu',
  ちょ: 'cho',
  つ: 'tsu',
  て: 'te',
  と: 'to',
  だ: 'da',
  ぢ: 'di',
  づ: 'du',
  で: 'de',
  ど: 'do',
  な: 'na',
  に: 'ni',
  にゃ: 'nya',
  にゅ: 'nyu',
  にょ: 'nyo',
  ぬ: 'nu',
  ね: 'ne',
  の: 'no',
  は: 'ha',
  ひ: 'hi',
  ふ: 'fu',
  へ: 'he',
  ほ: 'ho',
  ひゃ: 'hya',
  ひゅ: 'hyu',
  ひょ: 'hyo',
  ふぁ: 'fa',
  ふぃ: 'fi',
  ふぇ: 'fe',
  ふぉ: 'fo',
  ば: 'ba',
  び: 'bi',
  ぶ: 'bu',
  べ: 'be',
  ぼ: 'bo',
  びゃ: 'bya',
  びゅ: 'byu',
  びょ: 'byo',
  ぱ: 'pa',
  ぴ: 'pi',
  ぷ: 'pu',
  ぺ: 'pe',
  ぽ: 'po',
  ぴゃ: 'pya',
  ぴゅ: 'pyu',
  ぴょ: 'pyo',
  ま: 'ma',
  み: 'mi',
  む: 'mu',
  め: 'me',
  も: 'mo',
  みゃ: 'mya',
  みゅ: 'myu',
  みょ: 'myo',
  や: 'ya',
  ゆ: 'yu',
  よ: 'yo',
  ら: 'ra',
  り: 'ri',
  る: 'ru',
  れ: 're',
  ろ: 'ro',
  りゃ: 'rya',
  りゅ: 'ryu',
  りょ: 'ryo',
  わ: 'wa',
  を: 'wo',
  ん: 'n',
  ゐ: 'wi',
  ゑ: 'we',
  きぇ: 'kye',
  きょ: 'kyo',
  じぃ: 'jyi',
  じぇ: 'jye',
  ちぃ: 'cyi',
  ちぇ: 'che',
  ひぃ: 'hyi',
  ひぇ: 'hye',
  びぃ: 'byi',
  びぇ: 'bye',
  ぴぃ: 'pyi',
  ぴぇ: 'pye',
  みぇ: 'mye',
  みぃ: 'myi',
  りぃ: 'ryi',
  りぇ: 'rye',
  にぃ: 'nyi',
  にぇ: 'nye',
  しぃ: 'syi',
  しぇ: 'she',
  いぇ: 'ye',
  うぁ: 'wha',
  うぉ: 'who',
  うぃ: 'wi',
  うぇ: 'we',
  ゔゃ: 'vya',
  ゔゅ: 'vyu',
  ゔょ: 'vyo',
  すぁ: 'swa',
  すぃ: 'swi',
  すぅ: 'swu',
  すぇ: 'swe',
  すぉ: 'swo',
  くゃ: 'qya',
  くゅ: 'qyu',
  くょ: 'qyo',
  くぁ: 'qwa',
  くぃ: 'qwi',
  くぅ: 'qwu',
  くぇ: 'qwe',
  くぉ: 'qwo',
  ぐぁ: 'gwa',
  ぐぃ: 'gwi',
  ぐぅ: 'gwu',
  ぐぇ: 'gwe',
  ぐぉ: 'gwo',
  つぁ: 'tsa',
  つぃ: 'tsi',
  つぇ: 'tse',
  つぉ: 'tso',
  てゃ: 'tha',
  てぃ: 'thi',
  てゅ: 'thu',
  てぇ: 'the',
  てょ: 'tho',
  とぁ: 'twa',
  とぃ: 'twi',
  とぅ: 'twu',
  とぇ: 'twe',
  とぉ: 'two',
  ぢゃ: 'dya',
  ぢぃ: 'dyi',
  ぢゅ: 'dyu',
  ぢぇ: 'dye',
  ぢょ: 'dyo',
  でゃ: 'dha',
  でぃ: 'dhi',
  でゅ: 'dhu',
  でぇ: 'dhe',
  でょ: 'dho',
  どぁ: 'dwa',
  どぃ: 'dwi',
  どぅ: 'dwu',
  どぇ: 'dwe',
  どぉ: 'dwo',
  ふぅ: 'fwu',
  ふゃ: 'fya',
  ふゅ: 'fyu',
  ふょ: 'fyo',
  ぁ: 'a',
  ぃ: 'i',
  ぇ: 'e',
  ぅ: 'u',
  ぉ: 'o',
  ゃ: 'ya',
  ゅ: 'yu',
  ょ: 'yo',
  っ: '',
  ゕ: 'ka',
  ゖ: 'ka',
  ゎ: 'wa',
  '　': ' ',
  んあ: 'n\'a',
  んい: 'n\'i',
  んう: 'n\'u',
  んえ: 'n\'e',
  んお: 'n\'o',
  んや: 'n\'ya',
  んゆ: 'n\'yu',
  んよ: 'n\'yo'
};

module.exports = wanakana;

},{}],14:[function(require,module,exports){
"use strict";

var wanakana = require("../lib/wanakana.js");

var QuizController = function($rootScope, Progression, ConjugationService) {
	
	var vm = this;

    var progression = new Progression.Sequence(ConjugationService.all(), 3);

	angular.extend(vm, {

        questions : progression,
        answered : false,
        state : "",
        userInput : "",

        attempt : function() {

            if(vm.questions.getCurrent().ime) {
                vm.userInput = wanakana.toKana(vm.userInput);
            }

            if(vm.checkAnswer(vm.userInput)){
                vm.state = "has-success";
                vm.answered = true;
            } else {
                vm.state = "has-error";
                vm.answered = true;
            }

        },

        next : function() {

            if(vm.questions.next()){

                vm.answered = false;
                vm.state = "";
                vm.userInput = "";

            } else {

                vm.quizFinished();

            }

        },

        checkAnswer : function(ans) {
            return ConjugationService.checkAnswer(
                vm.questions.getCurrent(), 
                vm.userInput
            );
        },

        getCurrent : function() {
            return vm.questions.getCurrent();
        },

        quizFinished : function() {
            $rootScope.$emit("slide-finished");
        }

    });

    $rootScope.finished = true;

};

angular.module("app.quiz").controller("QuizController", QuizController);

module.exports = QuizController;
},{"../lib/wanakana.js":13}],15:[function(require,module,exports){
"use strict";

var QuizDirective = function() {

    return {
        restrict: "AC",
        templateUrl: '/static/partials/quiz.html'
    }

};

angular.module("app.quiz").directive("ngQuiz", QuizDirective);

module.exports = QuizDirective;
},{}],16:[function(require,module,exports){
angular.module("app.quiz", []);

module.exports.QuizController = require("./controller");
module.exports.QuizDirective = require("./directive");
module.exports.Progression = require("./progression");

},{"./controller":14,"./directive":15,"./progression":17}],17:[function(require,module,exports){
"use strict";

var Progression = function() {

    this.Sequence = function(array, maxQuestions) {

        this.ind = array.length-1;
        this.current = array[array.length-1];
        this.items = array;
        this.count = 0;
        this.max = typeof maxQuestions !== 'undefined' ? maxQuestions : -1;

        this.getCurrent = function() {
            return this.current;
        }

        this.next = function() {

            // if we've reached the end of the progression, return false

            if(this.count == this.max){
                return false;
            }

            // if only one question then we
            // can't get another one.

            if(this.items.length == 1){
                return;
            }

            // items at end of array more likely to be picked
            // than those at the beginning of the array
            
            var ind = this.ind;
            
            // loop until we pick a question different than our current one
            
            while(ind == this.ind) {
                var y = Math.random()*(Math.pow(this.items.length, 2));
                var x = Math.sqrt(y);
                ind   = Math.trunc(x);
            }

            var next  = this.items[ind];

            this.ind = ind;
            this.current = next;
            this.count += 1;

            return true;
            
        };
            
        this.up = function() {

            // user answered the question correctly,
            // shift item left.
            
            if(this.ind == 0){
                return;
            }
            
            var t = this.items[this.ind-1];
            this.items[this.ind-1] = this.items[this.ind];
            this.items[this.ind] = t;
            
        };
            
        this.down = function(i) {
            
            // user answered the question incorrectly,
            // shift item right.
            
            if(this.ind == this.items.length){
                return;
            }
            
            var t = this.items[this.ind+1];
            this.items[this.ind+1] = this.items[this.ind];
            this.items[this.ind] = t;
            
        };

    }

};

angular.module("app.quiz").service("Progression", Progression);

module.exports = Progression;

},{}],18:[function(require,module,exports){
"use strict";

var SlideController = function($rootScope) {

    var vm = this;

    angular.extend(vm, {

        currentSlide : 1,

        isShown : function(n) {
            return n == vm.currentSlide;
        },

        moveToNextSlide : function() {
            vm.currentSlide += 1;
        }

    });

    $rootScope.$on("slide-finished", function(){
        vm.moveToNextSlide();
    })

    $rootScope.finished = true;

};

angular.module("app.slides").controller("SlideController", SlideController);
},{}],19:[function(require,module,exports){
angular.module("app.slides", []);

module.exports.SlideController = require("./controller");

},{"./controller":18}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Vzci9sb2NhbC9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInN0YXRpYy9qcy9hcHAuanMiLCJzdGF0aWMvanMvZGF0YXNvdXJjZXMvY29uanVnYXRpb24uanMiLCJzdGF0aWMvanMvZGF0YXNvdXJjZXMvaW5kZXguanMiLCJzdGF0aWMvanMvZGF0YXNvdXJjZXMvcGFydGljbGVzLmpzIiwic3RhdGljL2pzL2RhdGFzb3VyY2VzL3JlZ2lzdHJ5LmpzIiwic3RhdGljL2pzL2ltZS9kaXJlY3RpdmVzLmpzIiwic3RhdGljL2pzL2ltZS9pbmRleC5qcyIsInN0YXRpYy9qcy9saWIvYW5ndWxhci1hbmltYXRlLm1pbi5qcyIsInN0YXRpYy9qcy9saWIvYW5ndWxhci1tb2Nrcy5qcyIsInN0YXRpYy9qcy9saWIvYW5ndWxhci1yb3V0ZS5taW4uanMiLCJzdGF0aWMvanMvbGliL2FuZ3VsYXItc2FuaXRpemUubWluLmpzIiwic3RhdGljL2pzL2xpYi9hbmd1bGFyLm1pbi5qcyIsInN0YXRpYy9qcy9saWIvd2FuYWthbmEuanMiLCJzdGF0aWMvanMvcXVpei9jb250cm9sbGVyLmpzIiwic3RhdGljL2pzL3F1aXovZGlyZWN0aXZlLmpzIiwic3RhdGljL2pzL3F1aXovaW5kZXguanMiLCJzdGF0aWMvanMvcXVpei9wcm9ncmVzc2lvbi5qcyIsInN0YXRpYy9qcy9zbGlkZXMvY29udHJvbGxlci5qcyIsInN0YXRpYy9qcy9zbGlkZXMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzF4RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzU0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxuLy8gM3JkIHBhcnR5IGxpYnNcblxucmVxdWlyZShcIi4vbGliL2FuZ3VsYXIubWluLmpzXCIpO1xucmVxdWlyZShcIi4vbGliL2FuZ3VsYXItc2FuaXRpemUubWluLmpzXCIpO1xucmVxdWlyZShcIi4vbGliL2FuZ3VsYXItYW5pbWF0ZS5taW4uanNcIik7XG5yZXF1aXJlKFwiLi9saWIvYW5ndWxhci1hbmltYXRlLm1pbi5qc1wiKTtcbnJlcXVpcmUoXCIuL2xpYi9hbmd1bGFyLXJvdXRlLm1pbi5qc1wiKTtcbnJlcXVpcmUoXCIuL2xpYi9hbmd1bGFyLW1vY2tzLmpzXCIpO1xuXG4vLyBtYWluIGFwcGxpY2F0aW9uIGltcG9ydHNcblxucmVxdWlyZShcIi4vc2xpZGVzXCIpO1xucmVxdWlyZShcIi4vcXVpelwiKTtcbnJlcXVpcmUoXCIuL2RhdGFzb3VyY2VzXCIpO1xucmVxdWlyZShcIi4vaW1lXCIpO1xuXG4vLyBhbmd1bGFyIHN0YXJ0dXBcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwicXVpenplclwiLCBbXG4gICAgXCJuZ0FuaW1hdGVcIixcbiAgICBcIm5nU2FuaXRpemVcIixcbiAgICBcIm5nUm91dGVcIixcbiAgICBcImFwcC5xdWl6XCIsXG4gICAgXCJhcHAuc2xpZGVzXCIsXG4gICAgXCJhcHAuc291cmNlc1wiLFxuICAgIFwiYXBwLmltZVwiXG5dKTtcblxudmFyIGNvbmZpZyA9IGZ1bmN0aW9uKCRpbnRlcnBvbGF0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJHJvdXRlUHJvdmlkZXIpIHtcblxuICAgICRpbnRlcnBvbGF0ZVByb3ZpZGVyLnN0YXJ0U3ltYm9sKCd7JCcpO1xuICAgICRpbnRlcnBvbGF0ZVByb3ZpZGVyLmVuZFN5bWJvbCgnJH0nKTtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cbiAgICAkcm91dGVQcm92aWRlci53aGVuKFwiL2Nvbmp1Z2F0aW9uXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmwgOiBcIi9zdGF0aWMvcGFydGlhbHMvY29uanVnYXRpb24uaHRtbFwiLFxuICAgICAgICBjb250cm9sbGVyIDogXCJTbGlkZUNvbnRyb2xsZXJcIixcbiAgICAgICAgY29udHJvbGxlckFzIDogXCJzbGlkZXNcIlxuICAgIH0pO1xuXG59O1xuXG52YXIgc3RhcnR1cCA9IGZ1bmN0aW9uKFNvdXJjZVJlZ2lzdHJ5KSB7XG5cbiAgICBTb3VyY2VSZWdpc3RyeS5yZWdpc3RlcihcImNvbmp1Z2F0aW9uXCIsIFwiQ29uanVnYXRpb25TZXJ2aWNlXCIpO1xuICAgIFNvdXJjZVJlZ2lzdHJ5LnJlZ2lzdGVyKFwiUGFydGljbGVcIiwgXCJQYXJ0aWNsZVNlcnZpY2VcIik7XG5cbn1cblxuYXBwLmNvbmZpZyhjb25maWcpO1xuYXBwLnJ1bihzdGFydHVwKTtcblxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gZ2l2ZW4gYSBzdHJpbmcgYSwgYW5kIGEgc3RyaW5nIHRyYW5zZm9ybSwgcmV0dXJucyB0aGUgdHJhbnNmb3JtZWQgYS5cbi8vIGV4YW1wbGUgdHJhbnNmb3JtcyA6IFwiYT5iXCIsIFwiYT5iLGI+Y1wiLCBcIj5hXCIsIFwiYT5cIiwgXCJhPmJ8Yj5jXCJcblxuLy8gV2h5IG5vdCByZWdleD8gQmVjYXVzZSBJIGFsc28gbmVlZCB0byBwcmVzZW50IHRoZSB0cmFuc2Zvcm1hdGlvbnMgdG9cbi8vIGxheW1lbiB1c2VycyBhcyBhIGd1aWRlIG9uIGhvdyBpdCB3YXMgbWVjaGFuaWNhbGwgY29uanVnYXRlZC5cblxudmFyIFQgPSBmdW5jdGlvbih3LCB0KSB7XG5cbiAgICB2YXIgc2VncyAgPSB0LnNwbGl0KFwifFwiKTtcblxuICAgIC8vIGZvciBlYWNoIHwgZGVsaW1pdGVkIHBhcnRcblxuICAgIGZvcih2YXIgcyA9IDA7IHMgPCBzZWdzLmxlbmd0aDsgcysrKSB7XG5cbiAgICAgICAgdmFyIHBhcnRzID0gc2Vnc1tzXS5zcGxpdChcIixcIik7XG5cbiAgICAgICAgLy8gZm9yIGVhY2ggLCBkZWxpbWl0ZWQgcGFydFxuXG4gICAgICAgIGZvcih2YXIgcCA9IDA7IHAgPCBwYXJ0cy5sZW5ndGg7IHArKykge1xuXG4gICAgICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIG9wZXIgPSBwYXJ0c1twXTtcblxuICAgICAgICAgICAgLy8gcGVyZm9ybSB0aGUgPiBvcGVyYXRpb25cblxuICAgICAgICAgICAgaWYob3Blci5jb250YWlucyhcIj5cIikpIHtcblxuICAgICAgICAgICAgICAgIHZhciBiZWZyID0gb3Blci5zcGxpdChcIj5cIilbMF07XG4gICAgICAgICAgICAgICAgdmFyIGFmdHIgPSBvcGVyLnNwbGl0KFwiPlwiKVsxXTtcblxuICAgICAgICAgICAgICAgIGlmKHcuZW5kc1dpdGgoYmVmcikpe1xuICAgICAgICAgICAgICAgICAgICB3ID0gdy5zdWJzdHJpbmcoMCwgdy5sZW5ndGggLSBiZWZyLmxlbmd0aCkgKyBhZnRyO1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYnJlYWsgYWZ0ZXIgdGhlIGZpcnN0IGNoYW5nZVxuXG4gICAgICAgICAgICBpZihjaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHc7XG5cbn1cblxuLy8gdGhlIGNvbmp1Z2F0aW9uc1xuXG52YXIgZ29kYW5fY29uanVnYXRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFxuICAgIHRoaXMuZGljdCA9IFwiXCIsXG4gICAgdGhpcy5zdGVtID0gXCJ1PlwiLFxuICAgIHRoaXMudGEgICA9IFwibnU+bmRhLG11Pm5kYSxidT5uZGEscnU+dHRhLHU+dHRhLHRzdT50dGEsa3U+aXRhLGd1PmlkYSxzdT5zaGl0YVwiLFxuICAgIHRoaXMudGUgICA9IFwibnU+bmRlLG11Pm5kZSxidT5uZGUscnU+dHRlLHU+dHRlLHRzdT50dGUsa3U+aXRlLGd1PmlkZSxzdT5zaGl0ZVwiLFxuXG4gICAgdGhpcy5pbmRpY2F0aXZlID0ge1xuXG4gICAgICAgIHByZXNlbnQgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiBcIlwiLCBmb3JtYWwgOiBcInU+aW1hc3VcIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCJ1PmFuYWlcIiwgZm9ybWFsIDogXCJ1PmltYXNlblwiIH1cbiAgICAgICAgfSxcblxuICAgICAgICBwYXN0IDoge1xuICAgICAgICAgICAgcG9zaXRpdmUgOiB7IHBsYWluIDogdGhpcy50YSwgZm9ybWFsIDogXCJ1PmltYXNoaXRhXCIgfSxcbiAgICAgICAgICAgIG5lZ2F0aXZlIDogeyBwbGFpbiA6IFwidT5hbmFrYXR0YVwiLCBmb3JtYWwgOiBcInU+aW1hc2VuIGRlc2hpdGFcIiB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICB0aGlzLnBvdGVudGlhbCA9IHtcblxuICAgICAgICBwcmVzZW50IDoge1xuICAgICAgICAgICAgcG9zaXRpdmUgOiB7IHBsYWluIDogXCJ1PmVydVwiLCBmb3JtYWwgOiBcInU+ZW1hc3VcIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCJ1PmVuYWlcIiwgZm9ybWFsIDogXCJ1PmVtYXNlblwiIH1cbiAgICAgICAgfVxuXG4gICAgfTsgXG5cbiAgICB0aGlzLmNhdXNhdGl2ZSA9IHtcblxuICAgICAgICBwcmVzZW50IDoge1xuICAgICAgICAgICAgcG9zaXRpdmUgOiB7IHBsYWluIDogXCJ1PmFzZXJ1XCIsIGZvcm1hbCA6IFwidT5hc2VtYXN1XCIgfSxcbiAgICAgICAgICAgIG5lZ2F0aXZlIDogeyBwbGFpbiA6IFwidT5hc2VuYWlcIiwgZm9ybWFsIDogXCJ1PmFzZW1hc2VuXCIgfVxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgdGhpcy5pbXBlcmF0aXZlID0ge1xuXG4gICAgICAgIHByZXNlbnQgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiBcInU+ZVwiLCBmb3JtYWwgOiB0aGlzLnRlK1wifD5rdWRhc2FpXCIgfSxcbiAgICAgICAgICAgIG5lZ2F0aXZlIDogeyBwbGFpbiA6IFwiPm5hXCIsIGZvcm1hbCA6IFwidT5hbmFpIGt1ZGFzYWlcIiB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICB0aGlzLnByb2dyZXNzaXZlID0ge1xuXG4gICAgICAgIHByZXNlbnQgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiB0aGlzLnRlK1wifD5pcnVcIiwgZm9ybWFsIDogdGhpcy50ZStcInw+aW1hc3VcIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCJcIiwgZm9ybWFsIDogdGhpcy50ZStcInw+aW1hc2VuXCIgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHBhc3QgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiB0aGlzLnRlK1wifD5pdGFcIiwgZm9ybWFsIDogdGhpcy50ZStcInw+aW1hc2hpdGFcIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCJcIiwgZm9ybWFsIDogdGhpcy50ZStcInw+aW1hc2VuIGRlc2hpdGFcIiB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICB0aGlzLnByZXN1bXB0aXZlX3Byb2JhYmxlID0ge1xuXG4gICAgICAgIHByZXNlbnQgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiBcIj4gZGFyb1wiLCBmb3JtYWwgOiBcIj4gZGVzaG9cIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCJ1PmFuYWl8PiBkYXJvXCIsIGZvcm1hbCA6IFwidT5hbmFpfD4gZGVzaG9cIiB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFzdCA6IHtcbiAgICAgICAgICAgIHBvc2l0aXZlIDogeyBwbGFpbiA6IHRoaXMudGErXCJ8PiBkYXJvXCIsIGZvcm1hbCA6IHRoaXMudGErXCJ8PiBkZXNob1wifSxcbiAgICAgICAgICAgIG5lZ2F0aXZlIDogeyBwbGFpbiA6IFwidT5hbmFrYXR0YXw+IGRhcm9cIiwgZm9ybWFsIDogXCJ1PmFuYWthdHRhfD4gZGVzaG9cIiB9XG4gICAgICAgIH1cblxuICAgIH07XG5cblx0dGhpcy5wcmVzdW1wdGl2ZV9pbnRlbnQgPSB7XG5cbiAgICAgICAgcHJlc2VudCA6IHtcbiAgICAgICAgICAgIHBvc2l0aXZlIDogeyBwbGFpbiA6IFwidT5vXCIsIGZvcm1hbCA6IFwidT5tYXNob1wiIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxufTtcblxudmFyIGljaGlkYW5fY29uanVnYXRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFxuICAgIHRoaXMuZGljdCA9IFwiXCIsXG4gICAgdGhpcy5zdGVtID0gXCJydT5cIixcbiAgICB0aGlzLnRhICAgPSBcInJ1PnRhXCIsXG4gICAgdGhpcy50ZSAgID0gXCJydT50ZVwiLFxuXG4gICAgdGhpcy5pbmRpY2F0aXZlID0ge1xuXG4gICAgICAgIHByZXNlbnQgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiBcIlwiLCBmb3JtYWwgOiBcInJ1Pm1hc3VcIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCJydT5uYWlcIiwgZm9ybWFsIDogXCJydT5tYXNlblwiIH1cbiAgICAgICAgfSxcblxuICAgICAgICBwYXN0IDoge1xuICAgICAgICAgICAgcG9zaXRpdmUgOiB7IHBsYWluIDogXCJydT50YVwiLCBmb3JtYWwgOiBcInJ1Pm1hc2hpdGFcIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCJydT5uYWthdHRhXCIsIGZvcm1hbCA6IFwicnU+bWFzZW4gZGVzaGl0YVwiIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHRoaXMucG90ZW50aWFsID0ge1xuXG4gICAgICAgIHByZXNlbnQgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiBcInJ1PnJhcmVydVwiLCBmb3JtYWwgOiBcInJ1PnJhcmVtYXN1XCIgfSxcbiAgICAgICAgICAgIG5lZ2F0aXZlIDogeyBwbGFpbiA6IFwicnU+cmFyZW5haVwiLCBmb3JtYWwgOiBcInJ1PnJhcmVtYXNlblwiIH1cbiAgICAgICAgfVxuXG4gICAgfTsgXG5cbiAgICB0aGlzLmNhdXNhdGl2ZSA9IHtcblxuICAgICAgICBwcmVzZW50IDoge1xuICAgICAgICAgICAgcG9zaXRpdmUgOiB7IHBsYWluIDogXCJydT5zYXNlcnVcIiwgZm9ybWFsIDogXCJydT5zYXNlbWFzdVwiIH0sXG4gICAgICAgICAgICBuZWdhdGl2ZSA6IHsgcGxhaW4gOiBcInJ1PnNhc2VuYWlcIiwgZm9ybWFsIDogXCJydT5zYXNlbWFzZW5cIiB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICB0aGlzLmltcGVyYXRpdmUgPSB7XG5cbiAgICAgICAgcHJlc2VudCA6IHtcbiAgICAgICAgICAgIHBvc2l0aXZlIDogeyBwbGFpbiA6IFwicnU+cm9cIiwgZm9ybWFsIDogXCJydT50ZXw+a3VkYXNhaVwiIH0sXG4gICAgICAgICAgICBuZWdhdGl2ZSA6IHsgcGxhaW4gOiBcIj5uYVwiLCBmb3JtYWwgOiBcInJ1Pm5haXw+ZGUga3VkYXNhaVwiIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHRoaXMucHJvZ3Jlc3NpdmUgPSB7XG5cbiAgICAgICAgcHJlc2VudCA6IHtcbiAgICAgICAgICAgIHBvc2l0aXZlIDogeyBwbGFpbiA6IFwicnU+dGV8PmlydVwiLCBmb3JtYWwgOiBcInJ1PnRlfD5pbWFzdVwiIH0sXG4gICAgICAgICAgICBuZWdhdGl2ZSA6IHsgcGxhaW4gOiBcIlwiLCBmb3JtYWwgOiBcInJ1PnRlfD5pbWFzZW5cIiB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFzdCA6IHtcbiAgICAgICAgICAgIHBvc2l0aXZlIDogeyBwbGFpbiA6IFwicnU+dGV8Pml0YVwiLCBmb3JtYWwgOiBcInJ1PnRlfD5pbWFzaGl0YVwiIH0sXG4gICAgICAgICAgICBuZWdhdGl2ZSA6IHsgcGxhaW4gOiBcIlwiLCBmb3JtYWwgOiBcInJ1PnRlfD5pbWFzZW4gZGVzaGl0YVwiIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHRoaXMucHJlc3VtcHRpdmVfcHJvYmFibGUgPSB7XG5cbiAgICAgICAgcHJlc2VudCA6IHtcbiAgICAgICAgICAgIHBvc2l0aXZlIDogeyBwbGFpbiA6IFwiPiBkYXJvXCIsIGZvcm1hbCA6IFwicnU+bmFpIGRhcm9cIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCI+IGRlc2hvXCIsIGZvcm1hbCA6IFwicnU+bmFpIGRlc2hvXCIgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHBhc3QgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiBcInJ1PnRhfD4gZGFyb1wiLCBmb3JtYWwgOiBcInJ1PnRhfD4gZGVzaG9cIiB9LFxuICAgICAgICAgICAgbmVnYXRpdmUgOiB7IHBsYWluIDogXCJydT5uYWthdHRhfD4gZGFyb1wiLCBmb3JtYWwgOiBcInJ1Pm5ha2F0dGF8PiBkZXNob1wiIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHRoaXMucHJlc3VtcHRpdmVfaW50ZW50ID0ge1xuXG4gICAgICAgIHByZXNlbnQgOiB7XG4gICAgICAgICAgICBwb3NpdGl2ZSA6IHsgcGxhaW4gOiBcInJ1PnlvXCIsIGZvcm1hbCA6IFwicnU+IG1hc2hvXCIgfVxuICAgICAgICB9XG5cbiAgICB9O1xuXG59O1xuXG52YXIgQ29uanVnYXRpb25TZXJ2aWNlID0gZnVuY3Rpb24oKSB7XG5cbiAgICByZXR1cm4ge1xuXG4gICAgXHRnb2Rhbl9jb25qdWdhdGlvbnMgOiBuZXcgZ29kYW5fY29uanVnYXRpb25zKCksXG4gICAgICAgIGljaGlkYW5fY29uanVnYXRpb25zIDogbmV3IGljaGlkYW5fY29uanVnYXRpb25zKCksXG5cbiAgICBcdGNvbmp1Z2F0ZSA6IGZ1bmN0aW9uKHcsIGMpIHtcbiAgICBcdFx0cmV0dXJuIFQodywgYyk7XG4gICAgXHR9LFxuXG4gICAgICAgIGFsbCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICAgICAgaXRlbSA6IFwiSE9ET1I/XCIsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb24gOiBcIldoYXQncyB0aGF0IGhvZG9yP1wiLFxuICAgICAgICAgICAgICAgIGFuc3dlcnMgOiBbXCJIT0RPUlwiLCBcIkhPRE9SXCIsIFwiSE9ET1JcIl0sXG4gICAgICAgICAgICAgICAgZXhwbGFuYXRpb24gOiBcIkhPRE9SXCIsXG4gICAgICAgICAgICAgICAgZXhhbXBsZSA6IFwiSE9ET1JcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGl0ZW0gOiBcIkJST0RPUj9cIixcbiAgICAgICAgICAgICAgICBxdWVzdGlvbiA6IFwiV2hhdCdzIHRoYXQgYnJvZG9yP1wiLFxuICAgICAgICAgICAgICAgIGFuc3dlcnMgOiBbXCJCUk9ET1JcIl0sXG4gICAgICAgICAgICAgICAgZXhwbGFuYXRpb24gOiBcIkJST0RPUlwiLFxuICAgICAgICAgICAgICAgIGV4YW1wbGUgOiBcIkJST0RPUlwiXG4gICAgICAgICAgICB9XTtcbiAgICAgICAgfSxcblxuICAgICAgICBjaGVja0Fuc3dlciA6IGZ1bmN0aW9uKHF1ZXN0aW9uLCBhbnMpIHtcbiAgICAgICAgICAgIHZhciBub3JtYWxpc2VkQW5zID0gYW5zLnJlcGxhY2UoXCIgXCIsIFwiXFxcXFcqXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXN0aW9uLmFuc3dlcnMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGYpeyByZXR1cm4gZi5tYXRjaChub3JtYWxpc2VkQW5zKSAhPT0gbnVsbCB9XG4gICAgICAgICAgICApLmxlbmd0aCA+IDA7XG4gICAgICAgIH1cbiAgICB9O1xuXG59O1xuXG5hbmd1bGFyLm1vZHVsZShcImFwcC5zb3VyY2VzXCIpLmZhY3RvcnkoXCJDb25qdWdhdGlvblNlcnZpY2VcIiwgQ29uanVnYXRpb25TZXJ2aWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb25qdWdhdGlvblNlcnZpY2U7XG4iLCJcbmFuZ3VsYXIubW9kdWxlKFwiYXBwLnNvdXJjZXNcIiwgW10pO1xuXG5tb2R1bGUuZXhwb3J0cy5Db25qdWdhdGlvblNlcnZpY2UgPSByZXF1aXJlKFwiLi9jb25qdWdhdGlvbi5qc1wiKTtcbm1vZHVsZS5leHBvcnRzLlBhcnRpY2xlU2VydmljZSA9IHJlcXVpcmUoXCIuL3BhcnRpY2xlcy5qc1wiKTtcbm1vZHVsZS5leHBvcnRzLlNvdXJjZVJlZ2lzdHJ5ID0gcmVxdWlyZShcIi4vcmVnaXN0cnkuanNcIik7XG5cbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgUGFydGljbGVTZXJ2aWNlID0gZnVuY3Rpb24oKSB7XG5cbiAgICByZXR1cm4ge1xuXG4gICAgICAgIGFsbCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICAgICAgaXRlbSA6IFwi44GrXCIsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb24gOiBcIldoYXQncyB0aGF0IHBhcnRpY2xlP1wiLFxuICAgICAgICAgICAgICAgIGFuc3dlcnMgOiBbXCJ0aW1lXCIsIFwiZGVzdGluYXRpb25cIiwgXCJkaXJlY3Rpb25cIl0sXG4gICAgICAgICAgICAgICAgZXhwbGFuYXRpb24gOiBcIuOBqyBjYW4gYmUgdGhvdWdodCBvZiBhcyB0aGUgJ3RhcmdldCcgb2YgYSB2ZXJiLiBJdCBjYW4gY29tZSBhZnRlciB0aW1lLCBkZXN0aW5hdGlvblwiLFxuICAgICAgICAgICAgICAgIGV4YW1wbGUgOiBcIuOBq+OBu+OCkyA8c3Ryb25nPuOBqzwvc3Ryb25nPiDjgYTjgY3jgb7jgZkgLyB3ZW50IHRvIEphcGFuXCJcbiAgICAgICAgICAgIH0se1xuICAgICAgICAgICAgICAgIGl0ZW0gOiBcIuOBp1wiLFxuICAgICAgICAgICAgICAgIHF1ZXN0aW9uIDogXCJXaGF0J3MgdGhhdCBwYXJ0aWNsZT9cIixcbiAgICAgICAgICAgICAgICBhbnN3ZXJzIDogW1wicGxhY2VcIiwgXCJhdFwiLCBcImJ5IHdheSBvZlwiXSxcbiAgICAgICAgICAgICAgICBleHBsYW5hdGlvbiA6IFwi44GnIGRlbm90ZXMgdGhlICdob3cnIG9yICd3aGVyZScgb2YgYSB2ZXJiXCIsXG4gICAgICAgICAgICAgICAgZXhhbXBsZSA6IFwi44GP44KL44G+IDxzdHJvbmc+44GnPC9zdHJvbmc+IOOBhOOBjeOBvuOBmSAvIHRvIGdvIGJ5IGNhclwiXG4gICAgICAgICAgICB9LHtcbiAgICAgICAgICAgICAgICBpdGVtIDogXCLjga9cIixcbiAgICAgICAgICAgICAgICBxdWVzdGlvbiA6IFwiV2hhdCdzIHRoYXQgcGFydGljbGU/XCIsXG4gICAgICAgICAgICAgICAgYW5zd2VycyA6IFtcInRvcGljIG1hcmtlclwiLCBcInRvcGljXCJdLFxuICAgICAgICAgICAgICAgIGV4cGxhbmF0aW9uIDogXCLjga8gaXMgdGhlIFRvcGljIE1hcmtlciwgaXQgcGxhY2VzIGVtcGhhc2lzIG9uIHdoYXQgY2FtZSBiZWZvcmUgaXRcIixcbiAgICAgICAgICAgICAgICBleGFtcGxlIDogXCLniZsgPHN0cm9uZz7jga88L3N0cm9uZz4g44Gf44G544G+44GZIC8gSSBhdGUgdGhlIGNvd1wiXG4gICAgICAgICAgICB9LHtcbiAgICAgICAgICAgICAgICBpdGVtIDogXCLjgavjgbvjgpMgPHNwYW4gY2xhc3M9J2xpZ2h0Jz4/PC9zcGFuPiDjgYTjgY3jgb7jgZlcIixcbiAgICAgICAgICAgICAgICBxdWVzdGlvbiA6IFwiV2hhdCdzIHRoYXQgcGFydGljbGU/XCIsXG4gICAgICAgICAgICAgICAgYW5zd2VycyA6IFtcIuOBq1wiXSxcbiAgICAgICAgICAgICAgICBleHBsYW5hdGlvbiA6IFwi44GrIGNhbiBiZSB0aG91Z2h0IG9mIGFzIHRoZSAndGFyZ2V0JyBvZiBhIHZlcmIuIEl0IGNhbiBjb21lIGFmdGVyIHRpbWUsIGRlc3RpbmF0aW9uLCBkaXJlY3Rpb25cIixcbiAgICAgICAgICAgICAgICBpbWU6IHRydWVcbiAgICAgICAgICAgIH1dO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNoZWNrQW5zd2VyIDogZnVuY3Rpb24ocXVlc3Rpb24sIGFucykge1xuICAgICAgICAgICAgdmFyIG5vcm1hbGlzZWRBbnMgPSBhbnMucmVwbGFjZShcIiBcIiwgXCJcXFxcVypcIik7XG4gICAgICAgICAgICByZXR1cm4gcXVlc3Rpb24uYW5zd2Vycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZil7IHJldHVybiBmLm1hdGNoKG5vcm1hbGlzZWRBbnMpICE9PSBudWxsIH1cbiAgICAgICAgICAgICkubGVuZ3RoID4gMDtcbiAgICAgICAgfVxuXG4gICAgfVxufTtcblxuYW5ndWxhci5tb2R1bGUoXCJhcHAuc291cmNlc1wiKS5zZXJ2aWNlKFwiUGFydGljbGVTZXJ2aWNlXCIsIFBhcnRpY2xlU2VydmljZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUGFydGljbGVTZXJ2aWNlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBTb3VyY2VSZWdpc3RyeSA9IGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuXG5cdHRoaXMuc291cmNlcyA9IHt9O1xuXG5cdHRoaXMucmVnaXN0ZXIgPSBmdW5jdGlvbihuYW1lLCBjYW5vbmljYWxOYW1lKSB7XG5cdFx0dGhpcy5zb3VyY2VzW25hbWVdID0gJGluamVjdG9yLmdldChjYW5vbmljYWxOYW1lKTtcblx0fVxuXG5cdHRoaXMuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuXHRcdHJldHVybiB0aGlzLnNvdXJjZXNbbmFtZV07XG5cdH1cblxufVxuXG5hbmd1bGFyLm1vZHVsZShcImFwcC5zb3VyY2VzXCIpLnNlcnZpY2UoXCJTb3VyY2VSZWdpc3RyeVwiLCBTb3VyY2VSZWdpc3RyeSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU291cmNlUmVnaXN0cnk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciB3YW5ha2FuYSA9IHJlcXVpcmUoXCIuLi9saWIvd2FuYWthbmEuanNcIik7XG5cbnZhciBJbWVEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkFDXCIsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuXG4gICAgICAgICAgICBlbGVtLmJpbmQoXCJrZXlwcmVzc1wiLCBmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICAgICAgaWYoZXZlbnQud2hpY2ggPT0gMTMpe1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzY29wZS5xdWl6LmFuc3dlcmVkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5xdWl6Lm5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucXVpei5hdHRlbXB0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goXCJxdWl6LnF1ZXN0aW9ucy5jdXJyZW50XCIsIGZ1bmN0aW9uKG4sIG8pe1xuICAgICAgICAgICAgICAgIHdhbmFrYW5hLnVuYmluZChlbGVtWzBdKTtcbiAgICAgICAgICAgICAgICBpZihzY29wZS5maW5pc2hlZCAmJiBzY29wZS5xdWl6LnF1ZXN0aW9ucy5jdXJyZW50LmltZSl7XG4gICAgICAgICAgICAgICAgICAgIHdhbmFrYW5hLmJpbmQoZWxlbVswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgIH07XG59O1xuXG5hbmd1bGFyLm1vZHVsZShcImFwcC5pbWVcIikuZGlyZWN0aXZlKFwibmdJbWVcIiwgSW1lRGlyZWN0aXZlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbWVEaXJlY3RpdmU7XG4iLCJcbmFuZ3VsYXIubW9kdWxlKFwiYXBwLmltZVwiLCBbXSk7XG5cbm1vZHVsZS5leHBvcnRzLkltZURpcmVjdGl2ZSA9IHJlcXVpcmUoXCIuL2RpcmVjdGl2ZXMuanNcIik7XG4iLCIvKlxuIEFuZ3VsYXJKUyB2MS41LjBcbiAoYykgMjAxMC0yMDE2IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihELHIsVmEpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiB5YShhLGIsYyl7aWYoIWEpdGhyb3cgS2EoXCJhcmVxXCIsYnx8XCI/XCIsY3x8XCJyZXF1aXJlZFwiKTtyZXR1cm4gYX1mdW5jdGlvbiB6YShhLGIpe2lmKCFhJiYhYilyZXR1cm5cIlwiO2lmKCFhKXJldHVybiBiO2lmKCFiKXJldHVybiBhO2JhKGEpJiYoYT1hLmpvaW4oXCIgXCIpKTtiYShiKSYmKGI9Yi5qb2luKFwiIFwiKSk7cmV0dXJuIGErXCIgXCIrYn1mdW5jdGlvbiBMYShhKXt2YXIgYj17fTthJiYoYS50b3x8YS5mcm9tKSYmKGIudG89YS50byxiLmZyb209YS5mcm9tKTtyZXR1cm4gYn1mdW5jdGlvbiBYKGEsYixjKXt2YXIgZD1cIlwiO2E9YmEoYSk/YTphJiZSKGEpJiZhLmxlbmd0aD9hLnNwbGl0KC9cXHMrLyk6W107cyhhLGZ1bmN0aW9uKGEsZyl7YSYmMDxhLmxlbmd0aCYmKGQrPTA8Zz9cIiBcIjpcIlwiLGQrPWM/YithOmErYil9KTtyZXR1cm4gZH1mdW5jdGlvbiBNYShhKXtpZihhIGluc3RhbmNlb2YgSSlzd2l0Y2goYS5sZW5ndGgpe2Nhc2UgMDpyZXR1cm5bXTtcbmNhc2UgMTppZigxPT09YVswXS5ub2RlVHlwZSlyZXR1cm4gYTticmVhaztkZWZhdWx0OnJldHVybiBJKG9hKGEpKX1pZigxPT09YS5ub2RlVHlwZSlyZXR1cm4gSShhKX1mdW5jdGlvbiBvYShhKXtpZighYVswXSlyZXR1cm4gYTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZigxPT1jLm5vZGVUeXBlKXJldHVybiBjfX1mdW5jdGlvbiBOYShhLGIsYyl7cyhiLGZ1bmN0aW9uKGIpe2EuYWRkQ2xhc3MoYixjKX0pfWZ1bmN0aW9uIE9hKGEsYixjKXtzKGIsZnVuY3Rpb24oYil7YS5yZW1vdmVDbGFzcyhiLGMpfSl9ZnVuY3Rpb24gVShhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtjLmFkZENsYXNzJiYoTmEoYSxiLGMuYWRkQ2xhc3MpLGMuYWRkQ2xhc3M9bnVsbCk7Yy5yZW1vdmVDbGFzcyYmKE9hKGEsYixjLnJlbW92ZUNsYXNzKSxjLnJlbW92ZUNsYXNzPW51bGwpfX1mdW5jdGlvbiBrYShhKXthPWF8fHt9O2lmKCFhLiQkcHJlcGFyZWQpe3ZhciBiPWEuZG9tT3BlcmF0aW9ufHxcblE7YS5kb21PcGVyYXRpb249ZnVuY3Rpb24oKXthLiQkZG9tT3BlcmF0aW9uRmlyZWQ9ITA7YigpO2I9UX07YS4kJHByZXBhcmVkPSEwfXJldHVybiBhfWZ1bmN0aW9uIGZhKGEsYil7QWEoYSxiKTtCYShhLGIpfWZ1bmN0aW9uIEFhKGEsYil7Yi5mcm9tJiYoYS5jc3MoYi5mcm9tKSxiLmZyb209bnVsbCl9ZnVuY3Rpb24gQmEoYSxiKXtiLnRvJiYoYS5jc3MoYi50byksYi50bz1udWxsKX1mdW5jdGlvbiBWKGEsYixjKXt2YXIgZD1iLm9wdGlvbnN8fHt9O2M9Yy5vcHRpb25zfHx7fTt2YXIgZT0oZC5hZGRDbGFzc3x8XCJcIikrXCIgXCIrKGMuYWRkQ2xhc3N8fFwiXCIpLGc9KGQucmVtb3ZlQ2xhc3N8fFwiXCIpK1wiIFwiKyhjLnJlbW92ZUNsYXNzfHxcIlwiKTthPVBhKGEuYXR0cihcImNsYXNzXCIpLGUsZyk7Yy5wcmVwYXJhdGlvbkNsYXNzZXMmJihkLnByZXBhcmF0aW9uQ2xhc3Nlcz1jYShjLnByZXBhcmF0aW9uQ2xhc3NlcyxkLnByZXBhcmF0aW9uQ2xhc3NlcyksZGVsZXRlIGMucHJlcGFyYXRpb25DbGFzc2VzKTtcbmU9ZC5kb21PcGVyYXRpb24hPT1RP2QuZG9tT3BlcmF0aW9uOm51bGw7Q2EoZCxjKTtlJiYoZC5kb21PcGVyYXRpb249ZSk7ZC5hZGRDbGFzcz1hLmFkZENsYXNzP2EuYWRkQ2xhc3M6bnVsbDtkLnJlbW92ZUNsYXNzPWEucmVtb3ZlQ2xhc3M/YS5yZW1vdmVDbGFzczpudWxsO2IuYWRkQ2xhc3M9ZC5hZGRDbGFzcztiLnJlbW92ZUNsYXNzPWQucmVtb3ZlQ2xhc3M7cmV0dXJuIGR9ZnVuY3Rpb24gUGEoYSxiLGMpe2Z1bmN0aW9uIGQoYSl7UihhKSYmKGE9YS5zcGxpdChcIiBcIikpO3ZhciBiPXt9O3MoYSxmdW5jdGlvbihhKXthLmxlbmd0aCYmKGJbYV09ITApfSk7cmV0dXJuIGJ9dmFyIGU9e307YT1kKGEpO2I9ZChiKTtzKGIsZnVuY3Rpb24oYSxiKXtlW2JdPTF9KTtjPWQoYyk7cyhjLGZ1bmN0aW9uKGEsYil7ZVtiXT0xPT09ZVtiXT9udWxsOi0xfSk7dmFyIGc9e2FkZENsYXNzOlwiXCIscmVtb3ZlQ2xhc3M6XCJcIn07cyhlLGZ1bmN0aW9uKGIsYyl7dmFyIGQsZTsxPT09Yj8oZD1cImFkZENsYXNzXCIsXG5lPSFhW2NdKTotMT09PWImJihkPVwicmVtb3ZlQ2xhc3NcIixlPWFbY10pO2UmJihnW2RdLmxlbmd0aCYmKGdbZF0rPVwiIFwiKSxnW2RdKz1jKX0pO3JldHVybiBnfWZ1bmN0aW9uIEcoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiByLmVsZW1lbnQ/YVswXTphfWZ1bmN0aW9uIFFhKGEsYixjKXt2YXIgZD1cIlwiO2ImJihkPVgoYixcIm5nLVwiLCEwKSk7Yy5hZGRDbGFzcyYmKGQ9Y2EoZCxYKGMuYWRkQ2xhc3MsXCItYWRkXCIpKSk7Yy5yZW1vdmVDbGFzcyYmKGQ9Y2EoZCxYKGMucmVtb3ZlQ2xhc3MsXCItcmVtb3ZlXCIpKSk7ZC5sZW5ndGgmJihjLnByZXBhcmF0aW9uQ2xhc3Nlcz1kLGEuYWRkQ2xhc3MoZCkpfWZ1bmN0aW9uIGxhKGEsYil7dmFyIGM9Yj9cIi1cIitiK1wic1wiOlwiXCI7aGEoYSxbaWEsY10pO3JldHVybltpYSxjXX1mdW5jdGlvbiBwYShhLGIpe3ZhciBjPWI/XCJwYXVzZWRcIjpcIlwiLGQ9WStcIlBsYXlTdGF0ZVwiO2hhKGEsW2QsY10pO3JldHVybltkLGNdfWZ1bmN0aW9uIGhhKGEsYil7YS5zdHlsZVtiWzBdXT1cbmJbMV19ZnVuY3Rpb24gY2EoYSxiKXtyZXR1cm4gYT9iP2ErXCIgXCIrYjphOmJ9ZnVuY3Rpb24gRGEoYSxiLGMpe3ZhciBkPU9iamVjdC5jcmVhdGUobnVsbCksZT1hLmdldENvbXB1dGVkU3R5bGUoYil8fHt9O3MoYyxmdW5jdGlvbihhLGIpe3ZhciBjPWVbYV07aWYoYyl7dmFyIEM9Yy5jaGFyQXQoMCk7aWYoXCItXCI9PT1DfHxcIitcIj09PUN8fDA8PUMpYz1SYShjKTswPT09YyYmKGM9bnVsbCk7ZFtiXT1jfX0pO3JldHVybiBkfWZ1bmN0aW9uIFJhKGEpe3ZhciBiPTA7YT1hLnNwbGl0KC9cXHMqLFxccyovKTtzKGEsZnVuY3Rpb24oYSl7XCJzXCI9PWEuY2hhckF0KGEubGVuZ3RoLTEpJiYoYT1hLnN1YnN0cmluZygwLGEubGVuZ3RoLTEpKTthPXBhcnNlRmxvYXQoYSl8fDA7Yj1iP01hdGgubWF4KGEsYik6YX0pO3JldHVybiBifWZ1bmN0aW9uIHFhKGEpe3JldHVybiAwPT09YXx8bnVsbCE9YX1mdW5jdGlvbiBFYShhLGIpe3ZhciBjPVMsZD1hK1wic1wiO2I/Yys9XCJEdXJhdGlvblwiOmQrPVwiIGxpbmVhciBhbGxcIjtcbnJldHVybltjLGRdfWZ1bmN0aW9uIEZhKCl7dmFyIGE9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm57Zmx1c2g6ZnVuY3Rpb24oKXthPU9iamVjdC5jcmVhdGUobnVsbCl9LGNvdW50OmZ1bmN0aW9uKGIpe3JldHVybihiPWFbYl0pP2IudG90YWw6MH0sZ2V0OmZ1bmN0aW9uKGIpe3JldHVybihiPWFbYl0pJiZiLnZhbHVlfSxwdXQ6ZnVuY3Rpb24oYixjKXthW2JdP2FbYl0udG90YWwrKzphW2JdPXt0b3RhbDoxLHZhbHVlOmN9fX19ZnVuY3Rpb24gR2EoYSxiLGMpe3MoYyxmdW5jdGlvbihjKXthW2NdPVooYVtjXSk/YVtjXTpiLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoYyl9KX12YXIgUT1yLm5vb3AsSGE9ci5jb3B5LENhPXIuZXh0ZW5kLEk9ci5lbGVtZW50LHM9ci5mb3JFYWNoLGJhPXIuaXNBcnJheSxSPXIuaXNTdHJpbmcscmE9ci5pc09iamVjdCxQPXIuaXNVbmRlZmluZWQsWj1yLmlzRGVmaW5lZCxJYT1yLmlzRnVuY3Rpb24sc2E9ci5pc0VsZW1lbnQsUyx0YSxZLHVhO1AoRC5vbnRyYW5zaXRpb25lbmQpJiZcblooRC5vbndlYmtpdHRyYW5zaXRpb25lbmQpPyhTPVwiV2Via2l0VHJhbnNpdGlvblwiLHRhPVwid2Via2l0VHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kXCIpOihTPVwidHJhbnNpdGlvblwiLHRhPVwidHJhbnNpdGlvbmVuZFwiKTtQKEQub25hbmltYXRpb25lbmQpJiZaKEQub253ZWJraXRhbmltYXRpb25lbmQpPyhZPVwiV2Via2l0QW5pbWF0aW9uXCIsdWE9XCJ3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kXCIpOihZPVwiYW5pbWF0aW9uXCIsdWE9XCJhbmltYXRpb25lbmRcIik7dmFyIG1hPVkrXCJEZWxheVwiLHZhPVkrXCJEdXJhdGlvblwiLGlhPVMrXCJEZWxheVwiO0Q9UytcIkR1cmF0aW9uXCI7dmFyIEthPXIuJCRtaW5FcnIoXCJuZ1wiKSxTYT17dHJhbnNpdGlvbkR1cmF0aW9uOkQsdHJhbnNpdGlvbkRlbGF5OmlhLHRyYW5zaXRpb25Qcm9wZXJ0eTpTK1wiUHJvcGVydHlcIixhbmltYXRpb25EdXJhdGlvbjp2YSxhbmltYXRpb25EZWxheTptYSxhbmltYXRpb25JdGVyYXRpb25Db3VudDpZK1wiSXRlcmF0aW9uQ291bnRcIn0sXG5UYT17dHJhbnNpdGlvbkR1cmF0aW9uOkQsdHJhbnNpdGlvbkRlbGF5OmlhLGFuaW1hdGlvbkR1cmF0aW9uOnZhLGFuaW1hdGlvbkRlbGF5Om1hfTtyLm1vZHVsZShcIm5nQW5pbWF0ZVwiLFtdKS5kaXJlY3RpdmUoXCJuZ0FuaW1hdGVTd2FwXCIsW1wiJGFuaW1hdGVcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihhLGIpe3JldHVybntyZXN0cmljdDpcIkFcIix0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHRlcm1pbmFsOiEwLHByaW9yaXR5OjYwMCxsaW5rOmZ1bmN0aW9uKGIsZCxlLGcsSCl7dmFyIEEsQztiLiR3YXRjaENvbGxlY3Rpb24oZS5uZ0FuaW1hdGVTd2FwfHxlW1wiZm9yXCJdLGZ1bmN0aW9uKGUpe0EmJmEubGVhdmUoQSk7QyYmKEMuJGRlc3Ryb3koKSxDPW51bGwpO2lmKGV8fDA9PT1lKUM9Yi4kbmV3KCksSChDLGZ1bmN0aW9uKGIpe0E9YjthLmVudGVyKGIsbnVsbCxkKX0pfSl9fX1dKS5kaXJlY3RpdmUoXCJuZ0FuaW1hdGVDaGlsZHJlblwiLFtcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntsaW5rOmZ1bmN0aW9uKGIsXG5jLGQpe2Z1bmN0aW9uIGUoYSl7Yy5kYXRhKFwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiLFwib25cIj09PWF8fFwidHJ1ZVwiPT09YSl9dmFyIGc9ZC5uZ0FuaW1hdGVDaGlsZHJlbjtyLmlzU3RyaW5nKGcpJiYwPT09Zy5sZW5ndGg/Yy5kYXRhKFwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiLCEwKTooZShhKGcpKGIpKSxkLiRvYnNlcnZlKFwibmdBbmltYXRlQ2hpbGRyZW5cIixlKSl9fX1dKS5mYWN0b3J5KFwiJCRyQUZTY2hlZHVsZXJcIixbXCIkJHJBRlwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7ZD1kLmNvbmNhdChhKTtjKCl9ZnVuY3Rpb24gYygpe2lmKGQubGVuZ3RoKXtmb3IodmFyIGI9ZC5zaGlmdCgpLEg9MDtIPGIubGVuZ3RoO0grKyliW0hdKCk7ZXx8YShmdW5jdGlvbigpe2V8fGMoKX0pfX12YXIgZCxlO2Q9Yi5xdWV1ZT1bXTtiLndhaXRVbnRpbFF1aWV0PWZ1bmN0aW9uKGIpe2UmJmUoKTtlPWEoZnVuY3Rpb24oKXtlPW51bGw7YigpO2MoKX0pfTtyZXR1cm4gYn1dKS5wcm92aWRlcihcIiQkYW5pbWF0ZVF1ZXVlXCIsXG5bXCIkYW5pbWF0ZVByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZighYSlyZXR1cm4gbnVsbDthPWEuc3BsaXQoXCIgXCIpO3ZhciBiPU9iamVjdC5jcmVhdGUobnVsbCk7cyhhLGZ1bmN0aW9uKGEpe2JbYV09ITB9KTtyZXR1cm4gYn1mdW5jdGlvbiBjKGEsYyl7aWYoYSYmYyl7dmFyIGQ9YihjKTtyZXR1cm4gYS5zcGxpdChcIiBcIikuc29tZShmdW5jdGlvbihhKXtyZXR1cm4gZFthXX0pfX1mdW5jdGlvbiBkKGEsYixjLGQpe3JldHVybiBnW2FdLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGEoYixjLGQpfSl9ZnVuY3Rpb24gZShhLGIpe3ZhciBjPTA8KGEuYWRkQ2xhc3N8fFwiXCIpLmxlbmd0aCxkPTA8KGEucmVtb3ZlQ2xhc3N8fFwiXCIpLmxlbmd0aDtyZXR1cm4gYj9jJiZkOmN8fGR9dmFyIGc9dGhpcy5ydWxlcz17c2tpcDpbXSxjYW5jZWw6W10sam9pbjpbXX07Zy5qb2luLnB1c2goZnVuY3Rpb24oYSxiLGMpe3JldHVybiFiLnN0cnVjdHVyYWwmJmUoYil9KTtnLnNraXAucHVzaChmdW5jdGlvbihhLFxuYixjKXtyZXR1cm4hYi5zdHJ1Y3R1cmFsJiYhZShiKX0pO2cuc2tpcC5wdXNoKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5cImxlYXZlXCI9PWMuZXZlbnQmJmIuc3RydWN0dXJhbH0pO2cuc2tpcC5wdXNoKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYy5zdHJ1Y3R1cmFsJiYyPT09Yy5zdGF0ZSYmIWIuc3RydWN0dXJhbH0pO2cuY2FuY2VsLnB1c2goZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjLnN0cnVjdHVyYWwmJmIuc3RydWN0dXJhbH0pO2cuY2FuY2VsLnB1c2goZnVuY3Rpb24oYSxiLGMpe3JldHVybiAyPT09Yy5zdGF0ZSYmYi5zdHJ1Y3R1cmFsfSk7Zy5jYW5jZWwucHVzaChmdW5jdGlvbihhLGIsZCl7YT1iLmFkZENsYXNzO2I9Yi5yZW1vdmVDbGFzczt2YXIgZT1kLmFkZENsYXNzO2Q9ZC5yZW1vdmVDbGFzcztyZXR1cm4gUChhKSYmUChiKXx8UChlKSYmUChkKT8hMTpjKGEsZCl8fGMoYixlKX0pO3RoaXMuJGdldD1bXCIkJHJBRlwiLFwiJHJvb3RTY29wZVwiLFwiJHJvb3RFbGVtZW50XCIsXCIkZG9jdW1lbnRcIixcblwiJCRIYXNoTWFwXCIsXCIkJGFuaW1hdGlvblwiLFwiJCRBbmltYXRlUnVubmVyXCIsXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkJGpxTGl0ZVwiLFwiJCRmb3JjZVJlZmxvd1wiLGZ1bmN0aW9uKGIsYyxnLG0sTSxyLHUsbmEsdix6KXtmdW5jdGlvbiBLKCl7dmFyIGE9ITE7cmV0dXJuIGZ1bmN0aW9uKGIpe2E/YigpOmMuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7YT0hMDtiKCl9KX19ZnVuY3Rpb24gSihhLGIsYyl7dmFyIGY9RyhiKSxkPUcoYSksaD1bXTsoYT14W2NdKSYmcyhhLGZ1bmN0aW9uKGEpe3kuY2FsbChhLm5vZGUsZik/aC5wdXNoKGEuY2FsbGJhY2spOlwibGVhdmVcIj09PWMmJnkuY2FsbChhLm5vZGUsZCkmJmgucHVzaChhLmNhbGxiYWNrKX0pO3JldHVybiBofWZ1bmN0aW9uIGgoYSxmLGgpe2Z1bmN0aW9uIGwoYyxmLGQsaCl7ZyhmdW5jdGlvbigpe3ZhciBjPUooeSxhLGYpO2MubGVuZ3RoJiZiKGZ1bmN0aW9uKCl7cyhjLGZ1bmN0aW9uKGIpe2IoYSxkLGgpfSl9KX0pO2MucHJvZ3Jlc3MoZixcbmQsaCl9ZnVuY3Rpb24geChiKXt2YXIgYz1hLGY9bjtmLnByZXBhcmF0aW9uQ2xhc3NlcyYmKGMucmVtb3ZlQ2xhc3MoZi5wcmVwYXJhdGlvbkNsYXNzZXMpLGYucHJlcGFyYXRpb25DbGFzc2VzPW51bGwpO2YuYWN0aXZlQ2xhc3NlcyYmKGMucmVtb3ZlQ2xhc3MoZi5hY3RpdmVDbGFzc2VzKSxmLmFjdGl2ZUNsYXNzZXM9bnVsbCk7SmEoYSxuKTtmYShhLG4pO24uZG9tT3BlcmF0aW9uKCk7ay5jb21wbGV0ZSghYil9dmFyIG49SGEoaCkseix5O2lmKGE9TWEoYSkpej1HKGEpLHk9YS5wYXJlbnQoKTt2YXIgbj1rYShuKSxrPW5ldyB1LGc9SygpO2JhKG4uYWRkQ2xhc3MpJiYobi5hZGRDbGFzcz1uLmFkZENsYXNzLmpvaW4oXCIgXCIpKTtuLmFkZENsYXNzJiYhUihuLmFkZENsYXNzKSYmKG4uYWRkQ2xhc3M9bnVsbCk7YmEobi5yZW1vdmVDbGFzcykmJihuLnJlbW92ZUNsYXNzPW4ucmVtb3ZlQ2xhc3Muam9pbihcIiBcIikpO24ucmVtb3ZlQ2xhc3MmJiFSKG4ucmVtb3ZlQ2xhc3MpJiYobi5yZW1vdmVDbGFzcz1cbm51bGwpO24uZnJvbSYmIXJhKG4uZnJvbSkmJihuLmZyb209bnVsbCk7bi50byYmIXJhKG4udG8pJiYobi50bz1udWxsKTtpZigheilyZXR1cm4geCgpLGs7aD1bei5jbGFzc05hbWUsbi5hZGRDbGFzcyxuLnJlbW92ZUNsYXNzXS5qb2luKFwiIFwiKTtpZighVWEoaCkpcmV0dXJuIHgoKSxrO3ZhciBDPTA8PVtcImVudGVyXCIsXCJtb3ZlXCIsXCJsZWF2ZVwiXS5pbmRleE9mKGYpLHc9IUx8fG1bMF0uaGlkZGVufHxFLmdldCh6KTtoPSF3JiZCLmdldCh6KXx8e307dmFyIHY9ISFoLnN0YXRlO3d8fHYmJjE9PWguc3RhdGV8fCh3PSFxKGEseSxmKSk7aWYodylyZXR1cm4geCgpLGs7QyYmeGEoYSk7dz17c3RydWN0dXJhbDpDLGVsZW1lbnQ6YSxldmVudDpmLGFkZENsYXNzOm4uYWRkQ2xhc3MscmVtb3ZlQ2xhc3M6bi5yZW1vdmVDbGFzcyxjbG9zZTp4LG9wdGlvbnM6bixydW5uZXI6a307aWYodil7aWYoZChcInNraXBcIixhLHcsaCkpe2lmKDI9PT1oLnN0YXRlKXJldHVybiB4KCksaztWKGEsaCx3KTtcbnJldHVybiBoLnJ1bm5lcn1pZihkKFwiY2FuY2VsXCIsYSx3LGgpKWlmKDI9PT1oLnN0YXRlKWgucnVubmVyLmVuZCgpO2Vsc2UgaWYoaC5zdHJ1Y3R1cmFsKWguY2xvc2UoKTtlbHNlIHJldHVybiBWKGEsaCx3KSxoLnJ1bm5lcjtlbHNlIGlmKGQoXCJqb2luXCIsYSx3LGgpKWlmKDI9PT1oLnN0YXRlKVYoYSx3LHt9KTtlbHNlIHJldHVybiBRYShhLEM/ZjpudWxsLG4pLGY9dy5ldmVudD1oLmV2ZW50LG49VihhLGgsdyksaC5ydW5uZXJ9ZWxzZSBWKGEsdyx7fSk7KHY9dy5zdHJ1Y3R1cmFsKXx8KHY9XCJhbmltYXRlXCI9PT13LmV2ZW50JiYwPE9iamVjdC5rZXlzKHcub3B0aW9ucy50b3x8e30pLmxlbmd0aHx8ZSh3KSk7aWYoIXYpcmV0dXJuIHgoKSxOKGEpLGs7dmFyIE09KGguY291bnRlcnx8MCkrMTt3LmNvdW50ZXI9TTt0KGEsMSx3KTtjLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3ZhciBiPUIuZ2V0KHopLGM9IWIsYj1ifHx7fSxkPTA8KGEucGFyZW50KCl8fFtdKS5sZW5ndGgmJihcImFuaW1hdGVcIj09PVxuYi5ldmVudHx8Yi5zdHJ1Y3R1cmFsfHxlKGIpKTtpZihjfHxiLmNvdW50ZXIhPT1NfHwhZCl7YyYmKEphKGEsbiksZmEoYSxuKSk7aWYoY3x8QyYmYi5ldmVudCE9PWYpbi5kb21PcGVyYXRpb24oKSxrLmVuZCgpO2R8fE4oYSl9ZWxzZSBmPSFiLnN0cnVjdHVyYWwmJmUoYiwhMCk/XCJzZXRDbGFzc1wiOmIuZXZlbnQsdChhLDIpLGI9cihhLGYsYi5vcHRpb25zKSxiLmRvbmUoZnVuY3Rpb24oYil7eCghYik7KGI9Qi5nZXQoeikpJiZiLmNvdW50ZXI9PT1NJiZOKEcoYSkpO2woayxmLFwiY2xvc2VcIix7fSl9KSxrLnNldEhvc3QoYiksbChrLGYsXCJzdGFydFwiLHt9KX0pO3JldHVybiBrfWZ1bmN0aW9uIHhhKGEpe2E9RyhhKS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtbmctYW5pbWF0ZV1cIik7cyhhLGZ1bmN0aW9uKGEpe3ZhciBiPXBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKFwiZGF0YS1uZy1hbmltYXRlXCIpKSxjPUIuZ2V0KGEpO2lmKGMpc3dpdGNoKGIpe2Nhc2UgMjpjLnJ1bm5lci5lbmQoKTtcbmNhc2UgMTpCLnJlbW92ZShhKX19KX1mdW5jdGlvbiBOKGEpe2E9RyhhKTthLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtbmctYW5pbWF0ZVwiKTtCLnJlbW92ZShhKX1mdW5jdGlvbiBrKGEsYil7cmV0dXJuIEcoYSk9PT1HKGIpfWZ1bmN0aW9uIHEoYSxiLGMpe2M9SShtWzBdLmJvZHkpO3ZhciBmPWsoYSxjKXx8XCJIVE1MXCI9PT1hWzBdLm5vZGVOYW1lLGQ9ayhhLGcpLGg9ITEsbCxlPUUuZ2V0KEcoYSkpO2ZvcigoYT1hLmRhdGEoXCIkbmdBbmltYXRlUGluXCIpKSYmKGI9YSk7YiYmYi5sZW5ndGg7KXtkfHwoZD1rKGIsZykpO3ZhciB4PWJbMF07aWYoMSE9PXgubm9kZVR5cGUpYnJlYWs7YT1CLmdldCh4KXx8e307aWYoIWgpe3g9RS5nZXQoeCk7aWYoITA9PT14JiYhMSE9PWUpe2U9ITA7YnJlYWt9ZWxzZSExPT09eCYmKGU9ITEpO2g9YS5zdHJ1Y3R1cmFsfWlmKFAobCl8fCEwPT09bClhPWIuZGF0YShcIiQkbmdBbmltYXRlQ2hpbGRyZW5cIiksWihhKSYmKGw9YSk7aWYoaCYmITE9PT1sKWJyZWFrO1xuZnx8KGY9ayhiLGMpKTtpZihmJiZkKWJyZWFrO2lmKCFkJiYoYT1iLmRhdGEoXCIkbmdBbmltYXRlUGluXCIpKSl7Yj1hO2NvbnRpbnVlfWI9Yi5wYXJlbnQoKX1yZXR1cm4oIWh8fGwpJiYhMCE9PWUmJmQmJmZ9ZnVuY3Rpb24gdChhLGIsYyl7Yz1jfHx7fTtjLnN0YXRlPWI7YT1HKGEpO2Euc2V0QXR0cmlidXRlKFwiZGF0YS1uZy1hbmltYXRlXCIsYik7Yz0oYj1CLmdldChhKSk/Q2EoYixjKTpjO0IucHV0KGEsYyl9dmFyIEI9bmV3IE0sRT1uZXcgTSxMPW51bGwsZj1jLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiAwPT09bmEudG90YWxQZW5kaW5nUmVxdWVzdHN9LGZ1bmN0aW9uKGEpe2EmJihmKCksYy4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtjLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe251bGw9PT1MJiYoTD0hMCl9KX0pKX0pLHg9e30sbD1hLmNsYXNzTmFtZUZpbHRlcigpLFVhPWw/ZnVuY3Rpb24oYSl7cmV0dXJuIGwudGVzdChhKX06ZnVuY3Rpb24oKXtyZXR1cm4hMH0sSmE9VSh2KSxcbnk9Tm9kZS5wcm90b3R5cGUuY29udGFpbnN8fGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzPT09YXx8ISEodGhpcy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKSYxNil9O3JldHVybntvbjpmdW5jdGlvbihhLGIsYyl7Yj1vYShiKTt4W2FdPXhbYV18fFtdO3hbYV0ucHVzaCh7bm9kZTpiLGNhbGxiYWNrOmN9KX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBmKGEsYixjKXt2YXIgZD1vYShiKTtyZXR1cm4gYS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIShhLm5vZGU9PT1kJiYoIWN8fGEuY2FsbGJhY2s9PT1jKSl9KX12YXIgZD14W2FdO2QmJih4W2FdPTE9PT1hcmd1bWVudHMubGVuZ3RoP251bGw6ZihkLGIsYykpfSxwaW46ZnVuY3Rpb24oYSxiKXt5YShzYShhKSxcImVsZW1lbnRcIixcIm5vdCBhbiBlbGVtZW50XCIpO3lhKHNhKGIpLFwicGFyZW50RWxlbWVudFwiLFwibm90IGFuIGVsZW1lbnRcIik7YS5kYXRhKFwiJG5nQW5pbWF0ZVBpblwiLGIpfSxwdXNoOmZ1bmN0aW9uKGEsYixjLGYpe2M9XG5jfHx7fTtjLmRvbU9wZXJhdGlvbj1mO3JldHVybiBoKGEsYixjKX0sZW5hYmxlZDpmdW5jdGlvbihhLGIpe3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMD09PWMpYj0hIUw7ZWxzZSBpZihzYShhKSl7dmFyIGY9RyhhKSxkPUUuZ2V0KGYpOzE9PT1jP2I9IWQ6RS5wdXQoZiwhYil9ZWxzZSBiPUw9ISFhO3JldHVybiBifX19XX1dKS5wcm92aWRlcihcIiQkYW5pbWF0aW9uXCIsW1wiJGFuaW1hdGVQcm92aWRlclwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuZGF0YShcIiQkYW5pbWF0aW9uUnVubmVyXCIpfXZhciBjPXRoaXMuZHJpdmVycz1bXTt0aGlzLiRnZXQ9W1wiJCRqcUxpdGVcIixcIiRyb290U2NvcGVcIixcIiRpbmplY3RvclwiLFwiJCRBbmltYXRlUnVubmVyXCIsXCIkJEhhc2hNYXBcIixcIiQkckFGU2NoZWR1bGVyXCIsZnVuY3Rpb24oYSxlLGcsSCxBLEMpe2Z1bmN0aW9uIG0oYSl7ZnVuY3Rpb24gYihhKXtpZihhLnByb2Nlc3NlZClyZXR1cm4gYTthLnByb2Nlc3NlZD0hMDt2YXIgZD1cbmEuZG9tTm9kZSxOPWQucGFyZW50Tm9kZTtlLnB1dChkLGEpO2Zvcih2YXIgaztOOyl7aWYoaz1lLmdldChOKSl7ay5wcm9jZXNzZWR8fChrPWIoaykpO2JyZWFrfU49Ti5wYXJlbnROb2RlfShrfHxjKS5jaGlsZHJlbi5wdXNoKGEpO3JldHVybiBhfXZhciBjPXtjaGlsZHJlbjpbXX0sZCxlPW5ldyBBO2ZvcihkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBnPWFbZF07ZS5wdXQoZy5kb21Ob2RlLGFbZF09e2RvbU5vZGU6Zy5kb21Ob2RlLGZuOmcuZm4sY2hpbGRyZW46W119KX1mb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWIoYVtkXSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZDtmb3IoZD0wO2Q8YS5jaGlsZHJlbi5sZW5ndGg7ZCsrKWMucHVzaChhLmNoaWxkcmVuW2RdKTthPWMubGVuZ3RoO3ZhciBlPTAsdD1bXTtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZz1jW2RdOzA+PWEmJihhPWUsZT0wLGIucHVzaCh0KSx0PVtdKTt0LnB1c2goZy5mbik7Zy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2UrKztcbmMucHVzaChhKX0pO2EtLX10Lmxlbmd0aCYmYi5wdXNoKHQpO3JldHVybiBifShjKX12YXIgTT1bXSxyPVUoYSk7cmV0dXJuIGZ1bmN0aW9uKHUsQSx2KXtmdW5jdGlvbiB6KGEpe2E9YS5oYXNBdHRyaWJ1dGUoXCJuZy1hbmltYXRlLXJlZlwiKT9bYV06YS5xdWVyeVNlbGVjdG9yQWxsKFwiW25nLWFuaW1hdGUtcmVmXVwiKTt2YXIgYj1bXTtzKGEsZnVuY3Rpb24oYSl7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJuZy1hbmltYXRlLXJlZlwiKTtjJiZjLmxlbmd0aCYmYi5wdXNoKGEpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gSyhhKXt2YXIgYj1bXSxjPXt9O3MoYSxmdW5jdGlvbihhLGYpe3ZhciBkPUcoYS5lbGVtZW50KSxoPTA8PVtcImVudGVyXCIsXCJtb3ZlXCJdLmluZGV4T2YoYS5ldmVudCksZD1hLnN0cnVjdHVyYWw/eihkKTpbXTtpZihkLmxlbmd0aCl7dmFyIGU9aD9cInRvXCI6XCJmcm9tXCI7cyhkLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwibmctYW5pbWF0ZS1yZWZcIik7Y1tiXT1jW2JdfHxcbnt9O2NbYl1bZV09e2FuaW1hdGlvbklEOmYsZWxlbWVudDpJKGEpfX0pfWVsc2UgYi5wdXNoKGEpfSk7dmFyIGQ9e30saD17fTtzKGMsZnVuY3Rpb24oYyxlKXt2YXIgbD1jLmZyb20sdD1jLnRvO2lmKGwmJnQpe3ZhciBnPWFbbC5hbmltYXRpb25JRF0sRT1hW3QuYW5pbWF0aW9uSURdLGs9bC5hbmltYXRpb25JRC50b1N0cmluZygpO2lmKCFoW2tdKXt2YXIgej1oW2tdPXtzdHJ1Y3R1cmFsOiEwLGJlZm9yZVN0YXJ0OmZ1bmN0aW9uKCl7Zy5iZWZvcmVTdGFydCgpO0UuYmVmb3JlU3RhcnQoKX0sY2xvc2U6ZnVuY3Rpb24oKXtnLmNsb3NlKCk7RS5jbG9zZSgpfSxjbGFzc2VzOkooZy5jbGFzc2VzLEUuY2xhc3NlcyksZnJvbTpnLHRvOkUsYW5jaG9yczpbXX07ei5jbGFzc2VzLmxlbmd0aD9iLnB1c2goeik6KGIucHVzaChnKSxiLnB1c2goRSkpfWhba10uYW5jaG9ycy5wdXNoKHtvdXQ6bC5lbGVtZW50LFwiaW5cIjp0LmVsZW1lbnR9KX1lbHNlIGw9bD9sLmFuaW1hdGlvbklEOnQuYW5pbWF0aW9uSUQsXG50PWwudG9TdHJpbmcoKSxkW3RdfHwoZFt0XT0hMCxiLnB1c2goYVtsXSkpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gSihhLGIpe2E9YS5zcGxpdChcIiBcIik7Yj1iLnNwbGl0KFwiIFwiKTtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgaD1hW2RdO2lmKFwibmctXCIhPT1oLnN1YnN0cmluZygwLDMpKWZvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSsrKWlmKGg9PT1iW2VdKXtjLnB1c2goaCk7YnJlYWt9fXJldHVybiBjLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPWMubGVuZ3RoLTE7MDw9YjtiLS0pe3ZhciBkPWNbYl07aWYoZy5oYXMoZCkmJihkPWcuZ2V0KGQpKGEpKSlyZXR1cm4gZH19ZnVuY3Rpb24geGEoYSxjKXthLmZyb20mJmEudG8/KGIoYS5mcm9tLmVsZW1lbnQpLnNldEhvc3QoYyksYihhLnRvLmVsZW1lbnQpLnNldEhvc3QoYykpOmIoYS5lbGVtZW50KS5zZXRIb3N0KGMpfWZ1bmN0aW9uIE4oKXt2YXIgYT1iKHUpOyFhfHxcImxlYXZlXCI9PT1BJiZ2LiQkZG9tT3BlcmF0aW9uRmlyZWR8fFxuYS5lbmQoKX1mdW5jdGlvbiBrKGIpe3Uub2ZmKFwiJGRlc3Ryb3lcIixOKTt1LnJlbW92ZURhdGEoXCIkJGFuaW1hdGlvblJ1bm5lclwiKTtyKHUsdik7ZmEodSx2KTt2LmRvbU9wZXJhdGlvbigpO0UmJmEucmVtb3ZlQ2xhc3ModSxFKTt1LnJlbW92ZUNsYXNzKFwibmctYW5pbWF0ZVwiKTt0LmNvbXBsZXRlKCFiKX12PWthKHYpO3ZhciBxPTA8PVtcImVudGVyXCIsXCJtb3ZlXCIsXCJsZWF2ZVwiXS5pbmRleE9mKEEpLHQ9bmV3IEgoe2VuZDpmdW5jdGlvbigpe2soKX0sY2FuY2VsOmZ1bmN0aW9uKCl7ayghMCl9fSk7aWYoIWMubGVuZ3RoKXJldHVybiBrKCksdDt1LmRhdGEoXCIkJGFuaW1hdGlvblJ1bm5lclwiLHQpO3ZhciBCPXphKHUuYXR0cihcImNsYXNzXCIpLHphKHYuYWRkQ2xhc3Msdi5yZW1vdmVDbGFzcykpLEU9di50ZW1wQ2xhc3NlcztFJiYoQis9XCIgXCIrRSx2LnRlbXBDbGFzc2VzPW51bGwpO3ZhciBMO3EmJihMPVwibmctXCIrQStcIi1wcmVwYXJlXCIsYS5hZGRDbGFzcyh1LEwpKTtNLnB1c2goe2VsZW1lbnQ6dSxcbmNsYXNzZXM6QixldmVudDpBLHN0cnVjdHVyYWw6cSxvcHRpb25zOnYsYmVmb3JlU3RhcnQ6ZnVuY3Rpb24oKXt1LmFkZENsYXNzKFwibmctYW5pbWF0ZVwiKTtFJiZhLmFkZENsYXNzKHUsRSk7TCYmKGEucmVtb3ZlQ2xhc3ModSxMKSxMPW51bGwpfSxjbG9zZTprfSk7dS5vbihcIiRkZXN0cm95XCIsTik7aWYoMTxNLmxlbmd0aClyZXR1cm4gdDtlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3ZhciBhPVtdO3MoTSxmdW5jdGlvbihjKXtiKGMuZWxlbWVudCk/YS5wdXNoKGMpOmMuY2xvc2UoKX0pO00ubGVuZ3RoPTA7dmFyIGM9SyhhKSxkPVtdO3MoYyxmdW5jdGlvbihhKXtkLnB1c2goe2RvbU5vZGU6RyhhLmZyb20/YS5mcm9tLmVsZW1lbnQ6YS5lbGVtZW50KSxmbjpmdW5jdGlvbigpe2EuYmVmb3JlU3RhcnQoKTt2YXIgYyxkPWEuY2xvc2U7aWYoYihhLmFuY2hvcnM/YS5mcm9tLmVsZW1lbnR8fGEudG8uZWxlbWVudDphLmVsZW1lbnQpKXt2YXIgZj1oKGEpO2YmJihjPWYuc3RhcnQpfWM/XG4oYz1jKCksYy5kb25lKGZ1bmN0aW9uKGEpe2QoIWEpfSkseGEoYSxjKSk6ZCgpfX0pfSk7QyhtKGQpKX0pO3JldHVybiB0fX1dfV0pLnByb3ZpZGVyKFwiJGFuaW1hdGVDc3NcIixbXCIkYW5pbWF0ZVByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7dmFyIGI9RmEoKSxjPUZhKCk7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiQkanFMaXRlXCIsXCIkJEFuaW1hdGVSdW5uZXJcIixcIiR0aW1lb3V0XCIsXCIkJGZvcmNlUmVmbG93XCIsXCIkc25pZmZlclwiLFwiJCRyQUZTY2hlZHVsZXJcIixcIiQkYW5pbWF0ZVF1ZXVlXCIsZnVuY3Rpb24oYSxlLGcsSCxBLEMsbSxNKXtmdW5jdGlvbiByKGEsYil7dmFyIGM9YS5wYXJlbnROb2RlO3JldHVybihjLiQkbmdBbmltYXRlUGFyZW50S2V5fHwoYy4kJG5nQW5pbWF0ZVBhcmVudEtleT0rK0spKStcIi1cIithLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpK1wiLVwiK2J9ZnVuY3Rpb24gdShoLGcseixrKXt2YXIgcTswPGIuY291bnQoeikmJihxPWMuZ2V0KHopLHF8fChnPVgoZyxcIi1zdGFnZ2VyXCIpLFxuZS5hZGRDbGFzcyhoLGcpLHE9RGEoYSxoLGspLHEuYW5pbWF0aW9uRHVyYXRpb249TWF0aC5tYXgocS5hbmltYXRpb25EdXJhdGlvbiwwKSxxLnRyYW5zaXRpb25EdXJhdGlvbj1NYXRoLm1heChxLnRyYW5zaXRpb25EdXJhdGlvbiwwKSxlLnJlbW92ZUNsYXNzKGgsZyksYy5wdXQoeixxKSkpO3JldHVybiBxfHx7fX1mdW5jdGlvbiBuYShhKXtKLnB1c2goYSk7bS53YWl0VW50aWxRdWlldChmdW5jdGlvbigpe2IuZmx1c2goKTtjLmZsdXNoKCk7Zm9yKHZhciBhPUEoKSxkPTA7ZDxKLmxlbmd0aDtkKyspSltkXShhKTtKLmxlbmd0aD0wfSl9ZnVuY3Rpb24gdihjLGUsZyl7ZT1iLmdldChnKTtlfHwoZT1EYShhLGMsU2EpLFwiaW5maW5pdGVcIj09PWUuYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQmJihlLmFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50PTEpKTtiLnB1dChnLGUpO2M9ZTtnPWMuYW5pbWF0aW9uRGVsYXk7ZT1jLnRyYW5zaXRpb25EZWxheTtjLm1heERlbGF5PWcmJmU/TWF0aC5tYXgoZyxcbmUpOmd8fGU7Yy5tYXhEdXJhdGlvbj1NYXRoLm1heChjLmFuaW1hdGlvbkR1cmF0aW9uKmMuYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQsYy50cmFuc2l0aW9uRHVyYXRpb24pO3JldHVybiBjfXZhciB6PVUoZSksSz0wLEo9W107cmV0dXJuIGZ1bmN0aW9uKGEsYyl7ZnVuY3Rpb24gZCgpe3EoKX1mdW5jdGlvbiBrKCl7cSghMCl9ZnVuY3Rpb24gcShiKXtpZighKEF8fHdhJiZLKSl7QT0hMDtLPSExO2YuJCRza2lwUHJlcGFyYXRpb25DbGFzc2VzfHxlLnJlbW92ZUNsYXNzKGEsZGEpO2UucmVtb3ZlQ2xhc3MoYSxjYSk7cGEobCwhMSk7bGEobCwhMSk7cyhtLGZ1bmN0aW9uKGEpe2wuc3R5bGVbYVswXV09XCJcIn0pO3ooYSxmKTtmYShhLGYpO09iamVjdC5rZXlzKHgpLmxlbmd0aCYmcyh4LGZ1bmN0aW9uKGEsYil7YT9sLnN0eWxlLnNldFByb3BlcnR5KGIsYSk6bC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShiKX0pO2lmKGYub25Eb25lKWYub25Eb25lKCk7ZWEmJmVhLmxlbmd0aCYmYS5vZmYoZWEuam9pbihcIiBcIiksXG5FKTt2YXIgYz1hLmRhdGEoXCIkJGFuaW1hdGVDc3NcIik7YyYmKEguY2FuY2VsKGNbMF0udGltZXIpLGEucmVtb3ZlRGF0YShcIiQkYW5pbWF0ZUNzc1wiKSk7RCYmRC5jb21wbGV0ZSghYil9fWZ1bmN0aW9uIHQoYSl7cC5ibG9ja1RyYW5zaXRpb24mJmxhKGwsYSk7cC5ibG9ja0tleWZyYW1lQW5pbWF0aW9uJiZwYShsLCEhYSl9ZnVuY3Rpb24gQigpe0Q9bmV3IGcoe2VuZDpkLGNhbmNlbDprfSk7bmEoUSk7cSgpO3JldHVybnskJHdpbGxBbmltYXRlOiExLHN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIER9LGVuZDpkfX1mdW5jdGlvbiBFKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGI9YS5vcmlnaW5hbEV2ZW50fHxhO2E9Yi4kbWFudWFsVGltZVN0YW1wfHxEYXRlLm5vdygpO2I9cGFyc2VGbG9hdChiLmVsYXBzZWRUaW1lLnRvRml4ZWQoMykpO01hdGgubWF4KGEtVSwwKT49UCYmYj49TyYmKHdhPSEwLHEoKSl9ZnVuY3Rpb24gTCgpe2Z1bmN0aW9uIGIoKXtpZighQSl7dCghMSk7cyhtLFxuZnVuY3Rpb24oYSl7bC5zdHlsZVthWzBdXT1hWzFdfSk7eihhLGYpO2UuYWRkQ2xhc3MoYSxjYSk7aWYocC5yZWNhbGN1bGF0ZVRpbWluZ1N0eWxlcyl7amE9bC5jbGFzc05hbWUrXCIgXCIrZGE7Z2E9cihsLGphKTtGPXYobCxqYSxnYSk7JD1GLm1heERlbGF5O249TWF0aC5tYXgoJCwwKTtPPUYubWF4RHVyYXRpb247aWYoMD09PU8pe3EoKTtyZXR1cm59cC5oYXNUcmFuc2l0aW9ucz0wPEYudHJhbnNpdGlvbkR1cmF0aW9uO3AuaGFzQW5pbWF0aW9ucz0wPEYuYW5pbWF0aW9uRHVyYXRpb259cC5hcHBseUFuaW1hdGlvbkRlbGF5JiYoJD1cImJvb2xlYW5cIiE9PXR5cGVvZiBmLmRlbGF5JiZxYShmLmRlbGF5KT9wYXJzZUZsb2F0KGYuZGVsYXkpOiQsbj1NYXRoLm1heCgkLDApLEYuYW5pbWF0aW9uRGVsYXk9JCxhYT1bbWEsJCtcInNcIl0sbS5wdXNoKGFhKSxsLnN0eWxlW2FhWzBdXT1hYVsxXSk7UD0xRTMqbjtSPTFFMypPO2lmKGYuZWFzaW5nKXt2YXIgZCxnPWYuZWFzaW5nO3AuaGFzVHJhbnNpdGlvbnMmJlxuKGQ9UytcIlRpbWluZ0Z1bmN0aW9uXCIsbS5wdXNoKFtkLGddKSxsLnN0eWxlW2RdPWcpO3AuaGFzQW5pbWF0aW9ucyYmKGQ9WStcIlRpbWluZ0Z1bmN0aW9uXCIsbS5wdXNoKFtkLGddKSxsLnN0eWxlW2RdPWcpfUYudHJhbnNpdGlvbkR1cmF0aW9uJiZlYS5wdXNoKHRhKTtGLmFuaW1hdGlvbkR1cmF0aW9uJiZlYS5wdXNoKHVhKTtVPURhdGUubm93KCk7dmFyIGs9UCsxLjUqUjtkPVUrazt2YXIgZz1hLmRhdGEoXCIkJGFuaW1hdGVDc3NcIil8fFtdLEw9ITA7aWYoZy5sZW5ndGgpe3ZhciBCPWdbMF07KEw9ZD5CLmV4cGVjdGVkRW5kVGltZSk/SC5jYW5jZWwoQi50aW1lcik6Zy5wdXNoKHEpfUwmJihrPUgoYyxrLCExKSxnWzBdPXt0aW1lcjprLGV4cGVjdGVkRW5kVGltZTpkfSxnLnB1c2gocSksYS5kYXRhKFwiJCRhbmltYXRlQ3NzXCIsZykpO2lmKGVhLmxlbmd0aClhLm9uKGVhLmpvaW4oXCIgXCIpLEUpO2YudG8mJihmLmNsZWFudXBTdHlsZXMmJkdhKHgsbCxPYmplY3Qua2V5cyhmLnRvKSksQmEoYSxcbmYpKX19ZnVuY3Rpb24gYygpe3ZhciBiPWEuZGF0YShcIiQkYW5pbWF0ZUNzc1wiKTtpZihiKXtmb3IodmFyIGQ9MTtkPGIubGVuZ3RoO2QrKyliW2RdKCk7YS5yZW1vdmVEYXRhKFwiJCRhbmltYXRlQ3NzXCIpfX1pZighQSlpZihsLnBhcmVudE5vZGUpe3ZhciBkPWZ1bmN0aW9uKGEpe2lmKHdhKUsmJmEmJihLPSExLHEoKSk7ZWxzZSBpZihLPSFhLEYuYW5pbWF0aW9uRHVyYXRpb24paWYoYT1wYShsLEspLEspbS5wdXNoKGEpO2Vsc2V7dmFyIGI9bSxjPWIuaW5kZXhPZihhKTswPD1hJiZiLnNwbGljZShjLDEpfX0sZz0wPFomJihGLnRyYW5zaXRpb25EdXJhdGlvbiYmMD09PVcudHJhbnNpdGlvbkR1cmF0aW9ufHxGLmFuaW1hdGlvbkR1cmF0aW9uJiYwPT09Vy5hbmltYXRpb25EdXJhdGlvbikmJk1hdGgubWF4KFcuYW5pbWF0aW9uRGVsYXksVy50cmFuc2l0aW9uRGVsYXkpO2c/SChiLE1hdGguZmxvb3IoZypaKjFFMyksITEpOmIoKTtJLnJlc3VtZT1mdW5jdGlvbigpe2QoITApfTtJLnBhdXNlPVxuZnVuY3Rpb24oKXtkKCExKX19ZWxzZSBxKCl9dmFyIGY9Y3x8e307Zi4kJHByZXBhcmVkfHwoZj1rYShIYShmKSkpO3ZhciB4PXt9LGw9RyhhKTtpZighbHx8IWwucGFyZW50Tm9kZXx8IU0uZW5hYmxlZCgpKXJldHVybiBCKCk7dmFyIG09W10sSj1hLmF0dHIoXCJjbGFzc1wiKSx5PUxhKGYpLEEsSyx3YSxELEksbixQLE8sUixVLGVhPVtdO2lmKDA9PT1mLmR1cmF0aW9ufHwhQy5hbmltYXRpb25zJiYhQy50cmFuc2l0aW9ucylyZXR1cm4gQigpO3ZhciB3PWYuZXZlbnQmJmJhKGYuZXZlbnQpP2YuZXZlbnQuam9pbihcIiBcIik6Zi5ldmVudCxWPVwiXCIsVD1cIlwiO3cmJmYuc3RydWN0dXJhbD9WPVgodyxcIm5nLVwiLCEwKTp3JiYoVj13KTtmLmFkZENsYXNzJiYoVCs9WChmLmFkZENsYXNzLFwiLWFkZFwiKSk7Zi5yZW1vdmVDbGFzcyYmKFQubGVuZ3RoJiYoVCs9XCIgXCIpLFQrPVgoZi5yZW1vdmVDbGFzcyxcIi1yZW1vdmVcIikpO2YuYXBwbHlDbGFzc2VzRWFybHkmJlQubGVuZ3RoJiZ6KGEsZik7dmFyIGRhPVxuW1YsVF0uam9pbihcIiBcIikudHJpbSgpLGphPUorXCIgXCIrZGEsY2E9WChkYSxcIi1hY3RpdmVcIiksSj15LnRvJiYwPE9iamVjdC5rZXlzKHkudG8pLmxlbmd0aDtpZighKDA8KGYua2V5ZnJhbWVTdHlsZXx8XCJcIikubGVuZ3RofHxKfHxkYSkpcmV0dXJuIEIoKTt2YXIgZ2EsVzswPGYuc3RhZ2dlcj8oeT1wYXJzZUZsb2F0KGYuc3RhZ2dlciksVz17dHJhbnNpdGlvbkRlbGF5OnksYW5pbWF0aW9uRGVsYXk6eSx0cmFuc2l0aW9uRHVyYXRpb246MCxhbmltYXRpb25EdXJhdGlvbjowfSk6KGdhPXIobCxqYSksVz11KGwsZGEsZ2EsVGEpKTtmLiQkc2tpcFByZXBhcmF0aW9uQ2xhc3Nlc3x8ZS5hZGRDbGFzcyhhLGRhKTtmLnRyYW5zaXRpb25TdHlsZSYmKHk9W1MsZi50cmFuc2l0aW9uU3R5bGVdLGhhKGwseSksbS5wdXNoKHkpKTswPD1mLmR1cmF0aW9uJiYoeT0wPGwuc3R5bGVbU10ubGVuZ3RoLHk9RWEoZi5kdXJhdGlvbix5KSxoYShsLHkpLG0ucHVzaCh5KSk7Zi5rZXlmcmFtZVN0eWxlJiZcbih5PVtZLGYua2V5ZnJhbWVTdHlsZV0saGEobCx5KSxtLnB1c2goeSkpO3ZhciBaPVc/MDw9Zi5zdGFnZ2VySW5kZXg/Zi5zdGFnZ2VySW5kZXg6Yi5jb3VudChnYSk6MDsodz0wPT09WikmJiFmLnNraXBCbG9ja2luZyYmbGEobCw5OTk5KTt2YXIgRj12KGwsamEsZ2EpLCQ9Ri5tYXhEZWxheTtuPU1hdGgubWF4KCQsMCk7Tz1GLm1heER1cmF0aW9uO3ZhciBwPXt9O3AuaGFzVHJhbnNpdGlvbnM9MDxGLnRyYW5zaXRpb25EdXJhdGlvbjtwLmhhc0FuaW1hdGlvbnM9MDxGLmFuaW1hdGlvbkR1cmF0aW9uO3AuaGFzVHJhbnNpdGlvbkFsbD1wLmhhc1RyYW5zaXRpb25zJiZcImFsbFwiPT1GLnRyYW5zaXRpb25Qcm9wZXJ0eTtwLmFwcGx5VHJhbnNpdGlvbkR1cmF0aW9uPUomJihwLmhhc1RyYW5zaXRpb25zJiYhcC5oYXNUcmFuc2l0aW9uQWxsfHxwLmhhc0FuaW1hdGlvbnMmJiFwLmhhc1RyYW5zaXRpb25zKTtwLmFwcGx5QW5pbWF0aW9uRHVyYXRpb249Zi5kdXJhdGlvbiYmcC5oYXNBbmltYXRpb25zO1xucC5hcHBseVRyYW5zaXRpb25EZWxheT1xYShmLmRlbGF5KSYmKHAuYXBwbHlUcmFuc2l0aW9uRHVyYXRpb258fHAuaGFzVHJhbnNpdGlvbnMpO3AuYXBwbHlBbmltYXRpb25EZWxheT1xYShmLmRlbGF5KSYmcC5oYXNBbmltYXRpb25zO3AucmVjYWxjdWxhdGVUaW1pbmdTdHlsZXM9MDxULmxlbmd0aDtpZihwLmFwcGx5VHJhbnNpdGlvbkR1cmF0aW9ufHxwLmFwcGx5QW5pbWF0aW9uRHVyYXRpb24pTz1mLmR1cmF0aW9uP3BhcnNlRmxvYXQoZi5kdXJhdGlvbik6TyxwLmFwcGx5VHJhbnNpdGlvbkR1cmF0aW9uJiYocC5oYXNUcmFuc2l0aW9ucz0hMCxGLnRyYW5zaXRpb25EdXJhdGlvbj1PLHk9MDxsLnN0eWxlW1MrXCJQcm9wZXJ0eVwiXS5sZW5ndGgsbS5wdXNoKEVhKE8seSkpKSxwLmFwcGx5QW5pbWF0aW9uRHVyYXRpb24mJihwLmhhc0FuaW1hdGlvbnM9ITAsRi5hbmltYXRpb25EdXJhdGlvbj1PLG0ucHVzaChbdmEsTytcInNcIl0pKTtpZigwPT09TyYmIXAucmVjYWxjdWxhdGVUaW1pbmdTdHlsZXMpcmV0dXJuIEIoKTtcbmlmKG51bGwhPWYuZGVsYXkpe3ZhciBhYTtcImJvb2xlYW5cIiE9PXR5cGVvZiBmLmRlbGF5JiYoYWE9cGFyc2VGbG9hdChmLmRlbGF5KSxuPU1hdGgubWF4KGFhLDApKTtwLmFwcGx5VHJhbnNpdGlvbkRlbGF5JiZtLnB1c2goW2lhLGFhK1wic1wiXSk7cC5hcHBseUFuaW1hdGlvbkRlbGF5JiZtLnB1c2goW21hLGFhK1wic1wiXSl9bnVsbD09Zi5kdXJhdGlvbiYmMDxGLnRyYW5zaXRpb25EdXJhdGlvbiYmKHAucmVjYWxjdWxhdGVUaW1pbmdTdHlsZXM9cC5yZWNhbGN1bGF0ZVRpbWluZ1N0eWxlc3x8dyk7UD0xRTMqbjtSPTFFMypPO2Yuc2tpcEJsb2NraW5nfHwocC5ibG9ja1RyYW5zaXRpb249MDxGLnRyYW5zaXRpb25EdXJhdGlvbixwLmJsb2NrS2V5ZnJhbWVBbmltYXRpb249MDxGLmFuaW1hdGlvbkR1cmF0aW9uJiYwPFcuYW5pbWF0aW9uRGVsYXkmJjA9PT1XLmFuaW1hdGlvbkR1cmF0aW9uKTtmLmZyb20mJihmLmNsZWFudXBTdHlsZXMmJkdhKHgsbCxPYmplY3Qua2V5cyhmLmZyb20pKSxcbkFhKGEsZikpO3AuYmxvY2tUcmFuc2l0aW9ufHxwLmJsb2NrS2V5ZnJhbWVBbmltYXRpb24/dChPKTpmLnNraXBCbG9ja2luZ3x8bGEobCwhMSk7cmV0dXJueyQkd2lsbEFuaW1hdGU6ITAsZW5kOmQsc3RhcnQ6ZnVuY3Rpb24oKXtpZighQSlyZXR1cm4gST17ZW5kOmQsY2FuY2VsOmsscmVzdW1lOm51bGwscGF1c2U6bnVsbH0sRD1uZXcgZyhJKSxuYShMKSxEfX19fV19XSkucHJvdmlkZXIoXCIkJGFuaW1hdGVDc3NEcml2ZXJcIixbXCIkJGFuaW1hdGlvblByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7YS5kcml2ZXJzLnB1c2goXCIkJGFuaW1hdGVDc3NEcml2ZXJcIik7dGhpcy4kZ2V0PVtcIiRhbmltYXRlQ3NzXCIsXCIkcm9vdFNjb3BlXCIsXCIkJEFuaW1hdGVSdW5uZXJcIixcIiRyb290RWxlbWVudFwiLFwiJHNuaWZmZXJcIixcIiQkanFMaXRlXCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihhLGMsZCxlLGcsSCxBKXtmdW5jdGlvbiBDKGEpe3JldHVybiBhLnJlcGxhY2UoL1xcYm5nLVxcUytcXGIvZyxcIlwiKX1mdW5jdGlvbiBtKGEsXG5iKXtSKGEpJiYoYT1hLnNwbGl0KFwiIFwiKSk7UihiKSYmKGI9Yi5zcGxpdChcIiBcIikpO3JldHVybiBhLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4tMT09PWIuaW5kZXhPZihhKX0pLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIE0oYyxlLGcpe2Z1bmN0aW9uIGgoYSl7dmFyIGI9e30sYz1HKGEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3MoW1wid2lkdGhcIixcImhlaWdodFwiLFwidG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEpe3ZhciBkPWNbYV07c3dpdGNoKGEpe2Nhc2UgXCJ0b3BcIjpkKz1ELnNjcm9sbFRvcDticmVhaztjYXNlIFwibGVmdFwiOmQrPUQuc2Nyb2xsTGVmdH1iW2FdPU1hdGguZmxvb3IoZCkrXCJweFwifSk7cmV0dXJuIGJ9ZnVuY3Rpb24gQSgpe3ZhciBjPUMoZy5hdHRyKFwiY2xhc3NcIil8fFwiXCIpLGQ9bShjLHEpLGM9bShxLGMpLGQ9YShrLHt0bzpoKGcpLGFkZENsYXNzOlwibmctYW5jaG9yLWluIFwiK2QscmVtb3ZlQ2xhc3M6XCJuZy1hbmNob3Itb3V0IFwiK2MsZGVsYXk6ITB9KTtyZXR1cm4gZC4kJHdpbGxBbmltYXRlP1xuZDpudWxsfWZ1bmN0aW9uIEgoKXtrLnJlbW92ZSgpO2UucmVtb3ZlQ2xhc3MoXCJuZy1hbmltYXRlLXNoaW1cIik7Zy5yZW1vdmVDbGFzcyhcIm5nLWFuaW1hdGUtc2hpbVwiKX12YXIgaz1JKEcoZSkuY2xvbmVOb2RlKCEwKSkscT1DKGsuYXR0cihcImNsYXNzXCIpfHxcIlwiKTtlLmFkZENsYXNzKFwibmctYW5pbWF0ZS1zaGltXCIpO2cuYWRkQ2xhc3MoXCJuZy1hbmltYXRlLXNoaW1cIik7ay5hZGRDbGFzcyhcIm5nLWFuY2hvclwiKTt2LmFwcGVuZChrKTt2YXIgdDtjPWZ1bmN0aW9uKCl7dmFyIGM9YShrLHthZGRDbGFzczpcIm5nLWFuY2hvci1vdXRcIixkZWxheTohMCxmcm9tOmgoZSl9KTtyZXR1cm4gYy4kJHdpbGxBbmltYXRlP2M6bnVsbH0oKTtpZighYyYmKHQ9QSgpLCF0KSlyZXR1cm4gSCgpO3ZhciBCPWN8fHQ7cmV0dXJue3N0YXJ0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe2MmJmMuZW5kKCl9dmFyIGIsYz1CLnN0YXJ0KCk7Yy5kb25lKGZ1bmN0aW9uKCl7Yz1udWxsO2lmKCF0JiYodD1BKCkpKXJldHVybiBjPVxudC5zdGFydCgpLGMuZG9uZShmdW5jdGlvbigpe2M9bnVsbDtIKCk7Yi5jb21wbGV0ZSgpfSksYztIKCk7Yi5jb21wbGV0ZSgpfSk7cmV0dXJuIGI9bmV3IGQoe2VuZDphLGNhbmNlbDphfSl9fX1mdW5jdGlvbiByKGEsYixjLGUpe3ZhciBnPXUoYSxRKSxtPXUoYixRKSxrPVtdO3MoZSxmdW5jdGlvbihhKXsoYT1NKGMsYS5vdXQsYVtcImluXCJdKSkmJmsucHVzaChhKX0pO2lmKGd8fG18fDAhPT1rLmxlbmd0aClyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cyhiLGZ1bmN0aW9uKGEpe2EuZW5kKCl9KX12YXIgYj1bXTtnJiZiLnB1c2goZy5zdGFydCgpKTttJiZiLnB1c2gobS5zdGFydCgpKTtzKGssZnVuY3Rpb24oYSl7Yi5wdXNoKGEuc3RhcnQoKSl9KTt2YXIgYz1uZXcgZCh7ZW5kOmEsY2FuY2VsOmF9KTtkLmFsbChiLGZ1bmN0aW9uKGEpe2MuY29tcGxldGUoYSl9KTtyZXR1cm4gY319fWZ1bmN0aW9uIHUoYyl7dmFyIGQ9Yy5lbGVtZW50LGU9Yy5vcHRpb25zfHxcbnt9O2Muc3RydWN0dXJhbCYmKGUuZXZlbnQ9Yy5ldmVudCxlLnN0cnVjdHVyYWw9ITAsZS5hcHBseUNsYXNzZXNFYXJseT0hMCxcImxlYXZlXCI9PT1jLmV2ZW50JiYoZS5vbkRvbmU9ZS5kb21PcGVyYXRpb24pKTtlLnByZXBhcmF0aW9uQ2xhc3NlcyYmKGUuZXZlbnQ9Y2EoZS5ldmVudCxlLnByZXBhcmF0aW9uQ2xhc3NlcykpO2M9YShkLGUpO3JldHVybiBjLiQkd2lsbEFuaW1hdGU/YzpudWxsfWlmKCFnLmFuaW1hdGlvbnMmJiFnLnRyYW5zaXRpb25zKXJldHVybiBRO3ZhciBEPUFbMF0uYm9keTtjPUcoZSk7dmFyIHY9SShjLnBhcmVudE5vZGUmJjExPT09Yy5wYXJlbnROb2RlLm5vZGVUeXBlfHxELmNvbnRhaW5zKGMpP2M6RCk7VShIKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZnJvbSYmYS50bz9yKGEuZnJvbSxhLnRvLGEuY2xhc3NlcyxhLmFuY2hvcnMpOnUoYSl9fV19XSkucHJvdmlkZXIoXCIkJGFuaW1hdGVKc1wiLFtcIiRhbmltYXRlUHJvdmlkZXJcIixmdW5jdGlvbihhKXt0aGlzLiRnZXQ9XG5bXCIkaW5qZWN0b3JcIixcIiQkQW5pbWF0ZVJ1bm5lclwiLFwiJCRqcUxpdGVcIixmdW5jdGlvbihiLGMsZCl7ZnVuY3Rpb24gZShjKXtjPWJhKGMpP2M6Yy5zcGxpdChcIiBcIik7Zm9yKHZhciBkPVtdLGU9e30sZz0wO2c8Yy5sZW5ndGg7ZysrKXt2YXIgcz1jW2ddLHI9YS4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW3NdO3ImJiFlW3NdJiYoZC5wdXNoKGIuZ2V0KHIpKSxlW3NdPSEwKX1yZXR1cm4gZH12YXIgZz1VKGQpO3JldHVybiBmdW5jdGlvbihhLGIsZCxtKXtmdW5jdGlvbiByKCl7bS5kb21PcGVyYXRpb24oKTtnKGEsbSl9ZnVuY3Rpb24gRChhLGIsZCxlLGYpe3N3aXRjaChkKXtjYXNlIFwiYW5pbWF0ZVwiOmI9W2IsZS5mcm9tLGUudG8sZl07YnJlYWs7Y2FzZSBcInNldENsYXNzXCI6Yj1bYix6LEssZl07YnJlYWs7Y2FzZSBcImFkZENsYXNzXCI6Yj1bYix6LGZdO2JyZWFrO2Nhc2UgXCJyZW1vdmVDbGFzc1wiOmI9W2IsSyxmXTticmVhaztkZWZhdWx0OmI9W2IsZl19Yi5wdXNoKGUpO2lmKGE9YS5hcHBseShhLFxuYikpaWYoSWEoYS5zdGFydCkmJihhPWEuc3RhcnQoKSksYSBpbnN0YW5jZW9mIGMpYS5kb25lKGYpO2Vsc2UgaWYoSWEoYSkpcmV0dXJuIGE7cmV0dXJuIFF9ZnVuY3Rpb24gdShhLGIsZCxlLGYpe3ZhciBnPVtdO3MoZSxmdW5jdGlvbihlKXt2YXIgaD1lW2ZdO2gmJmcucHVzaChmdW5jdGlvbigpe3ZhciBlLGYsZz0hMSxrPWZ1bmN0aW9uKGEpe2d8fChnPSEwLChmfHxRKShhKSxlLmNvbXBsZXRlKCFhKSl9O2U9bmV3IGMoe2VuZDpmdW5jdGlvbigpe2soKX0sY2FuY2VsOmZ1bmN0aW9uKCl7ayghMCl9fSk7Zj1EKGgsYSxiLGQsZnVuY3Rpb24oYSl7ayghMT09PWEpfSk7cmV0dXJuIGV9KX0pO3JldHVybiBnfWZ1bmN0aW9uIEcoYSxiLGQsZSxmKXt2YXIgZz11KGEsYixkLGUsZik7aWYoMD09PWcubGVuZ3RoKXt2YXIgaCxrO1wiYmVmb3JlU2V0Q2xhc3NcIj09PWY/KGg9dShhLFwicmVtb3ZlQ2xhc3NcIixkLGUsXCJiZWZvcmVSZW1vdmVDbGFzc1wiKSxrPXUoYSxcImFkZENsYXNzXCIsZCxlLFwiYmVmb3JlQWRkQ2xhc3NcIikpOlxuXCJzZXRDbGFzc1wiPT09ZiYmKGg9dShhLFwicmVtb3ZlQ2xhc3NcIixkLGUsXCJyZW1vdmVDbGFzc1wiKSxrPXUoYSxcImFkZENsYXNzXCIsZCxlLFwiYWRkQ2xhc3NcIikpO2gmJihnPWcuY29uY2F0KGgpKTtrJiYoZz1nLmNvbmNhdChrKSl9aWYoMCE9PWcubGVuZ3RoKXJldHVybiBmdW5jdGlvbihhKXt2YXIgYj1bXTtnLmxlbmd0aCYmcyhnLGZ1bmN0aW9uKGEpe2IucHVzaChhKCkpfSk7Yi5sZW5ndGg/Yy5hbGwoYixhKTphKCk7cmV0dXJuIGZ1bmN0aW9uKGEpe3MoYixmdW5jdGlvbihiKXthP2IuY2FuY2VsKCk6Yi5lbmQoKX0pfX19dmFyIHY9ITE7Mz09PWFyZ3VtZW50cy5sZW5ndGgmJnJhKGQpJiYobT1kLGQ9bnVsbCk7bT1rYShtKTtkfHwoZD1hLmF0dHIoXCJjbGFzc1wiKXx8XCJcIixtLmFkZENsYXNzJiYoZCs9XCIgXCIrbS5hZGRDbGFzcyksbS5yZW1vdmVDbGFzcyYmKGQrPVwiIFwiK20ucmVtb3ZlQ2xhc3MpKTt2YXIgej1tLmFkZENsYXNzLEs9bS5yZW1vdmVDbGFzcyxKPWUoZCksaCxJO2lmKEoubGVuZ3RoKXt2YXIgTixcbms7XCJsZWF2ZVwiPT1iPyhrPVwibGVhdmVcIixOPVwiYWZ0ZXJMZWF2ZVwiKTooaz1cImJlZm9yZVwiK2IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zdWJzdHIoMSksTj1iKTtcImVudGVyXCIhPT1iJiZcIm1vdmVcIiE9PWImJihoPUcoYSxiLG0sSixrKSk7ST1HKGEsYixtLEosTil9aWYoaHx8SSl7dmFyIHE7cmV0dXJueyQkd2lsbEFuaW1hdGU6ITAsZW5kOmZ1bmN0aW9uKCl7cT9xLmVuZCgpOih2PSEwLHIoKSxmYShhLG0pLHE9bmV3IGMscS5jb21wbGV0ZSghMCkpO3JldHVybiBxfSxzdGFydDpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYyl7dj0hMDtyKCk7ZmEoYSxtKTtxLmNvbXBsZXRlKGMpfWlmKHEpcmV0dXJuIHE7cT1uZXcgYzt2YXIgZCxlPVtdO2gmJmUucHVzaChmdW5jdGlvbihhKXtkPWgoYSl9KTtlLmxlbmd0aD9lLnB1c2goZnVuY3Rpb24oYSl7cigpO2EoITApfSk6cigpO0kmJmUucHVzaChmdW5jdGlvbihhKXtkPUkoYSl9KTtxLnNldEhvc3Qoe2VuZDpmdW5jdGlvbigpe3Z8fCgoZHx8XG5RKSh2b2lkIDApLGIodm9pZCAwKSl9LGNhbmNlbDpmdW5jdGlvbigpe3Z8fCgoZHx8USkoITApLGIoITApKX19KTtjLmNoYWluKGUsYik7cmV0dXJuIHF9fX19fV19XSkucHJvdmlkZXIoXCIkJGFuaW1hdGVKc0RyaXZlclwiLFtcIiQkYW5pbWF0aW9uUHJvdmlkZXJcIixmdW5jdGlvbihhKXthLmRyaXZlcnMucHVzaChcIiQkYW5pbWF0ZUpzRHJpdmVyXCIpO3RoaXMuJGdldD1bXCIkJGFuaW1hdGVKc1wiLFwiJCRBbmltYXRlUnVubmVyXCIsZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKGMpe3JldHVybiBhKGMuZWxlbWVudCxjLmV2ZW50LGMuY2xhc3NlcyxjLm9wdGlvbnMpfXJldHVybiBmdW5jdGlvbihhKXtpZihhLmZyb20mJmEudG8pe3ZhciBiPWQoYS5mcm9tKSxyPWQoYS50byk7aWYoYnx8cilyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cyhkLGZ1bmN0aW9uKGEpe2EuZW5kKCl9KX19dmFyIGQ9W107YiYmZC5wdXNoKGIuc3RhcnQoKSk7ciYmXG5kLnB1c2goci5zdGFydCgpKTtjLmFsbChkLGZ1bmN0aW9uKGEpe2UuY29tcGxldGUoYSl9KTt2YXIgZT1uZXcgYyh7ZW5kOmEoKSxjYW5jZWw6YSgpfSk7cmV0dXJuIGV9fX1lbHNlIHJldHVybiBkKGEpfX1dfV0pfSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItYW5pbWF0ZS5taW4uanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS41LjBcbiAqIChjKSAyMDEwLTIwMTYgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhciwgdW5kZWZpbmVkKSB7XG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAbmdkb2Mgb2JqZWN0XG4gKiBAbmFtZSBhbmd1bGFyLm1vY2tcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE5hbWVzcGFjZSBmcm9tICdhbmd1bGFyLW1vY2tzLmpzJyB3aGljaCBjb250YWlucyB0ZXN0aW5nIHJlbGF0ZWQgY29kZS5cbiAqL1xuYW5ndWxhci5tb2NrID0ge307XG5cbi8qKlxuICogISBUaGlzIGlzIGEgcHJpdmF0ZSB1bmRvY3VtZW50ZWQgc2VydmljZSAhXG4gKlxuICogQG5hbWUgJGJyb3dzZXJcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgc2VydmljZSBpcyBhIG1vY2sgaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIG5nLiRicm93c2VyfS4gSXQgcHJvdmlkZXMgZmFrZVxuICogaW1wbGVtZW50YXRpb24gZm9yIGNvbW1vbmx5IHVzZWQgYnJvd3NlciBhcGlzIHRoYXQgYXJlIGhhcmQgdG8gdGVzdCwgZS5nLiBzZXRUaW1lb3V0LCB4aHIsXG4gKiBjb29raWVzLCBldGMuLi5cbiAqXG4gKiBUaGUgYXBpIG9mIHRoaXMgc2VydmljZSBpcyB0aGUgc2FtZSBhcyB0aGF0IG9mIHRoZSByZWFsIHtAbGluayBuZy4kYnJvd3NlciAkYnJvd3Nlcn0sIGV4Y2VwdFxuICogdGhhdCB0aGVyZSBhcmUgc2V2ZXJhbCBoZWxwZXIgbWV0aG9kcyBhdmFpbGFibGUgd2hpY2ggY2FuIGJlIHVzZWQgaW4gdGVzdHMuXG4gKi9cbmFuZ3VsYXIubW9jay4kQnJvd3NlclByb3ZpZGVyID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgYW5ndWxhci5tb2NrLiRCcm93c2VyKCk7XG4gIH07XG59O1xuXG5hbmd1bGFyLm1vY2suJEJyb3dzZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHRoaXMuaXNNb2NrID0gdHJ1ZTtcbiAgc2VsZi4kJHVybCA9IFwiaHR0cDovL3NlcnZlci9cIjtcbiAgc2VsZi4kJGxhc3RVcmwgPSBzZWxmLiQkdXJsOyAvLyB1c2VkIGJ5IHVybCBwb2xsaW5nIGZuXG4gIHNlbGYucG9sbEZucyA9IFtdO1xuXG4gIC8vIFRPRE8odm9qdGEpOiByZW1vdmUgdGhpcyB0ZW1wb3JhcnkgYXBpXG4gIHNlbGYuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCA9IGFuZ3VsYXIubm9vcDtcbiAgc2VsZi4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50ID0gYW5ndWxhci5ub29wO1xuXG5cbiAgLy8gcmVnaXN0ZXIgdXJsIHBvbGxpbmcgZm5cblxuICBzZWxmLm9uVXJsQ2hhbmdlID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICBzZWxmLnBvbGxGbnMucHVzaChcbiAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoc2VsZi4kJGxhc3RVcmwgIT09IHNlbGYuJCR1cmwgfHwgc2VsZi4kJHN0YXRlICE9PSBzZWxmLiQkbGFzdFN0YXRlKSB7XG4gICAgICAgICAgc2VsZi4kJGxhc3RVcmwgPSBzZWxmLiQkdXJsO1xuICAgICAgICAgIHNlbGYuJCRsYXN0U3RhdGUgPSBzZWxmLiQkc3RhdGU7XG4gICAgICAgICAgbGlzdGVuZXIoc2VsZi4kJHVybCwgc2VsZi4kJHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG5cbiAgICByZXR1cm4gbGlzdGVuZXI7XG4gIH07XG5cbiAgc2VsZi4kJGFwcGxpY2F0aW9uRGVzdHJveWVkID0gYW5ndWxhci5ub29wO1xuICBzZWxmLiQkY2hlY2tVcmxDaGFuZ2UgPSBhbmd1bGFyLm5vb3A7XG5cbiAgc2VsZi5kZWZlcnJlZEZucyA9IFtdO1xuICBzZWxmLmRlZmVycmVkTmV4dElkID0gMDtcblxuICBzZWxmLmRlZmVyID0gZnVuY3Rpb24oZm4sIGRlbGF5KSB7XG4gICAgZGVsYXkgPSBkZWxheSB8fCAwO1xuICAgIHNlbGYuZGVmZXJyZWRGbnMucHVzaCh7dGltZTooc2VsZi5kZWZlci5ub3cgKyBkZWxheSksIGZuOmZuLCBpZDogc2VsZi5kZWZlcnJlZE5leHRJZH0pO1xuICAgIHNlbGYuZGVmZXJyZWRGbnMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhLnRpbWUgLSBiLnRpbWU7fSk7XG4gICAgcmV0dXJuIHNlbGYuZGVmZXJyZWROZXh0SWQrKztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNkZWZlci5ub3dcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEN1cnJlbnQgbWlsbGlzZWNvbmRzIG1vY2sgdGltZS5cbiAgICovXG4gIHNlbGYuZGVmZXIubm93ID0gMDtcblxuXG4gIHNlbGYuZGVmZXIuY2FuY2VsID0gZnVuY3Rpb24oZGVmZXJJZCkge1xuICAgIHZhciBmbkluZGV4O1xuXG4gICAgYW5ndWxhci5mb3JFYWNoKHNlbGYuZGVmZXJyZWRGbnMsIGZ1bmN0aW9uKGZuLCBpbmRleCkge1xuICAgICAgaWYgKGZuLmlkID09PSBkZWZlcklkKSBmbkluZGV4ID0gaW5kZXg7XG4gICAgfSk7XG5cbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZm5JbmRleCkpIHtcbiAgICAgIHNlbGYuZGVmZXJyZWRGbnMuc3BsaWNlKGZuSW5kZXgsIDEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyLmZsdXNoXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBGbHVzaGVzIGFsbCBwZW5kaW5nIHJlcXVlc3RzIGFuZCBleGVjdXRlcyB0aGUgZGVmZXIgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcj19IG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZmx1c2guIFNlZSB7QGxpbmsgI2RlZmVyLm5vd31cbiAgICovXG4gIHNlbGYuZGVmZXIuZmx1c2ggPSBmdW5jdGlvbihkZWxheSkge1xuICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChkZWxheSkpIHtcbiAgICAgIHNlbGYuZGVmZXIubm93ICs9IGRlbGF5O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc2VsZi5kZWZlcnJlZEZucy5sZW5ndGgpIHtcbiAgICAgICAgc2VsZi5kZWZlci5ub3cgPSBzZWxmLmRlZmVycmVkRm5zW3NlbGYuZGVmZXJyZWRGbnMubGVuZ3RoIC0gMV0udGltZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGVmZXJyZWQgdGFza3MgdG8gYmUgZmx1c2hlZCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHdoaWxlIChzZWxmLmRlZmVycmVkRm5zLmxlbmd0aCAmJiBzZWxmLmRlZmVycmVkRm5zWzBdLnRpbWUgPD0gc2VsZi5kZWZlci5ub3cpIHtcbiAgICAgIHNlbGYuZGVmZXJyZWRGbnMuc2hpZnQoKS5mbigpO1xuICAgIH1cbiAgfTtcblxuICBzZWxmLiQkYmFzZUhyZWYgPSAnLyc7XG4gIHNlbGYuYmFzZUhyZWYgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4kJGJhc2VIcmVmO1xuICB9O1xufTtcbmFuZ3VsYXIubW9jay4kQnJvd3Nlci5wcm90b3R5cGUgPSB7XG5cbi8qKlxuICAqIEBuYW1lICRicm93c2VyI3BvbGxcbiAgKlxuICAqIEBkZXNjcmlwdGlvblxuICAqIHJ1biBhbGwgZm5zIGluIHBvbGxGbnNcbiAgKi9cbiAgcG9sbDogZnVuY3Rpb24gcG9sbCgpIHtcbiAgICBhbmd1bGFyLmZvckVhY2godGhpcy5wb2xsRm5zLCBmdW5jdGlvbihwb2xsRm4pIHtcbiAgICAgIHBvbGxGbigpO1xuICAgIH0pO1xuICB9LFxuXG4gIHVybDogZnVuY3Rpb24odXJsLCByZXBsYWNlLCBzdGF0ZSkge1xuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHN0YXRlKSkge1xuICAgICAgc3RhdGUgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodXJsKSB7XG4gICAgICB0aGlzLiQkdXJsID0gdXJsO1xuICAgICAgLy8gTmF0aXZlIHB1c2hTdGF0ZSBzZXJpYWxpemVzICYgY29waWVzIHRoZSBvYmplY3Q7IHNpbXVsYXRlIGl0LlxuICAgICAgdGhpcy4kJHN0YXRlID0gYW5ndWxhci5jb3B5KHN0YXRlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLiQkdXJsO1xuICB9LFxuXG4gIHN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4kJHN0YXRlO1xuICB9LFxuXG4gIG5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHM6IGZ1bmN0aW9uKGZuKSB7XG4gICAgZm4oKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29uZmlndXJlcyB0aGUgbW9jayBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXJ9IHRvIHJldGhyb3cgb3IgdG8gbG9nIGVycm9yc1xuICogcGFzc2VkIHRvIHRoZSBgJGV4Y2VwdGlvbkhhbmRsZXJgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRleGNlcHRpb25IYW5kbGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBNb2NrIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlcn0gdGhhdCByZXRocm93cyBvciBsb2dzIGVycm9ycyBwYXNzZWRcbiAqIHRvIGl0LiBTZWUge0BsaW5rIG5nTW9jay4kZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyICRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXJ9IGZvciBjb25maWd1cmF0aW9uXG4gKiBpbmZvcm1hdGlvbi5cbiAqXG4gKlxuICogYGBganNcbiAqICAgZGVzY3JpYmUoJyRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXInLCBmdW5jdGlvbigpIHtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBjYXB0dXJlIGxvZyBtZXNzYWdlcyBhbmQgZXhjZXB0aW9ucycsIGZ1bmN0aW9uKCkge1xuICpcbiAqICAgICAgIG1vZHVsZShmdW5jdGlvbigkZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyKSB7XG4gKiAgICAgICAgICRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXIubW9kZSgnbG9nJyk7XG4gKiAgICAgICB9KTtcbiAqXG4gKiAgICAgICBpbmplY3QoZnVuY3Rpb24oJGxvZywgJGV4Y2VwdGlvbkhhbmRsZXIsICR0aW1lb3V0KSB7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygxKTsgfSk7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygyKTsgdGhyb3cgJ2JhbmFuYSBwZWVsJzsgfSk7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygzKTsgfSk7XG4gKiAgICAgICAgIGV4cGVjdCgkZXhjZXB0aW9uSGFuZGxlci5lcnJvcnMpLnRvRXF1YWwoW10pO1xuICogICAgICAgICBleHBlY3QoJGxvZy5hc3NlcnRFbXB0eSgpKTtcbiAqICAgICAgICAgJHRpbWVvdXQuZmx1c2goKTtcbiAqICAgICAgICAgZXhwZWN0KCRleGNlcHRpb25IYW5kbGVyLmVycm9ycykudG9FcXVhbChbJ2JhbmFuYSBwZWVsJ10pO1xuICogICAgICAgICBleHBlY3QoJGxvZy5sb2cubG9ncykudG9FcXVhbChbWzFdLCBbMl0sIFszXV0pO1xuICogICAgICAgfSk7XG4gKiAgICAgfSk7XG4gKiAgIH0pO1xuICogYGBgXG4gKi9cblxuYW5ndWxhci5tb2NrLiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGhhbmRsZXI7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlciNtb2RlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBsb2dnaW5nIG1vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIE1vZGUgb2Ygb3BlcmF0aW9uLCBkZWZhdWx0cyB0byBgcmV0aHJvd2AuXG4gICAqXG4gICAqICAgLSBgbG9nYDogU29tZXRpbWVzIGl0IGlzIGRlc2lyYWJsZSB0byB0ZXN0IHRoYXQgYW4gZXJyb3IgaXMgdGhyb3duLCBmb3IgdGhpcyBjYXNlIHRoZSBgbG9nYFxuICAgKiAgICAgICAgICAgIG1vZGUgc3RvcmVzIGFuIGFycmF5IG9mIGVycm9ycyBpbiBgJGV4Y2VwdGlvbkhhbmRsZXIuZXJyb3JzYCwgdG8gYWxsb3cgbGF0ZXJcbiAgICogICAgICAgICAgICBhc3NlcnRpb24gb2YgdGhlbS4gU2VlIHtAbGluayBuZ01vY2suJGxvZyNhc3NlcnRFbXB0eSBhc3NlcnRFbXB0eSgpfSBhbmRcbiAgICogICAgICAgICAgICB7QGxpbmsgbmdNb2NrLiRsb2cjcmVzZXQgcmVzZXQoKX1cbiAgICogICAtIGByZXRocm93YDogSWYgYW55IGVycm9ycyBhcmUgcGFzc2VkIHRvIHRoZSBoYW5kbGVyIGluIHRlc3RzLCBpdCB0eXBpY2FsbHkgbWVhbnMgdGhhdCB0aGVyZVxuICAgKiAgICAgICAgICAgICAgICBpcyBhIGJ1ZyBpbiB0aGUgYXBwbGljYXRpb24gb3IgdGVzdCwgc28gdGhpcyBtb2NrIHdpbGwgbWFrZSB0aGVzZSB0ZXN0cyBmYWlsLlxuICAgKiAgICAgICAgICAgICAgICBGb3IgYW55IGltcGxlbWVudGF0aW9ucyB0aGF0IGV4cGVjdCBleGNlcHRpb25zIHRvIGJlIHRocm93biwgdGhlIGByZXRocm93YCBtb2RlXG4gICAqICAgICAgICAgICAgICAgIHdpbGwgYWxzbyBtYWludGFpbiBhIGxvZyBvZiB0aHJvd24gZXJyb3JzLlxuICAgKi9cbiAgdGhpcy5tb2RlID0gZnVuY3Rpb24obW9kZSkge1xuXG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICdsb2cnOlxuICAgICAgY2FzZSAncmV0aHJvdyc6XG4gICAgICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwicmV0aHJvd1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaGFuZGxlci5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBtb2RlICdcIiArIG1vZGUgKyBcIicsIG9ubHkgJ2xvZycvJ3JldGhyb3cnIG1vZGVzIGFyZSBhbGxvd2VkIVwiKTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGhhbmRsZXI7XG4gIH07XG5cbiAgdGhpcy5tb2RlKCdyZXRocm93Jyk7XG59O1xuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRsb2dcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIE1vY2sgaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIG5nLiRsb2d9IHRoYXQgZ2F0aGVycyBhbGwgbG9nZ2VkIG1lc3NhZ2VzIGluIGFycmF5c1xuICogKG9uZSBhcnJheSBwZXIgbG9nZ2luZyBsZXZlbCkuIFRoZXNlIGFycmF5cyBhcmUgZXhwb3NlZCBhcyBgbG9nc2AgcHJvcGVydHkgb2YgZWFjaCBvZiB0aGVcbiAqIGxldmVsLXNwZWNpZmljIGxvZyBmdW5jdGlvbiwgZS5nLiBmb3IgbGV2ZWwgYGVycm9yYCB0aGUgYXJyYXkgaXMgZXhwb3NlZCBhcyBgJGxvZy5lcnJvci5sb2dzYC5cbiAqXG4gKi9cbmFuZ3VsYXIubW9jay4kTG9nUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGRlYnVnID0gdHJ1ZTtcblxuICBmdW5jdGlvbiBjb25jYXQoYXJyYXkxLCBhcnJheTIsIGluZGV4KSB7XG4gICAgcmV0dXJuIGFycmF5MS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyYXkyLCBpbmRleCkpO1xuICB9XG5cbiAgdGhpcy5kZWJ1Z0VuYWJsZWQgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGZsYWcpKSB7XG4gICAgICBkZWJ1ZyA9IGZsYWc7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRlYnVnO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgJGxvZyA9IHtcbiAgICAgIGxvZzogZnVuY3Rpb24oKSB7ICRsb2cubG9nLmxvZ3MucHVzaChjb25jYXQoW10sIGFyZ3VtZW50cywgMCkpOyB9LFxuICAgICAgd2FybjogZnVuY3Rpb24oKSB7ICRsb2cud2Fybi5sb2dzLnB1c2goY29uY2F0KFtdLCBhcmd1bWVudHMsIDApKTsgfSxcbiAgICAgIGluZm86IGZ1bmN0aW9uKCkgeyAkbG9nLmluZm8ubG9ncy5wdXNoKGNvbmNhdChbXSwgYXJndW1lbnRzLCAwKSk7IH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oKSB7ICRsb2cuZXJyb3IubG9ncy5wdXNoKGNvbmNhdChbXSwgYXJndW1lbnRzLCAwKSk7IH0sXG4gICAgICBkZWJ1ZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICRsb2cuZGVidWcubG9ncy5wdXNoKGNvbmNhdChbXSwgYXJndW1lbnRzLCAwKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRsb2cjcmVzZXRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFJlc2V0IGFsbCBvZiB0aGUgbG9nZ2luZyBhcnJheXMgdG8gZW1wdHkuXG4gICAgICovXG4gICAgJGxvZy5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAqIEBuYW1lICRsb2cjbG9nLmxvZ3NcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFycmF5IG9mIG1lc3NhZ2VzIGxvZ2dlZCB1c2luZyB7QGxpbmsgbmcuJGxvZyNsb2cgYGxvZygpYH0uXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAkbG9nLmxvZygnU29tZSBMb2cnKTtcbiAgICAgICAqIHZhciBmaXJzdCA9ICRsb2cubG9nLmxvZ3MudW5zaGlmdCgpO1xuICAgICAgICogYGBgXG4gICAgICAgKi9cbiAgICAgICRsb2cubG9nLmxvZ3MgPSBbXTtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgKiBAbmFtZSAkbG9nI2luZm8ubG9nc1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQXJyYXkgb2YgbWVzc2FnZXMgbG9nZ2VkIHVzaW5nIHtAbGluayBuZy4kbG9nI2luZm8gYGluZm8oKWB9LlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogJGxvZy5pbmZvKCdTb21lIEluZm8nKTtcbiAgICAgICAqIHZhciBmaXJzdCA9ICRsb2cuaW5mby5sb2dzLnVuc2hpZnQoKTtcbiAgICAgICAqIGBgYFxuICAgICAgICovXG4gICAgICAkbG9nLmluZm8ubG9ncyA9IFtdO1xuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAqIEBuYW1lICRsb2cjd2Fybi5sb2dzXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBcnJheSBvZiBtZXNzYWdlcyBsb2dnZWQgdXNpbmcge0BsaW5rIG5nLiRsb2cjd2FybiBgd2FybigpYH0uXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAkbG9nLndhcm4oJ1NvbWUgV2FybmluZycpO1xuICAgICAgICogdmFyIGZpcnN0ID0gJGxvZy53YXJuLmxvZ3MudW5zaGlmdCgpO1xuICAgICAgICogYGBgXG4gICAgICAgKi9cbiAgICAgICRsb2cud2Fybi5sb2dzID0gW107XG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICogQG5hbWUgJGxvZyNlcnJvci5sb2dzXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBcnJheSBvZiBtZXNzYWdlcyBsb2dnZWQgdXNpbmcge0BsaW5rIG5nLiRsb2cjZXJyb3IgYGVycm9yKClgfS5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAqICRsb2cuZXJyb3IoJ1NvbWUgRXJyb3InKTtcbiAgICAgICAqIHZhciBmaXJzdCA9ICRsb2cuZXJyb3IubG9ncy51bnNoaWZ0KCk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqL1xuICAgICAgJGxvZy5lcnJvci5sb2dzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgKiBAbmFtZSAkbG9nI2RlYnVnLmxvZ3NcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFycmF5IG9mIG1lc3NhZ2VzIGxvZ2dlZCB1c2luZyB7QGxpbmsgbmcuJGxvZyNkZWJ1ZyBgZGVidWcoKWB9LlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogJGxvZy5kZWJ1ZygnU29tZSBFcnJvcicpO1xuICAgICAgICogdmFyIGZpcnN0ID0gJGxvZy5kZWJ1Zy5sb2dzLnVuc2hpZnQoKTtcbiAgICAgICAqIGBgYFxuICAgICAgICovXG4gICAgICAkbG9nLmRlYnVnLmxvZ3MgPSBbXTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRsb2cjYXNzZXJ0RW1wdHlcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEFzc2VydCB0aGF0IGFsbCBvZiB0aGUgbG9nZ2luZyBtZXRob2RzIGhhdmUgbm8gbG9nZ2VkIG1lc3NhZ2VzLiBJZiBhbnkgbWVzc2FnZXMgYXJlIHByZXNlbnQsXG4gICAgICogYW4gZXhjZXB0aW9uIGlzIHRocm93bi5cbiAgICAgKi9cbiAgICAkbG9nLmFzc2VydEVtcHR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZXJyb3JzID0gW107XG4gICAgICBhbmd1bGFyLmZvckVhY2goWydlcnJvcicsICd3YXJuJywgJ2luZm8nLCAnbG9nJywgJ2RlYnVnJ10sIGZ1bmN0aW9uKGxvZ0xldmVsKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkbG9nW2xvZ0xldmVsXS5sb2dzLCBmdW5jdGlvbihsb2cpIHtcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobG9nLCBmdW5jdGlvbihsb2dJdGVtKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCgnTU9DSyAkbG9nICgnICsgbG9nTGV2ZWwgKyAnKTogJyArIFN0cmluZyhsb2dJdGVtKSArICdcXG4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChsb2dJdGVtLnN0YWNrIHx8ICcnKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICBlcnJvcnMudW5zaGlmdChcIkV4cGVjdGVkICRsb2cgdG8gYmUgZW1wdHkhIEVpdGhlciBhIG1lc3NhZ2Ugd2FzIGxvZ2dlZCB1bmV4cGVjdGVkbHksIG9yIFwiICtcbiAgICAgICAgICBcImFuIGV4cGVjdGVkIGxvZyBtZXNzYWdlIHdhcyBub3QgY2hlY2tlZCBhbmQgcmVtb3ZlZDpcIik7XG4gICAgICAgIGVycm9ycy5wdXNoKCcnKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9ycy5qb2luKCdcXG4tLS0tLS0tLS1cXG4nKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgICRsb2cucmVzZXQoKTtcbiAgICByZXR1cm4gJGxvZztcbiAgfTtcbn07XG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGludGVydmFsXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBNb2NrIGltcGxlbWVudGF0aW9uIG9mIHRoZSAkaW50ZXJ2YWwgc2VydmljZS5cbiAqXG4gKiBVc2Uge0BsaW5rIG5nTW9jay4kaW50ZXJ2YWwjZmx1c2ggYCRpbnRlcnZhbC5mbHVzaChtaWxsaXMpYH0gdG9cbiAqIG1vdmUgZm9yd2FyZCBieSBgbWlsbGlzYCBtaWxsaXNlY29uZHMgYW5kIHRyaWdnZXIgYW55IGZ1bmN0aW9ucyBzY2hlZHVsZWQgdG8gcnVuIGluIHRoYXRcbiAqIHRpbWUuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCByZXBlYXRlZGx5LlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IE51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiBlYWNoIGZ1bmN0aW9uIGNhbGwuXG4gKiBAcGFyYW0ge251bWJlcj19IFtjb3VudD0wXSBOdW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0LiBJZiBub3Qgc2V0LCBvciAwLCB3aWxsIHJlcGVhdFxuICogICBpbmRlZmluaXRlbHkuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW52b2tlQXBwbHk9dHJ1ZV0gSWYgc2V0IHRvIGBmYWxzZWAgc2tpcHMgbW9kZWwgZGlydHkgY2hlY2tpbmcsIG90aGVyd2lzZVxuICogICB3aWxsIGludm9rZSBgZm5gIHdpdGhpbiB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5ICRhcHBseX0gYmxvY2suXG4gKiBAcGFyYW0gey4uLio9fSBQYXNzIGFkZGl0aW9uYWwgcGFyYW1ldGVycyB0byB0aGUgZXhlY3V0ZWQgZnVuY3Rpb24uXG4gKiBAcmV0dXJucyB7cHJvbWlzZX0gQSBwcm9taXNlIHdoaWNoIHdpbGwgYmUgbm90aWZpZWQgb24gZWFjaCBpdGVyYXRpb24uXG4gKi9cbmFuZ3VsYXIubW9jay4kSW50ZXJ2YWxQcm92aWRlciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyRyb290U2NvcGUnLCAnJHEnLCAnJCRxJyxcbiAgICAgICBmdW5jdGlvbigkYnJvd3NlciwgICAkcm9vdFNjb3BlLCAgICRxLCAgICQkcSkge1xuICAgIHZhciByZXBlYXRGbnMgPSBbXSxcbiAgICAgICAgbmV4dFJlcGVhdElkID0gMCxcbiAgICAgICAgbm93ID0gMDtcblxuICAgIHZhciAkaW50ZXJ2YWwgPSBmdW5jdGlvbihmbiwgZGVsYXksIGNvdW50LCBpbnZva2VBcHBseSkge1xuICAgICAgdmFyIGhhc1BhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0LFxuICAgICAgICAgIGFyZ3MgPSBoYXNQYXJhbXMgPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDQpIDogW10sXG4gICAgICAgICAgaXRlcmF0aW9uID0gMCxcbiAgICAgICAgICBza2lwQXBwbHkgPSAoYW5ndWxhci5pc0RlZmluZWQoaW52b2tlQXBwbHkpICYmICFpbnZva2VBcHBseSksXG4gICAgICAgICAgZGVmZXJyZWQgPSAoc2tpcEFwcGx5ID8gJCRxIDogJHEpLmRlZmVyKCksXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgIGNvdW50ID0gKGFuZ3VsYXIuaXNEZWZpbmVkKGNvdW50KSkgPyBjb3VudCA6IDA7XG4gICAgICBwcm9taXNlLnRoZW4obnVsbCwgbnVsbCwgKCFoYXNQYXJhbXMpID8gZm4gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9KTtcblxuICAgICAgcHJvbWlzZS4kJGludGVydmFsSWQgPSBuZXh0UmVwZWF0SWQ7XG5cbiAgICAgIGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgICAgIGRlZmVycmVkLm5vdGlmeShpdGVyYXRpb24rKyk7XG5cbiAgICAgICAgaWYgKGNvdW50ID4gMCAmJiBpdGVyYXRpb24gPj0gY291bnQpIHtcbiAgICAgICAgICB2YXIgZm5JbmRleDtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGl0ZXJhdGlvbik7XG5cbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVwZWF0Rm5zLCBmdW5jdGlvbihmbiwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChmbi5pZCA9PT0gcHJvbWlzZS4kJGludGVydmFsSWQpIGZuSW5kZXggPSBpbmRleDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChmbkluZGV4KSkge1xuICAgICAgICAgICAgcmVwZWF0Rm5zLnNwbGljZShmbkluZGV4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2tpcEFwcGx5KSB7XG4gICAgICAgICAgJGJyb3dzZXIuZGVmZXIuZmx1c2goKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlcGVhdEZucy5wdXNoKHtcbiAgICAgICAgbmV4dFRpbWU6KG5vdyArIGRlbGF5KSxcbiAgICAgICAgZGVsYXk6IGRlbGF5LFxuICAgICAgICBmbjogdGljayxcbiAgICAgICAgaWQ6IG5leHRSZXBlYXRJZCxcbiAgICAgICAgZGVmZXJyZWQ6IGRlZmVycmVkXG4gICAgICB9KTtcbiAgICAgIHJlcGVhdEZucy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEubmV4dFRpbWUgLSBiLm5leHRUaW1lO30pO1xuXG4gICAgICBuZXh0UmVwZWF0SWQrKztcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnZhbCNjYW5jZWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtwcm9taXNlfSBwcm9taXNlIEEgcHJvbWlzZSBmcm9tIGNhbGxpbmcgdGhlIGAkaW50ZXJ2YWxgIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdGFzayB3YXMgc3VjY2Vzc2Z1bGx5IGNhbmNlbGxlZC5cbiAgICAgKi9cbiAgICAkaW50ZXJ2YWwuY2FuY2VsID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm4gZmFsc2U7XG4gICAgICB2YXIgZm5JbmRleDtcblxuICAgICAgYW5ndWxhci5mb3JFYWNoKHJlcGVhdEZucywgZnVuY3Rpb24oZm4sIGluZGV4KSB7XG4gICAgICAgIGlmIChmbi5pZCA9PT0gcHJvbWlzZS4kJGludGVydmFsSWQpIGZuSW5kZXggPSBpbmRleDtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZm5JbmRleCkpIHtcbiAgICAgICAgcmVwZWF0Rm5zW2ZuSW5kZXhdLmRlZmVycmVkLnJlamVjdCgnY2FuY2VsZWQnKTtcbiAgICAgICAgcmVwZWF0Rm5zLnNwbGljZShmbkluZGV4LCAxKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnZhbCNmbHVzaFxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogUnVucyBpbnRlcnZhbCB0YXNrcyBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBuZXh0IGBtaWxsaXNgIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbWlsbGlzIG1heGltdW0gdGltZW91dCBhbW91bnQgdG8gZmx1c2ggdXAgdW50aWwuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBhbW91bnQgb2YgdGltZSBtb3ZlZCBmb3J3YXJkLlxuICAgICAqL1xuICAgICRpbnRlcnZhbC5mbHVzaCA9IGZ1bmN0aW9uKG1pbGxpcykge1xuICAgICAgbm93ICs9IG1pbGxpcztcbiAgICAgIHdoaWxlIChyZXBlYXRGbnMubGVuZ3RoICYmIHJlcGVhdEZuc1swXS5uZXh0VGltZSA8PSBub3cpIHtcbiAgICAgICAgdmFyIHRhc2sgPSByZXBlYXRGbnNbMF07XG4gICAgICAgIHRhc2suZm4oKTtcbiAgICAgICAgdGFzay5uZXh0VGltZSArPSB0YXNrLmRlbGF5O1xuICAgICAgICByZXBlYXRGbnMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhLm5leHRUaW1lIC0gYi5uZXh0VGltZTt9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtaWxsaXM7XG4gICAgfTtcblxuICAgIHJldHVybiAkaW50ZXJ2YWw7XG4gIH1dO1xufTtcblxuXG4vKiBqc2hpbnQgLVcxMDEgKi9cbi8qIFRoZSBSX0lTTzgwNjFfU1RSIHJlZ2V4IGlzIG5ldmVyIGdvaW5nIHRvIGZpdCBpbnRvIHRoZSAxMDAgY2hhciBsaW1pdCFcbiAqIFRoaXMgZGlyZWN0aXZlIHNob3VsZCBnbyBpbnNpZGUgdGhlIGFub255bW91cyBmdW5jdGlvbiBidXQgYSBidWcgaW4gSlNIaW50IG1lYW5zIHRoYXQgaXQgd291bGRcbiAqIG5vdCBiZSBlbmFjdGVkIGVhcmx5IGVub3VnaCB0byBwcmV2ZW50IHRoZSB3YXJuaW5nLlxuICovXG52YXIgUl9JU084MDYxX1NUUiA9IC9eKFxcZHs0fSktPyhcXGRcXGQpLT8oXFxkXFxkKSg/OlQoXFxkXFxkKSg/OlxcOj8oXFxkXFxkKSg/OlxcOj8oXFxkXFxkKSg/OlxcLihcXGR7M30pKT8pPyk/KFp8KFsrLV0pKFxcZFxcZCk6PyhcXGRcXGQpKSk/JC87XG5cbmZ1bmN0aW9uIGpzb25TdHJpbmdUb0RhdGUoc3RyaW5nKSB7XG4gIHZhciBtYXRjaDtcbiAgaWYgKG1hdGNoID0gc3RyaW5nLm1hdGNoKFJfSVNPODA2MV9TVFIpKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKSxcbiAgICAgICAgdHpIb3VyID0gMCxcbiAgICAgICAgdHpNaW4gID0gMDtcbiAgICBpZiAobWF0Y2hbOV0pIHtcbiAgICAgIHR6SG91ciA9IHRvSW50KG1hdGNoWzldICsgbWF0Y2hbMTBdKTtcbiAgICAgIHR6TWluID0gdG9JbnQobWF0Y2hbOV0gKyBtYXRjaFsxMV0pO1xuICAgIH1cbiAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHRvSW50KG1hdGNoWzFdKSwgdG9JbnQobWF0Y2hbMl0pIC0gMSwgdG9JbnQobWF0Y2hbM10pKTtcbiAgICBkYXRlLnNldFVUQ0hvdXJzKHRvSW50KG1hdGNoWzRdIHx8IDApIC0gdHpIb3VyLFxuICAgICAgICAgICAgICAgICAgICAgdG9JbnQobWF0Y2hbNV0gfHwgMCkgLSB0ek1pbixcbiAgICAgICAgICAgICAgICAgICAgIHRvSW50KG1hdGNoWzZdIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICAgdG9JbnQobWF0Y2hbN10gfHwgMCkpO1xuICAgIHJldHVybiBkYXRlO1xuICB9XG4gIHJldHVybiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIHRvSW50KHN0cikge1xuICByZXR1cm4gcGFyc2VJbnQoc3RyLCAxMCk7XG59XG5cbmZ1bmN0aW9uIHBhZE51bWJlcihudW0sIGRpZ2l0cywgdHJpbSkge1xuICB2YXIgbmVnID0gJyc7XG4gIGlmIChudW0gPCAwKSB7XG4gICAgbmVnID0gICctJztcbiAgICBudW0gPSAtbnVtO1xuICB9XG4gIG51bSA9ICcnICsgbnVtO1xuICB3aGlsZSAobnVtLmxlbmd0aCA8IGRpZ2l0cykgbnVtID0gJzAnICsgbnVtO1xuICBpZiAodHJpbSkge1xuICAgIG51bSA9IG51bS5zdWJzdHIobnVtLmxlbmd0aCAtIGRpZ2l0cyk7XG4gIH1cbiAgcmV0dXJuIG5lZyArIG51bTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyB0eXBlXG4gKiBAbmFtZSBhbmd1bGFyLm1vY2suVHpEYXRlXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiAqTk9URSo6IHRoaXMgaXMgbm90IGFuIGluamVjdGFibGUgaW5zdGFuY2UsIGp1c3QgYSBnbG9iYWxseSBhdmFpbGFibGUgbW9jayBjbGFzcyBvZiBgRGF0ZWAuXG4gKlxuICogTW9jayBvZiB0aGUgRGF0ZSB0eXBlIHdoaWNoIGhhcyBpdHMgdGltZXpvbmUgc3BlY2lmaWVkIHZpYSBjb25zdHJ1Y3RvciBhcmcuXG4gKlxuICogVGhlIG1haW4gcHVycG9zZSBpcyB0byBjcmVhdGUgRGF0ZS1saWtlIGluc3RhbmNlcyB3aXRoIHRpbWV6b25lIGZpeGVkIHRvIHRoZSBzcGVjaWZpZWQgdGltZXpvbmVcbiAqIG9mZnNldCwgc28gdGhhdCB3ZSBjYW4gdGVzdCBjb2RlIHRoYXQgZGVwZW5kcyBvbiBsb2NhbCB0aW1lem9uZSBzZXR0aW5ncyB3aXRob3V0IGRlcGVuZGVuY3kgb25cbiAqIHRoZSB0aW1lIHpvbmUgc2V0dGluZ3Mgb2YgdGhlIG1hY2hpbmUgd2hlcmUgdGhlIGNvZGUgaXMgcnVubmluZy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgKmRlc2lyZWQqIHRpbWV6b25lIGluIGhvdXJzIChmcmFjdGlvbnMgd2lsbCBiZSBob25vcmVkKVxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyl9IHRpbWVzdGFtcCBUaW1lc3RhbXAgcmVwcmVzZW50aW5nIHRoZSBkZXNpcmVkIHRpbWUgaW4gKlVUQypcbiAqXG4gKiBAZXhhbXBsZVxuICogISEhISBXQVJOSU5HICEhISEhXG4gKiBUaGlzIGlzIG5vdCBhIGNvbXBsZXRlIERhdGUgb2JqZWN0IHNvIG9ubHkgbWV0aG9kcyB0aGF0IHdlcmUgaW1wbGVtZW50ZWQgY2FuIGJlIGNhbGxlZCBzYWZlbHkuXG4gKiBUbyBtYWtlIG1hdHRlcnMgd29yc2UsIFR6RGF0ZSBpbnN0YW5jZXMgaW5oZXJpdCBzdHVmZiBmcm9tIERhdGUgdmlhIGEgcHJvdG90eXBlLlxuICpcbiAqIFdlIGRvIG91ciBiZXN0IHRvIGludGVyY2VwdCBjYWxscyB0byBcInVuaW1wbGVtZW50ZWRcIiBtZXRob2RzLCBidXQgc2luY2UgdGhlIGxpc3Qgb2YgbWV0aG9kcyBpc1xuICogaW5jb21wbGV0ZSB3ZSBtaWdodCBiZSBtaXNzaW5nIHNvbWUgbm9uLXN0YW5kYXJkIG1ldGhvZHMuIFRoaXMgY2FuIHJlc3VsdCBpbiBlcnJvcnMgbGlrZTpcbiAqIFwiRGF0ZS5wcm90b3R5cGUuZm9vIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgT2JqZWN0XCIuXG4gKlxuICogYGBganNcbiAqIHZhciBuZXdZZWFySW5CcmF0aXNsYXZhID0gbmV3IFR6RGF0ZSgtMSwgJzIwMDktMTItMzFUMjM6MDA6MDBaJyk7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldFRpbWV6b25lT2Zmc2V0KCkgPT4gLTYwO1xuICogbmV3WWVhckluQnJhdGlzbGF2YS5nZXRGdWxsWWVhcigpID0+IDIwMTA7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldE1vbnRoKCkgPT4gMDtcbiAqIG5ld1llYXJJbkJyYXRpc2xhdmEuZ2V0RGF0ZSgpID0+IDE7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldEhvdXJzKCkgPT4gMDtcbiAqIG5ld1llYXJJbkJyYXRpc2xhdmEuZ2V0TWludXRlcygpID0+IDA7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldFNlY29uZHMoKSA9PiAwO1xuICogYGBgXG4gKlxuICovXG5hbmd1bGFyLm1vY2suVHpEYXRlID0gZnVuY3Rpb24ob2Zmc2V0LCB0aW1lc3RhbXApIHtcbiAgdmFyIHNlbGYgPSBuZXcgRGF0ZSgwKTtcbiAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcodGltZXN0YW1wKSkge1xuICAgIHZhciB0c1N0ciA9IHRpbWVzdGFtcDtcblxuICAgIHNlbGYub3JpZ0RhdGUgPSBqc29uU3RyaW5nVG9EYXRlKHRpbWVzdGFtcCk7XG5cbiAgICB0aW1lc3RhbXAgPSBzZWxmLm9yaWdEYXRlLmdldFRpbWUoKTtcbiAgICBpZiAoaXNOYU4odGltZXN0YW1wKSkge1xuICAgICAgdGhyb3cge1xuICAgICAgICBuYW1lOiBcIklsbGVnYWwgQXJndW1lbnRcIixcbiAgICAgICAgbWVzc2FnZTogXCJBcmcgJ1wiICsgdHNTdHIgKyBcIicgcGFzc2VkIGludG8gVHpEYXRlIGNvbnN0cnVjdG9yIGlzIG5vdCBhIHZhbGlkIGRhdGUgc3RyaW5nXCJcbiAgICAgIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNlbGYub3JpZ0RhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICB9XG5cbiAgdmFyIGxvY2FsT2Zmc2V0ID0gbmV3IERhdGUodGltZXN0YW1wKS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICBzZWxmLm9mZnNldERpZmYgPSBsb2NhbE9mZnNldCAqIDYwICogMTAwMCAtIG9mZnNldCAqIDEwMDAgKiA2MCAqIDYwO1xuICBzZWxmLmRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKyBzZWxmLm9mZnNldERpZmYpO1xuXG4gIHNlbGYuZ2V0VGltZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0VGltZSgpIC0gc2VsZi5vZmZzZXREaWZmO1xuICB9O1xuXG4gIHNlbGYudG9Mb2NhbGVEYXRlU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgfTtcblxuICBzZWxmLmdldEZ1bGxZZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXRGdWxsWWVhcigpO1xuICB9O1xuXG4gIHNlbGYuZ2V0TW9udGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldE1vbnRoKCk7XG4gIH07XG5cbiAgc2VsZi5nZXREYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXREYXRlKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRIb3VycyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0SG91cnMoKTtcbiAgfTtcblxuICBzZWxmLmdldE1pbnV0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldE1pbnV0ZXMoKTtcbiAgfTtcblxuICBzZWxmLmdldFNlY29uZHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldFNlY29uZHMoKTtcbiAgfTtcblxuICBzZWxmLmdldE1pbGxpc2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRUaW1lem9uZU9mZnNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBvZmZzZXQgKiA2MDtcbiAgfTtcblxuICBzZWxmLmdldFVUQ0Z1bGxZZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgfTtcblxuICBzZWxmLmdldFVUQ01vbnRoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDTW9udGgoKTtcbiAgfTtcblxuICBzZWxmLmdldFVUQ0RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5vcmlnRGF0ZS5nZXRVVENEYXRlKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRVVENIb3VycyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLm9yaWdEYXRlLmdldFVUQ0hvdXJzKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRVVENNaW51dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDTWludXRlcygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0VVRDU2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLm9yaWdEYXRlLmdldFVUQ1NlY29uZHMoKTtcbiAgfTtcblxuICBzZWxmLmdldFVUQ01pbGxpc2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLm9yaWdEYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0RGF5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXREYXkoKTtcbiAgfTtcblxuICAvLyBwcm92aWRlIHRoaXMgbWV0aG9kIG9ubHkgb24gYnJvd3NlcnMgdGhhdCBhbHJlYWR5IGhhdmUgaXRcbiAgaWYgKHNlbGYudG9JU09TdHJpbmcpIHtcbiAgICBzZWxmLnRvSVNPU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGFkTnVtYmVyKHNlbGYub3JpZ0RhdGUuZ2V0VVRDRnVsbFllYXIoKSwgNCkgKyAnLScgK1xuICAgICAgICAgICAgcGFkTnVtYmVyKHNlbGYub3JpZ0RhdGUuZ2V0VVRDTW9udGgoKSArIDEsIDIpICsgJy0nICtcbiAgICAgICAgICAgIHBhZE51bWJlcihzZWxmLm9yaWdEYXRlLmdldFVUQ0RhdGUoKSwgMikgKyAnVCcgK1xuICAgICAgICAgICAgcGFkTnVtYmVyKHNlbGYub3JpZ0RhdGUuZ2V0VVRDSG91cnMoKSwgMikgKyAnOicgK1xuICAgICAgICAgICAgcGFkTnVtYmVyKHNlbGYub3JpZ0RhdGUuZ2V0VVRDTWludXRlcygpLCAyKSArICc6JyArXG4gICAgICAgICAgICBwYWROdW1iZXIoc2VsZi5vcmlnRGF0ZS5nZXRVVENTZWNvbmRzKCksIDIpICsgJy4nICtcbiAgICAgICAgICAgIHBhZE51bWJlcihzZWxmLm9yaWdEYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpLCAzKSArICdaJztcbiAgICB9O1xuICB9XG5cbiAgLy9oaWRlIGFsbCBtZXRob2RzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIG1vY2sgdGhhdCB0aGUgRGF0ZSBwcm90b3R5cGUgZXhwb3Nlc1xuICB2YXIgdW5pbXBsZW1lbnRlZE1ldGhvZHMgPSBbJ2dldFVUQ0RheScsXG4gICAgICAnZ2V0WWVhcicsICdzZXREYXRlJywgJ3NldEZ1bGxZZWFyJywgJ3NldEhvdXJzJywgJ3NldE1pbGxpc2Vjb25kcycsXG4gICAgICAnc2V0TWludXRlcycsICdzZXRNb250aCcsICdzZXRTZWNvbmRzJywgJ3NldFRpbWUnLCAnc2V0VVRDRGF0ZScsICdzZXRVVENGdWxsWWVhcicsXG4gICAgICAnc2V0VVRDSG91cnMnLCAnc2V0VVRDTWlsbGlzZWNvbmRzJywgJ3NldFVUQ01pbnV0ZXMnLCAnc2V0VVRDTW9udGgnLCAnc2V0VVRDU2Vjb25kcycsXG4gICAgICAnc2V0WWVhcicsICd0b0RhdGVTdHJpbmcnLCAndG9HTVRTdHJpbmcnLCAndG9KU09OJywgJ3RvTG9jYWxlRm9ybWF0JywgJ3RvTG9jYWxlU3RyaW5nJyxcbiAgICAgICd0b0xvY2FsZVRpbWVTdHJpbmcnLCAndG9Tb3VyY2UnLCAndG9TdHJpbmcnLCAndG9UaW1lU3RyaW5nJywgJ3RvVVRDU3RyaW5nJywgJ3ZhbHVlT2YnXTtcblxuICBhbmd1bGFyLmZvckVhY2godW5pbXBsZW1lbnRlZE1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICBzZWxmW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2QgJ1wiICsgbWV0aG9kTmFtZSArIFwiJyBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhlIFR6RGF0ZSBtb2NrXCIpO1xuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiBzZWxmO1xufTtcblxuLy9tYWtlIFwidHpEYXRlSW5zdGFuY2UgaW5zdGFuY2VvZiBEYXRlXCIgcmV0dXJuIHRydWVcbmFuZ3VsYXIubW9jay5UekRhdGUucHJvdG90eXBlID0gRGF0ZS5wcm90b3R5cGU7XG4vKiBqc2hpbnQgK1cxMDEgKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkYW5pbWF0ZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9jayBpbXBsZW1lbnRhdGlvbiBvZiB0aGUge0BsaW5rIG5nLiRhbmltYXRlIGAkYW5pbWF0ZWB9IHNlcnZpY2UuIEV4cG9zZXMgdHdvIGFkZGl0aW9uYWwgbWV0aG9kc1xuICogZm9yIHRlc3RpbmcgYW5pbWF0aW9ucy5cbiAqL1xuYW5ndWxhci5tb2NrLmFuaW1hdGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdBbmltYXRlTW9jaycsIFsnbmcnXSlcblxuICAuY29uZmlnKFsnJHByb3ZpZGUnLCBmdW5jdGlvbigkcHJvdmlkZSkge1xuXG4gICAgJHByb3ZpZGUuZmFjdG9yeSgnJCRmb3JjZVJlZmxvdycsIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gcmVmbG93Rm4oKSB7XG4gICAgICAgIHJlZmxvd0ZuLnRvdGFsUmVmbG93cysrO1xuICAgICAgfVxuICAgICAgcmVmbG93Rm4udG90YWxSZWZsb3dzID0gMDtcbiAgICAgIHJldHVybiByZWZsb3dGbjtcbiAgICB9KTtcblxuICAgICRwcm92aWRlLmZhY3RvcnkoJyQkYW5pbWF0ZUFzeW5jUnVuJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcXVldWUgPSBbXTtcbiAgICAgIHZhciBxdWV1ZUZuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihmbikge1xuICAgICAgICAgIHF1ZXVlLnB1c2goZm4pO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIHF1ZXVlRm4uZmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBxdWV1ZVtpXSgpO1xuICAgICAgICB9XG4gICAgICAgIHF1ZXVlID0gW107XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHF1ZXVlRm47XG4gICAgfSk7XG5cbiAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyQkYW5pbWF0ZUpzJywgWyckZGVsZWdhdGUnLCBmdW5jdGlvbigkZGVsZWdhdGUpIHtcbiAgICAgIHZhciBydW5uZXJzID0gW107XG5cbiAgICAgIHZhciBhbmltYXRlSnNDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYW5pbWF0b3IgPSAkZGVsZWdhdGUuYXBwbHkoJGRlbGVnYXRlLCBhcmd1bWVudHMpO1xuICAgICAgICAvLyBJZiBubyBqYXZhc2NyaXB0IGFuaW1hdGlvbiBpcyBmb3VuZCwgYW5pbWF0b3IgaXMgdW5kZWZpbmVkXG4gICAgICAgIGlmIChhbmltYXRvcikge1xuICAgICAgICAgIHJ1bm5lcnMucHVzaChhbmltYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuaW1hdG9yO1xuICAgICAgfTtcblxuICAgICAgYW5pbWF0ZUpzQ29uc3RydWN0b3IuJGNsb3NlQW5kRmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcnVubmVycy5mb3JFYWNoKGZ1bmN0aW9uKHJ1bm5lcikge1xuICAgICAgICAgIHJ1bm5lci5lbmQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJ1bm5lcnMgPSBbXTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBhbmltYXRlSnNDb25zdHJ1Y3RvcjtcbiAgICB9XSk7XG5cbiAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRhbmltYXRlQ3NzJywgWyckZGVsZWdhdGUnLCBmdW5jdGlvbigkZGVsZWdhdGUpIHtcbiAgICAgIHZhciBydW5uZXJzID0gW107XG5cbiAgICAgIHZhciBhbmltYXRlQ3NzQ29uc3RydWN0b3IgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBhbmltYXRvciA9ICRkZWxlZ2F0ZShlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgcnVubmVycy5wdXNoKGFuaW1hdG9yKTtcbiAgICAgICAgcmV0dXJuIGFuaW1hdG9yO1xuICAgICAgfTtcblxuICAgICAgYW5pbWF0ZUNzc0NvbnN0cnVjdG9yLiRjbG9zZUFuZEZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJ1bm5lcnMuZm9yRWFjaChmdW5jdGlvbihydW5uZXIpIHtcbiAgICAgICAgICBydW5uZXIuZW5kKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBydW5uZXJzID0gW107XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gYW5pbWF0ZUNzc0NvbnN0cnVjdG9yO1xuICAgIH1dKTtcblxuICAgICRwcm92aWRlLmRlY29yYXRvcignJGFuaW1hdGUnLCBbJyRkZWxlZ2F0ZScsICckdGltZW91dCcsICckYnJvd3NlcicsICckJHJBRicsICckYW5pbWF0ZUNzcycsICckJGFuaW1hdGVKcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJCRmb3JjZVJlZmxvdycsICckJGFuaW1hdGVBc3luY1J1bicsICckcm9vdFNjb3BlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigkZGVsZWdhdGUsICAgJHRpbWVvdXQsICAgJGJyb3dzZXIsICAgJCRyQUYsICAgJGFuaW1hdGVDc3MsICAgJCRhbmltYXRlSnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCRmb3JjZVJlZmxvdywgICAkJGFuaW1hdGVBc3luY1J1biwgICRyb290U2NvcGUpIHtcbiAgICAgIHZhciBhbmltYXRlID0ge1xuICAgICAgICBxdWV1ZTogW10sXG4gICAgICAgIGNhbmNlbDogJGRlbGVnYXRlLmNhbmNlbCxcbiAgICAgICAgb246ICRkZWxlZ2F0ZS5vbixcbiAgICAgICAgb2ZmOiAkZGVsZWdhdGUub2ZmLFxuICAgICAgICBwaW46ICRkZWxlZ2F0ZS5waW4sXG4gICAgICAgIGdldCByZWZsb3dzKCkge1xuICAgICAgICAgIHJldHVybiAkJGZvcmNlUmVmbG93LnRvdGFsUmVmbG93cztcbiAgICAgICAgfSxcbiAgICAgICAgZW5hYmxlZDogJGRlbGVnYXRlLmVuYWJsZWQsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRhbmltYXRlI2Nsb3NlQW5kRmx1c2hcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgY2xvc2UgYWxsIHBlbmRpbmcgYW5pbWF0aW9ucyAoYm90aCB7QGxpbmsgbmdBbmltYXRlI2phdmFzY3JpcHQtYmFzZWQtYW5pbWF0aW9ucyBKYXZhc2NyaXB0fVxuICAgICAgICAgKiBhbmQge0BsaW5rIG5nQW5pbWF0ZS4kYW5pbWF0ZUNzcyBDU1N9KSBhbmQgaXQgd2lsbCBhbHNvIGZsdXNoIGFueSByZW1haW5pbmcgYW5pbWF0aW9uIGZyYW1lcyBhbmQvb3IgY2FsbGJhY2tzLlxuICAgICAgICAgKi9cbiAgICAgICAgY2xvc2VBbmRGbHVzaDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gd2UgYWxsb3cgdGhlIGZsdXNoIGNvbW1hbmQgdG8gc3dhbGxvdyB0aGUgZXJyb3JzXG4gICAgICAgICAgLy8gYmVjYXVzZSBkZXBlbmRpbmcgb24gd2hldGhlciBDU1Mgb3IgSlMgYW5pbWF0aW9ucyBhcmVcbiAgICAgICAgICAvLyB1c2VkLCB0aGVyZSBtYXkgbm90IGJlIGEgUkFGIGZsdXNoLiBUaGUgcHJpbWFyeSBmbHVzaFxuICAgICAgICAgIC8vIGF0IHRoZSBlbmQgb2YgdGhpcyBmdW5jdGlvbiBtdXN0IHRocm93IGFuIGV4Y2VwdGlvblxuICAgICAgICAgIC8vIGJlY2F1c2UgaXQgd2lsbCB0cmFjayBpZiB0aGVyZSB3ZXJlIHBlbmRpbmcgYW5pbWF0aW9uc1xuICAgICAgICAgIHRoaXMuZmx1c2godHJ1ZSk7XG4gICAgICAgICAgJGFuaW1hdGVDc3MuJGNsb3NlQW5kRmx1c2goKTtcbiAgICAgICAgICAkJGFuaW1hdGVKcy4kY2xvc2VBbmRGbHVzaCgpO1xuICAgICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjZmx1c2hcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gZmx1c2ggdGhlIHBlbmRpbmcgY2FsbGJhY2tzIGFuZCBhbmltYXRpb24gZnJhbWVzIHRvIGVpdGhlciBzdGFydFxuICAgICAgICAgKiBhbiBhbmltYXRpb24gb3IgY29uY2x1ZGUgYW4gYW5pbWF0aW9uLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCBhY3R1YWxseSBjbG9zZSBhblxuICAgICAgICAgKiBhY3RpdmVseSBydW5uaW5nIGFuaW1hdGlvbiAoc2VlIHtAbGluayBuZ01vY2suJGFuaW1hdGUjY2xvc2VBbmRGbHVzaCBgY2xvc2VBbmRGbHVzaCgpYH0gZm9yIHRoYXQpLlxuICAgICAgICAgKi9cbiAgICAgICAgZmx1c2g6IGZ1bmN0aW9uKGhpZGVFcnJvcnMpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcblxuICAgICAgICAgIHZhciBkb05leHRSdW4sIHNvbWV0aGluZ0ZsdXNoZWQgPSBmYWxzZTtcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICBkb05leHRSdW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKCQkckFGLnF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAkJHJBRi5mbHVzaCgpO1xuICAgICAgICAgICAgICBkb05leHRSdW4gPSBzb21ldGhpbmdGbHVzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCQkYW5pbWF0ZUFzeW5jUnVuLmZsdXNoKCkpIHtcbiAgICAgICAgICAgICAgZG9OZXh0UnVuID0gc29tZXRoaW5nRmx1c2hlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSB3aGlsZSAoZG9OZXh0UnVuKTtcblxuICAgICAgICAgIGlmICghc29tZXRoaW5nRmx1c2hlZCAmJiAhaGlkZUVycm9ycykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBwZW5kaW5nIGFuaW1hdGlvbnMgcmVhZHkgdG8gYmUgY2xvc2VkIG9yIGZsdXNoZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgYW5ndWxhci5mb3JFYWNoKFxuICAgICAgICBbJ2FuaW1hdGUnLCdlbnRlcicsJ2xlYXZlJywnbW92ZScsJ2FkZENsYXNzJywncmVtb3ZlQ2xhc3MnLCdzZXRDbGFzcyddLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgYW5pbWF0ZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYW5pbWF0ZS5xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiBtZXRob2QsXG4gICAgICAgICAgICBlbGVtZW50OiBhcmd1bWVudHNbMF0sXG4gICAgICAgICAgICBvcHRpb25zOiBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgYXJnczogYXJndW1lbnRzXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuICRkZWxlZ2F0ZVttZXRob2RdLmFwcGx5KCRkZWxlZ2F0ZSwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gYW5pbWF0ZTtcbiAgICB9XSk7XG5cbiAgfV0pO1xuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLm1vY2suZHVtcFxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogKk5PVEUqOiB0aGlzIGlzIG5vdCBhbiBpbmplY3RhYmxlIGluc3RhbmNlLCBqdXN0IGEgZ2xvYmFsbHkgYXZhaWxhYmxlIGZ1bmN0aW9uLlxuICpcbiAqIE1ldGhvZCBmb3Igc2VyaWFsaXppbmcgY29tbW9uIGFuZ3VsYXIgb2JqZWN0cyAoc2NvcGUsIGVsZW1lbnRzLCBldGMuLikgaW50byBzdHJpbmdzLCB1c2VmdWwgZm9yXG4gKiBkZWJ1Z2dpbmcuXG4gKlxuICogVGhpcyBtZXRob2QgaXMgYWxzbyBhdmFpbGFibGUgb24gd2luZG93LCB3aGVyZSBpdCBjYW4gYmUgdXNlZCB0byBkaXNwbGF5IG9iamVjdHMgb24gZGVidWdcbiAqIGNvbnNvbGUuXG4gKlxuICogQHBhcmFtIHsqfSBvYmplY3QgLSBhbnkgb2JqZWN0IHRvIHR1cm4gaW50byBzdHJpbmcuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGEgc2VyaWFsaXplZCBzdHJpbmcgb2YgdGhlIGFyZ3VtZW50XG4gKi9cbmFuZ3VsYXIubW9jay5kdW1wID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gIHJldHVybiBzZXJpYWxpemUob2JqZWN0KTtcblxuICBmdW5jdGlvbiBzZXJpYWxpemUob2JqZWN0KSB7XG4gICAgdmFyIG91dDtcblxuICAgIGlmIChhbmd1bGFyLmlzRWxlbWVudChvYmplY3QpKSB7XG4gICAgICBvYmplY3QgPSBhbmd1bGFyLmVsZW1lbnQob2JqZWN0KTtcbiAgICAgIG91dCA9IGFuZ3VsYXIuZWxlbWVudCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChvYmplY3QsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgb3V0LmFwcGVuZChhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkuY2xvbmUoKSk7XG4gICAgICB9KTtcbiAgICAgIG91dCA9IG91dC5odG1sKCk7XG4gICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzQXJyYXkob2JqZWN0KSkge1xuICAgICAgb3V0ID0gW107XG4gICAgICBhbmd1bGFyLmZvckVhY2gob2JqZWN0LCBmdW5jdGlvbihvKSB7XG4gICAgICAgIG91dC5wdXNoKHNlcmlhbGl6ZShvKSk7XG4gICAgICB9KTtcbiAgICAgIG91dCA9ICdbICcgKyBvdXQuam9pbignLCAnKSArICcgXSc7XG4gICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24ob2JqZWN0LiRldmFsKSAmJiBhbmd1bGFyLmlzRnVuY3Rpb24ob2JqZWN0LiRhcHBseSkpIHtcbiAgICAgICAgb3V0ID0gc2VyaWFsaXplU2NvcGUob2JqZWN0KTtcbiAgICAgIH0gZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgb3V0ID0gb2JqZWN0LnN0YWNrIHx8ICgnJyArIG9iamVjdC5uYW1lICsgJzogJyArIG9iamVjdC5tZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRPRE8oaSk6IHRoaXMgcHJldmVudHMgbWV0aG9kcyBiZWluZyBsb2dnZWQsXG4gICAgICAgIC8vIHdlIHNob3VsZCBoYXZlIGEgYmV0dGVyIHdheSB0byBzZXJpYWxpemUgb2JqZWN0c1xuICAgICAgICBvdXQgPSBhbmd1bGFyLnRvSnNvbihvYmplY3QsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvdXQgPSBTdHJpbmcob2JqZWN0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2VyaWFsaXplU2NvcGUoc2NvcGUsIG9mZnNldCkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAgJyAgJztcbiAgICB2YXIgbG9nID0gW29mZnNldCArICdTY29wZSgnICsgc2NvcGUuJGlkICsgJyk6IHsnXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gc2NvcGUpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2NvcGUsIGtleSkgJiYgIWtleS5tYXRjaCgvXihcXCR8dGhpcykvKSkge1xuICAgICAgICBsb2cucHVzaCgnICAnICsga2V5ICsgJzogJyArIGFuZ3VsYXIudG9Kc29uKHNjb3BlW2tleV0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNoaWxkID0gc2NvcGUuJCRjaGlsZEhlYWQ7XG4gICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICBsb2cucHVzaChzZXJpYWxpemVTY29wZShjaGlsZCwgb2Zmc2V0ICsgJyAgJykpO1xuICAgICAgY2hpbGQgPSBjaGlsZC4kJG5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBsb2cucHVzaCgnfScpO1xuICAgIHJldHVybiBsb2cuam9pbignXFxuJyArIG9mZnNldCk7XG4gIH1cbn07XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRodHRwQmFja2VuZFxuICogQGRlc2NyaXB0aW9uXG4gKiBGYWtlIEhUVFAgYmFja2VuZCBpbXBsZW1lbnRhdGlvbiBzdWl0YWJsZSBmb3IgdW5pdCB0ZXN0aW5nIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSB0aGVcbiAqIHtAbGluayBuZy4kaHR0cCAkaHR0cCBzZXJ2aWNlfS5cbiAqXG4gKiAqTm90ZSo6IEZvciBmYWtlIEhUVFAgYmFja2VuZCBpbXBsZW1lbnRhdGlvbiBzdWl0YWJsZSBmb3IgZW5kLXRvLWVuZCB0ZXN0aW5nIG9yIGJhY2tlbmQtbGVzc1xuICogZGV2ZWxvcG1lbnQgcGxlYXNlIHNlZSB7QGxpbmsgbmdNb2NrRTJFLiRodHRwQmFja2VuZCBlMmUgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICpcbiAqIER1cmluZyB1bml0IHRlc3RpbmcsIHdlIHdhbnQgb3VyIHVuaXQgdGVzdHMgdG8gcnVuIHF1aWNrbHkgYW5kIGhhdmUgbm8gZXh0ZXJuYWwgZGVwZW5kZW5jaWVzIHNvXG4gKiB3ZSBkb27igJl0IHdhbnQgdG8gc2VuZCBbWEhSXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi94bWxodHRwcmVxdWVzdCkgb3JcbiAqIFtKU09OUF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OUCkgcmVxdWVzdHMgdG8gYSByZWFsIHNlcnZlci4gQWxsIHdlIHJlYWxseSBuZWVkIGlzXG4gKiB0byB2ZXJpZnkgd2hldGhlciBhIGNlcnRhaW4gcmVxdWVzdCBoYXMgYmVlbiBzZW50IG9yIG5vdCwgb3IgYWx0ZXJuYXRpdmVseSBqdXN0IGxldCB0aGVcbiAqIGFwcGxpY2F0aW9uIG1ha2UgcmVxdWVzdHMsIHJlc3BvbmQgd2l0aCBwcmUtdHJhaW5lZCByZXNwb25zZXMgYW5kIGFzc2VydCB0aGF0IHRoZSBlbmQgcmVzdWx0IGlzXG4gKiB3aGF0IHdlIGV4cGVjdCBpdCB0byBiZS5cbiAqXG4gKiBUaGlzIG1vY2sgaW1wbGVtZW50YXRpb24gY2FuIGJlIHVzZWQgdG8gcmVzcG9uZCB3aXRoIHN0YXRpYyBvciBkeW5hbWljIHJlc3BvbnNlcyB2aWEgdGhlXG4gKiBgZXhwZWN0YCBhbmQgYHdoZW5gIGFwaXMgYW5kIHRoZWlyIHNob3J0Y3V0cyAoYGV4cGVjdEdFVGAsIGB3aGVuUE9TVGAsIGV0YykuXG4gKlxuICogV2hlbiBhbiBBbmd1bGFyIGFwcGxpY2F0aW9uIG5lZWRzIHNvbWUgZGF0YSBmcm9tIGEgc2VydmVyLCBpdCBjYWxscyB0aGUgJGh0dHAgc2VydmljZSwgd2hpY2hcbiAqIHNlbmRzIHRoZSByZXF1ZXN0IHRvIGEgcmVhbCBzZXJ2ZXIgdXNpbmcgJGh0dHBCYWNrZW5kIHNlcnZpY2UuIFdpdGggZGVwZW5kZW5jeSBpbmplY3Rpb24sIGl0IGlzXG4gKiBlYXN5IHRvIGluamVjdCAkaHR0cEJhY2tlbmQgbW9jayAod2hpY2ggaGFzIHRoZSBzYW1lIEFQSSBhcyAkaHR0cEJhY2tlbmQpIGFuZCB1c2UgaXQgdG8gdmVyaWZ5XG4gKiB0aGUgcmVxdWVzdHMgYW5kIHJlc3BvbmQgd2l0aCBzb21lIHRlc3RpbmcgZGF0YSB3aXRob3V0IHNlbmRpbmcgYSByZXF1ZXN0IHRvIGEgcmVhbCBzZXJ2ZXIuXG4gKlxuICogVGhlcmUgYXJlIHR3byB3YXlzIHRvIHNwZWNpZnkgd2hhdCB0ZXN0IGRhdGEgc2hvdWxkIGJlIHJldHVybmVkIGFzIGh0dHAgcmVzcG9uc2VzIGJ5IHRoZSBtb2NrXG4gKiBiYWNrZW5kIHdoZW4gdGhlIGNvZGUgdW5kZXIgdGVzdCBtYWtlcyBodHRwIHJlcXVlc3RzOlxuICpcbiAqIC0gYCRodHRwQmFja2VuZC5leHBlY3RgIC0gc3BlY2lmaWVzIGEgcmVxdWVzdCBleHBlY3RhdGlvblxuICogLSBgJGh0dHBCYWNrZW5kLndoZW5gIC0gc3BlY2lmaWVzIGEgYmFja2VuZCBkZWZpbml0aW9uXG4gKlxuICpcbiAqICMjIFJlcXVlc3QgRXhwZWN0YXRpb25zIHZzIEJhY2tlbmQgRGVmaW5pdGlvbnNcbiAqXG4gKiBSZXF1ZXN0IGV4cGVjdGF0aW9ucyBwcm92aWRlIGEgd2F5IHRvIG1ha2UgYXNzZXJ0aW9ucyBhYm91dCByZXF1ZXN0cyBtYWRlIGJ5IHRoZSBhcHBsaWNhdGlvbiBhbmRcbiAqIHRvIGRlZmluZSByZXNwb25zZXMgZm9yIHRob3NlIHJlcXVlc3RzLiBUaGUgdGVzdCB3aWxsIGZhaWwgaWYgdGhlIGV4cGVjdGVkIHJlcXVlc3RzIGFyZSBub3QgbWFkZVxuICogb3IgdGhleSBhcmUgbWFkZSBpbiB0aGUgd3Jvbmcgb3JkZXIuXG4gKlxuICogQmFja2VuZCBkZWZpbml0aW9ucyBhbGxvdyB5b3UgdG8gZGVmaW5lIGEgZmFrZSBiYWNrZW5kIGZvciB5b3VyIGFwcGxpY2F0aW9uIHdoaWNoIGRvZXNuJ3QgYXNzZXJ0XG4gKiBpZiBhIHBhcnRpY3VsYXIgcmVxdWVzdCB3YXMgbWFkZSBvciBub3QsIGl0IGp1c3QgcmV0dXJucyBhIHRyYWluZWQgcmVzcG9uc2UgaWYgYSByZXF1ZXN0IGlzIG1hZGUuXG4gKiBUaGUgdGVzdCB3aWxsIHBhc3Mgd2hldGhlciBvciBub3QgdGhlIHJlcXVlc3QgZ2V0cyBtYWRlIGR1cmluZyB0ZXN0aW5nLlxuICpcbiAqXG4gKiA8dGFibGUgY2xhc3M9XCJ0YWJsZVwiPlxuICogICA8dHI+PHRoIHdpZHRoPVwiMjIwcHhcIj48L3RoPjx0aD5SZXF1ZXN0IGV4cGVjdGF0aW9uczwvdGg+PHRoPkJhY2tlbmQgZGVmaW5pdGlvbnM8L3RoPjwvdHI+XG4gKiAgIDx0cj5cbiAqICAgICA8dGg+U3ludGF4PC90aD5cbiAqICAgICA8dGQ+LmV4cGVjdCguLi4pLnJlc3BvbmQoLi4uKTwvdGQ+XG4gKiAgICAgPHRkPi53aGVuKC4uLikucmVzcG9uZCguLi4pPC90ZD5cbiAqICAgPC90cj5cbiAqICAgPHRyPlxuICogICAgIDx0aD5UeXBpY2FsIHVzYWdlPC90aD5cbiAqICAgICA8dGQ+c3RyaWN0IHVuaXQgdGVzdHM8L3RkPlxuICogICAgIDx0ZD5sb29zZSAoYmxhY2stYm94KSB1bml0IHRlc3Rpbmc8L3RkPlxuICogICA8L3RyPlxuICogICA8dHI+XG4gKiAgICAgPHRoPkZ1bGZpbGxzIG11bHRpcGxlIHJlcXVlc3RzPC90aD5cbiAqICAgICA8dGQ+Tk88L3RkPlxuICogICAgIDx0ZD5ZRVM8L3RkPlxuICogICA8L3RyPlxuICogICA8dHI+XG4gKiAgICAgPHRoPk9yZGVyIG9mIHJlcXVlc3RzIG1hdHRlcnM8L3RoPlxuICogICAgIDx0ZD5ZRVM8L3RkPlxuICogICAgIDx0ZD5OTzwvdGQ+XG4gKiAgIDwvdHI+XG4gKiAgIDx0cj5cbiAqICAgICA8dGg+UmVxdWVzdCByZXF1aXJlZDwvdGg+XG4gKiAgICAgPHRkPllFUzwvdGQ+XG4gKiAgICAgPHRkPk5PPC90ZD5cbiAqICAgPC90cj5cbiAqICAgPHRyPlxuICogICAgIDx0aD5SZXNwb25zZSByZXF1aXJlZDwvdGg+XG4gKiAgICAgPHRkPm9wdGlvbmFsIChzZWUgYmVsb3cpPC90ZD5cbiAqICAgICA8dGQ+WUVTPC90ZD5cbiAqICAgPC90cj5cbiAqIDwvdGFibGU+XG4gKlxuICogSW4gY2FzZXMgd2hlcmUgYm90aCBiYWNrZW5kIGRlZmluaXRpb25zIGFuZCByZXF1ZXN0IGV4cGVjdGF0aW9ucyBhcmUgc3BlY2lmaWVkIGR1cmluZyB1bml0XG4gKiB0ZXN0aW5nLCB0aGUgcmVxdWVzdCBleHBlY3RhdGlvbnMgYXJlIGV2YWx1YXRlZCBmaXJzdC5cbiAqXG4gKiBJZiBhIHJlcXVlc3QgZXhwZWN0YXRpb24gaGFzIG5vIHJlc3BvbnNlIHNwZWNpZmllZCwgdGhlIGFsZ29yaXRobSB3aWxsIHNlYXJjaCB5b3VyIGJhY2tlbmRcbiAqIGRlZmluaXRpb25zIGZvciBhbiBhcHByb3ByaWF0ZSByZXNwb25zZS5cbiAqXG4gKiBJZiBhIHJlcXVlc3QgZGlkbid0IG1hdGNoIGFueSBleHBlY3RhdGlvbiBvciBpZiB0aGUgZXhwZWN0YXRpb24gZG9lc24ndCBoYXZlIHRoZSByZXNwb25zZVxuICogZGVmaW5lZCwgdGhlIGJhY2tlbmQgZGVmaW5pdGlvbnMgYXJlIGV2YWx1YXRlZCBpbiBzZXF1ZW50aWFsIG9yZGVyIHRvIHNlZSBpZiBhbnkgb2YgdGhlbSBtYXRjaFxuICogdGhlIHJlcXVlc3QuIFRoZSByZXNwb25zZSBmcm9tIHRoZSBmaXJzdCBtYXRjaGVkIGRlZmluaXRpb24gaXMgcmV0dXJuZWQuXG4gKlxuICpcbiAqICMjIEZsdXNoaW5nIEhUVFAgcmVxdWVzdHNcbiAqXG4gKiBUaGUgJGh0dHBCYWNrZW5kIHVzZWQgaW4gcHJvZHVjdGlvbiBhbHdheXMgcmVzcG9uZHMgdG8gcmVxdWVzdHMgYXN5bmNocm9ub3VzbHkuIElmIHdlIHByZXNlcnZlZFxuICogdGhpcyBiZWhhdmlvciBpbiB1bml0IHRlc3RpbmcsIHdlJ2QgaGF2ZSB0byBjcmVhdGUgYXN5bmMgdW5pdCB0ZXN0cywgd2hpY2ggYXJlIGhhcmQgdG8gd3JpdGUsXG4gKiB0byBmb2xsb3cgYW5kIHRvIG1haW50YWluLiBCdXQgbmVpdGhlciBjYW4gdGhlIHRlc3RpbmcgbW9jayByZXNwb25kIHN5bmNocm9ub3VzbHk7IHRoYXQgd291bGRcbiAqIGNoYW5nZSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBjb2RlIHVuZGVyIHRlc3QuIEZvciB0aGlzIHJlYXNvbiwgdGhlIG1vY2sgJGh0dHBCYWNrZW5kIGhhcyBhXG4gKiBgZmx1c2goKWAgbWV0aG9kLCB3aGljaCBhbGxvd3MgdGhlIHRlc3QgdG8gZXhwbGljaXRseSBmbHVzaCBwZW5kaW5nIHJlcXVlc3RzLiBUaGlzIHByZXNlcnZlc1xuICogdGhlIGFzeW5jIGFwaSBvZiB0aGUgYmFja2VuZCwgd2hpbGUgYWxsb3dpbmcgdGhlIHRlc3QgdG8gZXhlY3V0ZSBzeW5jaHJvbm91c2x5LlxuICpcbiAqXG4gKiAjIyBVbml0IHRlc3Rpbmcgd2l0aCBtb2NrICRodHRwQmFja2VuZFxuICogVGhlIGZvbGxvd2luZyBjb2RlIHNob3dzIGhvdyB0byBzZXR1cCBhbmQgdXNlIHRoZSBtb2NrIGJhY2tlbmQgd2hlbiB1bml0IHRlc3RpbmcgYSBjb250cm9sbGVyLlxuICogRmlyc3Qgd2UgY3JlYXRlIHRoZSBjb250cm9sbGVyIHVuZGVyIHRlc3Q6XG4gKlxuICBgYGBqc1xuICAvLyBUaGUgbW9kdWxlIGNvZGVcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ015QXBwJywgW10pXG4gICAgLmNvbnRyb2xsZXIoJ015Q29udHJvbGxlcicsIE15Q29udHJvbGxlcik7XG5cbiAgLy8gVGhlIGNvbnRyb2xsZXIgY29kZVxuICBmdW5jdGlvbiBNeUNvbnRyb2xsZXIoJHNjb3BlLCAkaHR0cCkge1xuICAgIHZhciBhdXRoVG9rZW47XG5cbiAgICAkaHR0cC5nZXQoJy9hdXRoLnB5JykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgYXV0aFRva2VuID0gcmVzcG9uc2UuaGVhZGVycygnQS1Ub2tlbicpO1xuICAgICAgJHNjb3BlLnVzZXIgPSByZXNwb25zZS5kYXRhO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLnNhdmVNZXNzYWdlID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgdmFyIGhlYWRlcnMgPSB7ICdBdXRob3JpemF0aW9uJzogYXV0aFRva2VuIH07XG4gICAgICAkc2NvcGUuc3RhdHVzID0gJ1NhdmluZy4uLic7XG5cbiAgICAgICRodHRwLnBvc3QoJy9hZGQtbXNnLnB5JywgbWVzc2FnZSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0gKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICRzY29wZS5zdGF0dXMgPSAnJztcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuc3RhdHVzID0gJ0ZhaWxlZC4uLic7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIGBgYFxuICpcbiAqIE5vdyB3ZSBzZXR1cCB0aGUgbW9jayBiYWNrZW5kIGFuZCBjcmVhdGUgdGhlIHRlc3Qgc3BlY3M6XG4gKlxuICBgYGBqc1xuICAgIC8vIHRlc3RpbmcgY29udHJvbGxlclxuICAgIGRlc2NyaWJlKCdNeUNvbnRyb2xsZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICB2YXIgJGh0dHBCYWNrZW5kLCAkcm9vdFNjb3BlLCBjcmVhdGVDb250cm9sbGVyLCBhdXRoUmVxdWVzdEhhbmRsZXI7XG5cbiAgICAgICAvLyBTZXQgdXAgdGhlIG1vZHVsZVxuICAgICAgIGJlZm9yZUVhY2gobW9kdWxlKCdNeUFwcCcpKTtcblxuICAgICAgIGJlZm9yZUVhY2goaW5qZWN0KGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICAgICAgICAgLy8gU2V0IHVwIHRoZSBtb2NrIGh0dHAgc2VydmljZSByZXNwb25zZXNcbiAgICAgICAgICRodHRwQmFja2VuZCA9ICRpbmplY3Rvci5nZXQoJyRodHRwQmFja2VuZCcpO1xuICAgICAgICAgLy8gYmFja2VuZCBkZWZpbml0aW9uIGNvbW1vbiBmb3IgYWxsIHRlc3RzXG4gICAgICAgICBhdXRoUmVxdWVzdEhhbmRsZXIgPSAkaHR0cEJhY2tlbmQud2hlbignR0VUJywgJy9hdXRoLnB5JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlc3BvbmQoe3VzZXJJZDogJ3VzZXJYJ30sIHsnQS1Ub2tlbic6ICd4eHgnfSk7XG5cbiAgICAgICAgIC8vIEdldCBob2xkIG9mIGEgc2NvcGUgKGkuZS4gdGhlIHJvb3Qgc2NvcGUpXG4gICAgICAgICAkcm9vdFNjb3BlID0gJGluamVjdG9yLmdldCgnJHJvb3RTY29wZScpO1xuICAgICAgICAgLy8gVGhlICRjb250cm9sbGVyIHNlcnZpY2UgaXMgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGNvbnRyb2xsZXJzXG4gICAgICAgICB2YXIgJGNvbnRyb2xsZXIgPSAkaW5qZWN0b3IuZ2V0KCckY29udHJvbGxlcicpO1xuXG4gICAgICAgICBjcmVhdGVDb250cm9sbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIHJldHVybiAkY29udHJvbGxlcignTXlDb250cm9sbGVyJywgeyckc2NvcGUnIDogJHJvb3RTY29wZSB9KTtcbiAgICAgICAgIH07XG4gICAgICAgfSkpO1xuXG5cbiAgICAgICBhZnRlckVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAkaHR0cEJhY2tlbmQudmVyaWZ5Tm9PdXRzdGFuZGluZ0V4cGVjdGF0aW9uKCk7XG4gICAgICAgICAkaHR0cEJhY2tlbmQudmVyaWZ5Tm9PdXRzdGFuZGluZ1JlcXVlc3QoKTtcbiAgICAgICB9KTtcblxuXG4gICAgICAgaXQoJ3Nob3VsZCBmZXRjaCBhdXRoZW50aWNhdGlvbiB0b2tlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgJGh0dHBCYWNrZW5kLmV4cGVjdEdFVCgnL2F1dGgucHknKTtcbiAgICAgICAgIHZhciBjb250cm9sbGVyID0gY3JlYXRlQ29udHJvbGxlcigpO1xuICAgICAgICAgJGh0dHBCYWNrZW5kLmZsdXNoKCk7XG4gICAgICAgfSk7XG5cblxuICAgICAgIGl0KCdzaG91bGQgZmFpbCBhdXRoZW50aWNhdGlvbicsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAvLyBOb3RpY2UgaG93IHlvdSBjYW4gY2hhbmdlIHRoZSByZXNwb25zZSBldmVuIGFmdGVyIGl0IHdhcyBzZXRcbiAgICAgICAgIGF1dGhSZXF1ZXN0SGFuZGxlci5yZXNwb25kKDQwMSwgJycpO1xuXG4gICAgICAgICAkaHR0cEJhY2tlbmQuZXhwZWN0R0VUKCcvYXV0aC5weScpO1xuICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBjcmVhdGVDb250cm9sbGVyKCk7XG4gICAgICAgICAkaHR0cEJhY2tlbmQuZmx1c2goKTtcbiAgICAgICAgIGV4cGVjdCgkcm9vdFNjb3BlLnN0YXR1cykudG9CZSgnRmFpbGVkLi4uJyk7XG4gICAgICAgfSk7XG5cblxuICAgICAgIGl0KCdzaG91bGQgc2VuZCBtc2cgdG8gc2VydmVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgY29udHJvbGxlciA9IGNyZWF0ZUNvbnRyb2xsZXIoKTtcbiAgICAgICAgICRodHRwQmFja2VuZC5mbHVzaCgpO1xuXG4gICAgICAgICAvLyBub3cgeW91IGRvbuKAmXQgY2FyZSBhYm91dCB0aGUgYXV0aGVudGljYXRpb24sIGJ1dFxuICAgICAgICAgLy8gdGhlIGNvbnRyb2xsZXIgd2lsbCBzdGlsbCBzZW5kIHRoZSByZXF1ZXN0IGFuZFxuICAgICAgICAgLy8gJGh0dHBCYWNrZW5kIHdpbGwgcmVzcG9uZCB3aXRob3V0IHlvdSBoYXZpbmcgdG9cbiAgICAgICAgIC8vIHNwZWNpZnkgdGhlIGV4cGVjdGF0aW9uIGFuZCByZXNwb25zZSBmb3IgdGhpcyByZXF1ZXN0XG5cbiAgICAgICAgICRodHRwQmFja2VuZC5leHBlY3RQT1NUKCcvYWRkLW1zZy5weScsICdtZXNzYWdlIGNvbnRlbnQnKS5yZXNwb25kKDIwMSwgJycpO1xuICAgICAgICAgJHJvb3RTY29wZS5zYXZlTWVzc2FnZSgnbWVzc2FnZSBjb250ZW50Jyk7XG4gICAgICAgICBleHBlY3QoJHJvb3RTY29wZS5zdGF0dXMpLnRvQmUoJ1NhdmluZy4uLicpO1xuICAgICAgICAgJGh0dHBCYWNrZW5kLmZsdXNoKCk7XG4gICAgICAgICBleHBlY3QoJHJvb3RTY29wZS5zdGF0dXMpLnRvQmUoJycpO1xuICAgICAgIH0pO1xuXG5cbiAgICAgICBpdCgnc2hvdWxkIHNlbmQgYXV0aCBoZWFkZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBjb250cm9sbGVyID0gY3JlYXRlQ29udHJvbGxlcigpO1xuICAgICAgICAgJGh0dHBCYWNrZW5kLmZsdXNoKCk7XG5cbiAgICAgICAgICRodHRwQmFja2VuZC5leHBlY3RQT1NUKCcvYWRkLW1zZy5weScsIHVuZGVmaW5lZCwgZnVuY3Rpb24oaGVhZGVycykge1xuICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgaGVhZGVyIHdhcyBzZW50LCBpZiBpdCB3YXNuJ3QgdGhlIGV4cGVjdGF0aW9uIHdvbid0XG4gICAgICAgICAgIC8vIG1hdGNoIHRoZSByZXF1ZXN0IGFuZCB0aGUgdGVzdCB3aWxsIGZhaWxcbiAgICAgICAgICAgcmV0dXJuIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9PSAneHh4JztcbiAgICAgICAgIH0pLnJlc3BvbmQoMjAxLCAnJyk7XG5cbiAgICAgICAgICRyb290U2NvcGUuc2F2ZU1lc3NhZ2UoJ3doYXRldmVyJyk7XG4gICAgICAgICAkaHR0cEJhY2tlbmQuZmx1c2goKTtcbiAgICAgICB9KTtcbiAgICB9KTtcbiAgYGBgXG4gKlxuICogIyMgRHluYW1pYyByZXNwb25zZXNcbiAqXG4gKiBZb3UgZGVmaW5lIGEgcmVzcG9uc2UgdG8gYSByZXF1ZXN0IGJ5IGNoYWluaW5nIGEgY2FsbCB0byBgcmVzcG9uZCgpYCBvbnRvIGEgZGVmaW5pdGlvbiBvciBleHBlY3RhdGlvbi5cbiAqIElmIHlvdSBwcm92aWRlIGEgKipjYWxsYmFjayoqIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIgdG8gYHJlc3BvbmQoY2FsbGJhY2spYCB0aGVuIHlvdSBjYW4gZHluYW1pY2FsbHkgZ2VuZXJhdGVcbiAqIGEgcmVzcG9uc2UgYmFzZWQgb24gdGhlIHByb3BlcnRpZXMgb2YgdGhlIHJlcXVlc3QuXG4gKlxuICogVGhlIGBjYWxsYmFja2AgZnVuY3Rpb24gc2hvdWxkIGJlIG9mIHRoZSBmb3JtIGBmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKWAuXG4gKlxuICogIyMjIFF1ZXJ5IHBhcmFtZXRlcnNcbiAqXG4gKiBCeSBkZWZhdWx0LCBxdWVyeSBwYXJhbWV0ZXJzIG9uIHJlcXVlc3QgVVJMcyBhcmUgcGFyc2VkIGludG8gdGhlIGBwYXJhbXNgIG9iamVjdC4gU28gYSByZXF1ZXN0IFVSTFxuICogb2YgYC9saXN0P3E9c2VhcmNoc3RyJm9yZGVyYnk9LW5hbWVgIHdvdWxkIHNldCBgcGFyYW1zYCB0byBiZSBge3E6ICdzZWFyY2hzdHInLCBvcmRlcmJ5OiAnLW5hbWUnfWAuXG4gKlxuICogIyMjIFJlZ2V4IHBhcmFtZXRlciBtYXRjaGluZ1xuICpcbiAqIElmIGFuIGV4cGVjdGF0aW9uIG9yIGRlZmluaXRpb24gdXNlcyBhICoqcmVnZXgqKiB0byBtYXRjaCB0aGUgVVJMLCB5b3UgY2FuIHByb3ZpZGUgYW4gYXJyYXkgb2YgKiprZXlzKiogdmlhIGFcbiAqIGBwYXJhbXNgIGFyZ3VtZW50LiBUaGUgaW5kZXggb2YgZWFjaCAqKmtleSoqIGluIHRoZSBhcnJheSB3aWxsIG1hdGNoIHRoZSBpbmRleCBvZiBhICoqZ3JvdXAqKiBpbiB0aGVcbiAqICoqcmVnZXgqKi5cbiAqXG4gKiBUaGUgYHBhcmFtc2Agb2JqZWN0IGluIHRoZSAqKmNhbGxiYWNrKiogd2lsbCBub3cgaGF2ZSBwcm9wZXJ0aWVzIHdpdGggdGhlc2Uga2V5cywgd2hpY2ggaG9sZCB0aGUgdmFsdWUgb2YgdGhlXG4gKiBjb3JyZXNwb25kaW5nICoqZ3JvdXAqKiBpbiB0aGUgKipyZWdleCoqLlxuICpcbiAqIFRoaXMgYWxzbyBhcHBsaWVzIHRvIHRoZSBgd2hlbmAgYW5kIGBleHBlY3RgIHNob3J0Y3V0IG1ldGhvZHMuXG4gKlxuICpcbiAqIGBgYGpzXG4gKiAgICRodHRwQmFja2VuZC5leHBlY3QoJ0dFVCcsIC9cXC91c2VyXFwvKC4rKS8sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBbJ2lkJ10pXG4gKiAgICAgLnJlc3BvbmQoZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHBhcmFtcykge1xuICogICAgICAgLy8gZm9yIHJlcXVlc3RlZCB1cmwgb2YgJy91c2VyLzEyMzQnIHBhcmFtcyBpcyB7aWQ6ICcxMjM0J31cbiAqICAgICB9KTtcbiAqXG4gKiAgICRodHRwQmFja2VuZC53aGVuUEFUQ0goL1xcL3VzZXJcXC8oLispXFwvYXJ0aWNsZVxcLyguKykvLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgWyd1c2VyJywgJ2FydGljbGUnXSlcbiAqICAgICAucmVzcG9uZChmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKSB7XG4gKiAgICAgICAvLyBmb3IgdXJsIG9mICcvdXNlci8xMjM0L2FydGljbGUvNTY3JyBwYXJhbXMgaXMge3VzZXI6ICcxMjM0JywgYXJ0aWNsZTogJzU2Nyd9XG4gKiAgICAgfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyBNYXRjaGluZyByb3V0ZSByZXF1ZXN0c1xuICpcbiAqIEZvciBleHRyYSBjb252ZW5pZW5jZSwgYHdoZW5Sb3V0ZWAgYW5kIGBleHBlY3RSb3V0ZWAgc2hvcnRjdXRzIGFyZSBhdmFpbGFibGUuIFRoZXNlIG1ldGhvZHMgb2ZmZXIgY29sb25cbiAqIGRlbGltaXRlZCBtYXRjaGluZyBvZiB0aGUgdXJsIHBhdGgsIGlnbm9yaW5nIHRoZSBxdWVyeSBzdHJpbmcuIFRoaXMgYWxsb3dzIGRlY2xhcmF0aW9uc1xuICogc2ltaWxhciB0byBob3cgYXBwbGljYXRpb24gcm91dGVzIGFyZSBjb25maWd1cmVkIHdpdGggYCRyb3V0ZVByb3ZpZGVyYC4gQmVjYXVzZSB0aGVzZSBtZXRob2RzIGNvbnZlcnRcbiAqIHRoZSBkZWZpbml0aW9uIHVybCB0byByZWdleCwgZGVjbGFyYXRpb24gb3JkZXIgaXMgaW1wb3J0YW50LiBDb21iaW5lZCB3aXRoIHF1ZXJ5IHBhcmFtZXRlciBwYXJzaW5nLFxuICogdGhlIGZvbGxvd2luZyBpcyBwb3NzaWJsZTpcbiAqXG4gIGBgYGpzXG4gICAgJGh0dHBCYWNrZW5kLndoZW5Sb3V0ZSgnR0VUJywgJy91c2Vycy86aWQnKVxuICAgICAgLnJlc3BvbmQoZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gWzIwMCwgTW9ja1VzZXJMaXN0W051bWJlcihwYXJhbXMuaWQpXV07XG4gICAgICB9KTtcblxuICAgICRodHRwQmFja2VuZC53aGVuUm91dGUoJ0dFVCcsICcvdXNlcnMnKVxuICAgICAgLnJlc3BvbmQoZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHBhcmFtcykge1xuICAgICAgICB2YXIgdXNlckxpc3QgPSBhbmd1bGFyLmNvcHkoTW9ja1VzZXJMaXN0KSxcbiAgICAgICAgICBkZWZhdWx0U29ydCA9ICdsYXN0TmFtZScsXG4gICAgICAgICAgY291bnQsIHBhZ2VzLCBpc1ByZXZpb3VzLCBpc05leHQ7XG5cbiAgICAgICAgLy8gcGFnZWQgYXBpIHJlc3BvbnNlICcvdjEvdXNlcnM/cGFnZT0yJ1xuICAgICAgICBwYXJhbXMucGFnZSA9IE51bWJlcihwYXJhbXMucGFnZSkgfHwgMTtcblxuICAgICAgICAvLyBxdWVyeSBmb3IgbGFzdCBuYW1lcyAnL3YxL3VzZXJzP3E9QXJjaGVyJ1xuICAgICAgICBpZiAocGFyYW1zLnEpIHtcbiAgICAgICAgICB1c2VyTGlzdCA9ICRmaWx0ZXIoJ2ZpbHRlcicpKHtsYXN0TmFtZTogcGFyYW1zLnF9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhZ2VzID0gTWF0aC5jZWlsKHVzZXJMaXN0Lmxlbmd0aCAvIHBhZ2luZ0xlbmd0aCk7XG4gICAgICAgIGlzUHJldmlvdXMgPSBwYXJhbXMucGFnZSA+IDE7XG4gICAgICAgIGlzTmV4dCA9IHBhcmFtcy5wYWdlIDwgcGFnZXM7XG5cbiAgICAgICAgcmV0dXJuIFsyMDAsIHtcbiAgICAgICAgICBjb3VudDogICAgdXNlckxpc3QubGVuZ3RoLFxuICAgICAgICAgIHByZXZpb3VzOiBpc1ByZXZpb3VzLFxuICAgICAgICAgIG5leHQ6ICAgICBpc05leHQsXG4gICAgICAgICAgLy8gc29ydCBmaWVsZCAtPiAnL3YxL3VzZXJzP3NvcnRCeT1maXJzdE5hbWUnXG4gICAgICAgICAgcmVzdWx0czogICRmaWx0ZXIoJ29yZGVyQnknKSh1c2VyTGlzdCwgcGFyYW1zLnNvcnRCeSB8fCBkZWZhdWx0U29ydClcbiAgICAgICAgICAgICAgICAgICAgICAuc3BsaWNlKChwYXJhbXMucGFnZSAtIDEpICogcGFnaW5nTGVuZ3RoLCBwYWdpbmdMZW5ndGgpXG4gICAgICAgIH1dO1xuICAgICAgfSk7XG4gIGBgYFxuICovXG5hbmd1bGFyLm1vY2suJEh0dHBCYWNrZW5kUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyR0aW1lb3V0JywgY3JlYXRlSHR0cEJhY2tlbmRNb2NrXTtcbn07XG5cbi8qKlxuICogR2VuZXJhbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciAkaHR0cEJhY2tlbmQgbW9jay5cbiAqIFJldHVybnMgaW5zdGFuY2UgZm9yIHVuaXQgdGVzdGluZyAod2hlbiBubyBhcmd1bWVudHMgc3BlY2lmaWVkKTpcbiAqICAgLSBwYXNzaW5nIHRocm91Z2ggaXMgZGlzYWJsZWRcbiAqICAgLSBhdXRvIGZsdXNoaW5nIGlzIGRpc2FibGVkXG4gKlxuICogUmV0dXJucyBpbnN0YW5jZSBmb3IgZTJlIHRlc3RpbmcgKHdoZW4gYCRkZWxlZ2F0ZWAgYW5kIGAkYnJvd3NlcmAgc3BlY2lmaWVkKTpcbiAqICAgLSBwYXNzaW5nIHRocm91Z2ggKGRlbGVnYXRpbmcgcmVxdWVzdCB0byByZWFsIGJhY2tlbmQpIGlzIGVuYWJsZWRcbiAqICAgLSBhdXRvIGZsdXNoaW5nIGlzIGVuYWJsZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdD19ICRkZWxlZ2F0ZSBSZWFsICRodHRwQmFja2VuZCBpbnN0YW5jZSAoYWxsb3cgcGFzc2luZyB0aHJvdWdoIGlmIHNwZWNpZmllZClcbiAqIEBwYXJhbSB7T2JqZWN0PX0gJGJyb3dzZXIgQXV0by1mbHVzaGluZyBlbmFibGVkIGlmIHNwZWNpZmllZFxuICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiAkaHR0cEJhY2tlbmQgbW9ja1xuICovXG5mdW5jdGlvbiBjcmVhdGVIdHRwQmFja2VuZE1vY2soJHJvb3RTY29wZSwgJHRpbWVvdXQsICRkZWxlZ2F0ZSwgJGJyb3dzZXIpIHtcbiAgdmFyIGRlZmluaXRpb25zID0gW10sXG4gICAgICBleHBlY3RhdGlvbnMgPSBbXSxcbiAgICAgIHJlc3BvbnNlcyA9IFtdLFxuICAgICAgcmVzcG9uc2VzUHVzaCA9IGFuZ3VsYXIuYmluZChyZXNwb25zZXMsIHJlc3BvbnNlcy5wdXNoKSxcbiAgICAgIGNvcHkgPSBhbmd1bGFyLmNvcHk7XG5cbiAgZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2Uoc3RhdHVzLCBkYXRhLCBoZWFkZXJzLCBzdGF0dXNUZXh0KSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihzdGF0dXMpKSByZXR1cm4gc3RhdHVzO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGFuZ3VsYXIuaXNOdW1iZXIoc3RhdHVzKVxuICAgICAgICAgID8gW3N0YXR1cywgZGF0YSwgaGVhZGVycywgc3RhdHVzVGV4dF1cbiAgICAgICAgICA6IFsyMDAsIHN0YXR1cywgZGF0YSwgaGVhZGVyc107XG4gICAgfTtcbiAgfVxuXG4gIC8vIFRPRE8odm9qdGEpOiBjaGFuZ2UgcGFyYW1zIHRvOiBtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgY2FsbGJhY2tcbiAgZnVuY3Rpb24gJGh0dHBCYWNrZW5kKG1ldGhvZCwgdXJsLCBkYXRhLCBjYWxsYmFjaywgaGVhZGVycywgdGltZW91dCwgd2l0aENyZWRlbnRpYWxzKSB7XG4gICAgdmFyIHhociA9IG5ldyBNb2NrWGhyKCksXG4gICAgICAgIGV4cGVjdGF0aW9uID0gZXhwZWN0YXRpb25zWzBdLFxuICAgICAgICB3YXNFeHBlY3RlZCA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gcHJldHR5UHJpbnQoZGF0YSkge1xuICAgICAgcmV0dXJuIChhbmd1bGFyLmlzU3RyaW5nKGRhdGEpIHx8IGFuZ3VsYXIuaXNGdW5jdGlvbihkYXRhKSB8fCBkYXRhIGluc3RhbmNlb2YgUmVnRXhwKVxuICAgICAgICAgID8gZGF0YVxuICAgICAgICAgIDogYW5ndWxhci50b0pzb24oZGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd3JhcFJlc3BvbnNlKHdyYXBwZWQpIHtcbiAgICAgIGlmICghJGJyb3dzZXIgJiYgdGltZW91dCkge1xuICAgICAgICB0aW1lb3V0LnRoZW4gPyB0aW1lb3V0LnRoZW4oaGFuZGxlVGltZW91dCkgOiAkdGltZW91dChoYW5kbGVUaW1lb3V0LCB0aW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhhbmRsZVJlc3BvbnNlO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZSgpIHtcbiAgICAgICAgdmFyIHJlc3BvbnNlID0gd3JhcHBlZC5yZXNwb25zZShtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgd3JhcHBlZC5wYXJhbXModXJsKSk7XG4gICAgICAgIHhoci4kJHJlc3BIZWFkZXJzID0gcmVzcG9uc2VbMl07XG4gICAgICAgIGNhbGxiYWNrKGNvcHkocmVzcG9uc2VbMF0pLCBjb3B5KHJlc3BvbnNlWzFdKSwgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLFxuICAgICAgICAgICAgICAgICBjb3B5KHJlc3BvbnNlWzNdIHx8ICcnKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlc3BvbnNlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlc1tpXSA9PT0gaGFuZGxlUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBjYWxsYmFjaygtMSwgdW5kZWZpbmVkLCAnJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZXhwZWN0YXRpb24gJiYgZXhwZWN0YXRpb24ubWF0Y2gobWV0aG9kLCB1cmwpKSB7XG4gICAgICBpZiAoIWV4cGVjdGF0aW9uLm1hdGNoRGF0YShkYXRhKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkICcgKyBleHBlY3RhdGlvbiArICcgd2l0aCBkaWZmZXJlbnQgZGF0YVxcbicgK1xuICAgICAgICAgICAgJ0VYUEVDVEVEOiAnICsgcHJldHR5UHJpbnQoZXhwZWN0YXRpb24uZGF0YSkgKyAnXFxuR09UOiAgICAgICcgKyBkYXRhKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFleHBlY3RhdGlvbi5tYXRjaEhlYWRlcnMoaGVhZGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCAnICsgZXhwZWN0YXRpb24gKyAnIHdpdGggZGlmZmVyZW50IGhlYWRlcnNcXG4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdFWFBFQ1RFRDogJyArIHByZXR0eVByaW50KGV4cGVjdGF0aW9uLmhlYWRlcnMpICsgJ1xcbkdPVDogICAgICAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXR0eVByaW50KGhlYWRlcnMpKTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0YXRpb25zLnNoaWZ0KCk7XG5cbiAgICAgIGlmIChleHBlY3RhdGlvbi5yZXNwb25zZSkge1xuICAgICAgICByZXNwb25zZXMucHVzaCh3cmFwUmVzcG9uc2UoZXhwZWN0YXRpb24pKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgd2FzRXhwZWN0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBpID0gLTEsIGRlZmluaXRpb247XG4gICAgd2hpbGUgKChkZWZpbml0aW9uID0gZGVmaW5pdGlvbnNbKytpXSkpIHtcbiAgICAgIGlmIChkZWZpbml0aW9uLm1hdGNoKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzIHx8IHt9KSkge1xuICAgICAgICBpZiAoZGVmaW5pdGlvbi5yZXNwb25zZSkge1xuICAgICAgICAgIC8vIGlmICRicm93c2VyIHNwZWNpZmllZCwgd2UgZG8gYXV0byBmbHVzaCBhbGwgcmVxdWVzdHNcbiAgICAgICAgICAoJGJyb3dzZXIgPyAkYnJvd3Nlci5kZWZlciA6IHJlc3BvbnNlc1B1c2gpKHdyYXBSZXNwb25zZShkZWZpbml0aW9uKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmaW5pdGlvbi5wYXNzVGhyb3VnaCkge1xuICAgICAgICAgICRkZWxlZ2F0ZShtZXRob2QsIHVybCwgZGF0YSwgY2FsbGJhY2ssIGhlYWRlcnMsIHRpbWVvdXQsIHdpdGhDcmVkZW50aWFscyk7XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGRlZmluZWQgIScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IHdhc0V4cGVjdGVkID9cbiAgICAgICAgbmV3IEVycm9yKCdObyByZXNwb25zZSBkZWZpbmVkICEnKSA6XG4gICAgICAgIG5ldyBFcnJvcignVW5leHBlY3RlZCByZXF1ZXN0OiAnICsgbWV0aG9kICsgJyAnICsgdXJsICsgJ1xcbicgK1xuICAgICAgICAgICAgICAgICAgKGV4cGVjdGF0aW9uID8gJ0V4cGVjdGVkICcgKyBleHBlY3RhdGlvbiA6ICdObyBtb3JlIHJlcXVlc3QgZXhwZWN0ZWQnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlblxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgSFRUUCBtZXRob2QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKSk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXNcbiAgICogICBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gICAqICAgb2JqZWN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGhlYWRlcnMgbWF0Y2ggdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICpcbiAgICogIC0gcmVzcG9uZCDigJNcbiAgICogICAgICBge2Z1bmN0aW9uKFtzdGF0dXMsXSBkYXRhWywgaGVhZGVycywgc3RhdHVzVGV4dF0pXG4gICAqICAgICAgfCBmdW5jdGlvbihmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKX1gXG4gICAqICAgIOKAkyBUaGUgcmVzcG9uZCBtZXRob2QgdGFrZXMgYSBzZXQgb2Ygc3RhdGljIGRhdGEgdG8gYmUgcmV0dXJuZWQgb3IgYSBmdW5jdGlvbiB0aGF0IGNhblxuICAgKiAgICByZXR1cm4gYW4gYXJyYXkgY29udGFpbmluZyByZXNwb25zZSBzdGF0dXMgKG51bWJlciksIHJlc3BvbnNlIGRhdGEgKHN0cmluZyksIHJlc3BvbnNlXG4gICAqICAgIGhlYWRlcnMgKE9iamVjdCksIGFuZCB0aGUgdGV4dCBmb3IgdGhlIHN0YXR1cyAoc3RyaW5nKS4gVGhlIHJlc3BvbmQgbWV0aG9kIHJldHVybnMgdGhlXG4gICAqICAgIGByZXF1ZXN0SGFuZGxlcmAgb2JqZWN0IGZvciBwb3NzaWJsZSBvdmVycmlkZXMuXG4gICAqL1xuICAkaHR0cEJhY2tlbmQud2hlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBrZXlzKSB7XG4gICAgdmFyIGRlZmluaXRpb24gPSBuZXcgTW9ja0h0dHBFeHBlY3RhdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywga2V5cyksXG4gICAgICAgIGNoYWluID0ge1xuICAgICAgICAgIHJlc3BvbmQ6IGZ1bmN0aW9uKHN0YXR1cywgZGF0YSwgaGVhZGVycywgc3RhdHVzVGV4dCkge1xuICAgICAgICAgICAgZGVmaW5pdGlvbi5wYXNzVGhyb3VnaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGRlZmluaXRpb24ucmVzcG9uc2UgPSBjcmVhdGVSZXNwb25zZShzdGF0dXMsIGRhdGEsIGhlYWRlcnMsIHN0YXR1c1RleHQpO1xuICAgICAgICAgICAgcmV0dXJuIGNoYWluO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgIGlmICgkYnJvd3Nlcikge1xuICAgICAgY2hhaW4ucGFzc1Rocm91Z2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGVmaW5pdGlvbi5yZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGVmaW5pdGlvbi5wYXNzVGhyb3VnaCA9IHRydWU7XG4gICAgICAgIHJldHVybiBjaGFpbjtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZGVmaW5pdGlvbnMucHVzaChkZWZpbml0aW9uKTtcbiAgICByZXR1cm4gY2hhaW47XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5HRVRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBHRVQgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkhFQURcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBIRUFEIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5ERUxFVEVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBERUxFVEUgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlblBPU1RcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBQT1NUIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpKT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlc1xuICAgKiAgIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQuXG4gICAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuUFVUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgUFVUIHJlcXVlc3RzLiAgRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKSk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXNcbiAgICogICBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkpTT05QXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgSlNPTlAgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gICAqL1xuICBjcmVhdGVTaG9ydE1ldGhvZHMoJ3doZW4nKTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlblJvdXRlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiB0aGF0IGNvbXBhcmVzIG9ubHkgd2l0aCB0aGUgcmVxdWVzdGVkIHJvdXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIEhUVFAgbWV0aG9kLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIEhUVFAgdXJsIHN0cmluZyB0aGF0IHN1cHBvcnRzIGNvbG9uIHBhcmFtIG1hdGNoaW5nLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFNlZSAjd2hlbiBmb3IgbW9yZSBpbmZvLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLndoZW5Sb3V0ZSA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsKSB7XG4gICAgdmFyIHBhdGhPYmogPSBwYXJzZVJvdXRlKHVybCk7XG4gICAgcmV0dXJuICRodHRwQmFja2VuZC53aGVuKG1ldGhvZCwgcGF0aE9iai5yZWdleHAsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwYXRoT2JqLmtleXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBhcnNlUm91dGUodXJsKSB7XG4gICAgdmFyIHJldCA9IHtcbiAgICAgIHJlZ2V4cDogdXJsXG4gICAgfSxcbiAgICBrZXlzID0gcmV0LmtleXMgPSBbXTtcblxuICAgIGlmICghdXJsIHx8ICFhbmd1bGFyLmlzU3RyaW5nKHVybCkpIHJldHVybiByZXQ7XG5cbiAgICB1cmwgPSB1cmxcbiAgICAgIC5yZXBsYWNlKC8oWygpLl0pL2csICdcXFxcJDEnKVxuICAgICAgLnJlcGxhY2UoLyhcXC8pPzooXFx3KykoW1xcP1xcKl0pPy9nLCBmdW5jdGlvbihfLCBzbGFzaCwga2V5LCBvcHRpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbmFsID0gb3B0aW9uID09PSAnPycgPyBvcHRpb24gOiBudWxsO1xuICAgICAgICB2YXIgc3RhciA9IG9wdGlvbiA9PT0gJyonID8gb3B0aW9uIDogbnVsbDtcbiAgICAgICAga2V5cy5wdXNoKHsgbmFtZToga2V5LCBvcHRpb25hbDogISFvcHRpb25hbCB9KTtcbiAgICAgICAgc2xhc2ggPSBzbGFzaCB8fCAnJztcbiAgICAgICAgcmV0dXJuICcnXG4gICAgICAgICAgKyAob3B0aW9uYWwgPyAnJyA6IHNsYXNoKVxuICAgICAgICAgICsgJyg/OidcbiAgICAgICAgICArIChvcHRpb25hbCA/IHNsYXNoIDogJycpXG4gICAgICAgICAgKyAoc3RhciAmJiAnKC4rPyknIHx8ICcoW14vXSspJylcbiAgICAgICAgICArIChvcHRpb25hbCB8fCAnJylcbiAgICAgICAgICArICcpJ1xuICAgICAgICAgICsgKG9wdGlvbmFsIHx8ICcnKTtcbiAgICAgIH0pXG4gICAgICAucmVwbGFjZSgvKFtcXC8kXFwqXSkvZywgJ1xcXFwkMScpO1xuXG4gICAgcmV0LnJlZ2V4cCA9IG5ldyBSZWdFeHAoJ14nICsgdXJsLCAnaScpO1xuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgSFRUUCBtZXRob2QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKXxPYmplY3QpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0XG4gICAqICByZWNlaXZlcyBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLCBvciBPYmplY3QgaWYgcmVxdWVzdCBib2R5XG4gICAqICBpcyBpbiBKU09OIGZvcm1hdC5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBodHRwIGhlYWRlclxuICAgKiAgIG9iamVjdCBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBoZWFkZXJzIG1hdGNoIHRoZSBjdXJyZW50IGV4cGVjdGF0aW9uLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICpcbiAgICogIC0gcmVzcG9uZCDigJNcbiAgICogICAgYHtmdW5jdGlvbihbc3RhdHVzLF0gZGF0YVssIGhlYWRlcnMsIHN0YXR1c1RleHRdKVxuICAgKiAgICB8IGZ1bmN0aW9uKGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBwYXJhbXMpfWBcbiAgICogICAg4oCTIFRoZSByZXNwb25kIG1ldGhvZCB0YWtlcyBhIHNldCBvZiBzdGF0aWMgZGF0YSB0byBiZSByZXR1cm5lZCBvciBhIGZ1bmN0aW9uIHRoYXQgY2FuXG4gICAqICAgIHJldHVybiBhbiBhcnJheSBjb250YWluaW5nIHJlc3BvbnNlIHN0YXR1cyAobnVtYmVyKSwgcmVzcG9uc2UgZGF0YSAoc3RyaW5nKSwgcmVzcG9uc2VcbiAgICogICAgaGVhZGVycyAoT2JqZWN0KSwgYW5kIHRoZSB0ZXh0IGZvciB0aGUgc3RhdHVzIChzdHJpbmcpLiBUaGUgcmVzcG9uZCBtZXRob2QgcmV0dXJucyB0aGVcbiAgICogICAgYHJlcXVlc3RIYW5kbGVyYCBvYmplY3QgZm9yIHBvc3NpYmxlIG92ZXJyaWRlcy5cbiAgICovXG4gICRodHRwQmFja2VuZC5leHBlY3QgPSBmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywga2V5cykge1xuICAgIHZhciBleHBlY3RhdGlvbiA9IG5ldyBNb2NrSHR0cEV4cGVjdGF0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBrZXlzKSxcbiAgICAgICAgY2hhaW4gPSB7XG4gICAgICAgICAgcmVzcG9uZDogZnVuY3Rpb24oc3RhdHVzLCBkYXRhLCBoZWFkZXJzLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgICAgICBleHBlY3RhdGlvbi5yZXNwb25zZSA9IGNyZWF0ZVJlc3BvbnNlKHN0YXR1cywgZGF0YSwgaGVhZGVycywgc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gY2hhaW47XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgZXhwZWN0YXRpb25zLnB1c2goZXhwZWN0YXRpb24pO1xuICAgIHJldHVybiBjaGFpbjtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0R0VUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gZm9yIEdFVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3Q9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBTZWUgI2V4cGVjdCBmb3IgbW9yZSBpbmZvLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0SEVBRFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyByZXF1ZXN0IGV4cGVjdGF0aW9uIGZvciBIRUFEIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgZXhwZWN0KClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdD19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogICByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqICAgb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0REVMRVRFXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gZm9yIERFTEVURSByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3Q9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdFBPU1RcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbiBmb3IgUE9TVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfE9iamVjdCk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXRcbiAgICogIHJlY2VpdmVzIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQsIG9yIE9iamVjdCBpZiByZXF1ZXN0IGJvZHlcbiAgICogIGlzIGluIEpTT04gZm9ybWF0LlxuICAgKiBAcGFyYW0ge09iamVjdD19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogICByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqICAgb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0UFVUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gZm9yIFBVVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfE9iamVjdCk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXRcbiAgICogIHJlY2VpdmVzIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQsIG9yIE9iamVjdCBpZiByZXF1ZXN0IGJvZHlcbiAgICogIGlzIGluIEpTT04gZm9ybWF0LlxuICAgKiBAcGFyYW0ge09iamVjdD19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogICByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqICAgb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0UEFUQ0hcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbiBmb3IgUEFUQ0ggcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGBleHBlY3QoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKXxPYmplY3QpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0XG4gICAqICByZWNlaXZlcyBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLCBvciBPYmplY3QgaWYgcmVxdWVzdCBib2R5XG4gICAqICBpcyBpbiBKU09OIGZvcm1hdC5cbiAgICogQHBhcmFtIHtPYmplY3Q9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdEpTT05QXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gZm9yIEpTT05QIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgZXhwZWN0KClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYW4gdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG4gIGNyZWF0ZVNob3J0TWV0aG9kcygnZXhwZWN0Jyk7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdFJvdXRlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gdGhhdCBjb21wYXJlcyBvbmx5IHdpdGggdGhlIHJlcXVlc3RlZCByb3V0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBIVFRQIG1ldGhvZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBIVFRQIHVybCBzdHJpbmcgdGhhdCBzdXBwb3J0cyBjb2xvbiBwYXJhbSBtYXRjaGluZy5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBTZWUgI2V4cGVjdCBmb3IgbW9yZSBpbmZvLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLmV4cGVjdFJvdXRlID0gZnVuY3Rpb24obWV0aG9kLCB1cmwpIHtcbiAgICB2YXIgcGF0aE9iaiA9IHBhcnNlUm91dGUodXJsKTtcbiAgICByZXR1cm4gJGh0dHBCYWNrZW5kLmV4cGVjdChtZXRob2QsIHBhdGhPYmoucmVnZXhwLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcGF0aE9iai5rZXlzKTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCNmbHVzaFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRmx1c2hlcyBhbGwgcGVuZGluZyByZXF1ZXN0cyB1c2luZyB0aGUgdHJhaW5lZCByZXNwb25zZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY291bnQgTnVtYmVyIG9mIHJlc3BvbnNlcyB0byBmbHVzaCAoaW4gdGhlIG9yZGVyIHRoZXkgYXJyaXZlZCkuIElmIHVuZGVmaW5lZCxcbiAgICogICBhbGwgcGVuZGluZyByZXF1ZXN0cyB3aWxsIGJlIGZsdXNoZWQuIElmIHRoZXJlIGFyZSBubyBwZW5kaW5nIHJlcXVlc3RzIHdoZW4gdGhlIGZsdXNoIG1ldGhvZFxuICAgKiAgIGlzIGNhbGxlZCBhbiBleGNlcHRpb24gaXMgdGhyb3duIChhcyB0aGlzIHR5cGljYWxseSBhIHNpZ24gb2YgcHJvZ3JhbW1pbmcgZXJyb3IpLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLmZsdXNoID0gZnVuY3Rpb24oY291bnQsIGRpZ2VzdCkge1xuICAgIGlmIChkaWdlc3QgIT09IGZhbHNlKSAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICBpZiAoIXJlc3BvbnNlcy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignTm8gcGVuZGluZyByZXF1ZXN0IHRvIGZsdXNoICEnKTtcblxuICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChjb3VudCkgJiYgY291bnQgIT09IG51bGwpIHtcbiAgICAgIHdoaWxlIChjb3VudC0tKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2VzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdObyBtb3JlIHBlbmRpbmcgcmVxdWVzdCB0byBmbHVzaCAhJyk7XG4gICAgICAgIHJlc3BvbnNlcy5zaGlmdCgpKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlIChyZXNwb25zZXMubGVuZ3RoKSB7XG4gICAgICAgIHJlc3BvbnNlcy5zaGlmdCgpKCk7XG4gICAgICB9XG4gICAgfVxuICAgICRodHRwQmFja2VuZC52ZXJpZnlOb091dHN0YW5kaW5nRXhwZWN0YXRpb24oZGlnZXN0KTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCN2ZXJpZnlOb091dHN0YW5kaW5nRXhwZWN0YXRpb25cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFZlcmlmaWVzIHRoYXQgYWxsIG9mIHRoZSByZXF1ZXN0cyBkZWZpbmVkIHZpYSB0aGUgYGV4cGVjdGAgYXBpIHdlcmUgbWFkZS4gSWYgYW55IG9mIHRoZVxuICAgKiByZXF1ZXN0cyB3ZXJlIG5vdCBtYWRlLCB2ZXJpZnlOb091dHN0YW5kaW5nRXhwZWN0YXRpb24gdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICpcbiAgICogVHlwaWNhbGx5LCB5b3Ugd291bGQgY2FsbCB0aGlzIG1ldGhvZCBmb2xsb3dpbmcgZWFjaCB0ZXN0IGNhc2UgdGhhdCBhc3NlcnRzIHJlcXVlc3RzIHVzaW5nIGFuXG4gICAqIFwiYWZ0ZXJFYWNoXCIgY2xhdXNlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIGFmdGVyRWFjaCgkaHR0cEJhY2tlbmQudmVyaWZ5Tm9PdXRzdGFuZGluZ0V4cGVjdGF0aW9uKTtcbiAgICogYGBgXG4gICAqL1xuICAkaHR0cEJhY2tlbmQudmVyaWZ5Tm9PdXRzdGFuZGluZ0V4cGVjdGF0aW9uID0gZnVuY3Rpb24oZGlnZXN0KSB7XG4gICAgaWYgKGRpZ2VzdCAhPT0gZmFsc2UpICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgIGlmIChleHBlY3RhdGlvbnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc2F0aXNmaWVkIHJlcXVlc3RzOiAnICsgZXhwZWN0YXRpb25zLmpvaW4oJywgJykpO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCN2ZXJpZnlOb091dHN0YW5kaW5nUmVxdWVzdFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVmVyaWZpZXMgdGhhdCB0aGVyZSBhcmUgbm8gb3V0c3RhbmRpbmcgcmVxdWVzdHMgdGhhdCBuZWVkIHRvIGJlIGZsdXNoZWQuXG4gICAqXG4gICAqIFR5cGljYWxseSwgeW91IHdvdWxkIGNhbGwgdGhpcyBtZXRob2QgZm9sbG93aW5nIGVhY2ggdGVzdCBjYXNlIHRoYXQgYXNzZXJ0cyByZXF1ZXN0cyB1c2luZyBhblxuICAgKiBcImFmdGVyRWFjaFwiIGNsYXVzZS5cbiAgICpcbiAgICogYGBganNcbiAgICogICBhZnRlckVhY2goJGh0dHBCYWNrZW5kLnZlcmlmeU5vT3V0c3RhbmRpbmdSZXF1ZXN0KTtcbiAgICogYGBgXG4gICAqL1xuICAkaHR0cEJhY2tlbmQudmVyaWZ5Tm9PdXRzdGFuZGluZ1JlcXVlc3QgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAocmVzcG9uc2VzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmZsdXNoZWQgcmVxdWVzdHM6ICcgKyByZXNwb25zZXMubGVuZ3RoKTtcbiAgICB9XG4gIH07XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjcmVzZXRFeHBlY3RhdGlvbnNcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJlc2V0cyBhbGwgcmVxdWVzdCBleHBlY3RhdGlvbnMsIGJ1dCBwcmVzZXJ2ZXMgYWxsIGJhY2tlbmQgZGVmaW5pdGlvbnMuIFR5cGljYWxseSwgeW91IHdvdWxkXG4gICAqIGNhbGwgcmVzZXRFeHBlY3RhdGlvbnMgZHVyaW5nIGEgbXVsdGlwbGUtcGhhc2UgdGVzdCB3aGVuIHlvdSB3YW50IHRvIHJldXNlIHRoZSBzYW1lIGluc3RhbmNlIG9mXG4gICAqICRodHRwQmFja2VuZCBtb2NrLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLnJlc2V0RXhwZWN0YXRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgZXhwZWN0YXRpb25zLmxlbmd0aCA9IDA7XG4gICAgcmVzcG9uc2VzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgcmV0dXJuICRodHRwQmFja2VuZDtcblxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kcyhwcmVmaXgpIHtcbiAgICBhbmd1bGFyLmZvckVhY2goWydHRVQnLCAnREVMRVRFJywgJ0pTT05QJywgJ0hFQUQnXSwgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICRodHRwQmFja2VuZFtwcmVmaXggKyBtZXRob2RdID0gZnVuY3Rpb24odXJsLCBoZWFkZXJzLCBrZXlzKSB7XG4gICAgICAgcmV0dXJuICRodHRwQmFja2VuZFtwcmVmaXhdKG1ldGhvZCwgdXJsLCB1bmRlZmluZWQsIGhlYWRlcnMsIGtleXMpO1xuICAgICB9O1xuICAgIH0pO1xuXG4gICAgYW5ndWxhci5mb3JFYWNoKFsnUFVUJywgJ1BPU1QnLCAnUEFUQ0gnXSwgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAkaHR0cEJhY2tlbmRbcHJlZml4ICsgbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgaGVhZGVycywga2V5cykge1xuICAgICAgICByZXR1cm4gJGh0dHBCYWNrZW5kW3ByZWZpeF0obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIGtleXMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBNb2NrSHR0cEV4cGVjdGF0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBrZXlzKSB7XG5cbiAgdGhpcy5kYXRhID0gZGF0YTtcbiAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcblxuICB0aGlzLm1hdGNoID0gZnVuY3Rpb24obSwgdSwgZCwgaCkge1xuICAgIGlmIChtZXRob2QgIT0gbSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghdGhpcy5tYXRjaFVybCh1KSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChkKSAmJiAhdGhpcy5tYXRjaERhdGEoZCkpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaCkgJiYgIXRoaXMubWF0Y2hIZWFkZXJzKGgpKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgdGhpcy5tYXRjaFVybCA9IGZ1bmN0aW9uKHUpIHtcbiAgICBpZiAoIXVybCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbih1cmwudGVzdCkpIHJldHVybiB1cmwudGVzdCh1KTtcbiAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKHVybCkpIHJldHVybiB1cmwodSk7XG4gICAgcmV0dXJuIHVybCA9PSB1O1xuICB9O1xuXG4gIHRoaXMubWF0Y2hIZWFkZXJzID0gZnVuY3Rpb24oaCkge1xuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGhlYWRlcnMpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKGhlYWRlcnMpKSByZXR1cm4gaGVhZGVycyhoKTtcbiAgICByZXR1cm4gYW5ndWxhci5lcXVhbHMoaGVhZGVycywgaCk7XG4gIH07XG5cbiAgdGhpcy5tYXRjaERhdGEgPSBmdW5jdGlvbihkKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoZGF0YSkpIHJldHVybiB0cnVlO1xuICAgIGlmIChkYXRhICYmIGFuZ3VsYXIuaXNGdW5jdGlvbihkYXRhLnRlc3QpKSByZXR1cm4gZGF0YS50ZXN0KGQpO1xuICAgIGlmIChkYXRhICYmIGFuZ3VsYXIuaXNGdW5jdGlvbihkYXRhKSkgcmV0dXJuIGRhdGEoZCk7XG4gICAgaWYgKGRhdGEgJiYgIWFuZ3VsYXIuaXNTdHJpbmcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBhbmd1bGFyLmVxdWFscyhhbmd1bGFyLmZyb21Kc29uKGFuZ3VsYXIudG9Kc29uKGRhdGEpKSwgYW5ndWxhci5mcm9tSnNvbihkKSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhID09IGQ7XG4gIH07XG5cbiAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtZXRob2QgKyAnICcgKyB1cmw7XG4gIH07XG5cbiAgdGhpcy5wYXJhbXMgPSBmdW5jdGlvbih1KSB7XG4gICAgcmV0dXJuIGFuZ3VsYXIuZXh0ZW5kKHBhcnNlUXVlcnkoKSwgcGF0aFBhcmFtcygpKTtcblxuICAgIGZ1bmN0aW9uIHBhdGhQYXJhbXMoKSB7XG4gICAgICB2YXIga2V5T2JqID0ge307XG4gICAgICBpZiAoIXVybCB8fCAhYW5ndWxhci5pc0Z1bmN0aW9uKHVybC50ZXN0KSB8fCAha2V5cyB8fCBrZXlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGtleU9iajtcblxuICAgICAgdmFyIG0gPSB1cmwuZXhlYyh1KTtcbiAgICAgIGlmICghbSkgcmV0dXJuIGtleU9iajtcbiAgICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBtLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2kgLSAxXTtcbiAgICAgICAgdmFyIHZhbCA9IG1baV07XG4gICAgICAgIGlmIChrZXkgJiYgdmFsKSB7XG4gICAgICAgICAga2V5T2JqW2tleS5uYW1lIHx8IGtleV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGtleU9iajtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZVF1ZXJ5KCkge1xuICAgICAgdmFyIG9iaiA9IHt9LCBrZXlfdmFsdWUsIGtleSxcbiAgICAgICAgICBxdWVyeVN0ciA9IHUuaW5kZXhPZignPycpID4gLTFcbiAgICAgICAgICA/IHUuc3Vic3RyaW5nKHUuaW5kZXhPZignPycpICsgMSlcbiAgICAgICAgICA6IFwiXCI7XG5cbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChxdWVyeVN0ci5zcGxpdCgnJicpLCBmdW5jdGlvbihrZXlWYWx1ZSkge1xuICAgICAgICBpZiAoa2V5VmFsdWUpIHtcbiAgICAgICAgICBrZXlfdmFsdWUgPSBrZXlWYWx1ZS5yZXBsYWNlKC9cXCsvZywnJTIwJykuc3BsaXQoJz0nKTtcbiAgICAgICAgICBrZXkgPSB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5X3ZhbHVlWzBdKTtcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoa2V5KSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGFuZ3VsYXIuaXNEZWZpbmVkKGtleV92YWx1ZVsxXSkgPyB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5X3ZhbHVlWzFdKSA6IHRydWU7XG4gICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzQXJyYXkob2JqW2tleV0pKSB7XG4gICAgICAgICAgICAgIG9ialtrZXldLnB1c2godmFsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9ialtrZXldID0gW29ialtrZXldLHZhbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElnbm9yZSBhbnkgaW52YWxpZCB1cmkgY29tcG9uZW50XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVNb2NrWGhyKCkge1xuICByZXR1cm4gbmV3IE1vY2tYaHIoKTtcbn1cblxuZnVuY3Rpb24gTW9ja1hocigpIHtcblxuICAvLyBoYWNrIGZvciB0ZXN0aW5nICRodHRwLCAkaHR0cEJhY2tlbmRcbiAgTW9ja1hoci4kJGxhc3RJbnN0YW5jZSA9IHRoaXM7XG5cbiAgdGhpcy5vcGVuID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIGFzeW5jKSB7XG4gICAgdGhpcy4kJG1ldGhvZCA9IG1ldGhvZDtcbiAgICB0aGlzLiQkdXJsID0gdXJsO1xuICAgIHRoaXMuJCRhc3luYyA9IGFzeW5jO1xuICAgIHRoaXMuJCRyZXFIZWFkZXJzID0ge307XG4gICAgdGhpcy4kJHJlc3BIZWFkZXJzID0ge307XG4gIH07XG5cbiAgdGhpcy5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMuJCRkYXRhID0gZGF0YTtcbiAgfTtcblxuICB0aGlzLnNldFJlcXVlc3RIZWFkZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgdGhpcy4kJHJlcUhlYWRlcnNba2V5XSA9IHZhbHVlO1xuICB9O1xuXG4gIHRoaXMuZ2V0UmVzcG9uc2VIZWFkZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgLy8gdGhlIGxvb2t1cCBtdXN0IGJlIGNhc2UgaW5zZW5zaXRpdmUsXG4gICAgLy8gdGhhdCdzIHdoeSB3ZSB0cnkgdHdvIHF1aWNrIGxvb2t1cHMgZmlyc3QgYW5kIGZ1bGwgc2NhbiBsYXN0XG4gICAgdmFyIGhlYWRlciA9IHRoaXMuJCRyZXNwSGVhZGVyc1tuYW1lXTtcbiAgICBpZiAoaGVhZGVyKSByZXR1cm4gaGVhZGVyO1xuXG4gICAgbmFtZSA9IGFuZ3VsYXIubG93ZXJjYXNlKG5hbWUpO1xuICAgIGhlYWRlciA9IHRoaXMuJCRyZXNwSGVhZGVyc1tuYW1lXTtcbiAgICBpZiAoaGVhZGVyKSByZXR1cm4gaGVhZGVyO1xuXG4gICAgaGVhZGVyID0gdW5kZWZpbmVkO1xuICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLiQkcmVzcEhlYWRlcnMsIGZ1bmN0aW9uKGhlYWRlclZhbCwgaGVhZGVyTmFtZSkge1xuICAgICAgaWYgKCFoZWFkZXIgJiYgYW5ndWxhci5sb3dlcmNhc2UoaGVhZGVyTmFtZSkgPT0gbmFtZSkgaGVhZGVyID0gaGVhZGVyVmFsO1xuICAgIH0pO1xuICAgIHJldHVybiBoZWFkZXI7XG4gIH07XG5cbiAgdGhpcy5nZXRBbGxSZXNwb25zZUhlYWRlcnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGluZXMgPSBbXTtcblxuICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLiQkcmVzcEhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgIGxpbmVzLnB1c2goa2V5ICsgJzogJyArIHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG4gIH07XG5cbiAgdGhpcy5hYm9ydCA9IGFuZ3VsYXIubm9vcDtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkdGltZW91dFxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhpcyBzZXJ2aWNlIGlzIGp1c3QgYSBzaW1wbGUgZGVjb3JhdG9yIGZvciB7QGxpbmsgbmcuJHRpbWVvdXQgJHRpbWVvdXR9IHNlcnZpY2VcbiAqIHRoYXQgYWRkcyBhIFwiZmx1c2hcIiBhbmQgXCJ2ZXJpZnlOb1BlbmRpbmdUYXNrc1wiIG1ldGhvZHMuXG4gKi9cblxuYW5ndWxhci5tb2NrLiRUaW1lb3V0RGVjb3JhdG9yID0gWyckZGVsZWdhdGUnLCAnJGJyb3dzZXInLCBmdW5jdGlvbigkZGVsZWdhdGUsICRicm93c2VyKSB7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHRpbWVvdXQjZmx1c2hcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEZsdXNoZXMgdGhlIHF1ZXVlIG9mIHBlbmRpbmcgdGFza3MuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gZGVsYXkgbWF4aW11bSB0aW1lb3V0IGFtb3VudCB0byBmbHVzaCB1cCB1bnRpbFxuICAgKi9cbiAgJGRlbGVnYXRlLmZsdXNoID0gZnVuY3Rpb24oZGVsYXkpIHtcbiAgICAkYnJvd3Nlci5kZWZlci5mbHVzaChkZWxheSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHRpbWVvdXQjdmVyaWZ5Tm9QZW5kaW5nVGFza3NcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFZlcmlmaWVzIHRoYXQgdGhlcmUgYXJlIG5vIHBlbmRpbmcgdGFza3MgdGhhdCBuZWVkIHRvIGJlIGZsdXNoZWQuXG4gICAqL1xuICAkZGVsZWdhdGUudmVyaWZ5Tm9QZW5kaW5nVGFza3MgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoJGJyb3dzZXIuZGVmZXJyZWRGbnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RlZmVycmVkIHRhc2tzIHRvIGZsdXNoICgnICsgJGJyb3dzZXIuZGVmZXJyZWRGbnMubGVuZ3RoICsgJyk6ICcgK1xuICAgICAgICAgIGZvcm1hdFBlbmRpbmdUYXNrc0FzU3RyaW5nKCRicm93c2VyLmRlZmVycmVkRm5zKSk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGZvcm1hdFBlbmRpbmdUYXNrc0FzU3RyaW5nKHRhc2tzKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIGFuZ3VsYXIuZm9yRWFjaCh0YXNrcywgZnVuY3Rpb24odGFzaykge1xuICAgICAgcmVzdWx0LnB1c2goJ3tpZDogJyArIHRhc2suaWQgKyAnLCAnICsgJ3RpbWU6ICcgKyB0YXNrLnRpbWUgKyAnfScpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCcsICcpO1xuICB9XG5cbiAgcmV0dXJuICRkZWxlZ2F0ZTtcbn1dO1xuXG5hbmd1bGFyLm1vY2suJFJBRkRlY29yYXRvciA9IFsnJGRlbGVnYXRlJywgZnVuY3Rpb24oJGRlbGVnYXRlKSB7XG4gIHZhciByYWZGbiA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgdmFyIGluZGV4ID0gcmFmRm4ucXVldWUubGVuZ3RoO1xuICAgIHJhZkZuLnF1ZXVlLnB1c2goZm4pO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJhZkZuLnF1ZXVlLnNwbGljZShpbmRleCwgMSk7XG4gICAgfTtcbiAgfTtcblxuICByYWZGbi5xdWV1ZSA9IFtdO1xuICByYWZGbi5zdXBwb3J0ZWQgPSAkZGVsZWdhdGUuc3VwcG9ydGVkO1xuXG4gIHJhZkZuLmZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHJhZkZuLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyByQUYgY2FsbGJhY2tzIHByZXNlbnQnKTtcbiAgICB9XG5cbiAgICB2YXIgbGVuZ3RoID0gcmFmRm4ucXVldWUubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJhZkZuLnF1ZXVlW2ldKCk7XG4gICAgfVxuXG4gICAgcmFmRm4ucXVldWUgPSByYWZGbi5xdWV1ZS5zbGljZShpKTtcbiAgfTtcblxuICByZXR1cm4gcmFmRm47XG59XTtcblxuLyoqXG4gKlxuICovXG5hbmd1bGFyLm1vY2suJFJvb3RFbGVtZW50UHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudCgnPGRpdiBuZy1hcHA+PC9kaXY+Jyk7XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkY29udHJvbGxlclxuICogQGRlc2NyaXB0aW9uXG4gKiBBIGRlY29yYXRvciBmb3Ige0BsaW5rIG5nLiRjb250cm9sbGVyfSB3aXRoIGFkZGl0aW9uYWwgYGJpbmRpbmdzYCBwYXJhbWV0ZXIsIHVzZWZ1bCB3aGVuIHRlc3RpbmdcbiAqIGNvbnRyb2xsZXJzIG9mIGRpcmVjdGl2ZXMgdGhhdCB1c2Uge0BsaW5rICRjb21waWxlIy1iaW5kdG9jb250cm9sbGVyLSBgYmluZFRvQ29udHJvbGxlcmB9LlxuICpcbiAqXG4gKiAjIyBFeGFtcGxlXG4gKlxuICogYGBganNcbiAqXG4gKiAvLyBEaXJlY3RpdmUgZGVmaW5pdGlvbiAuLi5cbiAqXG4gKiBteU1vZC5kaXJlY3RpdmUoJ215RGlyZWN0aXZlJywge1xuICogICBjb250cm9sbGVyOiAnTXlEaXJlY3RpdmVDb250cm9sbGVyJyxcbiAqICAgYmluZFRvQ29udHJvbGxlcjoge1xuICogICAgIG5hbWU6ICdAJ1xuICogICB9XG4gKiB9KTtcbiAqXG4gKlxuICogLy8gQ29udHJvbGxlciBkZWZpbml0aW9uIC4uLlxuICpcbiAqIG15TW9kLmNvbnRyb2xsZXIoJ015RGlyZWN0aXZlQ29udHJvbGxlcicsIFsnJGxvZycsIGZ1bmN0aW9uKCRsb2cpIHtcbiAqICAgJGxvZy5pbmZvKHRoaXMubmFtZSk7XG4gKiB9KV07XG4gKlxuICpcbiAqIC8vIEluIGEgdGVzdCAuLi5cbiAqXG4gKiBkZXNjcmliZSgnbXlEaXJlY3RpdmVDb250cm9sbGVyJywgZnVuY3Rpb24oKSB7XG4gKiAgIGl0KCdzaG91bGQgd3JpdGUgdGhlIGJvdW5kIG5hbWUgdG8gdGhlIGxvZycsIGluamVjdChmdW5jdGlvbigkY29udHJvbGxlciwgJGxvZykge1xuICogICAgIHZhciBjdHJsID0gJGNvbnRyb2xsZXIoJ015RGlyZWN0aXZlQ29udHJvbGxlcicsIHsgLyogbm8gbG9jYWxzICYjNDI7LyB9LCB7IG5hbWU6ICdDbGFyayBLZW50JyB9KTtcbiAqICAgICBleHBlY3QoY3RybC5uYW1lKS50b0VxdWFsKCdDbGFyayBLZW50Jyk7XG4gKiAgICAgZXhwZWN0KCRsb2cuaW5mby5sb2dzKS50b0VxdWFsKFsnQ2xhcmsgS2VudCddKTtcbiAqICAgfSk7XG4gKiB9KTtcbiAqXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gY29uc3RydWN0b3IgSWYgY2FsbGVkIHdpdGggYSBmdW5jdGlvbiB0aGVuIGl0J3MgY29uc2lkZXJlZCB0byBiZSB0aGVcbiAqICAgIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb24uIE90aGVyd2lzZSBpdCdzIGNvbnNpZGVyZWQgdG8gYmUgYSBzdHJpbmcgd2hpY2ggaXMgdXNlZFxuICogICAgdG8gcmV0cmlldmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgdXNpbmcgdGhlIGZvbGxvd2luZyBzdGVwczpcbiAqXG4gKiAgICAqIGNoZWNrIGlmIGEgY29udHJvbGxlciB3aXRoIGdpdmVuIG5hbWUgaXMgcmVnaXN0ZXJlZCB2aWEgYCRjb250cm9sbGVyUHJvdmlkZXJgXG4gKiAgICAqIGNoZWNrIGlmIGV2YWx1YXRpbmcgdGhlIHN0cmluZyBvbiB0aGUgY3VycmVudCBzY29wZSByZXR1cm5zIGEgY29uc3RydWN0b3JcbiAqICAgICogaWYgJGNvbnRyb2xsZXJQcm92aWRlciNhbGxvd0dsb2JhbHMsIGNoZWNrIGB3aW5kb3dbY29uc3RydWN0b3JdYCBvbiB0aGUgZ2xvYmFsXG4gKiAgICAgIGB3aW5kb3dgIG9iamVjdCAobm90IHJlY29tbWVuZGVkKVxuICpcbiAqICAgIFRoZSBzdHJpbmcgY2FuIHVzZSB0aGUgYGNvbnRyb2xsZXIgYXMgcHJvcGVydHlgIHN5bnRheCwgd2hlcmUgdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgaXMgcHVibGlzaGVkXG4gKiAgICBhcyB0aGUgc3BlY2lmaWVkIHByb3BlcnR5IG9uIHRoZSBgc2NvcGVgOyB0aGUgYHNjb3BlYCBtdXN0IGJlIGluamVjdGVkIGludG8gYGxvY2Fsc2AgcGFyYW0gZm9yIHRoaXNcbiAqICAgIHRvIHdvcmsgY29ycmVjdGx5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBsb2NhbHMgSW5qZWN0aW9uIGxvY2FscyBmb3IgQ29udHJvbGxlci5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gYmluZGluZ3MgUHJvcGVydGllcyB0byBhZGQgdG8gdGhlIGNvbnRyb2xsZXIgYmVmb3JlIGludm9raW5nIHRoZSBjb25zdHJ1Y3Rvci4gVGhpcyBpcyB1c2VkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIHNpbXVsYXRlIHRoZSBgYmluZFRvQ29udHJvbGxlcmAgZmVhdHVyZSBhbmQgc2ltcGxpZnkgY2VydGFpbiBraW5kcyBvZiB0ZXN0cy5cbiAqIEByZXR1cm4ge09iamVjdH0gSW5zdGFuY2Ugb2YgZ2l2ZW4gY29udHJvbGxlci5cbiAqL1xuYW5ndWxhci5tb2NrLiRDb250cm9sbGVyRGVjb3JhdG9yID0gWyckZGVsZWdhdGUnLCBmdW5jdGlvbigkZGVsZWdhdGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGxvY2FscywgbGF0ZXIsIGlkZW50KSB7XG4gICAgaWYgKGxhdGVyICYmIHR5cGVvZiBsYXRlciA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBjcmVhdGUgPSAkZGVsZWdhdGUoZXhwcmVzc2lvbiwgbG9jYWxzLCB0cnVlLCBpZGVudCk7XG4gICAgICBhbmd1bGFyLmV4dGVuZChjcmVhdGUuaW5zdGFuY2UsIGxhdGVyKTtcbiAgICAgIHJldHVybiBjcmVhdGUoKTtcbiAgICB9XG4gICAgcmV0dXJuICRkZWxlZ2F0ZShleHByZXNzaW9uLCBsb2NhbHMsIGxhdGVyLCBpZGVudCk7XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGNvbXBvbmVudENvbnRyb2xsZXJcbiAqIEBkZXNjcmlwdGlvblxuICogQSBzZXJ2aWNlIHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBjb21wb25lbnQgY29udHJvbGxlcnMuXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogQmUgYXdhcmUgdGhhdCB0aGUgY29udHJvbGxlciB3aWxsIGJlIGluc3RhbnRpYXRlZCBhbmQgYXR0YWNoZWQgdG8gdGhlIHNjb3BlIGFzIHNwZWNpZmllZCBpblxuICogdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdC4gVGhhdCBtZWFucyB0aGF0IHlvdSBtdXN0IGFsd2F5cyBwcm92aWRlIGEgYCRzY29wZWAgb2JqZWN0XG4gKiBpbiB0aGUgYGxvY2Fsc2AgcGFyYW0uXG4gKiA8L2Rpdj5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIHRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQgd2hvc2UgY29udHJvbGxlciB3ZSB3YW50IHRvIGluc3RhbnRpYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IGJpbmRpbmdzIFByb3BlcnRpZXMgdG8gYWRkIHRvIHRoZSBjb250cm9sbGVyIGJlZm9yZSBpbnZva2luZyB0aGUgY29uc3RydWN0b3IuIFRoaXMgaXMgdXNlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICB0byBzaW11bGF0ZSB0aGUgYGJpbmRUb0NvbnRyb2xsZXJgIGZlYXR1cmUgYW5kIHNpbXBsaWZ5IGNlcnRhaW4ga2luZHMgb2YgdGVzdHMuXG4gKiBAcGFyYW0ge3N0cmluZz19IGlkZW50IE92ZXJyaWRlIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIHVzZSB3aGVuIGF0dGFjaGluZyB0aGUgY29udHJvbGxlciB0byB0aGUgc2NvcGUuXG4gKiBAcmV0dXJuIHtPYmplY3R9IEluc3RhbmNlIG9mIHJlcXVlc3RlZCBjb250cm9sbGVyLlxuICovXG5hbmd1bGFyLm1vY2suJENvbXBvbmVudENvbnRyb2xsZXJQcm92aWRlciA9IFsnJGNvbXBpbGVQcm92aWRlcicsIGZ1bmN0aW9uKCRjb21waWxlUHJvdmlkZXIpIHtcbiAgcmV0dXJuIHtcbiAgICAkZ2V0OiBbJyRjb250cm9sbGVyJywnJGluamVjdG9yJywgZnVuY3Rpb24oJGNvbnRyb2xsZXIsJGluamVjdG9yKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gJGNvbXBvbmVudENvbnRyb2xsZXIoY29tcG9uZW50TmFtZSwgbG9jYWxzLCBiaW5kaW5ncywgaWRlbnQpIHtcbiAgICAgICAgLy8gZ2V0IGFsbCBkaXJlY3RpdmVzIGFzc29jaWF0ZWQgdG8gdGhlIGNvbXBvbmVudCBuYW1lXG4gICAgICAgIHZhciBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChjb21wb25lbnROYW1lICsgJ0RpcmVjdGl2ZScpO1xuICAgICAgICAvLyBsb29rIGZvciB0aG9zZSBkaXJlY3RpdmVzIHRoYXQgYXJlIGNvbXBvbmVudHNcbiAgICAgICAgdmFyIGNhbmRpZGF0ZURpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzLmZpbHRlcihmdW5jdGlvbihkaXJlY3RpdmVJbmZvKSB7XG4gICAgICAgICAgLy8gY29tcG9uZW50cyBoYXZlIGNvbnRyb2xsZXIsIGNvbnRyb2xsZXJBcyBhbmQgcmVzdHJpY3Q6J0UnXG4gICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZUluZm8uY29udHJvbGxlciAmJiBkaXJlY3RpdmVJbmZvLmNvbnRyb2xsZXJBcyAmJiBkaXJlY3RpdmVJbmZvLnJlc3RyaWN0ID09PSAnRSc7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjaGVjayBpZiB2YWxpZCBkaXJlY3RpdmVzIGZvdW5kXG4gICAgICAgIGlmIChjYW5kaWRhdGVEaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29tcG9uZW50IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbmRpZGF0ZURpcmVjdGl2ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vIG1hbnkgY29tcG9uZW50cyBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGdldCB0aGUgaW5mbyBvZiB0aGUgY29tcG9uZW50XG4gICAgICAgIHZhciBkaXJlY3RpdmVJbmZvID0gY2FuZGlkYXRlRGlyZWN0aXZlc1swXTtcbiAgICAgICAgcmV0dXJuICRjb250cm9sbGVyKGRpcmVjdGl2ZUluZm8uY29udHJvbGxlciwgbG9jYWxzLCBiaW5kaW5ncywgaWRlbnQgfHwgZGlyZWN0aXZlSW5mby5jb250cm9sbGVyQXMpO1xuICAgICAgfTtcbiAgICB9XVxuICB9O1xufV07XG5cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ01vY2tcbiAqIEBwYWNrYWdlTmFtZSBhbmd1bGFyLW1vY2tzXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiAjIG5nTW9ja1xuICpcbiAqIFRoZSBgbmdNb2NrYCBtb2R1bGUgcHJvdmlkZXMgc3VwcG9ydCB0byBpbmplY3QgYW5kIG1vY2sgQW5ndWxhciBzZXJ2aWNlcyBpbnRvIHVuaXQgdGVzdHMuXG4gKiBJbiBhZGRpdGlvbiwgbmdNb2NrIGFsc28gZXh0ZW5kcyB2YXJpb3VzIGNvcmUgbmcgc2VydmljZXMgc3VjaCB0aGF0IHRoZXkgY2FuIGJlXG4gKiBpbnNwZWN0ZWQgYW5kIGNvbnRyb2xsZWQgaW4gYSBzeW5jaHJvbm91cyBtYW5uZXIgd2l0aGluIHRlc3QgY29kZS5cbiAqXG4gKlxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ01vY2tcIj48L2Rpdj5cbiAqXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCduZ01vY2snLCBbJ25nJ10pLnByb3ZpZGVyKHtcbiAgJGJyb3dzZXI6IGFuZ3VsYXIubW9jay4kQnJvd3NlclByb3ZpZGVyLFxuICAkZXhjZXB0aW9uSGFuZGxlcjogYW5ndWxhci5tb2NrLiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsXG4gICRsb2c6IGFuZ3VsYXIubW9jay4kTG9nUHJvdmlkZXIsXG4gICRpbnRlcnZhbDogYW5ndWxhci5tb2NrLiRJbnRlcnZhbFByb3ZpZGVyLFxuICAkaHR0cEJhY2tlbmQ6IGFuZ3VsYXIubW9jay4kSHR0cEJhY2tlbmRQcm92aWRlcixcbiAgJHJvb3RFbGVtZW50OiBhbmd1bGFyLm1vY2suJFJvb3RFbGVtZW50UHJvdmlkZXIsXG4gICRjb21wb25lbnRDb250cm9sbGVyOiBhbmd1bGFyLm1vY2suJENvbXBvbmVudENvbnRyb2xsZXJQcm92aWRlclxufSkuY29uZmlnKFsnJHByb3ZpZGUnLCBmdW5jdGlvbigkcHJvdmlkZSkge1xuICAkcHJvdmlkZS5kZWNvcmF0b3IoJyR0aW1lb3V0JywgYW5ndWxhci5tb2NrLiRUaW1lb3V0RGVjb3JhdG9yKTtcbiAgJHByb3ZpZGUuZGVjb3JhdG9yKCckJHJBRicsIGFuZ3VsYXIubW9jay4kUkFGRGVjb3JhdG9yKTtcbiAgJHByb3ZpZGUuZGVjb3JhdG9yKCckcm9vdFNjb3BlJywgYW5ndWxhci5tb2NrLiRSb290U2NvcGVEZWNvcmF0b3IpO1xuICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRjb250cm9sbGVyJywgYW5ndWxhci5tb2NrLiRDb250cm9sbGVyRGVjb3JhdG9yKTtcbn1dKTtcblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ01vY2tFMkVcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAcGFja2FnZU5hbWUgYW5ndWxhci1tb2Nrc1xuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhlIGBuZ01vY2tFMkVgIGlzIGFuIGFuZ3VsYXIgbW9kdWxlIHdoaWNoIGNvbnRhaW5zIG1vY2tzIHN1aXRhYmxlIGZvciBlbmQtdG8tZW5kIHRlc3RpbmcuXG4gKiBDdXJyZW50bHkgdGhlcmUgaXMgb25seSBvbmUgbW9jayBwcmVzZW50IGluIHRoaXMgbW9kdWxlIC1cbiAqIHRoZSB7QGxpbmsgbmdNb2NrRTJFLiRodHRwQmFja2VuZCBlMmUgJGh0dHBCYWNrZW5kfSBtb2NrLlxuICovXG5hbmd1bGFyLm1vZHVsZSgnbmdNb2NrRTJFJywgWyduZyddKS5jb25maWcoWyckcHJvdmlkZScsIGZ1bmN0aW9uKCRwcm92aWRlKSB7XG4gICRwcm92aWRlLmRlY29yYXRvcignJGh0dHBCYWNrZW5kJywgYW5ndWxhci5tb2NrLmUyZS4kaHR0cEJhY2tlbmREZWNvcmF0b3IpO1xufV0pO1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZha2UgSFRUUCBiYWNrZW5kIGltcGxlbWVudGF0aW9uIHN1aXRhYmxlIGZvciBlbmQtdG8tZW5kIHRlc3Rpbmcgb3IgYmFja2VuZC1sZXNzIGRldmVsb3BtZW50IG9mXG4gKiBhcHBsaWNhdGlvbnMgdGhhdCB1c2UgdGhlIHtAbGluayBuZy4kaHR0cCAkaHR0cCBzZXJ2aWNlfS5cbiAqXG4gKiAqTm90ZSo6IEZvciBmYWtlIGh0dHAgYmFja2VuZCBpbXBsZW1lbnRhdGlvbiBzdWl0YWJsZSBmb3IgdW5pdCB0ZXN0aW5nIHBsZWFzZSBzZWVcbiAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kIHVuaXQtdGVzdGluZyAkaHR0cEJhY2tlbmQgbW9ja30uXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gYmUgdXNlZCB0byByZXNwb25kIHdpdGggc3RhdGljIG9yIGR5bmFtaWMgcmVzcG9uc2VzIHZpYSB0aGUgYHdoZW5gIGFwaVxuICogYW5kIGl0cyBzaG9ydGN1dHMgKGB3aGVuR0VUYCwgYHdoZW5QT1NUYCwgZXRjKSBhbmQgb3B0aW9uYWxseSBwYXNzIHRocm91Z2ggcmVxdWVzdHMgdG8gdGhlXG4gKiByZWFsICRodHRwQmFja2VuZCBmb3Igc3BlY2lmaWMgcmVxdWVzdHMgKGUuZy4gdG8gaW50ZXJhY3Qgd2l0aCBjZXJ0YWluIHJlbW90ZSBhcGlzIG9yIHRvIGZldGNoXG4gKiB0ZW1wbGF0ZXMgZnJvbSBhIHdlYnNlcnZlcikuXG4gKlxuICogQXMgb3Bwb3NlZCB0byB1bml0LXRlc3RpbmcsIGluIGFuIGVuZC10by1lbmQgdGVzdGluZyBzY2VuYXJpbyBvciBpbiBzY2VuYXJpbyB3aGVuIGFuIGFwcGxpY2F0aW9uXG4gKiBpcyBiZWluZyBkZXZlbG9wZWQgd2l0aCB0aGUgcmVhbCBiYWNrZW5kIGFwaSByZXBsYWNlZCB3aXRoIGEgbW9jaywgaXQgaXMgb2Z0ZW4gZGVzaXJhYmxlIGZvclxuICogY2VydGFpbiBjYXRlZ29yeSBvZiByZXF1ZXN0cyB0byBieXBhc3MgdGhlIG1vY2sgYW5kIGlzc3VlIGEgcmVhbCBodHRwIHJlcXVlc3QgKGUuZy4gdG8gZmV0Y2hcbiAqIHRlbXBsYXRlcyBvciBzdGF0aWMgZmlsZXMgZnJvbSB0aGUgd2Vic2VydmVyKS4gVG8gY29uZmlndXJlIHRoZSBiYWNrZW5kIHdpdGggdGhpcyBiZWhhdmlvclxuICogdXNlIHRoZSBgcGFzc1Rocm91Z2hgIHJlcXVlc3QgaGFuZGxlciBvZiBgd2hlbmAgaW5zdGVhZCBvZiBgcmVzcG9uZGAuXG4gKlxuICogQWRkaXRpb25hbGx5LCB3ZSBkb24ndCB3YW50IHRvIG1hbnVhbGx5IGhhdmUgdG8gZmx1c2ggbW9ja2VkIG91dCByZXF1ZXN0cyBsaWtlIHdlIGRvIGR1cmluZyB1bml0XG4gKiB0ZXN0aW5nLiBGb3IgdGhpcyByZWFzb24gdGhlIGUyZSAkaHR0cEJhY2tlbmQgZmx1c2hlcyBtb2NrZWQgb3V0IHJlcXVlc3RzXG4gKiBhdXRvbWF0aWNhbGx5LCBjbG9zZWx5IHNpbXVsYXRpbmcgdGhlIGJlaGF2aW9yIG9mIHRoZSBYTUxIdHRwUmVxdWVzdCBvYmplY3QuXG4gKlxuICogVG8gc2V0dXAgdGhlIGFwcGxpY2F0aW9uIHRvIHJ1biB3aXRoIHRoaXMgaHR0cCBiYWNrZW5kLCB5b3UgaGF2ZSB0byBjcmVhdGUgYSBtb2R1bGUgdGhhdCBkZXBlbmRzXG4gKiBvbiB0aGUgYG5nTW9ja0UyRWAgYW5kIHlvdXIgYXBwbGljYXRpb24gbW9kdWxlcyBhbmQgZGVmaW5lcyB0aGUgZmFrZSBiYWNrZW5kOlxuICpcbiAqIGBgYGpzXG4gKiAgIG15QXBwRGV2ID0gYW5ndWxhci5tb2R1bGUoJ215QXBwRGV2JywgWydteUFwcCcsICduZ01vY2tFMkUnXSk7XG4gKiAgIG15QXBwRGV2LnJ1bihmdW5jdGlvbigkaHR0cEJhY2tlbmQpIHtcbiAqICAgICBwaG9uZXMgPSBbe25hbWU6ICdwaG9uZTEnfSwge25hbWU6ICdwaG9uZTInfV07XG4gKlxuICogICAgIC8vIHJldHVybnMgdGhlIGN1cnJlbnQgbGlzdCBvZiBwaG9uZXNcbiAqICAgICAkaHR0cEJhY2tlbmQud2hlbkdFVCgnL3Bob25lcycpLnJlc3BvbmQocGhvbmVzKTtcbiAqXG4gKiAgICAgLy8gYWRkcyBhIG5ldyBwaG9uZSB0byB0aGUgcGhvbmVzIGFycmF5XG4gKiAgICAgJGh0dHBCYWNrZW5kLndoZW5QT1NUKCcvcGhvbmVzJykucmVzcG9uZChmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSkge1xuICogICAgICAgdmFyIHBob25lID0gYW5ndWxhci5mcm9tSnNvbihkYXRhKTtcbiAqICAgICAgIHBob25lcy5wdXNoKHBob25lKTtcbiAqICAgICAgIHJldHVybiBbMjAwLCBwaG9uZSwge31dO1xuICogICAgIH0pO1xuICogICAgICRodHRwQmFja2VuZC53aGVuR0VUKC9eXFwvdGVtcGxhdGVzXFwvLykucGFzc1Rocm91Z2goKTtcbiAqICAgICAvLy4uLlxuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIEFmdGVyd2FyZHMsIGJvb3RzdHJhcCB5b3VyIGFwcCB3aXRoIHRoaXMgbmV3IG1vZHVsZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIEhUVFAgbWV0aG9kLlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwKT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkuXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gKiAgIG9iamVjdCBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBoZWFkZXJzIG1hdGNoIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICpcbiAqICAtIHJlc3BvbmQg4oCTXG4gKiAgICBge2Z1bmN0aW9uKFtzdGF0dXMsXSBkYXRhWywgaGVhZGVycywgc3RhdHVzVGV4dF0pXG4gKiAgICB8IGZ1bmN0aW9uKGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBwYXJhbXMpfWBcbiAqICAgIOKAkyBUaGUgcmVzcG9uZCBtZXRob2QgdGFrZXMgYSBzZXQgb2Ygc3RhdGljIGRhdGEgdG8gYmUgcmV0dXJuZWQgb3IgYSBmdW5jdGlvbiB0aGF0IGNhbiByZXR1cm5cbiAqICAgIGFuIGFycmF5IGNvbnRhaW5pbmcgcmVzcG9uc2Ugc3RhdHVzIChudW1iZXIpLCByZXNwb25zZSBkYXRhIChzdHJpbmcpLCByZXNwb25zZSBoZWFkZXJzXG4gKiAgICAoT2JqZWN0KSwgYW5kIHRoZSB0ZXh0IGZvciB0aGUgc3RhdHVzIChzdHJpbmcpLlxuICogIC0gcGFzc1Rocm91Z2gg4oCTIGB7ZnVuY3Rpb24oKX1gIOKAkyBBbnkgcmVxdWVzdCBtYXRjaGluZyBhIGJhY2tlbmQgZGVmaW5pdGlvbiB3aXRoXG4gKiAgICBgcGFzc1Rocm91Z2hgIGhhbmRsZXIgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0byB0aGUgcmVhbCBiYWNrZW5kIChhbiBYSFIgcmVxdWVzdCB3aWxsIGJlIG1hZGVcbiAqICAgIHRvIHRoZSBzZXJ2ZXIuKVxuICogIC0gQm90aCBtZXRob2RzIHJldHVybiB0aGUgYHJlcXVlc3RIYW5kbGVyYCBvYmplY3QgZm9yIHBvc3NpYmxlIG92ZXJyaWRlcy5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuR0VUXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgR0VUIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBvblxuICogICB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCAkaHR0cEJhY2tlbmQgbW9ja30uXG4gKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIGFuZCBgcGFzc1Rocm91Z2hgIG1ldGhvZHMgdGhhdFxuICogICBjb250cm9sIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlXG4gKiAgIGByZXNwb25kYCBvciBgcGFzc1Rocm91Z2hgIGFnYWluIGluIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuSEVBRFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIEhFQUQgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5ERUxFVEVcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBERUxFVEUgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QT1NUXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgUE9TVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwKT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkuXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgb25cbiAqICAge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlblBVVFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIFBVVCByZXF1ZXN0cy4gIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cCk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5LlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QQVRDSFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIFBBVENIIHJlcXVlc3RzLiAgRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl9IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwKT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkuXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgb25cbiAqICAge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkpTT05QXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgSlNPTlAgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBvblxuICogICB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCAkaHR0cEJhY2tlbmQgbW9ja30uXG4gKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIGFuZCBgcGFzc1Rocm91Z2hgIG1ldGhvZHMgdGhhdFxuICogICBjb250cm9sIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlXG4gKiAgIGByZXNwb25kYCBvciBgcGFzc1Rocm91Z2hgIGFnYWluIGluIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAqL1xuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlblJvdXRlXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiB0aGF0IGNvbXBhcmVzIG9ubHkgd2l0aCB0aGUgcmVxdWVzdGVkIHJvdXRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgSFRUUCBtZXRob2QuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIEhUVFAgdXJsIHN0cmluZyB0aGF0IHN1cHBvcnRzIGNvbG9uIHBhcmFtIG1hdGNoaW5nLlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKi9cbmFuZ3VsYXIubW9jay5lMmUgPSB7fTtcbmFuZ3VsYXIubW9jay5lMmUuJGh0dHBCYWNrZW5kRGVjb3JhdG9yID1cbiAgWyckcm9vdFNjb3BlJywgJyR0aW1lb3V0JywgJyRkZWxlZ2F0ZScsICckYnJvd3NlcicsIGNyZWF0ZUh0dHBCYWNrZW5kTW9ja107XG5cblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgJHJvb3RTY29wZS5TY29wZVxuICogQG1vZHVsZSBuZ01vY2tcbiAqIEBkZXNjcmlwdGlvblxuICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IHR5cGUgZGVjb3JhdGVkIHdpdGggaGVscGVyIG1ldGhvZHMgdXNlZnVsIGZvciB0ZXN0aW5nLiBUaGVzZVxuICogbWV0aG9kcyBhcmUgYXV0b21hdGljYWxseSBhdmFpbGFibGUgb24gYW55IHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIFNjb3BlfSBpbnN0YW5jZSB3aGVuXG4gKiBgbmdNb2NrYCBtb2R1bGUgaXMgbG9hZGVkLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIGFsbCB0aGUgcmVndWxhciBgU2NvcGVgIG1ldGhvZHMsIHRoZSBmb2xsb3dpbmcgaGVscGVyIG1ldGhvZHMgYXJlIGF2YWlsYWJsZTpcbiAqL1xuYW5ndWxhci5tb2NrLiRSb290U2NvcGVEZWNvcmF0b3IgPSBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuXG4gIHZhciAkcm9vdFNjb3BlUHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKCRkZWxlZ2F0ZSk7XG5cbiAgJHJvb3RTY29wZVByb3RvdHlwZS4kY291bnRDaGlsZFNjb3BlcyA9IGNvdW50Q2hpbGRTY29wZXM7XG4gICRyb290U2NvcGVQcm90b3R5cGUuJGNvdW50V2F0Y2hlcnMgPSBjb3VudFdhdGNoZXJzO1xuXG4gIHJldHVybiAkZGVsZWdhdGU7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkY291bnRDaGlsZFNjb3Blc1xuICAgKiBAbW9kdWxlIG5nTW9ja1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ291bnRzIGFsbCB0aGUgZGlyZWN0IGFuZCBpbmRpcmVjdCBjaGlsZCBzY29wZXMgb2YgdGhlIGN1cnJlbnQgc2NvcGUuXG4gICAqXG4gICAqIFRoZSBjdXJyZW50IHNjb3BlIGlzIGV4Y2x1ZGVkIGZyb20gdGhlIGNvdW50LiBUaGUgY291bnQgaW5jbHVkZXMgYWxsIGlzb2xhdGUgY2hpbGQgc2NvcGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUb3RhbCBudW1iZXIgb2YgY2hpbGQgc2NvcGVzLlxuICAgKi9cbiAgZnVuY3Rpb24gY291bnRDaGlsZFNjb3BlcygpIHtcbiAgICAvLyBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlXG4gICAgdmFyIGNvdW50ID0gMDsgLy8gZXhjbHVkZSB0aGUgY3VycmVudCBzY29wZVxuICAgIHZhciBwZW5kaW5nQ2hpbGRIZWFkcyA9IFt0aGlzLiQkY2hpbGRIZWFkXTtcbiAgICB2YXIgY3VycmVudFNjb3BlO1xuXG4gICAgd2hpbGUgKHBlbmRpbmdDaGlsZEhlYWRzLmxlbmd0aCkge1xuICAgICAgY3VycmVudFNjb3BlID0gcGVuZGluZ0NoaWxkSGVhZHMuc2hpZnQoKTtcblxuICAgICAgd2hpbGUgKGN1cnJlbnRTY29wZSkge1xuICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICBwZW5kaW5nQ2hpbGRIZWFkcy5wdXNoKGN1cnJlbnRTY29wZS4kJGNoaWxkSGVhZCk7XG4gICAgICAgIGN1cnJlbnRTY29wZSA9IGN1cnJlbnRTY29wZS4kJG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb3VudDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkY291bnRXYXRjaGVyc1xuICAgKiBAbW9kdWxlIG5nTW9ja1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ291bnRzIGFsbCB0aGUgd2F0Y2hlcnMgb2YgZGlyZWN0IGFuZCBpbmRpcmVjdCBjaGlsZCBzY29wZXMgb2YgdGhlIGN1cnJlbnQgc2NvcGUuXG4gICAqXG4gICAqIFRoZSB3YXRjaGVycyBvZiB0aGUgY3VycmVudCBzY29wZSBhcmUgaW5jbHVkZWQgaW4gdGhlIGNvdW50IGFuZCBzbyBhcmUgYWxsIHRoZSB3YXRjaGVycyBvZlxuICAgKiBpc29sYXRlIGNoaWxkIHNjb3Blcy5cbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn0gVG90YWwgbnVtYmVyIG9mIHdhdGNoZXJzLlxuICAgKi9cbiAgZnVuY3Rpb24gY291bnRXYXRjaGVycygpIHtcbiAgICAvLyBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlXG4gICAgdmFyIGNvdW50ID0gdGhpcy4kJHdhdGNoZXJzID8gdGhpcy4kJHdhdGNoZXJzLmxlbmd0aCA6IDA7IC8vIGluY2x1ZGUgdGhlIGN1cnJlbnQgc2NvcGVcbiAgICB2YXIgcGVuZGluZ0NoaWxkSGVhZHMgPSBbdGhpcy4kJGNoaWxkSGVhZF07XG4gICAgdmFyIGN1cnJlbnRTY29wZTtcblxuICAgIHdoaWxlIChwZW5kaW5nQ2hpbGRIZWFkcy5sZW5ndGgpIHtcbiAgICAgIGN1cnJlbnRTY29wZSA9IHBlbmRpbmdDaGlsZEhlYWRzLnNoaWZ0KCk7XG5cbiAgICAgIHdoaWxlIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgY291bnQgKz0gY3VycmVudFNjb3BlLiQkd2F0Y2hlcnMgPyBjdXJyZW50U2NvcGUuJCR3YXRjaGVycy5sZW5ndGggOiAwO1xuICAgICAgICBwZW5kaW5nQ2hpbGRIZWFkcy5wdXNoKGN1cnJlbnRTY29wZS4kJGNoaWxkSGVhZCk7XG4gICAgICAgIGN1cnJlbnRTY29wZSA9IGN1cnJlbnRTY29wZS4kJG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb3VudDtcbiAgfVxufV07XG5cblxuaWYgKHdpbmRvdy5qYXNtaW5lIHx8IHdpbmRvdy5tb2NoYSkge1xuXG4gIHZhciBjdXJyZW50U3BlYyA9IG51bGwsXG4gICAgICBhbm5vdGF0ZWRGdW5jdGlvbnMgPSBbXSxcbiAgICAgIGlzU3BlY1J1bm5pbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhY3VycmVudFNwZWM7XG4gICAgICB9O1xuXG4gIGFuZ3VsYXIubW9jay4kJGFubm90YXRlID0gYW5ndWxhci5pbmplY3Rvci4kJGFubm90YXRlO1xuICBhbmd1bGFyLmluamVjdG9yLiQkYW5ub3RhdGUgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgJiYgIWZuLiRpbmplY3QpIHtcbiAgICAgIGFubm90YXRlZEZ1bmN0aW9ucy5wdXNoKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuZ3VsYXIubW9jay4kJGFubm90YXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cblxuICAod2luZG93LmJlZm9yZUVhY2ggfHwgd2luZG93LnNldHVwKShmdW5jdGlvbigpIHtcbiAgICBhbm5vdGF0ZWRGdW5jdGlvbnMgPSBbXTtcbiAgICBjdXJyZW50U3BlYyA9IHRoaXM7XG4gIH0pO1xuXG4gICh3aW5kb3cuYWZ0ZXJFYWNoIHx8IHdpbmRvdy50ZWFyZG93bikoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluamVjdG9yID0gY3VycmVudFNwZWMuJGluamVjdG9yO1xuXG4gICAgYW5ub3RhdGVkRnVuY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oZm4pIHtcbiAgICAgIGRlbGV0ZSBmbi4kaW5qZWN0O1xuICAgIH0pO1xuXG4gICAgYW5ndWxhci5mb3JFYWNoKGN1cnJlbnRTcGVjLiRtb2R1bGVzLCBmdW5jdGlvbihtb2R1bGUpIHtcbiAgICAgIGlmIChtb2R1bGUgJiYgbW9kdWxlLiQkaGFzaEtleSkge1xuICAgICAgICBtb2R1bGUuJCRoYXNoS2V5ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY3VycmVudFNwZWMuJGluamVjdG9yID0gbnVsbDtcbiAgICBjdXJyZW50U3BlYy4kbW9kdWxlcyA9IG51bGw7XG4gICAgY3VycmVudFNwZWMuJHByb3ZpZGVySW5qZWN0b3IgPSBudWxsO1xuICAgIGN1cnJlbnRTcGVjID0gbnVsbDtcblxuICAgIGlmIChpbmplY3Rvcikge1xuICAgICAgaW5qZWN0b3IuZ2V0KCckcm9vdEVsZW1lbnQnKS5vZmYoKTtcbiAgICAgIGluamVjdG9yLmdldCgnJHJvb3RTY29wZScpLiRkZXN0cm95KCk7XG4gICAgfVxuXG4gICAgLy8gY2xlYW4gdXAganF1ZXJ5J3MgZnJhZ21lbnQgY2FjaGVcbiAgICBhbmd1bGFyLmZvckVhY2goYW5ndWxhci5lbGVtZW50LmZyYWdtZW50cywgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgIGRlbGV0ZSBhbmd1bGFyLmVsZW1lbnQuZnJhZ21lbnRzW2tleV07XG4gICAgfSk7XG5cbiAgICBNb2NrWGhyLiQkbGFzdEluc3RhbmNlID0gbnVsbDtcblxuICAgIGFuZ3VsYXIuZm9yRWFjaChhbmd1bGFyLmNhbGxiYWNrcywgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgIGRlbGV0ZSBhbmd1bGFyLmNhbGxiYWNrc1trZXldO1xuICAgIH0pO1xuICAgIGFuZ3VsYXIuY2FsbGJhY2tzLmNvdW50ZXIgPSAwO1xuICB9KTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIGFuZ3VsYXIubW9jay5tb2R1bGVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqICpOT1RFKjogVGhpcyBmdW5jdGlvbiBpcyBhbHNvIHB1Ymxpc2hlZCBvbiB3aW5kb3cgZm9yIGVhc3kgYWNjZXNzLjxicj5cbiAgICogKk5PVEUqOiBUaGlzIGZ1bmN0aW9uIGlzIGRlY2xhcmVkIE9OTFkgV0hFTiBydW5uaW5nIHRlc3RzIHdpdGggamFzbWluZSBvciBtb2NoYVxuICAgKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHJlZ2lzdGVycyBhIG1vZHVsZSBjb25maWd1cmF0aW9uIGNvZGUuIEl0IGNvbGxlY3RzIHRoZSBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uXG4gICAqIHdoaWNoIHdpbGwgYmUgdXNlZCB3aGVuIHRoZSBpbmplY3RvciBpcyBjcmVhdGVkIGJ5IHtAbGluayBhbmd1bGFyLm1vY2suaW5qZWN0IGluamVjdH0uXG4gICAqXG4gICAqIFNlZSB7QGxpbmsgYW5ndWxhci5tb2NrLmluamVjdCBpbmplY3R9IGZvciB1c2FnZSBleGFtcGxlXG4gICAqXG4gICAqIEBwYXJhbSB7Li4uKHN0cmluZ3xGdW5jdGlvbnxPYmplY3QpfSBmbnMgYW55IG51bWJlciBvZiBtb2R1bGVzIHdoaWNoIGFyZSByZXByZXNlbnRlZCBhcyBzdHJpbmdcbiAgICogICAgICAgIGFsaWFzZXMgb3IgYXMgYW5vbnltb3VzIG1vZHVsZSBpbml0aWFsaXphdGlvbiBmdW5jdGlvbnMuIFRoZSBtb2R1bGVzIGFyZSB1c2VkIHRvXG4gICAqICAgICAgICBjb25maWd1cmUgdGhlIGluamVjdG9yLiBUaGUgJ25nJyBhbmQgJ25nTW9jaycgbW9kdWxlcyBhcmUgYXV0b21hdGljYWxseSBsb2FkZWQuIElmIGFuXG4gICAqICAgICAgICBvYmplY3QgbGl0ZXJhbCBpcyBwYXNzZWQgZWFjaCBrZXktdmFsdWUgcGFpciB3aWxsIGJlIHJlZ2lzdGVyZWQgb24gdGhlIG1vZHVsZSB2aWFcbiAgICogICAgICAgIHtAbGluayBhdXRvLiRwcm92aWRlICRwcm92aWRlfS52YWx1ZSwgdGhlIGtleSBiZWluZyB0aGUgc3RyaW5nIG5hbWUgKG9yIHRva2VuKSB0byBhc3NvY2lhdGVcbiAgICogICAgICAgIHdpdGggdGhlIHZhbHVlIG9uIHRoZSBpbmplY3Rvci5cbiAgICovXG4gIHdpbmRvdy5tb2R1bGUgPSBhbmd1bGFyLm1vY2subW9kdWxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1vZHVsZUZucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgcmV0dXJuIGlzU3BlY1J1bm5pbmcoKSA/IHdvcmtGbigpIDogd29ya0ZuO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGZ1bmN0aW9uIHdvcmtGbigpIHtcbiAgICAgIGlmIChjdXJyZW50U3BlYy4kaW5qZWN0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmplY3RvciBhbHJlYWR5IGNyZWF0ZWQsIGNhbiBub3QgcmVnaXN0ZXIgYSBtb2R1bGUhJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZm4sIG1vZHVsZXMgPSBjdXJyZW50U3BlYy4kbW9kdWxlcyB8fCAoY3VycmVudFNwZWMuJG1vZHVsZXMgPSBbXSk7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChtb2R1bGVGbnMsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KG1vZHVsZSkgJiYgIWFuZ3VsYXIuaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgICAgICBmbiA9IGZ1bmN0aW9uKCRwcm92aWRlKSB7XG4gICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChtb2R1bGUsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAkcHJvdmlkZS52YWx1ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmbiA9IG1vZHVsZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRTcGVjLiRwcm92aWRlckluamVjdG9yKSB7XG4gICAgICAgICAgICBjdXJyZW50U3BlYy4kcHJvdmlkZXJJbmplY3Rvci5pbnZva2UoZm4pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb2R1bGVzLnB1c2goZm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgYW5ndWxhci5tb2NrLmluamVjdFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogKk5PVEUqOiBUaGlzIGZ1bmN0aW9uIGlzIGFsc28gcHVibGlzaGVkIG9uIHdpbmRvdyBmb3IgZWFzeSBhY2Nlc3MuPGJyPlxuICAgKiAqTk9URSo6IFRoaXMgZnVuY3Rpb24gaXMgZGVjbGFyZWQgT05MWSBXSEVOIHJ1bm5pbmcgdGVzdHMgd2l0aCBqYXNtaW5lIG9yIG1vY2hhXG4gICAqXG4gICAqIFRoZSBpbmplY3QgZnVuY3Rpb24gd3JhcHMgYSBmdW5jdGlvbiBpbnRvIGFuIGluamVjdGFibGUgZnVuY3Rpb24uIFRoZSBpbmplY3QoKSBjcmVhdGVzIG5ld1xuICAgKiBpbnN0YW5jZSBvZiB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSBwZXIgdGVzdCwgd2hpY2ggaXMgdGhlbiB1c2VkIGZvclxuICAgKiByZXNvbHZpbmcgcmVmZXJlbmNlcy5cbiAgICpcbiAgICpcbiAgICogIyMgUmVzb2x2aW5nIFJlZmVyZW5jZXMgKFVuZGVyc2NvcmUgV3JhcHBpbmcpXG4gICAqIE9mdGVuLCB3ZSB3b3VsZCBsaWtlIHRvIGluamVjdCBhIHJlZmVyZW5jZSBvbmNlLCBpbiBhIGBiZWZvcmVFYWNoKClgIGJsb2NrIGFuZCByZXVzZSB0aGlzXG4gICAqIGluIG11bHRpcGxlIGBpdCgpYCBjbGF1c2VzLiBUbyBiZSBhYmxlIHRvIGRvIHRoaXMgd2UgbXVzdCBhc3NpZ24gdGhlIHJlZmVyZW5jZSB0byBhIHZhcmlhYmxlXG4gICAqIHRoYXQgaXMgZGVjbGFyZWQgaW4gdGhlIHNjb3BlIG9mIHRoZSBgZGVzY3JpYmUoKWAgYmxvY2suIFNpbmNlIHdlIHdvdWxkLCBtb3N0IGxpa2VseSwgd2FudFxuICAgKiB0aGUgdmFyaWFibGUgdG8gaGF2ZSB0aGUgc2FtZSBuYW1lIG9mIHRoZSByZWZlcmVuY2Ugd2UgaGF2ZSBhIHByb2JsZW0sIHNpbmNlIHRoZSBwYXJhbWV0ZXJcbiAgICogdG8gdGhlIGBpbmplY3QoKWAgZnVuY3Rpb24gd291bGQgaGlkZSB0aGUgb3V0ZXIgdmFyaWFibGUuXG4gICAqXG4gICAqIFRvIGhlbHAgd2l0aCB0aGlzLCB0aGUgaW5qZWN0ZWQgcGFyYW1ldGVycyBjYW4sIG9wdGlvbmFsbHksIGJlIGVuY2xvc2VkIHdpdGggdW5kZXJzY29yZXMuXG4gICAqIFRoZXNlIGFyZSBpZ25vcmVkIGJ5IHRoZSBpbmplY3RvciB3aGVuIHRoZSByZWZlcmVuY2UgbmFtZSBpcyByZXNvbHZlZC5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIHRoZSBwYXJhbWV0ZXIgYF9teVNlcnZpY2VfYCB3b3VsZCBiZSByZXNvbHZlZCBhcyB0aGUgcmVmZXJlbmNlIGBteVNlcnZpY2VgLlxuICAgKiBTaW5jZSBpdCBpcyBhdmFpbGFibGUgaW4gdGhlIGZ1bmN0aW9uIGJvZHkgYXMgX215U2VydmljZV8sIHdlIGNhbiB0aGVuIGFzc2lnbiBpdCB0byBhIHZhcmlhYmxlXG4gICAqIGRlZmluZWQgaW4gYW4gb3V0ZXIgc2NvcGUuXG4gICAqXG4gICAqIGBgYFxuICAgKiAvLyBEZWZpbmVkIG91dCByZWZlcmVuY2UgdmFyaWFibGUgb3V0c2lkZVxuICAgKiB2YXIgbXlTZXJ2aWNlO1xuICAgKlxuICAgKiAvLyBXcmFwIHRoZSBwYXJhbWV0ZXIgaW4gdW5kZXJzY29yZXNcbiAgICogYmVmb3JlRWFjaCggaW5qZWN0KCBmdW5jdGlvbihfbXlTZXJ2aWNlXyl7XG4gICAqICAgbXlTZXJ2aWNlID0gX215U2VydmljZV87XG4gICAqIH0pKTtcbiAgICpcbiAgICogLy8gVXNlIG15U2VydmljZSBpbiBhIHNlcmllcyBvZiB0ZXN0cy5cbiAgICogaXQoJ21ha2VzIHVzZSBvZiBteVNlcnZpY2UnLCBmdW5jdGlvbigpIHtcbiAgICogICBteVNlcnZpY2UuZG9TdHVmZigpO1xuICAgKiB9KTtcbiAgICpcbiAgICogYGBgXG4gICAqXG4gICAqIFNlZSBhbHNvIHtAbGluayBhbmd1bGFyLm1vY2subW9kdWxlIGFuZ3VsYXIubW9jay5tb2R1bGV9XG4gICAqXG4gICAqICMjIEV4YW1wbGVcbiAgICogRXhhbXBsZSBvZiB3aGF0IGEgdHlwaWNhbCBqYXNtaW5lIHRlc3RzIGxvb2tzIGxpa2Ugd2l0aCB0aGUgaW5qZWN0IG1ldGhvZC5cbiAgICogYGBganNcbiAgICpcbiAgICogICBhbmd1bGFyLm1vZHVsZSgnbXlBcHBsaWNhdGlvbk1vZHVsZScsIFtdKVxuICAgKiAgICAgICAudmFsdWUoJ21vZGUnLCAnYXBwJylcbiAgICogICAgICAgLnZhbHVlKCd2ZXJzaW9uJywgJ3YxLjAuMScpO1xuICAgKlxuICAgKlxuICAgKiAgIGRlc2NyaWJlKCdNeUFwcCcsIGZ1bmN0aW9uKCkge1xuICAgKlxuICAgKiAgICAgLy8gWW91IG5lZWQgdG8gbG9hZCBtb2R1bGVzIHRoYXQgeW91IHdhbnQgdG8gdGVzdCxcbiAgICogICAgIC8vIGl0IGxvYWRzIG9ubHkgdGhlIFwibmdcIiBtb2R1bGUgYnkgZGVmYXVsdC5cbiAgICogICAgIGJlZm9yZUVhY2gobW9kdWxlKCdteUFwcGxpY2F0aW9uTW9kdWxlJykpO1xuICAgKlxuICAgKlxuICAgKiAgICAgLy8gaW5qZWN0KCkgaXMgdXNlZCB0byBpbmplY3QgYXJndW1lbnRzIG9mIGFsbCBnaXZlbiBmdW5jdGlvbnNcbiAgICogICAgIGl0KCdzaG91bGQgcHJvdmlkZSBhIHZlcnNpb24nLCBpbmplY3QoZnVuY3Rpb24obW9kZSwgdmVyc2lvbikge1xuICAgKiAgICAgICBleHBlY3QodmVyc2lvbikudG9FcXVhbCgndjEuMC4xJyk7XG4gICAqICAgICAgIGV4cGVjdChtb2RlKS50b0VxdWFsKCdhcHAnKTtcbiAgICogICAgIH0pKTtcbiAgICpcbiAgICpcbiAgICogICAgIC8vIFRoZSBpbmplY3QgYW5kIG1vZHVsZSBtZXRob2QgY2FuIGFsc28gYmUgdXNlZCBpbnNpZGUgb2YgdGhlIGl0IG9yIGJlZm9yZUVhY2hcbiAgICogICAgIGl0KCdzaG91bGQgb3ZlcnJpZGUgYSB2ZXJzaW9uIGFuZCB0ZXN0IHRoZSBuZXcgdmVyc2lvbiBpcyBpbmplY3RlZCcsIGZ1bmN0aW9uKCkge1xuICAgKiAgICAgICAvLyBtb2R1bGUoKSB0YWtlcyBmdW5jdGlvbnMgb3Igc3RyaW5ncyAobW9kdWxlIGFsaWFzZXMpXG4gICAqICAgICAgIG1vZHVsZShmdW5jdGlvbigkcHJvdmlkZSkge1xuICAgKiAgICAgICAgICRwcm92aWRlLnZhbHVlKCd2ZXJzaW9uJywgJ292ZXJyaWRkZW4nKTsgLy8gb3ZlcnJpZGUgdmVyc2lvbiBoZXJlXG4gICAqICAgICAgIH0pO1xuICAgKlxuICAgKiAgICAgICBpbmplY3QoZnVuY3Rpb24odmVyc2lvbikge1xuICAgKiAgICAgICAgIGV4cGVjdCh2ZXJzaW9uKS50b0VxdWFsKCdvdmVycmlkZGVuJyk7XG4gICAqICAgICAgIH0pO1xuICAgKiAgICAgfSk7XG4gICAqICAgfSk7XG4gICAqXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBmbnMgYW55IG51bWJlciBvZiBmdW5jdGlvbnMgd2hpY2ggd2lsbCBiZSBpbmplY3RlZCB1c2luZyB0aGUgaW5qZWN0b3IuXG4gICAqL1xuXG5cblxuICB2YXIgRXJyb3JBZGRpbmdEZWNsYXJhdGlvbkxvY2F0aW9uU3RhY2sgPSBmdW5jdGlvbihlLCBlcnJvckZvclN0YWNrKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gZS5tZXNzYWdlO1xuICAgIHRoaXMubmFtZSA9IGUubmFtZTtcbiAgICBpZiAoZS5saW5lKSB0aGlzLmxpbmUgPSBlLmxpbmU7XG4gICAgaWYgKGUuc291cmNlSWQpIHRoaXMuc291cmNlSWQgPSBlLnNvdXJjZUlkO1xuICAgIGlmIChlLnN0YWNrICYmIGVycm9yRm9yU3RhY2spXG4gICAgICB0aGlzLnN0YWNrID0gZS5zdGFjayArICdcXG4nICsgZXJyb3JGb3JTdGFjay5zdGFjaztcbiAgICBpZiAoZS5zdGFja0FycmF5KSB0aGlzLnN0YWNrQXJyYXkgPSBlLnN0YWNrQXJyYXk7XG4gIH07XG4gIEVycm9yQWRkaW5nRGVjbGFyYXRpb25Mb2NhdGlvblN0YWNrLnByb3RvdHlwZS50b1N0cmluZyA9IEVycm9yLnByb3RvdHlwZS50b1N0cmluZztcblxuICB3aW5kb3cuaW5qZWN0ID0gYW5ndWxhci5tb2NrLmluamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBibG9ja0ZucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgdmFyIGVycm9yRm9yU3RhY2sgPSBuZXcgRXJyb3IoJ0RlY2xhcmF0aW9uIExvY2F0aW9uJyk7XG4gICAgcmV0dXJuIGlzU3BlY1J1bm5pbmcoKSA/IHdvcmtGbi5jYWxsKGN1cnJlbnRTcGVjKSA6IHdvcmtGbjtcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBmdW5jdGlvbiB3b3JrRm4oKSB7XG4gICAgICB2YXIgbW9kdWxlcyA9IGN1cnJlbnRTcGVjLiRtb2R1bGVzIHx8IFtdO1xuICAgICAgdmFyIHN0cmljdERpID0gISFjdXJyZW50U3BlYy4kaW5qZWN0b3JTdHJpY3Q7XG4gICAgICBtb2R1bGVzLnVuc2hpZnQoZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgICAgIGN1cnJlbnRTcGVjLiRwcm92aWRlckluamVjdG9yID0gJGluamVjdG9yO1xuICAgICAgfSk7XG4gICAgICBtb2R1bGVzLnVuc2hpZnQoJ25nTW9jaycpO1xuICAgICAgbW9kdWxlcy51bnNoaWZ0KCduZycpO1xuICAgICAgdmFyIGluamVjdG9yID0gY3VycmVudFNwZWMuJGluamVjdG9yO1xuICAgICAgaWYgKCFpbmplY3Rvcikge1xuICAgICAgICBpZiAoc3RyaWN0RGkpIHtcbiAgICAgICAgICAvLyBJZiBzdHJpY3REaSBpcyBlbmFibGVkLCBhbm5vdGF0ZSB0aGUgcHJvdmlkZXJJbmplY3RvciBibG9ja3NcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobW9kdWxlcywgZnVuY3Rpb24obW9kdWxlRm4pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kdWxlRm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICBhbmd1bGFyLmluamVjdG9yLiQkYW5ub3RhdGUobW9kdWxlRm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGluamVjdG9yID0gY3VycmVudFNwZWMuJGluamVjdG9yID0gYW5ndWxhci5pbmplY3Rvcihtb2R1bGVzLCBzdHJpY3REaSk7XG4gICAgICAgIGN1cnJlbnRTcGVjLiRpbmplY3RvclN0cmljdCA9IHN0cmljdERpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYmxvY2tGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBpZiAoY3VycmVudFNwZWMuJGluamVjdG9yU3RyaWN0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGluamVjdG9yIGlzIHN0cmljdCAvIHN0cmljdERpLCBhbmQgdGhlIHNwZWMgd2FudHMgdG8gaW5qZWN0IHVzaW5nIGF1dG9tYXRpY1xuICAgICAgICAgIC8vIGFubm90YXRpb24sIHRoZW4gYW5ub3RhdGUgdGhlIGZ1bmN0aW9uIGhlcmUuXG4gICAgICAgICAgaW5qZWN0b3IuYW5ub3RhdGUoYmxvY2tGbnNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLyoganNoaW50IC1XMDQwICovLyogSmFzbWluZSBleHBsaWNpdGx5IHByb3ZpZGVzIGEgYHRoaXNgIG9iamVjdCB3aGVuIGNhbGxpbmcgZnVuY3Rpb25zICovXG4gICAgICAgICAgaW5qZWN0b3IuaW52b2tlKGJsb2NrRm5zW2ldIHx8IGFuZ3VsYXIubm9vcCwgdGhpcyk7XG4gICAgICAgICAgLyoganNoaW50ICtXMDQwICovXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAoZS5zdGFjayAmJiBlcnJvckZvclN0YWNrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JBZGRpbmdEZWNsYXJhdGlvbkxvY2F0aW9uU3RhY2soZSwgZXJyb3JGb3JTdGFjayk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgZXJyb3JGb3JTdGFjayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cblxuICBhbmd1bGFyLm1vY2suaW5qZWN0LnN0cmljdERpID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPyAhIXZhbHVlIDogdHJ1ZTtcbiAgICByZXR1cm4gaXNTcGVjUnVubmluZygpID8gd29ya0ZuKCkgOiB3b3JrRm47XG5cbiAgICBmdW5jdGlvbiB3b3JrRm4oKSB7XG4gICAgICBpZiAodmFsdWUgIT09IGN1cnJlbnRTcGVjLiRpbmplY3RvclN0cmljdCkge1xuICAgICAgICBpZiAoY3VycmVudFNwZWMuJGluamVjdG9yKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmplY3RvciBhbHJlYWR5IGNyZWF0ZWQsIGNhbiBub3QgbW9kaWZ5IHN0cmljdCBhbm5vdGF0aW9ucycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRTcGVjLiRpbmplY3RvclN0cmljdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5cbn0pKHdpbmRvdywgd2luZG93LmFuZ3VsYXIpO1xuIiwiLypcbiBBbmd1bGFySlMgdjEuNS4wXG4gKGMpIDIwMTAtMjAxNiBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiBMaWNlbnNlOiBNSVRcbiovXG4oZnVuY3Rpb24ocixkLEMpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiB4KHMsaCxnKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIix0ZXJtaW5hbDohMCxwcmlvcml0eTo0MDAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixsaW5rOmZ1bmN0aW9uKGEsYyxiLGYseSl7ZnVuY3Rpb24gaygpe24mJihnLmNhbmNlbChuKSxuPW51bGwpO2wmJihsLiRkZXN0cm95KCksbD1udWxsKTttJiYobj1nLmxlYXZlKG0pLG4udGhlbihmdW5jdGlvbigpe249bnVsbH0pLG09bnVsbCl9ZnVuY3Rpb24geigpe3ZhciBiPXMuY3VycmVudCYmcy5jdXJyZW50LmxvY2FscztpZihkLmlzRGVmaW5lZChiJiZiLiR0ZW1wbGF0ZSkpe3ZhciBiPWEuJG5ldygpLGY9cy5jdXJyZW50O209eShiLGZ1bmN0aW9uKGIpe2cuZW50ZXIoYixudWxsLG18fGMpLnRoZW4oZnVuY3Rpb24oKXshZC5pc0RlZmluZWQodSl8fHUmJiFhLiRldmFsKHUpfHxoKCl9KTtrKCl9KTtsPWYuc2NvcGU9YjtsLiRlbWl0KFwiJHZpZXdDb250ZW50TG9hZGVkXCIpO1xubC4kZXZhbCh2KX1lbHNlIGsoKX12YXIgbCxtLG4sdT1iLmF1dG9zY3JvbGwsdj1iLm9ubG9hZHx8XCJcIjthLiRvbihcIiRyb3V0ZUNoYW5nZVN1Y2Nlc3NcIix6KTt6KCl9fX1mdW5jdGlvbiBBKGQsaCxnKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTotNDAwLGxpbms6ZnVuY3Rpb24oYSxjKXt2YXIgYj1nLmN1cnJlbnQsZj1iLmxvY2FscztjLmh0bWwoZi4kdGVtcGxhdGUpO3ZhciB5PWQoYy5jb250ZW50cygpKTtpZihiLmNvbnRyb2xsZXIpe2YuJHNjb3BlPWE7dmFyIGs9aChiLmNvbnRyb2xsZXIsZik7Yi5jb250cm9sbGVyQXMmJihhW2IuY29udHJvbGxlckFzXT1rKTtjLmRhdGEoXCIkbmdDb250cm9sbGVyQ29udHJvbGxlclwiLGspO2MuY2hpbGRyZW4oKS5kYXRhKFwiJG5nQ29udHJvbGxlckNvbnRyb2xsZXJcIixrKX1hW2IucmVzb2x2ZUFzfHxcIiRyZXNvbHZlXCJdPWY7eShhKX19fXI9ZC5tb2R1bGUoXCJuZ1JvdXRlXCIsW1wibmdcIl0pLnByb3ZpZGVyKFwiJHJvdXRlXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBzKGEsXG5jKXtyZXR1cm4gZC5leHRlbmQoT2JqZWN0LmNyZWF0ZShhKSxjKX1mdW5jdGlvbiBoKGEsZCl7dmFyIGI9ZC5jYXNlSW5zZW5zaXRpdmVNYXRjaCxmPXtvcmlnaW5hbFBhdGg6YSxyZWdleHA6YX0sZz1mLmtleXM9W107YT1hLnJlcGxhY2UoLyhbKCkuXSkvZyxcIlxcXFwkMVwiKS5yZXBsYWNlKC8oXFwvKT86KFxcdyspKFtcXD9cXCpdKT8vZyxmdW5jdGlvbihhLGQsYixjKXthPVwiP1wiPT09Yz9jOm51bGw7Yz1cIipcIj09PWM/YzpudWxsO2cucHVzaCh7bmFtZTpiLG9wdGlvbmFsOiEhYX0pO2Q9ZHx8XCJcIjtyZXR1cm5cIlwiKyhhP1wiXCI6ZCkrXCIoPzpcIisoYT9kOlwiXCIpKyhjJiZcIiguKz8pXCJ8fFwiKFteL10rKVwiKSsoYXx8XCJcIikrXCIpXCIrKGF8fFwiXCIpfSkucmVwbGFjZSgvKFtcXC8kXFwqXSkvZyxcIlxcXFwkMVwiKTtmLnJlZ2V4cD1uZXcgUmVnRXhwKFwiXlwiK2ErXCIkXCIsYj9cImlcIjpcIlwiKTtyZXR1cm4gZn12YXIgZz17fTt0aGlzLndoZW49ZnVuY3Rpb24oYSxjKXt2YXIgYj1kLmNvcHkoYyk7ZC5pc1VuZGVmaW5lZChiLnJlbG9hZE9uU2VhcmNoKSYmXG4oYi5yZWxvYWRPblNlYXJjaD0hMCk7ZC5pc1VuZGVmaW5lZChiLmNhc2VJbnNlbnNpdGl2ZU1hdGNoKSYmKGIuY2FzZUluc2Vuc2l0aXZlTWF0Y2g9dGhpcy5jYXNlSW5zZW5zaXRpdmVNYXRjaCk7Z1thXT1kLmV4dGVuZChiLGEmJmgoYSxiKSk7aWYoYSl7dmFyIGY9XCIvXCI9PWFbYS5sZW5ndGgtMV0/YS5zdWJzdHIoMCxhLmxlbmd0aC0xKTphK1wiL1wiO2dbZl09ZC5leHRlbmQoe3JlZGlyZWN0VG86YX0saChmLGIpKX1yZXR1cm4gdGhpc307dGhpcy5jYXNlSW5zZW5zaXRpdmVNYXRjaD0hMTt0aGlzLm90aGVyd2lzZT1mdW5jdGlvbihhKXtcInN0cmluZ1wiPT09dHlwZW9mIGEmJihhPXtyZWRpcmVjdFRvOmF9KTt0aGlzLndoZW4obnVsbCxhKTtyZXR1cm4gdGhpc307dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRsb2NhdGlvblwiLFwiJHJvdXRlUGFyYW1zXCIsXCIkcVwiLFwiJGluamVjdG9yXCIsXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkc2NlXCIsZnVuY3Rpb24oYSxjLGIsZixoLGsscil7ZnVuY3Rpb24gbChiKXt2YXIgZT1cbnQuY3VycmVudDsoeD0ocD1uKCkpJiZlJiZwLiQkcm91dGU9PT1lLiQkcm91dGUmJmQuZXF1YWxzKHAucGF0aFBhcmFtcyxlLnBhdGhQYXJhbXMpJiYhcC5yZWxvYWRPblNlYXJjaCYmIXYpfHwhZSYmIXB8fGEuJGJyb2FkY2FzdChcIiRyb3V0ZUNoYW5nZVN0YXJ0XCIscCxlKS5kZWZhdWx0UHJldmVudGVkJiZiJiZiLnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gbSgpe3ZhciB3PXQuY3VycmVudCxlPXA7aWYoeCl3LnBhcmFtcz1lLnBhcmFtcyxkLmNvcHkody5wYXJhbXMsYiksYS4kYnJvYWRjYXN0KFwiJHJvdXRlVXBkYXRlXCIsdyk7ZWxzZSBpZihlfHx3KXY9ITEsKHQuY3VycmVudD1lKSYmZS5yZWRpcmVjdFRvJiYoZC5pc1N0cmluZyhlLnJlZGlyZWN0VG8pP2MucGF0aCh1KGUucmVkaXJlY3RUbyxlLnBhcmFtcykpLnNlYXJjaChlLnBhcmFtcykucmVwbGFjZSgpOmMudXJsKGUucmVkaXJlY3RUbyhlLnBhdGhQYXJhbXMsYy5wYXRoKCksYy5zZWFyY2goKSkpLnJlcGxhY2UoKSksZi53aGVuKGUpLnRoZW4oZnVuY3Rpb24oKXtpZihlKXt2YXIgYT1cbmQuZXh0ZW5kKHt9LGUucmVzb2x2ZSksYixjO2QuZm9yRWFjaChhLGZ1bmN0aW9uKGIsZSl7YVtlXT1kLmlzU3RyaW5nKGIpP2guZ2V0KGIpOmguaW52b2tlKGIsbnVsbCxudWxsLGUpfSk7ZC5pc0RlZmluZWQoYj1lLnRlbXBsYXRlKT9kLmlzRnVuY3Rpb24oYikmJihiPWIoZS5wYXJhbXMpKTpkLmlzRGVmaW5lZChjPWUudGVtcGxhdGVVcmwpJiYoZC5pc0Z1bmN0aW9uKGMpJiYoYz1jKGUucGFyYW1zKSksZC5pc0RlZmluZWQoYykmJihlLmxvYWRlZFRlbXBsYXRlVXJsPXIudmFsdWVPZihjKSxiPWsoYykpKTtkLmlzRGVmaW5lZChiKSYmKGEuJHRlbXBsYXRlPWIpO3JldHVybiBmLmFsbChhKX19KS50aGVuKGZ1bmN0aW9uKGMpe2U9PXQuY3VycmVudCYmKGUmJihlLmxvY2Fscz1jLGQuY29weShlLnBhcmFtcyxiKSksYS4kYnJvYWRjYXN0KFwiJHJvdXRlQ2hhbmdlU3VjY2Vzc1wiLGUsdykpfSxmdW5jdGlvbihiKXtlPT10LmN1cnJlbnQmJmEuJGJyb2FkY2FzdChcIiRyb3V0ZUNoYW5nZUVycm9yXCIsXG5lLHcsYil9KX1mdW5jdGlvbiBuKCl7dmFyIGEsYjtkLmZvckVhY2goZyxmdW5jdGlvbihmLGcpe3ZhciBxO2lmKHE9IWIpe3ZhciBoPWMucGF0aCgpO3E9Zi5rZXlzO3ZhciBsPXt9O2lmKGYucmVnZXhwKWlmKGg9Zi5yZWdleHAuZXhlYyhoKSl7Zm9yKHZhciBrPTEsbj1oLmxlbmd0aDtrPG47KytrKXt2YXIgbT1xW2stMV0scD1oW2tdO20mJnAmJihsW20ubmFtZV09cCl9cT1sfWVsc2UgcT1udWxsO2Vsc2UgcT1udWxsO3E9YT1xfXEmJihiPXMoZix7cGFyYW1zOmQuZXh0ZW5kKHt9LGMuc2VhcmNoKCksYSkscGF0aFBhcmFtczphfSksYi4kJHJvdXRlPWYpfSk7cmV0dXJuIGJ8fGdbbnVsbF0mJnMoZ1tudWxsXSx7cGFyYW1zOnt9LHBhdGhQYXJhbXM6e319KX1mdW5jdGlvbiB1KGEsYil7dmFyIGM9W107ZC5mb3JFYWNoKChhfHxcIlwiKS5zcGxpdChcIjpcIiksZnVuY3Rpb24oYSxkKXtpZigwPT09ZCljLnB1c2goYSk7ZWxzZXt2YXIgZj1hLm1hdGNoKC8oXFx3KykoPzpbPypdKT8oLiopLyksXG5nPWZbMV07Yy5wdXNoKGJbZ10pO2MucHVzaChmWzJdfHxcIlwiKTtkZWxldGUgYltnXX19KTtyZXR1cm4gYy5qb2luKFwiXCIpfXZhciB2PSExLHAseCx0PXtyb3V0ZXM6ZyxyZWxvYWQ6ZnVuY3Rpb24oKXt2PSEwO3ZhciBiPXtkZWZhdWx0UHJldmVudGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO3Y9ITF9fTthLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtsKGIpO2IuZGVmYXVsdFByZXZlbnRlZHx8bSgpfSl9LHVwZGF0ZVBhcmFtczpmdW5jdGlvbihhKXtpZih0aGlzLmN1cnJlbnQmJnRoaXMuY3VycmVudC4kJHJvdXRlKWE9ZC5leHRlbmQoe30sdGhpcy5jdXJyZW50LnBhcmFtcyxhKSxjLnBhdGgodSh0aGlzLmN1cnJlbnQuJCRyb3V0ZS5vcmlnaW5hbFBhdGgsYSkpLGMuc2VhcmNoKGEpO2Vsc2UgdGhyb3cgQihcIm5vcm91dFwiKTt9fTthLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsbCk7YS4kb24oXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsXG5tKTtyZXR1cm4gdH1dfSk7dmFyIEI9ZC4kJG1pbkVycihcIm5nUm91dGVcIik7ci5wcm92aWRlcihcIiRyb3V0ZVBhcmFtc1wiLGZ1bmN0aW9uKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJue319fSk7ci5kaXJlY3RpdmUoXCJuZ1ZpZXdcIix4KTtyLmRpcmVjdGl2ZShcIm5nVmlld1wiLEEpO3guJGluamVjdD1bXCIkcm91dGVcIixcIiRhbmNob3JTY3JvbGxcIixcIiRhbmltYXRlXCJdO0EuJGluamVjdD1bXCIkY29tcGlsZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRyb3V0ZVwiXX0pKHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLXJvdXRlLm1pbi5qcy5tYXBcbiIsIi8qXG4gQW5ndWxhckpTIHYxLjQuN1xuIChjKSAyMDEwLTIwMTUgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKG4saCxwKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gRShhKXt2YXIgZj1bXTtyKGYsaC5ub29wKS5jaGFycyhhKTtyZXR1cm4gZi5qb2luKFwiXCIpfWZ1bmN0aW9uIGcoYSxmKXt2YXIgZD17fSxjPWEuc3BsaXQoXCIsXCIpLGI7Zm9yKGI9MDtiPGMubGVuZ3RoO2IrKylkW2Y/aC5sb3dlcmNhc2UoY1tiXSk6Y1tiXV09ITA7cmV0dXJuIGR9ZnVuY3Rpb24gRihhLGYpe2Z1bmN0aW9uIGQoYSxiLGQsbCl7Yj1oLmxvd2VyY2FzZShiKTtpZihzW2JdKWZvcig7ZS5sYXN0KCkmJnRbZS5sYXN0KCldOyljKFwiXCIsZS5sYXN0KCkpO3VbYl0mJmUubGFzdCgpPT1iJiZjKFwiXCIsYik7KGw9dltiXXx8ISFsKXx8ZS5wdXNoKGIpO3ZhciBtPXt9O2QucmVwbGFjZShHLGZ1bmN0aW9uKGIsYSxmLGMsZCl7bVthXT1xKGZ8fGN8fGR8fFwiXCIpfSk7Zi5zdGFydCYmZi5zdGFydChiLG0sbCl9ZnVuY3Rpb24gYyhiLGEpe3ZhciBjPTAsZDtpZihhPWgubG93ZXJjYXNlKGEpKWZvcihjPWUubGVuZ3RoLVxuMTswPD1jJiZlW2NdIT1hO2MtLSk7aWYoMDw9Yyl7Zm9yKGQ9ZS5sZW5ndGgtMTtkPj1jO2QtLSlmLmVuZCYmZi5lbmQoZVtkXSk7ZS5sZW5ndGg9Y319XCJzdHJpbmdcIiE9PXR5cGVvZiBhJiYoYT1udWxsPT09YXx8XCJ1bmRlZmluZWRcIj09PXR5cGVvZiBhP1wiXCI6XCJcIithKTt2YXIgYixrLGU9W10sbT1hLGw7Zm9yKGUubGFzdD1mdW5jdGlvbigpe3JldHVybiBlW2UubGVuZ3RoLTFdfTthOyl7bD1cIlwiO2s9ITA7aWYoZS5sYXN0KCkmJndbZS5sYXN0KCldKWE9YS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoW1xcXFxXXFxcXHddKik8XFxcXHMqXFxcXC9cXFxccypcIitlLmxhc3QoKStcIltePl0qPlwiLFwiaVwiKSxmdW5jdGlvbihhLGIpe2I9Yi5yZXBsYWNlKEgsXCIkMVwiKS5yZXBsYWNlKEksXCIkMVwiKTtmLmNoYXJzJiZmLmNoYXJzKHEoYikpO3JldHVyblwiXCJ9KSxjKFwiXCIsZS5sYXN0KCkpO2Vsc2V7aWYoMD09PWEuaW5kZXhPZihcIlxceDNjIS0tXCIpKWI9YS5pbmRleE9mKFwiLS1cIiw0KSwwPD1iJiZhLmxhc3RJbmRleE9mKFwiLS1cXHgzZVwiLFxuYik9PT1iJiYoZi5jb21tZW50JiZmLmNvbW1lbnQoYS5zdWJzdHJpbmcoNCxiKSksYT1hLnN1YnN0cmluZyhiKzMpLGs9ITEpO2Vsc2UgaWYoeC50ZXN0KGEpKXtpZihiPWEubWF0Y2goeCkpYT1hLnJlcGxhY2UoYlswXSxcIlwiKSxrPSExfWVsc2UgaWYoSi50ZXN0KGEpKXtpZihiPWEubWF0Y2goeSkpYT1hLnN1YnN0cmluZyhiWzBdLmxlbmd0aCksYlswXS5yZXBsYWNlKHksYyksaz0hMX1lbHNlIEsudGVzdChhKSYmKChiPWEubWF0Y2goeikpPyhiWzRdJiYoYT1hLnN1YnN0cmluZyhiWzBdLmxlbmd0aCksYlswXS5yZXBsYWNlKHosZCkpLGs9ITEpOihsKz1cIjxcIixhPWEuc3Vic3RyaW5nKDEpKSk7ayYmKGI9YS5pbmRleE9mKFwiPFwiKSxsKz0wPmI/YTphLnN1YnN0cmluZygwLGIpLGE9MD5iP1wiXCI6YS5zdWJzdHJpbmcoYiksZi5jaGFycyYmZi5jaGFycyhxKGwpKSl9aWYoYT09bSl0aHJvdyBMKFwiYmFkcGFyc2VcIixhKTttPWF9YygpfWZ1bmN0aW9uIHEoYSl7aWYoIWEpcmV0dXJuXCJcIjtBLmlubmVySFRNTD1cbmEucmVwbGFjZSgvPC9nLFwiJmx0O1wiKTtyZXR1cm4gQS50ZXh0Q29udGVudH1mdW5jdGlvbiBCKGEpe3JldHVybiBhLnJlcGxhY2UoLyYvZyxcIiZhbXA7XCIpLnJlcGxhY2UoTSxmdW5jdGlvbihhKXt2YXIgZD1hLmNoYXJDb2RlQXQoMCk7YT1hLmNoYXJDb2RlQXQoMSk7cmV0dXJuXCImI1wiKygxMDI0KihkLTU1Mjk2KSsoYS01NjMyMCkrNjU1MzYpK1wiO1wifSkucmVwbGFjZShOLGZ1bmN0aW9uKGEpe3JldHVyblwiJiNcIithLmNoYXJDb2RlQXQoMCkrXCI7XCJ9KS5yZXBsYWNlKC88L2csXCImbHQ7XCIpLnJlcGxhY2UoLz4vZyxcIiZndDtcIil9ZnVuY3Rpb24gcihhLGYpe3ZhciBkPSExLGM9aC5iaW5kKGEsYS5wdXNoKTtyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oYSxrLGUpe2E9aC5sb3dlcmNhc2UoYSk7IWQmJndbYV0mJihkPWEpO2R8fCEwIT09Q1thXXx8KGMoXCI8XCIpLGMoYSksaC5mb3JFYWNoKGssZnVuY3Rpb24oZCxlKXt2YXIgaz1oLmxvd2VyY2FzZShlKSxnPVwiaW1nXCI9PT1hJiZcInNyY1wiPT09a3x8XG5cImJhY2tncm91bmRcIj09PWs7ITAhPT1PW2tdfHwhMD09PURba10mJiFmKGQsZyl8fChjKFwiIFwiKSxjKGUpLGMoJz1cIicpLGMoQihkKSksYygnXCInKSl9KSxjKGU/XCIvPlwiOlwiPlwiKSl9LGVuZDpmdW5jdGlvbihhKXthPWgubG93ZXJjYXNlKGEpO2R8fCEwIT09Q1thXXx8KGMoXCI8L1wiKSxjKGEpLGMoXCI+XCIpKTthPT1kJiYoZD0hMSl9LGNoYXJzOmZ1bmN0aW9uKGEpe2R8fGMoQihhKSl9fX12YXIgTD1oLiQkbWluRXJyKFwiJHNhbml0aXplXCIpLHo9L148KCg/OlthLXpBLVpdKVtcXHc6LV0qKSgoPzpcXHMrW1xcdzotXSsoPzpcXHMqPVxccyooPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXxbXj5cXHNdKykpPykqKVxccyooXFwvPylcXHMqKD4/KS8seT0vXjxcXC9cXHMqKFtcXHc6LV0rKVtePl0qPi8sRz0vKFtcXHc6LV0rKSg/Olxccyo9XFxzKig/Oig/OlwiKCg/OlteXCJdKSopXCIpfCg/OicoKD86W14nXSkqKScpfChbXj5cXHNdKykpKT8vZyxLPS9ePC8sSj0vXjxcXC8vLEg9L1xceDNjIS0tKC4qPyktLVxceDNlL2cseD0vPCFET0NUWVBFKFtePl0qPyk+L2ksXG5JPS88IVxcW0NEQVRBXFxbKC4qPyldXVxceDNlL2csTT0vW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXS9nLE49LyhbXlxcIy1+fCB8IV0pL2csdj1nKFwiYXJlYSxicixjb2wsaHIsaW1nLHdiclwiKTtuPWcoXCJjb2xncm91cCxkZCxkdCxsaSxwLHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRyXCIpO3A9ZyhcInJwLHJ0XCIpO3ZhciB1PWguZXh0ZW5kKHt9LHAsbikscz1oLmV4dGVuZCh7fSxuLGcoXCJhZGRyZXNzLGFydGljbGUsYXNpZGUsYmxvY2txdW90ZSxjYXB0aW9uLGNlbnRlcixkZWwsZGlyLGRpdixkbCxmaWd1cmUsZmlnY2FwdGlvbixmb290ZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGVhZGVyLGhncm91cCxocixpbnMsbWFwLG1lbnUsbmF2LG9sLHByZSxzY3JpcHQsc2VjdGlvbix0YWJsZSx1bFwiKSksdD1oLmV4dGVuZCh7fSxwLGcoXCJhLGFiYnIsYWNyb255bSxiLGJkaSxiZG8sYmlnLGJyLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpbWcsaW5zLGtiZCxsYWJlbCxtYXAsbWFyayxxLHJ1YnkscnAscnQscyxzYW1wLHNtYWxsLHNwYW4sc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHRpbWUsdHQsdSx2YXJcIikpO1xubj1nKFwiY2lyY2xlLGRlZnMsZGVzYyxlbGxpcHNlLGZvbnQtZmFjZSxmb250LWZhY2UtbmFtZSxmb250LWZhY2Utc3JjLGcsZ2x5cGgsaGtlcm4saW1hZ2UsbGluZWFyR3JhZGllbnQsbGluZSxtYXJrZXIsbWV0YWRhdGEsbWlzc2luZy1nbHlwaCxtcGF0aCxwYXRoLHBvbHlnb24scG9seWxpbmUscmFkaWFsR3JhZGllbnQscmVjdCxzdG9wLHN2Zyxzd2l0Y2gsdGV4dCx0aXRsZSx0c3Bhbix1c2VcIik7dmFyIHc9ZyhcInNjcmlwdCxzdHlsZVwiKSxDPWguZXh0ZW5kKHt9LHYscyx0LHUsbiksRD1nKFwiYmFja2dyb3VuZCxjaXRlLGhyZWYsbG9uZ2Rlc2Msc3JjLHVzZW1hcCx4bGluazpocmVmXCIpO249ZyhcImFiYnIsYWxpZ24sYWx0LGF4aXMsYmdjb2xvcixib3JkZXIsY2VsbHBhZGRpbmcsY2VsbHNwYWNpbmcsY2xhc3MsY2xlYXIsY29sb3IsY29scyxjb2xzcGFuLGNvbXBhY3QsY29vcmRzLGRpcixmYWNlLGhlYWRlcnMsaGVpZ2h0LGhyZWZsYW5nLGhzcGFjZSxpc21hcCxsYW5nLGxhbmd1YWdlLG5vaHJlZixub3dyYXAscmVsLHJldixyb3dzLHJvd3NwYW4scnVsZXMsc2NvcGUsc2Nyb2xsaW5nLHNoYXBlLHNpemUsc3BhbixzdGFydCxzdW1tYXJ5LHRhYmluZGV4LHRhcmdldCx0aXRsZSx0eXBlLHZhbGlnbix2YWx1ZSx2c3BhY2Usd2lkdGhcIik7XG5wPWcoXCJhY2NlbnQtaGVpZ2h0LGFjY3VtdWxhdGUsYWRkaXRpdmUsYWxwaGFiZXRpYyxhcmFiaWMtZm9ybSxhc2NlbnQsYmFzZVByb2ZpbGUsYmJveCxiZWdpbixieSxjYWxjTW9kZSxjYXAtaGVpZ2h0LGNsYXNzLGNvbG9yLGNvbG9yLXJlbmRlcmluZyxjb250ZW50LGN4LGN5LGQsZHgsZHksZGVzY2VudCxkaXNwbGF5LGR1cixlbmQsZmlsbCxmaWxsLXJ1bGUsZm9udC1mYW1pbHksZm9udC1zaXplLGZvbnQtc3RyZXRjaCxmb250LXN0eWxlLGZvbnQtdmFyaWFudCxmb250LXdlaWdodCxmcm9tLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsZ3JhZGllbnRVbml0cyxoYW5naW5nLGhlaWdodCxob3Jpei1hZHYteCxob3Jpei1vcmlnaW4teCxpZGVvZ3JhcGhpYyxrLGtleVBvaW50cyxrZXlTcGxpbmVzLGtleVRpbWVzLGxhbmcsbWFya2VyLWVuZCxtYXJrZXItbWlkLG1hcmtlci1zdGFydCxtYXJrZXJIZWlnaHQsbWFya2VyVW5pdHMsbWFya2VyV2lkdGgsbWF0aGVtYXRpY2FsLG1heCxtaW4sb2Zmc2V0LG9wYWNpdHksb3JpZW50LG9yaWdpbixvdmVybGluZS1wb3NpdGlvbixvdmVybGluZS10aGlja25lc3MscGFub3NlLTEscGF0aCxwYXRoTGVuZ3RoLHBvaW50cyxwcmVzZXJ2ZUFzcGVjdFJhdGlvLHIscmVmWCxyZWZZLHJlcGVhdENvdW50LHJlcGVhdER1cixyZXF1aXJlZEV4dGVuc2lvbnMscmVxdWlyZWRGZWF0dXJlcyxyZXN0YXJ0LHJvdGF0ZSxyeCxyeSxzbG9wZSxzdGVtaCxzdGVtdixzdG9wLWNvbG9yLHN0b3Atb3BhY2l0eSxzdHJpa2V0aHJvdWdoLXBvc2l0aW9uLHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzLHN0cm9rZSxzdHJva2UtZGFzaGFycmF5LHN0cm9rZS1kYXNob2Zmc2V0LHN0cm9rZS1saW5lY2FwLHN0cm9rZS1saW5lam9pbixzdHJva2UtbWl0ZXJsaW1pdCxzdHJva2Utb3BhY2l0eSxzdHJva2Utd2lkdGgsc3lzdGVtTGFuZ3VhZ2UsdGFyZ2V0LHRleHQtYW5jaG9yLHRvLHRyYW5zZm9ybSx0eXBlLHUxLHUyLHVuZGVybGluZS1wb3NpdGlvbix1bmRlcmxpbmUtdGhpY2tuZXNzLHVuaWNvZGUsdW5pY29kZS1yYW5nZSx1bml0cy1wZXItZW0sdmFsdWVzLHZlcnNpb24sdmlld0JveCx2aXNpYmlsaXR5LHdpZHRoLHdpZHRocyx4LHgtaGVpZ2h0LHgxLHgyLHhsaW5rOmFjdHVhdGUseGxpbms6YXJjcm9sZSx4bGluazpyb2xlLHhsaW5rOnNob3cseGxpbms6dGl0bGUseGxpbms6dHlwZSx4bWw6YmFzZSx4bWw6bGFuZyx4bWw6c3BhY2UseG1sbnMseG1sbnM6eGxpbmsseSx5MSx5Mix6b29tQW5kUGFuXCIsXG4hMCk7dmFyIE89aC5leHRlbmQoe30sRCxwLG4pLEE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtoLm1vZHVsZShcIm5nU2FuaXRpemVcIixbXSkucHJvdmlkZXIoXCIkc2FuaXRpemVcIixmdW5jdGlvbigpe3RoaXMuJGdldD1bXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGYpe3ZhciBkPVtdO0YoZixyKGQsZnVuY3Rpb24oYyxiKXtyZXR1cm4hL151bnNhZmUvLnRlc3QoYShjLGIpKX0pKTtyZXR1cm4gZC5qb2luKFwiXCIpfX1dfSk7aC5tb2R1bGUoXCJuZ1Nhbml0aXplXCIpLmZpbHRlcihcImxpbmt5XCIsW1wiJHNhbml0aXplXCIsZnVuY3Rpb24oYSl7dmFyIGY9LygoZnRwfGh0dHBzPyk6XFwvXFwvfCh3d3dcXC4pfChtYWlsdG86KT9bQS1aYS16MC05Ll8lKy1dK0ApXFxTKlteXFxzLjssKCl7fTw+XCJcXHUyMDFkXFx1MjAxOV0vaSxkPS9ebWFpbHRvOi9pO3JldHVybiBmdW5jdGlvbihjLGIpe2Z1bmN0aW9uIGsoYSl7YSYmZy5wdXNoKEUoYSkpfWZ1bmN0aW9uIGUoYSxcbmMpe2cucHVzaChcIjxhIFwiKTtoLmlzRGVmaW5lZChiKSYmZy5wdXNoKCd0YXJnZXQ9XCInLGIsJ1wiICcpO2cucHVzaCgnaHJlZj1cIicsYS5yZXBsYWNlKC9cIi9nLFwiJnF1b3Q7XCIpLCdcIj4nKTtrKGMpO2cucHVzaChcIjwvYT5cIil9aWYoIWMpcmV0dXJuIGM7Zm9yKHZhciBtLGw9YyxnPVtdLG4scDttPWwubWF0Y2goZik7KW49bVswXSxtWzJdfHxtWzRdfHwobj0obVszXT9cImh0dHA6Ly9cIjpcIm1haWx0bzpcIikrbikscD1tLmluZGV4LGsobC5zdWJzdHIoMCxwKSksZShuLG1bMF0ucmVwbGFjZShkLFwiXCIpKSxsPWwuc3Vic3RyaW5nKHArbVswXS5sZW5ndGgpO2sobCk7cmV0dXJuIGEoZy5qb2luKFwiXCIpKX19XSl9KSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1zYW5pdGl6ZS5taW4uanMubWFwXG4iLCIvKlxuIEFuZ3VsYXJKUyB2MS41LjBcbiAoYykgMjAxMC0yMDE2IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihPLFcsdil7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIEgoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9YXJndW1lbnRzWzBdLGQ7ZD1cIltcIisoYT9hK1wiOlwiOlwiXCIpK2IrXCJdIGh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjUuMC9cIisoYT9hK1wiL1wiOlwiXCIpK2I7Zm9yKGI9MTtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKXtkPWQrKDE9PWI/XCI/XCI6XCImXCIpK1wicFwiKyhiLTEpK1wiPVwiO3ZhciBjPWVuY29kZVVSSUNvbXBvbmVudCxlO2U9YXJndW1lbnRzW2JdO2U9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLFwiXCIpOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1widW5kZWZpbmVkXCI6XCJzdHJpbmdcIiE9dHlwZW9mIGU/SlNPTi5zdHJpbmdpZnkoZSk6ZTtkKz1jKGUpfXJldHVybiBFcnJvcihkKX19ZnVuY3Rpb24gQ2EoYSl7aWYobnVsbD09YXx8WmEoYSkpcmV0dXJuITE7aWYoTChhKXx8RihhKXx8QyYmYSBpbnN0YW5jZW9mIEMpcmV0dXJuITA7XG52YXIgYj1cImxlbmd0aFwiaW4gT2JqZWN0KGEpJiZhLmxlbmd0aDtyZXR1cm4gTihiKSYmKDA8PWImJihiLTEgaW4gYXx8YSBpbnN0YW5jZW9mIEFycmF5KXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYS5pdGVtKX1mdW5jdGlvbiBuKGEsYixkKXt2YXIgYyxlO2lmKGEpaWYoRChhKSlmb3IoYyBpbiBhKVwicHJvdG90eXBlXCI9PWN8fFwibGVuZ3RoXCI9PWN8fFwibmFtZVwiPT1jfHxhLmhhc093blByb3BlcnR5JiYhYS5oYXNPd25Qcm9wZXJ0eShjKXx8Yi5jYWxsKGQsYVtjXSxjLGEpO2Vsc2UgaWYoTChhKXx8Q2EoYSkpe3ZhciBmPVwib2JqZWN0XCIhPT10eXBlb2YgYTtjPTA7Zm9yKGU9YS5sZW5ndGg7YzxlO2MrKykoZnx8YyBpbiBhKSYmYi5jYWxsKGQsYVtjXSxjLGEpfWVsc2UgaWYoYS5mb3JFYWNoJiZhLmZvckVhY2ghPT1uKWEuZm9yRWFjaChiLGQsYSk7ZWxzZSBpZihxYyhhKSlmb3IoYyBpbiBhKWIuY2FsbChkLGFbY10sYyxhKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhLmhhc093blByb3BlcnR5KWZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmXG5iLmNhbGwoZCxhW2NdLGMsYSk7ZWxzZSBmb3IoYyBpbiBhKXNhLmNhbGwoYSxjKSYmYi5jYWxsKGQsYVtjXSxjLGEpO3JldHVybiBhfWZ1bmN0aW9uIHJjKGEsYixkKXtmb3IodmFyIGM9T2JqZWN0LmtleXMoYSkuc29ydCgpLGU9MDtlPGMubGVuZ3RoO2UrKyliLmNhbGwoZCxhW2NbZV1dLGNbZV0pO3JldHVybiBjfWZ1bmN0aW9uIHNjKGEpe3JldHVybiBmdW5jdGlvbihiLGQpe2EoZCxiKX19ZnVuY3Rpb24gWWQoKXtyZXR1cm4rK3BifWZ1bmN0aW9uIFFiKGEsYixkKXtmb3IodmFyIGM9YS4kJGhhc2hLZXksZT0wLGY9Yi5sZW5ndGg7ZTxmOysrZSl7dmFyIGc9YltlXTtpZihFKGcpfHxEKGcpKWZvcih2YXIgaD1PYmplY3Qua2V5cyhnKSxrPTAsbD1oLmxlbmd0aDtrPGw7aysrKXt2YXIgbT1oW2tdLHI9Z1ttXTtkJiZFKHIpP1Yocik/YVttXT1uZXcgRGF0ZShyLnZhbHVlT2YoKSk6JGEocik/YVttXT1uZXcgUmVnRXhwKHIpOnIubm9kZU5hbWU/YVttXT1yLmNsb25lTm9kZSghMCk6XG5SYihyKT9hW21dPXIuY2xvbmUoKTooRShhW21dKXx8KGFbbV09TChyKT9bXTp7fSksUWIoYVttXSxbcl0sITApKTphW21dPXJ9fWM/YS4kJGhhc2hLZXk9YzpkZWxldGUgYS4kJGhhc2hLZXk7cmV0dXJuIGF9ZnVuY3Rpb24gVChhKXtyZXR1cm4gUWIoYSx3YS5jYWxsKGFyZ3VtZW50cywxKSwhMSl9ZnVuY3Rpb24gWmQoYSl7cmV0dXJuIFFiKGEsd2EuY2FsbChhcmd1bWVudHMsMSksITApfWZ1bmN0aW9uIGNhKGEpe3JldHVybiBwYXJzZUludChhLDEwKX1mdW5jdGlvbiBTYihhLGIpe3JldHVybiBUKE9iamVjdC5jcmVhdGUoYSksYil9ZnVuY3Rpb24gQigpe31mdW5jdGlvbiBhYihhKXtyZXR1cm4gYX1mdW5jdGlvbiBiYShhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19ZnVuY3Rpb24gdGMoYSl7cmV0dXJuIEQoYS50b1N0cmluZykmJmEudG9TdHJpbmchPT1nYX1mdW5jdGlvbiB4KGEpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYX1mdW5jdGlvbiB5KGEpe3JldHVyblwidW5kZWZpbmVkXCIhPT1cbnR5cGVvZiBhfWZ1bmN0aW9uIEUoYSl7cmV0dXJuIG51bGwhPT1hJiZcIm9iamVjdFwiPT09dHlwZW9mIGF9ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIG51bGwhPT1hJiZcIm9iamVjdFwiPT09dHlwZW9mIGEmJiF1YyhhKX1mdW5jdGlvbiBGKGEpe3JldHVyblwic3RyaW5nXCI9PT10eXBlb2YgYX1mdW5jdGlvbiBOKGEpe3JldHVyblwibnVtYmVyXCI9PT10eXBlb2YgYX1mdW5jdGlvbiBWKGEpe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09Z2EuY2FsbChhKX1mdW5jdGlvbiBEKGEpe3JldHVyblwiZnVuY3Rpb25cIj09PXR5cGVvZiBhfWZ1bmN0aW9uICRhKGEpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT1nYS5jYWxsKGEpfWZ1bmN0aW9uIFphKGEpe3JldHVybiBhJiZhLndpbmRvdz09PWF9ZnVuY3Rpb24gYmIoYSl7cmV0dXJuIGEmJmEuJGV2YWxBc3luYyYmYS4kd2F0Y2h9ZnVuY3Rpb24gTmEoYSl7cmV0dXJuXCJib29sZWFuXCI9PT10eXBlb2YgYX1mdW5jdGlvbiAkZChhKXtyZXR1cm4gYSYmTihhLmxlbmd0aCkmJlxuYWUudGVzdChnYS5jYWxsKGEpKX1mdW5jdGlvbiBSYihhKXtyZXR1cm4hKCFhfHwhKGEubm9kZU5hbWV8fGEucHJvcCYmYS5hdHRyJiZhLmZpbmQpKX1mdW5jdGlvbiBiZShhKXt2YXIgYj17fTthPWEuc3BsaXQoXCIsXCIpO3ZhciBkO2ZvcihkPTA7ZDxhLmxlbmd0aDtkKyspYlthW2RdXT0hMDtyZXR1cm4gYn1mdW5jdGlvbiByYShhKXtyZXR1cm4gRyhhLm5vZGVOYW1lfHxhWzBdJiZhWzBdLm5vZGVOYW1lKX1mdW5jdGlvbiBjYihhLGIpe3ZhciBkPWEuaW5kZXhPZihiKTswPD1kJiZhLnNwbGljZShkLDEpO3JldHVybiBkfWZ1bmN0aW9uIE9hKGEsYil7ZnVuY3Rpb24gZChhLGIpe3ZhciBkPWIuJCRoYXNoS2V5LGU7aWYoTChhKSl7ZT0wO2Zvcih2YXIgZj1hLmxlbmd0aDtlPGY7ZSsrKWIucHVzaChjKGFbZV0pKX1lbHNlIGlmKHFjKGEpKWZvcihlIGluIGEpYltlXT1jKGFbZV0pO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT09dHlwZW9mIGEuaGFzT3duUHJvcGVydHkpZm9yKGUgaW4gYSlhLmhhc093blByb3BlcnR5KGUpJiZcbihiW2VdPWMoYVtlXSkpO2Vsc2UgZm9yKGUgaW4gYSlzYS5jYWxsKGEsZSkmJihiW2VdPWMoYVtlXSkpO2Q/Yi4kJGhhc2hLZXk9ZDpkZWxldGUgYi4kJGhhc2hLZXk7cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXtpZighRShhKSlyZXR1cm4gYTt2YXIgYj1mLmluZGV4T2YoYSk7aWYoLTEhPT1iKXJldHVybiBnW2JdO2lmKFphKGEpfHxiYihhKSl0aHJvdyBEYShcImNwd3NcIik7dmFyIGI9ITEsYz1lKGEpO2M9PT12JiYoYz1MKGEpP1tdOk9iamVjdC5jcmVhdGUodWMoYSkpLGI9ITApO2YucHVzaChhKTtnLnB1c2goYyk7cmV0dXJuIGI/ZChhLGMpOmN9ZnVuY3Rpb24gZShhKXtzd2l0Y2goZ2EuY2FsbChhKSl7Y2FzZSBcIltvYmplY3QgSW50OEFycmF5XVwiOmNhc2UgXCJbb2JqZWN0IEludDE2QXJyYXldXCI6Y2FzZSBcIltvYmplY3QgSW50MzJBcnJheV1cIjpjYXNlIFwiW29iamVjdCBGbG9hdDMyQXJyYXldXCI6Y2FzZSBcIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiOmNhc2UgXCJbb2JqZWN0IFVpbnQ4QXJyYXldXCI6Y2FzZSBcIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldXCI6Y2FzZSBcIltvYmplY3QgVWludDE2QXJyYXldXCI6Y2FzZSBcIltvYmplY3QgVWludDMyQXJyYXldXCI6cmV0dXJuIG5ldyBhLmNvbnN0cnVjdG9yKGMoYS5idWZmZXIpKTtcbmNhc2UgXCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiOmlmKCFhLnNsaWNlKXt2YXIgYj1uZXcgQXJyYXlCdWZmZXIoYS5ieXRlTGVuZ3RoKTsobmV3IFVpbnQ4QXJyYXkoYikpLnNldChuZXcgVWludDhBcnJheShhKSk7cmV0dXJuIGJ9cmV0dXJuIGEuc2xpY2UoMCk7Y2FzZSBcIltvYmplY3QgQm9vbGVhbl1cIjpjYXNlIFwiW29iamVjdCBOdW1iZXJdXCI6Y2FzZSBcIltvYmplY3QgU3RyaW5nXVwiOmNhc2UgXCJbb2JqZWN0IERhdGVdXCI6cmV0dXJuIG5ldyBhLmNvbnN0cnVjdG9yKGEudmFsdWVPZigpKTtjYXNlIFwiW29iamVjdCBSZWdFeHBdXCI6cmV0dXJuIGI9bmV3IFJlZ0V4cChhLnNvdXJjZSxhLnRvU3RyaW5nKCkubWF0Y2goL1teXFwvXSokLylbMF0pLGIubGFzdEluZGV4PWEubGFzdEluZGV4LGJ9aWYoRChhLmNsb25lTm9kZSkpcmV0dXJuIGEuY2xvbmVOb2RlKCEwKX12YXIgZj1bXSxnPVtdO2lmKGIpe2lmKCRkKGIpfHxcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1nYS5jYWxsKGIpKXRocm93IERhKFwiY3B0YVwiKTtcbmlmKGE9PT1iKXRocm93IERhKFwiY3BpXCIpO0woYik/Yi5sZW5ndGg9MDpuKGIsZnVuY3Rpb24oYSxjKXtcIiQkaGFzaEtleVwiIT09YyYmZGVsZXRlIGJbY119KTtmLnB1c2goYSk7Zy5wdXNoKGIpO3JldHVybiBkKGEsYil9cmV0dXJuIGMoYSl9ZnVuY3Rpb24gbmEoYSxiKXtpZihMKGEpKXtiPWJ8fFtdO2Zvcih2YXIgZD0wLGM9YS5sZW5ndGg7ZDxjO2QrKyliW2RdPWFbZF19ZWxzZSBpZihFKGEpKWZvcihkIGluIGI9Ynx8e30sYSlpZihcIiRcIiE9PWQuY2hhckF0KDApfHxcIiRcIiE9PWQuY2hhckF0KDEpKWJbZF09YVtkXTtyZXR1cm4gYnx8YX1mdW5jdGlvbiBvYShhLGIpe2lmKGE9PT1iKXJldHVybiEwO2lmKG51bGw9PT1hfHxudWxsPT09YilyZXR1cm4hMTtpZihhIT09YSYmYiE9PWIpcmV0dXJuITA7dmFyIGQ9dHlwZW9mIGEsYztpZihkPT10eXBlb2YgYiYmXCJvYmplY3RcIj09ZClpZihMKGEpKXtpZighTChiKSlyZXR1cm4hMTtpZigoZD1hLmxlbmd0aCk9PWIubGVuZ3RoKXtmb3IoYz1cbjA7YzxkO2MrKylpZighb2EoYVtjXSxiW2NdKSlyZXR1cm4hMTtyZXR1cm4hMH19ZWxzZXtpZihWKGEpKXJldHVybiBWKGIpP29hKGEuZ2V0VGltZSgpLGIuZ2V0VGltZSgpKTohMTtpZigkYShhKSlyZXR1cm4gJGEoYik/YS50b1N0cmluZygpPT1iLnRvU3RyaW5nKCk6ITE7aWYoYmIoYSl8fGJiKGIpfHxaYShhKXx8WmEoYil8fEwoYil8fFYoYil8fCRhKGIpKXJldHVybiExO2Q9WigpO2ZvcihjIGluIGEpaWYoXCIkXCIhPT1jLmNoYXJBdCgwKSYmIUQoYVtjXSkpe2lmKCFvYShhW2NdLGJbY10pKXJldHVybiExO2RbY109ITB9Zm9yKGMgaW4gYilpZighKGMgaW4gZCkmJlwiJFwiIT09Yy5jaGFyQXQoMCkmJnkoYltjXSkmJiFEKGJbY10pKXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGRiKGEsYixkKXtyZXR1cm4gYS5jb25jYXQod2EuY2FsbChiLGQpKX1mdW5jdGlvbiB2YyhhLGIpe3ZhciBkPTI8YXJndW1lbnRzLmxlbmd0aD93YS5jYWxsKGFyZ3VtZW50cywyKTpbXTtcbnJldHVybiFEKGIpfHxiIGluc3RhbmNlb2YgUmVnRXhwP2I6ZC5sZW5ndGg/ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9iLmFwcGx5KGEsZGIoZCxhcmd1bWVudHMsMCkpOmIuYXBwbHkoYSxkKX06ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9iLmFwcGx5KGEsYXJndW1lbnRzKTpiLmNhbGwoYSl9fWZ1bmN0aW9uIGNlKGEsYil7dmFyIGQ9YjtcInN0cmluZ1wiPT09dHlwZW9mIGEmJlwiJFwiPT09YS5jaGFyQXQoMCkmJlwiJFwiPT09YS5jaGFyQXQoMSk/ZD12OlphKGIpP2Q9XCIkV0lORE9XXCI6YiYmVz09PWI/ZD1cIiRET0NVTUVOVFwiOmJiKGIpJiYoZD1cIiRTQ09QRVwiKTtyZXR1cm4gZH1mdW5jdGlvbiBlYihhLGIpe2lmKHgoYSkpcmV0dXJuIHY7TihiKXx8KGI9Yj8yOm51bGwpO3JldHVybiBKU09OLnN0cmluZ2lmeShhLGNlLGIpfWZ1bmN0aW9uIHdjKGEpe3JldHVybiBGKGEpP0pTT04ucGFyc2UoYSk6YX1mdW5jdGlvbiB4YyhhLGIpe2E9YS5yZXBsYWNlKGRlLFxuXCJcIik7dmFyIGQ9RGF0ZS5wYXJzZShcIkphbiAwMSwgMTk3MCAwMDowMDowMCBcIithKS82RTQ7cmV0dXJuIGlzTmFOKGQpP2I6ZH1mdW5jdGlvbiBUYihhLGIsZCl7ZD1kPy0xOjE7dmFyIGM9YS5nZXRUaW1lem9uZU9mZnNldCgpO2I9eGMoYixjKTtkKj1iLWM7YT1uZXcgRGF0ZShhLmdldFRpbWUoKSk7YS5zZXRNaW51dGVzKGEuZ2V0TWludXRlcygpK2QpO3JldHVybiBhfWZ1bmN0aW9uIHRhKGEpe2E9QyhhKS5jbG9uZSgpO3RyeXthLmVtcHR5KCl9Y2F0Y2goYil7fXZhciBkPUMoXCI8ZGl2PlwiKS5hcHBlbmQoYSkuaHRtbCgpO3RyeXtyZXR1cm4gYVswXS5ub2RlVHlwZT09PVBhP0coZCk6ZC5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcXHdcXC1dKykvLGZ1bmN0aW9uKGEsYil7cmV0dXJuXCI8XCIrRyhiKX0pfWNhdGNoKGMpe3JldHVybiBHKGQpfX1mdW5jdGlvbiB5YyhhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhKX1jYXRjaChiKXt9fWZ1bmN0aW9uIHpjKGEpe3ZhciBiPVxue307bigoYXx8XCJcIikuc3BsaXQoXCImXCIpLGZ1bmN0aW9uKGEpe3ZhciBjLGUsZjthJiYoZT1hPWEucmVwbGFjZSgvXFwrL2csXCIlMjBcIiksYz1hLmluZGV4T2YoXCI9XCIpLC0xIT09YyYmKGU9YS5zdWJzdHJpbmcoMCxjKSxmPWEuc3Vic3RyaW5nKGMrMSkpLGU9eWMoZSkseShlKSYmKGY9eShmKT95YyhmKTohMCxzYS5jYWxsKGIsZSk/TChiW2VdKT9iW2VdLnB1c2goZik6YltlXT1bYltlXSxmXTpiW2VdPWYpKX0pO3JldHVybiBifWZ1bmN0aW9uIFViKGEpe3ZhciBiPVtdO24oYSxmdW5jdGlvbihhLGMpe0woYSk/bihhLGZ1bmN0aW9uKGEpe2IucHVzaChoYShjLCEwKSsoITA9PT1hP1wiXCI6XCI9XCIraGEoYSwhMCkpKX0pOmIucHVzaChoYShjLCEwKSsoITA9PT1hP1wiXCI6XCI9XCIraGEoYSwhMCkpKX0pO3JldHVybiBiLmxlbmd0aD9iLmpvaW4oXCImXCIpOlwiXCJ9ZnVuY3Rpb24gcWIoYSl7cmV0dXJuIGhhKGEsITApLnJlcGxhY2UoLyUyNi9naSxcIiZcIikucmVwbGFjZSgvJTNEL2dpLFwiPVwiKS5yZXBsYWNlKC8lMkIvZ2ksXG5cIitcIil9ZnVuY3Rpb24gaGEoYSxiKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGEpLnJlcGxhY2UoLyU0MC9naSxcIkBcIikucmVwbGFjZSgvJTNBL2dpLFwiOlwiKS5yZXBsYWNlKC8lMjQvZyxcIiRcIikucmVwbGFjZSgvJTJDL2dpLFwiLFwiKS5yZXBsYWNlKC8lM0IvZ2ksXCI7XCIpLnJlcGxhY2UoLyUyMC9nLGI/XCIlMjBcIjpcIitcIil9ZnVuY3Rpb24gZWUoYSxiKXt2YXIgZCxjLGU9UWEubGVuZ3RoO2ZvcihjPTA7YzxlOysrYylpZihkPVFhW2NdK2IsRihkPWEuZ2V0QXR0cmlidXRlKGQpKSlyZXR1cm4gZDtyZXR1cm4gbnVsbH1mdW5jdGlvbiBmZShhLGIpe3ZhciBkLGMsZT17fTtuKFFhLGZ1bmN0aW9uKGIpe2IrPVwiYXBwXCI7IWQmJmEuaGFzQXR0cmlidXRlJiZhLmhhc0F0dHJpYnV0ZShiKSYmKGQ9YSxjPWEuZ2V0QXR0cmlidXRlKGIpKX0pO24oUWEsZnVuY3Rpb24oYil7Yis9XCJhcHBcIjt2YXIgZTshZCYmKGU9YS5xdWVyeVNlbGVjdG9yKFwiW1wiK2IucmVwbGFjZShcIjpcIixcIlxcXFw6XCIpK1wiXVwiKSkmJlxuKGQ9ZSxjPWUuZ2V0QXR0cmlidXRlKGIpKX0pO2QmJihlLnN0cmljdERpPW51bGwhPT1lZShkLFwic3RyaWN0LWRpXCIpLGIoZCxjP1tjXTpbXSxlKSl9ZnVuY3Rpb24gQWMoYSxiLGQpe0UoZCl8fChkPXt9KTtkPVQoe3N0cmljdERpOiExfSxkKTt2YXIgYz1mdW5jdGlvbigpe2E9QyhhKTtpZihhLmluamVjdG9yKCkpe3ZhciBjPWFbMF09PT1XP1wiZG9jdW1lbnRcIjp0YShhKTt0aHJvdyBEYShcImJ0c3RycGRcIixjLnJlcGxhY2UoLzwvLFwiJmx0O1wiKS5yZXBsYWNlKC8+LyxcIiZndDtcIikpO31iPWJ8fFtdO2IudW5zaGlmdChbXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGIpe2IudmFsdWUoXCIkcm9vdEVsZW1lbnRcIixhKX1dKTtkLmRlYnVnSW5mb0VuYWJsZWQmJmIucHVzaChbXCIkY29tcGlsZVByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7YS5kZWJ1Z0luZm9FbmFibGVkKCEwKX1dKTtiLnVuc2hpZnQoXCJuZ1wiKTtjPWZiKGIsZC5zdHJpY3REaSk7Yy5pbnZva2UoW1wiJHJvb3RTY29wZVwiLFwiJHJvb3RFbGVtZW50XCIsXG5cIiRjb21waWxlXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyxkKXthLiRhcHBseShmdW5jdGlvbigpe2IuZGF0YShcIiRpbmplY3RvclwiLGQpO2MoYikoYSl9KX1dKTtyZXR1cm4gY30sZT0vXk5HX0VOQUJMRV9ERUJVR19JTkZPIS8sZj0vXk5HX0RFRkVSX0JPT1RTVFJBUCEvO08mJmUudGVzdChPLm5hbWUpJiYoZC5kZWJ1Z0luZm9FbmFibGVkPSEwLE8ubmFtZT1PLm5hbWUucmVwbGFjZShlLFwiXCIpKTtpZihPJiYhZi50ZXN0KE8ubmFtZSkpcmV0dXJuIGMoKTtPLm5hbWU9Ty5uYW1lLnJlcGxhY2UoZixcIlwiKTtpYS5yZXN1bWVCb290c3RyYXA9ZnVuY3Rpb24oYSl7bihhLGZ1bmN0aW9uKGEpe2IucHVzaChhKX0pO3JldHVybiBjKCl9O0QoaWEucmVzdW1lRGVmZXJyZWRCb290c3RyYXApJiZpYS5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCgpfWZ1bmN0aW9uIGdlKCl7Ty5uYW1lPVwiTkdfRU5BQkxFX0RFQlVHX0lORk8hXCIrTy5uYW1lO08ubG9jYXRpb24ucmVsb2FkKCl9ZnVuY3Rpb24gaGUoYSl7YT1cbmlhLmVsZW1lbnQoYSkuaW5qZWN0b3IoKTtpZighYSl0aHJvdyBEYShcInRlc3RcIik7cmV0dXJuIGEuZ2V0KFwiJCR0ZXN0YWJpbGl0eVwiKX1mdW5jdGlvbiBCYyhhLGIpe2I9Ynx8XCJfXCI7cmV0dXJuIGEucmVwbGFjZShpZSxmdW5jdGlvbihhLGMpe3JldHVybihjP2I6XCJcIikrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gamUoKXt2YXIgYTtpZighQ2Mpe3ZhciBiPXJiKCk7KHVhPXgoYik/Ty5qUXVlcnk6Yj9PW2JdOnYpJiZ1YS5mbi5vbj8oQz11YSxUKHVhLmZuLHtzY29wZTpSYS5zY29wZSxpc29sYXRlU2NvcGU6UmEuaXNvbGF0ZVNjb3BlLGNvbnRyb2xsZXI6UmEuY29udHJvbGxlcixpbmplY3RvcjpSYS5pbmplY3Rvcixpbmhlcml0ZWREYXRhOlJhLmluaGVyaXRlZERhdGF9KSxhPXVhLmNsZWFuRGF0YSx1YS5jbGVhbkRhdGE9ZnVuY3Rpb24oYil7Zm9yKHZhciBjLGU9MCxmO251bGwhPShmPWJbZV0pO2UrKykoYz11YS5fZGF0YShmLFwiZXZlbnRzXCIpKSYmYy4kZGVzdHJveSYmdWEoZikudHJpZ2dlckhhbmRsZXIoXCIkZGVzdHJveVwiKTtcbmEoYil9KTpDPVU7aWEuZWxlbWVudD1DO0NjPSEwfX1mdW5jdGlvbiBzYihhLGIsZCl7aWYoIWEpdGhyb3cgRGEoXCJhcmVxXCIsYnx8XCI/XCIsZHx8XCJyZXF1aXJlZFwiKTtyZXR1cm4gYX1mdW5jdGlvbiBTYShhLGIsZCl7ZCYmTChhKSYmKGE9YVthLmxlbmd0aC0xXSk7c2IoRChhKSxiLFwibm90IGEgZnVuY3Rpb24sIGdvdCBcIisoYSYmXCJvYmplY3RcIj09PXR5cGVvZiBhP2EuY29uc3RydWN0b3IubmFtZXx8XCJPYmplY3RcIjp0eXBlb2YgYSkpO3JldHVybiBhfWZ1bmN0aW9uIFRhKGEsYil7aWYoXCJoYXNPd25Qcm9wZXJ0eVwiPT09YSl0aHJvdyBEYShcImJhZG5hbWVcIixiKTt9ZnVuY3Rpb24gRGMoYSxiLGQpe2lmKCFiKXJldHVybiBhO2I9Yi5zcGxpdChcIi5cIik7Zm9yKHZhciBjLGU9YSxmPWIubGVuZ3RoLGc9MDtnPGY7ZysrKWM9YltnXSxhJiYoYT0oZT1hKVtjXSk7cmV0dXJuIWQmJkQoYSk/dmMoZSxhKTphfWZ1bmN0aW9uIHRiKGEpe2Zvcih2YXIgYj1hWzBdLGQ9YVthLmxlbmd0aC0xXSxjLFxuZT0xO2IhPT1kJiYoYj1iLm5leHRTaWJsaW5nKTtlKyspaWYoY3x8YVtlXSE9PWIpY3x8KGM9Qyh3YS5jYWxsKGEsMCxlKSkpLGMucHVzaChiKTtyZXR1cm4gY3x8YX1mdW5jdGlvbiBaKCl7cmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCl9ZnVuY3Rpb24ga2UoYSl7ZnVuY3Rpb24gYihhLGIsYyl7cmV0dXJuIGFbYl18fChhW2JdPWMoKSl9dmFyIGQ9SChcIiRpbmplY3RvclwiKSxjPUgoXCJuZ1wiKTthPWIoYSxcImFuZ3VsYXJcIixPYmplY3QpO2EuJCRtaW5FcnI9YS4kJG1pbkVycnx8SDtyZXR1cm4gYihhLFwibW9kdWxlXCIsZnVuY3Rpb24oKXt2YXIgYT17fTtyZXR1cm4gZnVuY3Rpb24oZixnLGgpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWYpdGhyb3cgYyhcImJhZG5hbWVcIixcIm1vZHVsZVwiKTtnJiZhLmhhc093blByb3BlcnR5KGYpJiYoYVtmXT1udWxsKTtyZXR1cm4gYihhLGYsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsZCxlLGYpe2Z8fChmPWMpO3JldHVybiBmdW5jdGlvbigpe2ZbZXx8XCJwdXNoXCJdKFtiLFxuZCxhcmd1bWVudHNdKTtyZXR1cm4gS319ZnVuY3Rpb24gYihhLGQpe3JldHVybiBmdW5jdGlvbihiLGUpe2UmJkQoZSkmJihlLiQkbW9kdWxlTmFtZT1mKTtjLnB1c2goW2EsZCxhcmd1bWVudHNdKTtyZXR1cm4gS319aWYoIWcpdGhyb3cgZChcIm5vbW9kXCIsZik7dmFyIGM9W10sZT1bXSxzPVtdLEk9YShcIiRpbmplY3RvclwiLFwiaW52b2tlXCIsXCJwdXNoXCIsZSksSz17X2ludm9rZVF1ZXVlOmMsX2NvbmZpZ0Jsb2NrczplLF9ydW5CbG9ja3M6cyxyZXF1aXJlczpnLG5hbWU6Zixwcm92aWRlcjpiKFwiJHByb3ZpZGVcIixcInByb3ZpZGVyXCIpLGZhY3Rvcnk6YihcIiRwcm92aWRlXCIsXCJmYWN0b3J5XCIpLHNlcnZpY2U6YihcIiRwcm92aWRlXCIsXCJzZXJ2aWNlXCIpLHZhbHVlOmEoXCIkcHJvdmlkZVwiLFwidmFsdWVcIiksY29uc3RhbnQ6YShcIiRwcm92aWRlXCIsXCJjb25zdGFudFwiLFwidW5zaGlmdFwiKSxkZWNvcmF0b3I6YihcIiRwcm92aWRlXCIsXCJkZWNvcmF0b3JcIiksYW5pbWF0aW9uOmIoXCIkYW5pbWF0ZVByb3ZpZGVyXCIsXG5cInJlZ2lzdGVyXCIpLGZpbHRlcjpiKFwiJGZpbHRlclByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxjb250cm9sbGVyOmIoXCIkY29udHJvbGxlclByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxkaXJlY3RpdmU6YihcIiRjb21waWxlUHJvdmlkZXJcIixcImRpcmVjdGl2ZVwiKSxjb21wb25lbnQ6YihcIiRjb21waWxlUHJvdmlkZXJcIixcImNvbXBvbmVudFwiKSxjb25maWc6SSxydW46ZnVuY3Rpb24oYSl7cy5wdXNoKGEpO3JldHVybiB0aGlzfX07aCYmSShoKTtyZXR1cm4gS30pfX0pfWZ1bmN0aW9uIGxlKGEpe1QoYSx7Ym9vdHN0cmFwOkFjLGNvcHk6T2EsZXh0ZW5kOlQsbWVyZ2U6WmQsZXF1YWxzOm9hLGVsZW1lbnQ6Qyxmb3JFYWNoOm4saW5qZWN0b3I6ZmIsbm9vcDpCLGJpbmQ6dmMsdG9Kc29uOmViLGZyb21Kc29uOndjLGlkZW50aXR5OmFiLGlzVW5kZWZpbmVkOngsaXNEZWZpbmVkOnksaXNTdHJpbmc6Rixpc0Z1bmN0aW9uOkQsaXNPYmplY3Q6RSxpc051bWJlcjpOLGlzRWxlbWVudDpSYixpc0FycmF5OkwsXG52ZXJzaW9uOm1lLGlzRGF0ZTpWLGxvd2VyY2FzZTpHLHVwcGVyY2FzZTp1YixjYWxsYmFja3M6e2NvdW50ZXI6MH0sZ2V0VGVzdGFiaWxpdHk6aGUsJCRtaW5FcnI6SCwkJGNzcDpFYSxyZWxvYWRXaXRoRGVidWdJbmZvOmdlfSk7VmI9a2UoTyk7VmIoXCJuZ1wiLFtcIm5nTG9jYWxlXCJdLFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS5wcm92aWRlcih7JCRzYW5pdGl6ZVVyaTpuZX0pO2EucHJvdmlkZXIoXCIkY29tcGlsZVwiLEVjKS5kaXJlY3RpdmUoe2E6b2UsaW5wdXQ6RmMsdGV4dGFyZWE6RmMsZm9ybTpwZSxzY3JpcHQ6cWUsc2VsZWN0OnJlLHN0eWxlOnNlLG9wdGlvbjp0ZSxuZ0JpbmQ6dWUsbmdCaW5kSHRtbDp2ZSxuZ0JpbmRUZW1wbGF0ZTp3ZSxuZ0NsYXNzOnhlLG5nQ2xhc3NFdmVuOnllLG5nQ2xhc3NPZGQ6emUsbmdDbG9hazpBZSxuZ0NvbnRyb2xsZXI6QmUsbmdGb3JtOkNlLG5nSGlkZTpEZSxuZ0lmOkVlLG5nSW5jbHVkZTpGZSxuZ0luaXQ6R2UsbmdOb25CaW5kYWJsZTpIZSxcbm5nUGx1cmFsaXplOkllLG5nUmVwZWF0OkplLG5nU2hvdzpLZSxuZ1N0eWxlOkxlLG5nU3dpdGNoOk1lLG5nU3dpdGNoV2hlbjpOZSxuZ1N3aXRjaERlZmF1bHQ6T2UsbmdPcHRpb25zOlBlLG5nVHJhbnNjbHVkZTpRZSxuZ01vZGVsOlJlLG5nTGlzdDpTZSxuZ0NoYW5nZTpUZSxwYXR0ZXJuOkdjLG5nUGF0dGVybjpHYyxyZXF1aXJlZDpIYyxuZ1JlcXVpcmVkOkhjLG1pbmxlbmd0aDpJYyxuZ01pbmxlbmd0aDpJYyxtYXhsZW5ndGg6SmMsbmdNYXhsZW5ndGg6SmMsbmdWYWx1ZTpVZSxuZ01vZGVsT3B0aW9uczpWZX0pLmRpcmVjdGl2ZSh7bmdJbmNsdWRlOldlfSkuZGlyZWN0aXZlKHZiKS5kaXJlY3RpdmUoS2MpO2EucHJvdmlkZXIoeyRhbmNob3JTY3JvbGw6WGUsJGFuaW1hdGU6WWUsJGFuaW1hdGVDc3M6WmUsJCRhbmltYXRlSnM6JGUsJCRhbmltYXRlUXVldWU6YWYsJCRBbmltYXRlUnVubmVyOmJmLCQkYW5pbWF0ZUFzeW5jUnVuOmNmLCRicm93c2VyOmRmLCRjYWNoZUZhY3Rvcnk6ZWYsXG4kY29udHJvbGxlcjpmZiwkZG9jdW1lbnQ6Z2YsJGV4Y2VwdGlvbkhhbmRsZXI6aGYsJGZpbHRlcjpMYywkJGZvcmNlUmVmbG93OmpmLCRpbnRlcnBvbGF0ZTprZiwkaW50ZXJ2YWw6bGYsJGh0dHA6bWYsJGh0dHBQYXJhbVNlcmlhbGl6ZXI6bmYsJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2U6b2YsJGh0dHBCYWNrZW5kOnBmLCR4aHJGYWN0b3J5OnFmLCRsb2NhdGlvbjpyZiwkbG9nOnNmLCRwYXJzZTp0Ziwkcm9vdFNjb3BlOnVmLCRxOnZmLCQkcTp3Ziwkc2NlOnhmLCRzY2VEZWxlZ2F0ZTp5Ziwkc25pZmZlcjp6ZiwkdGVtcGxhdGVDYWNoZTpBZiwkdGVtcGxhdGVSZXF1ZXN0OkJmLCQkdGVzdGFiaWxpdHk6Q2YsJHRpbWVvdXQ6RGYsJHdpbmRvdzpFZiwkJHJBRjpGZiwkJGpxTGl0ZTpHZiwkJEhhc2hNYXA6SGYsJCRjb29raWVSZWFkZXI6SWZ9KX1dKX1mdW5jdGlvbiBnYihhKXtyZXR1cm4gYS5yZXBsYWNlKEpmLGZ1bmN0aW9uKGEsZCxjLGUpe3JldHVybiBlP2MudG9VcHBlckNhc2UoKTpcbmN9KS5yZXBsYWNlKEtmLFwiTW96JDFcIil9ZnVuY3Rpb24gTWMoYSl7YT1hLm5vZGVUeXBlO3JldHVybiAxPT09YXx8IWF8fDk9PT1hfWZ1bmN0aW9uIE5jKGEsYil7dmFyIGQsYyxlPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGY9W107aWYoV2IudGVzdChhKSl7ZD1kfHxlLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7Yz0oTGYuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7Yz1kYVtjXXx8ZGEuX2RlZmF1bHQ7ZC5pbm5lckhUTUw9Y1sxXSthLnJlcGxhY2UoTWYsXCI8JDE+PC8kMj5cIikrY1syXTtmb3IoYz1jWzBdO2MtLTspZD1kLmxhc3RDaGlsZDtmPWRiKGYsZC5jaGlsZE5vZGVzKTtkPWUuZmlyc3RDaGlsZDtkLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBmLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhKSk7ZS50ZXh0Q29udGVudD1cIlwiO2UuaW5uZXJIVE1MPVwiXCI7bihmLGZ1bmN0aW9uKGEpe2UuYXBwZW5kQ2hpbGQoYSl9KTtyZXR1cm4gZX1mdW5jdGlvbiBPYyhhLFxuYil7dmFyIGQ9YS5wYXJlbnROb2RlO2QmJmQucmVwbGFjZUNoaWxkKGIsYSk7Yi5hcHBlbmRDaGlsZChhKX1mdW5jdGlvbiBVKGEpe2lmKGEgaW5zdGFuY2VvZiBVKXJldHVybiBhO3ZhciBiO0YoYSkmJihhPVgoYSksYj0hMCk7aWYoISh0aGlzIGluc3RhbmNlb2YgVSkpe2lmKGImJlwiPFwiIT1hLmNoYXJBdCgwKSl0aHJvdyBYYihcIm5vc2VsXCIpO3JldHVybiBuZXcgVShhKX1pZihiKXtiPVc7dmFyIGQ7YT0oZD1OZi5leGVjKGEpKT9bYi5jcmVhdGVFbGVtZW50KGRbMV0pXTooZD1OYyhhLGIpKT9kLmNoaWxkTm9kZXM6W119UGModGhpcyxhKX1mdW5jdGlvbiBZYihhKXtyZXR1cm4gYS5jbG9uZU5vZGUoITApfWZ1bmN0aW9uIHdiKGEsYil7Ynx8aGIoYSk7aWYoYS5xdWVyeVNlbGVjdG9yQWxsKWZvcih2YXIgZD1hLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpLGM9MCxlPWQubGVuZ3RoO2M8ZTtjKyspaGIoZFtjXSl9ZnVuY3Rpb24gUWMoYSxiLGQsYyl7aWYoeShjKSl0aHJvdyBYYihcIm9mZmFyZ3NcIik7XG52YXIgZT0oYz14YihhKSkmJmMuZXZlbnRzLGY9YyYmYy5oYW5kbGU7aWYoZilpZihiKXt2YXIgZz1mdW5jdGlvbihiKXt2YXIgYz1lW2JdO3koZCkmJmNiKGN8fFtdLGQpO3koZCkmJmMmJjA8Yy5sZW5ndGh8fChhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixmLCExKSxkZWxldGUgZVtiXSl9O24oYi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7ZyhhKTt5YlthXSYmZyh5YlthXSl9KX1lbHNlIGZvcihiIGluIGUpXCIkZGVzdHJveVwiIT09YiYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsZiwhMSksZGVsZXRlIGVbYl19ZnVuY3Rpb24gaGIoYSxiKXt2YXIgZD1hLm5nMzM5LGM9ZCYmaWJbZF07YyYmKGI/ZGVsZXRlIGMuZGF0YVtiXTooYy5oYW5kbGUmJihjLmV2ZW50cy4kZGVzdHJveSYmYy5oYW5kbGUoe30sXCIkZGVzdHJveVwiKSxRYyhhKSksZGVsZXRlIGliW2RdLGEubmczMzk9dikpfWZ1bmN0aW9uIHhiKGEsYil7dmFyIGQ9YS5uZzMzOSxkPWQmJmliW2RdO2ImJiFkJiYoYS5uZzMzOT1kPSsrT2YsXG5kPWliW2RdPXtldmVudHM6e30sZGF0YTp7fSxoYW5kbGU6dn0pO3JldHVybiBkfWZ1bmN0aW9uIFpiKGEsYixkKXtpZihNYyhhKSl7dmFyIGM9eShkKSxlPSFjJiZiJiYhRShiKSxmPSFiO2E9KGE9eGIoYSwhZSkpJiZhLmRhdGE7aWYoYylhW2JdPWQ7ZWxzZXtpZihmKXJldHVybiBhO2lmKGUpcmV0dXJuIGEmJmFbYl07VChhLGIpfX19ZnVuY3Rpb24gemIoYSxiKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGU/LTE8KFwiIFwiKyhhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIikuaW5kZXhPZihcIiBcIitiK1wiIFwiKTohMX1mdW5jdGlvbiBBYihhLGIpe2ImJmEuc2V0QXR0cmlidXRlJiZuKGIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe2Euc2V0QXR0cmlidXRlKFwiY2xhc3NcIixYKChcIiBcIisoYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXCIgXCIpLnJlcGxhY2UoXCIgXCIrWChiKStcIiBcIixcIiBcIikpKX0pfWZ1bmN0aW9uIEJiKGEsXG5iKXtpZihiJiZhLnNldEF0dHJpYnV0ZSl7dmFyIGQ9KFwiIFwiKyhhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIik7bihiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXthPVgoYSk7LTE9PT1kLmluZGV4T2YoXCIgXCIrYStcIiBcIikmJihkKz1hK1wiIFwiKX0pO2Euc2V0QXR0cmlidXRlKFwiY2xhc3NcIixYKGQpKX19ZnVuY3Rpb24gUGMoYSxiKXtpZihiKWlmKGIubm9kZVR5cGUpYVthLmxlbmd0aCsrXT1iO2Vsc2V7dmFyIGQ9Yi5sZW5ndGg7aWYoXCJudW1iZXJcIj09PXR5cGVvZiBkJiZiLndpbmRvdyE9PWIpe2lmKGQpZm9yKHZhciBjPTA7YzxkO2MrKylhW2EubGVuZ3RoKytdPWJbY119ZWxzZSBhW2EubGVuZ3RoKytdPWJ9fWZ1bmN0aW9uIFJjKGEsYil7cmV0dXJuIENiKGEsXCIkXCIrKGJ8fFwibmdDb250cm9sbGVyXCIpK1wiQ29udHJvbGxlclwiKX1mdW5jdGlvbiBDYihhLGIsZCl7OT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO2ZvcihiPVxuTChiKT9iOltiXTthOyl7Zm9yKHZhciBjPTAsZT1iLmxlbmd0aDtjPGU7YysrKWlmKHkoZD1DLmRhdGEoYSxiW2NdKSkpcmV0dXJuIGQ7YT1hLnBhcmVudE5vZGV8fDExPT09YS5ub2RlVHlwZSYmYS5ob3N0fX1mdW5jdGlvbiBTYyhhKXtmb3Iod2IoYSwhMCk7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gJGIoYSxiKXtifHx3YihhKTt2YXIgZD1hLnBhcmVudE5vZGU7ZCYmZC5yZW1vdmVDaGlsZChhKX1mdW5jdGlvbiBQZihhLGIpe2I9Ynx8TztpZihcImNvbXBsZXRlXCI9PT1iLmRvY3VtZW50LnJlYWR5U3RhdGUpYi5zZXRUaW1lb3V0KGEpO2Vsc2UgQyhiKS5vbihcImxvYWRcIixhKX1mdW5jdGlvbiBUYyhhLGIpe3ZhciBkPURiW2IudG9Mb3dlckNhc2UoKV07cmV0dXJuIGQmJlVjW3JhKGEpXSYmZH1mdW5jdGlvbiBRZihhLGIpe3ZhciBkPWZ1bmN0aW9uKGMsZCl7Yy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYy5kZWZhdWx0UHJldmVudGVkfTtcbnZhciBmPWJbZHx8Yy50eXBlXSxnPWY/Zi5sZW5ndGg6MDtpZihnKXtpZih4KGMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKSl7dmFyIGg9Yy5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb247Yy5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb249ZnVuY3Rpb24oKXtjLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD0hMDtjLnN0b3BQcm9wYWdhdGlvbiYmYy5zdG9wUHJvcGFnYXRpb24oKTtoJiZoLmNhbGwoYyl9fWMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMD09PWMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkfTt2YXIgaz1mLnNwZWNpYWxIYW5kbGVyV3JhcHBlcnx8UmY7MTxnJiYoZj1uYShmKSk7Zm9yKHZhciBsPTA7bDxnO2wrKyljLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCl8fGsoYSxjLGZbbF0pfX07ZC5lbGVtPWE7cmV0dXJuIGR9ZnVuY3Rpb24gUmYoYSxiLGQpe2QuY2FsbChhLGIpfWZ1bmN0aW9uIFNmKGEsYixcbmQpe3ZhciBjPWIucmVsYXRlZFRhcmdldDtjJiYoYz09PWF8fFRmLmNhbGwoYSxjKSl8fGQuY2FsbChhLGIpfWZ1bmN0aW9uIEdmKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIFQoVSx7aGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXthLmF0dHImJihhPWFbMF0pO3JldHVybiB6YihhLGIpfSxhZGRDbGFzczpmdW5jdGlvbihhLGIpe2EuYXR0ciYmKGE9YVswXSk7cmV0dXJuIEJiKGEsYil9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYil7YS5hdHRyJiYoYT1hWzBdKTtyZXR1cm4gQWIoYSxiKX19KX19ZnVuY3Rpb24gRmEoYSxiKXt2YXIgZD1hJiZhLiQkaGFzaEtleTtpZihkKXJldHVyblwiZnVuY3Rpb25cIj09PXR5cGVvZiBkJiYoZD1hLiQkaGFzaEtleSgpKSxkO2Q9dHlwZW9mIGE7cmV0dXJuIGQ9XCJmdW5jdGlvblwiPT1kfHxcIm9iamVjdFwiPT1kJiZudWxsIT09YT9hLiQkaGFzaEtleT1kK1wiOlwiKyhifHxZZCkoKTpkK1wiOlwiK2F9ZnVuY3Rpb24gVWEoYSxiKXtpZihiKXt2YXIgZD0wO3RoaXMubmV4dFVpZD1cbmZ1bmN0aW9uKCl7cmV0dXJuKytkfX1uKGEsdGhpcy5wdXQsdGhpcyl9ZnVuY3Rpb24gVmMoYSl7YT1hLnRvU3RyaW5nKCkucmVwbGFjZShVZixcIlwiKTtyZXR1cm4gYS5tYXRjaChWZil8fGEubWF0Y2goV2YpfWZ1bmN0aW9uIFhmKGEpe3JldHVybihhPVZjKGEpKT9cImZ1bmN0aW9uKFwiKyhhWzFdfHxcIlwiKS5yZXBsYWNlKC9bXFxzXFxyXFxuXSsvLFwiIFwiKStcIilcIjpcImZuXCJ9ZnVuY3Rpb24gZmIoYSxiKXtmdW5jdGlvbiBkKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2lmKEUoYikpbihiLHNjKGEpKTtlbHNlIHJldHVybiBhKGIsYyl9fWZ1bmN0aW9uIGMoYSxiKXtUYShhLFwic2VydmljZVwiKTtpZihEKGIpfHxMKGIpKWI9cy5pbnN0YW50aWF0ZShiKTtpZighYi4kZ2V0KXRocm93IEdhKFwicGdldFwiLGEpO3JldHVybiByW2ErXCJQcm92aWRlclwiXT1ifWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYz10Lmludm9rZShiLHRoaXMpO2lmKHgoYykpdGhyb3cgR2EoXCJ1bmRlZlwiLGEpO1xucmV0dXJuIGN9fWZ1bmN0aW9uIGYoYSxiLGQpe3JldHVybiBjKGEseyRnZXQ6ITEhPT1kP2UoYSxiKTpifSl9ZnVuY3Rpb24gZyhhKXtzYih4KGEpfHxMKGEpLFwibW9kdWxlc1RvTG9hZFwiLFwibm90IGFuIGFycmF5XCIpO3ZhciBiPVtdLGM7bihhLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoYSl7dmFyIGIsYztiPTA7Zm9yKGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGU9YVtiXSxmPXMuZ2V0KGVbMF0pO2ZbZVsxXV0uYXBwbHkoZixlWzJdKX19aWYoIW0uZ2V0KGEpKXttLnB1dChhLCEwKTt0cnl7RihhKT8oYz1WYihhKSxiPWIuY29uY2F0KGcoYy5yZXF1aXJlcykpLmNvbmNhdChjLl9ydW5CbG9ja3MpLGQoYy5faW52b2tlUXVldWUpLGQoYy5fY29uZmlnQmxvY2tzKSk6RChhKT9iLnB1c2gocy5pbnZva2UoYSkpOkwoYSk/Yi5wdXNoKHMuaW52b2tlKGEpKTpTYShhLFwibW9kdWxlXCIpfWNhdGNoKGUpe3Rocm93IEwoYSkmJihhPWFbYS5sZW5ndGgtMV0pLGUubWVzc2FnZSYmZS5zdGFjayYmXG4tMT09ZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSkmJihlPWUubWVzc2FnZStcIlxcblwiK2Uuc3RhY2spLEdhKFwibW9kdWxlcnJcIixhLGUuc3RhY2t8fGUubWVzc2FnZXx8ZSk7fX19KTtyZXR1cm4gYn1mdW5jdGlvbiBoKGEsYyl7ZnVuY3Rpb24gZChiLGUpe2lmKGEuaGFzT3duUHJvcGVydHkoYikpe2lmKGFbYl09PT1rKXRocm93IEdhKFwiY2RlcFwiLGIrXCIgPC0gXCIrbC5qb2luKFwiIDwtIFwiKSk7cmV0dXJuIGFbYl19dHJ5e3JldHVybiBsLnVuc2hpZnQoYiksYVtiXT1rLGFbYl09YyhiLGUpfWNhdGNoKGYpe3Rocm93IGFbYl09PT1rJiZkZWxldGUgYVtiXSxmO31maW5hbGx5e2wuc2hpZnQoKX19ZnVuY3Rpb24gZShhLGMsZil7dmFyIGc9W107YT1mYi4kJGFubm90YXRlKGEsYixmKTtmb3IodmFyIGg9MCxrPWEubGVuZ3RoO2g8aztoKyspe3ZhciBsPWFbaF07aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBsKXRocm93IEdhKFwiaXRrblwiLGwpO2cucHVzaChjJiZjLmhhc093blByb3BlcnR5KGwpP2NbbF06XG5kKGwsZikpfXJldHVybiBnfXJldHVybntpbnZva2U6ZnVuY3Rpb24oYSxiLGMsZCl7XCJzdHJpbmdcIj09PXR5cGVvZiBjJiYoZD1jLGM9bnVsbCk7Yz1lKGEsYyxkKTtMKGEpJiYoYT1hW2EubGVuZ3RoLTFdKTtkPTExPj14YT8hMTpcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSYmL14oPzpjbGFzc1xcc3xjb25zdHJ1Y3RvclxcKCkvLnRlc3QoRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkpO3JldHVybiBkPyhjLnVuc2hpZnQobnVsbCksbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShhLGMpKSk6YS5hcHBseShiLGMpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9TChhKT9hW2EubGVuZ3RoLTFdOmE7YT1lKGEsYixjKTthLnVuc2hpZnQobnVsbCk7cmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoZCxhKSl9LGdldDpkLGFubm90YXRlOmZiLiQkYW5ub3RhdGUsaGFzOmZ1bmN0aW9uKGIpe3JldHVybiByLmhhc093blByb3BlcnR5KGIrXG5cIlByb3ZpZGVyXCIpfHxhLmhhc093blByb3BlcnR5KGIpfX19Yj0hMD09PWI7dmFyIGs9e30sbD1bXSxtPW5ldyBVYShbXSwhMCkscj17JHByb3ZpZGU6e3Byb3ZpZGVyOmQoYyksZmFjdG9yeTpkKGYpLHNlcnZpY2U6ZChmdW5jdGlvbihhLGIpe3JldHVybiBmKGEsW1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5zdGFudGlhdGUoYil9XSl9KSx2YWx1ZTpkKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYSxiYShiKSwhMSl9KSxjb25zdGFudDpkKGZ1bmN0aW9uKGEsYil7VGEoYSxcImNvbnN0YW50XCIpO3JbYV09YjtJW2FdPWJ9KSxkZWNvcmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1zLmdldChhK1wiUHJvdmlkZXJcIiksZD1jLiRnZXQ7Yy4kZ2V0PWZ1bmN0aW9uKCl7dmFyIGE9dC5pbnZva2UoZCxjKTtyZXR1cm4gdC5pbnZva2UoYixudWxsLHskZGVsZWdhdGU6YX0pfX19fSxzPXIuJGluamVjdG9yPWgocixmdW5jdGlvbihhLGIpe2lhLmlzU3RyaW5nKGIpJiZsLnB1c2goYik7XG50aHJvdyBHYShcInVucHJcIixsLmpvaW4oXCIgPC0gXCIpKTt9KSxJPXt9LEs9aChJLGZ1bmN0aW9uKGEsYil7dmFyIGM9cy5nZXQoYStcIlByb3ZpZGVyXCIsYik7cmV0dXJuIHQuaW52b2tlKGMuJGdldCxjLHYsYSl9KSx0PUs7ci4kaW5qZWN0b3JQcm92aWRlcj17JGdldDpiYShLKX07dmFyIHA9ZyhhKSx0PUsuZ2V0KFwiJGluamVjdG9yXCIpO3Quc3RyaWN0RGk9YjtuKHAsZnVuY3Rpb24oYSl7YSYmdC5pbnZva2UoYSl9KTtyZXR1cm4gdH1mdW5jdGlvbiBYZSgpe3ZhciBhPSEwO3RoaXMuZGlzYWJsZUF1dG9TY3JvbGxpbmc9ZnVuY3Rpb24oKXthPSExfTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGxvY2F0aW9uXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYixkLGMpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9bnVsbDtBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoXCJhXCI9PT1yYShhKSlyZXR1cm4gYj1hLCEwfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhKXtpZihhKXthLnNjcm9sbEludG9WaWV3KCk7XG52YXIgYztjPWcueU9mZnNldDtEKGMpP2M9YygpOlJiKGMpPyhjPWNbMF0sYz1cImZpeGVkXCIhPT1iLmdldENvbXB1dGVkU3R5bGUoYykucG9zaXRpb24/MDpjLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSk6TihjKXx8KGM9MCk7YyYmKGE9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsYi5zY3JvbGxCeSgwLGEtYykpfWVsc2UgYi5zY3JvbGxUbygwLDApfWZ1bmN0aW9uIGcoYSl7YT1GKGEpP2E6ZC5oYXNoKCk7dmFyIGI7YT8oYj1oLmdldEVsZW1lbnRCeUlkKGEpKT9mKGIpOihiPWUoaC5nZXRFbGVtZW50c0J5TmFtZShhKSkpP2YoYik6XCJ0b3BcIj09PWEmJmYobnVsbCk6ZihudWxsKX12YXIgaD1iLmRvY3VtZW50O2EmJmMuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGQuaGFzaCgpfSxmdW5jdGlvbihhLGIpe2E9PT1iJiZcIlwiPT09YXx8UGYoZnVuY3Rpb24oKXtjLiRldmFsQXN5bmMoZyl9KX0pO3JldHVybiBnfV19ZnVuY3Rpb24gamIoYSxiKXtpZighYSYmIWIpcmV0dXJuXCJcIjtcbmlmKCFhKXJldHVybiBiO2lmKCFiKXJldHVybiBhO0woYSkmJihhPWEuam9pbihcIiBcIikpO0woYikmJihiPWIuam9pbihcIiBcIikpO3JldHVybiBhK1wiIFwiK2J9ZnVuY3Rpb24gWWYoYSl7RihhKSYmKGE9YS5zcGxpdChcIiBcIikpO3ZhciBiPVooKTtuKGEsZnVuY3Rpb24oYSl7YS5sZW5ndGgmJihiW2FdPSEwKX0pO3JldHVybiBifWZ1bmN0aW9uIEhhKGEpe3JldHVybiBFKGEpP2E6e319ZnVuY3Rpb24gWmYoYSxiLGQsYyl7ZnVuY3Rpb24gZShhKXt0cnl7YS5hcHBseShudWxsLHdhLmNhbGwoYXJndW1lbnRzLDEpKX1maW5hbGx5e2lmKEstLSwwPT09Sylmb3IoO3QubGVuZ3RoOyl0cnl7dC5wb3AoKSgpfWNhdGNoKGIpe2QuZXJyb3IoYil9fX1mdW5jdGlvbiBmKCl7ej1udWxsO2coKTtoKCl9ZnVuY3Rpb24gZygpe2E6e3RyeXtwPW0uc3RhdGU7YnJlYWsgYX1jYXRjaChhKXt9cD12b2lkIDB9cD14KHApP251bGw6cDtvYShwLCQpJiYocD0kKTskPXB9ZnVuY3Rpb24gaCgpe2lmKHUhPT1rLnVybCgpfHxcbnchPT1wKXU9ay51cmwoKSx3PXAsbihBLGZ1bmN0aW9uKGEpe2Eoay51cmwoKSxwKX0pfXZhciBrPXRoaXMsbD1hLmxvY2F0aW9uLG09YS5oaXN0b3J5LHI9YS5zZXRUaW1lb3V0LHM9YS5jbGVhclRpbWVvdXQsST17fTtrLmlzTW9jaz0hMTt2YXIgSz0wLHQ9W107ay4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0PWU7ay4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50PWZ1bmN0aW9uKCl7SysrfTtrLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHM9ZnVuY3Rpb24oYSl7MD09PUs/YSgpOnQucHVzaChhKX07dmFyIHAsdyx1PWwuaHJlZixsYT1iLmZpbmQoXCJiYXNlXCIpLHo9bnVsbDtnKCk7dz1wO2sudXJsPWZ1bmN0aW9uKGIsZCxlKXt4KGUpJiYoZT1udWxsKTtsIT09YS5sb2NhdGlvbiYmKGw9YS5sb2NhdGlvbik7bSE9PWEuaGlzdG9yeSYmKG09YS5oaXN0b3J5KTtpZihiKXt2YXIgZj13PT09ZTtpZih1PT09YiYmKCFjLmhpc3Rvcnl8fGYpKXJldHVybiBrO3ZhciBoPVxudSYmSWEodSk9PT1JYShiKTt1PWI7dz1lO2lmKCFjLmhpc3Rvcnl8fGgmJmYpe2lmKCFofHx6KXo9YjtkP2wucmVwbGFjZShiKTpoPyhkPWwsZT1iLmluZGV4T2YoXCIjXCIpLGU9LTE9PT1lP1wiXCI6Yi5zdWJzdHIoZSksZC5oYXNoPWUpOmwuaHJlZj1iO2wuaHJlZiE9PWImJih6PWIpfWVsc2UgbVtkP1wicmVwbGFjZVN0YXRlXCI6XCJwdXNoU3RhdGVcIl0oZSxcIlwiLGIpLGcoKSx3PXA7cmV0dXJuIGt9cmV0dXJuIHp8fGwuaHJlZi5yZXBsYWNlKC8lMjcvZyxcIidcIil9O2suc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gcH07dmFyIEE9W10sUT0hMSwkPW51bGw7ay5vblVybENoYW5nZT1mdW5jdGlvbihiKXtpZighUSl7aWYoYy5oaXN0b3J5KUMoYSkub24oXCJwb3BzdGF0ZVwiLGYpO0MoYSkub24oXCJoYXNoY2hhbmdlXCIsZik7UT0hMH1BLnB1c2goYik7cmV0dXJuIGJ9O2suJCRhcHBsaWNhdGlvbkRlc3Ryb3llZD1mdW5jdGlvbigpe0MoYSkub2ZmKFwiaGFzaGNoYW5nZSBwb3BzdGF0ZVwiLGYpfTtrLiQkY2hlY2tVcmxDaGFuZ2U9XG5oO2suYmFzZUhyZWY9ZnVuY3Rpb24oKXt2YXIgYT1sYS5hdHRyKFwiaHJlZlwiKTtyZXR1cm4gYT9hLnJlcGxhY2UoL14oaHR0cHM/XFw6KT9cXC9cXC9bXlxcL10qLyxcIlwiKTpcIlwifTtrLmRlZmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM7SysrO2M9cihmdW5jdGlvbigpe2RlbGV0ZSBJW2NdO2UoYSl9LGJ8fDApO0lbY109ITA7cmV0dXJuIGN9O2suZGVmZXIuY2FuY2VsPWZ1bmN0aW9uKGEpe3JldHVybiBJW2FdPyhkZWxldGUgSVthXSxzKGEpLGUoQiksITApOiExfX1mdW5jdGlvbiBkZigpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9nXCIsXCIkc25pZmZlclwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuIG5ldyBaZihhLGMsYixkKX1dfWZ1bmN0aW9uIGVmKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMpe2Z1bmN0aW9uIGUoYSl7YSE9ciYmKHM/cz09YSYmKHM9YS5uKTpzPWEsZihhLm4sYS5wKSxmKGEscikscj1hLHIubj1udWxsKX1mdW5jdGlvbiBmKGEsXG5iKXthIT1iJiYoYSYmKGEucD1iKSxiJiYoYi5uPWEpKX1pZihhIGluIGIpdGhyb3cgSChcIiRjYWNoZUZhY3RvcnlcIikoXCJpaWRcIixhKTt2YXIgZz0wLGg9VCh7fSxjLHtpZDphfSksaz1aKCksbD1jJiZjLmNhcGFjaXR5fHxOdW1iZXIuTUFYX1ZBTFVFLG09WigpLHI9bnVsbCxzPW51bGw7cmV0dXJuIGJbYV09e3B1dDpmdW5jdGlvbihhLGIpe2lmKCF4KGIpKXtpZihsPE51bWJlci5NQVhfVkFMVUUpe3ZhciBjPW1bYV18fChtW2FdPXtrZXk6YX0pO2UoYyl9YSBpbiBrfHxnKys7a1thXT1iO2c+bCYmdGhpcy5yZW1vdmUocy5rZXkpO3JldHVybiBifX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bVthXTtpZighYilyZXR1cm47ZShiKX1yZXR1cm4ga1thXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bVthXTtpZighYilyZXR1cm47Yj09ciYmKHI9Yi5wKTtiPT1zJiYocz1iLm4pO2YoYi5uLGIucCk7ZGVsZXRlIG1bYV19YSBpblxuayYmKGRlbGV0ZSBrW2FdLGctLSl9LHJlbW92ZUFsbDpmdW5jdGlvbigpe2s9WigpO2c9MDttPVooKTtyPXM9bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe209aD1rPW51bGw7ZGVsZXRlIGJbYV19LGluZm86ZnVuY3Rpb24oKXtyZXR1cm4gVCh7fSxoLHtzaXplOmd9KX19fXZhciBiPXt9O2EuaW5mbz1mdW5jdGlvbigpe3ZhciBhPXt9O24oYixmdW5jdGlvbihiLGUpe2FbZV09Yi5pbmZvKCl9KTtyZXR1cm4gYX07YS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGJbYV19O3JldHVybiBhfX1mdW5jdGlvbiBBZigpe3RoaXMuJGdldD1bXCIkY2FjaGVGYWN0b3J5XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoXCJ0ZW1wbGF0ZXNcIil9XX1mdW5jdGlvbiBFYyhhLGIpe2Z1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPS9eXFxzKihbQCY8XXw9KFxcKj8pKShcXD8/KVxccyooXFx3KilcXHMqJC8sZT17fTtuKGEsZnVuY3Rpb24oYSxmKXt2YXIgZz1hLm1hdGNoKGQpO2lmKCFnKXRocm93IGphKFwiaXNjcFwiLGIsZixhLGM/XG5cImNvbnRyb2xsZXIgYmluZGluZ3MgZGVmaW5pdGlvblwiOlwiaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uXCIpO2VbZl09e21vZGU6Z1sxXVswXSxjb2xsZWN0aW9uOlwiKlwiPT09Z1syXSxvcHRpb25hbDpcIj9cIj09PWdbM10sYXR0ck5hbWU6Z1s0XXx8Zn19KTtyZXR1cm4gZX1mdW5jdGlvbiBjKGEpe3ZhciBiPWEuY2hhckF0KDApO2lmKCFifHxiIT09RyhiKSl0aHJvdyBqYShcImJhZGRpclwiLGEpO2lmKGEhPT1hLnRyaW0oKSl0aHJvdyBqYShcImJhZGRpclwiLGEpO312YXIgZT17fSxmPS9eXFxzKmRpcmVjdGl2ZVxcOlxccyooW1xcd1xcLV0rKVxccysoLiopJC8sZz0vKChbXFx3XFwtXSspKD86XFw6KFteO10rKSk/Oz8pLyxoPWJlKFwibmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldFwiKSxrPS9eKD86KFxcXlxcXj8pPyhcXD8pPyhcXF5cXF4/KT8pPy8sbD0vXihvblthLXpdK3xmb3JtYWN0aW9uKSQvO3RoaXMuZGlyZWN0aXZlPWZ1bmN0aW9uIHMoYixmKXtUYShiLFwiZGlyZWN0aXZlXCIpO0YoYik/KGMoYiksc2IoZixcImRpcmVjdGl2ZUZhY3RvcnlcIiksXG5lLmhhc093blByb3BlcnR5KGIpfHwoZVtiXT1bXSxhLmZhY3RvcnkoYitcIkRpcmVjdGl2ZVwiLFtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihhLGMpe3ZhciBmPVtdO24oZVtiXSxmdW5jdGlvbihlLGcpe3RyeXt2YXIgaD1hLmludm9rZShlKTtEKGgpP2g9e2NvbXBpbGU6YmEoaCl9OiFoLmNvbXBpbGUmJmgubGluayYmKGguY29tcGlsZT1iYShoLmxpbmspKTtoLnByaW9yaXR5PWgucHJpb3JpdHl8fDA7aC5pbmRleD1nO2gubmFtZT1oLm5hbWV8fGI7aC5yZXF1aXJlPWgucmVxdWlyZXx8aC5jb250cm9sbGVyJiZoLm5hbWU7aC5yZXN0cmljdD1oLnJlc3RyaWN0fHxcIkVBXCI7dmFyIGs9aCxsPWgsbT1oLm5hbWUscz17aXNvbGF0ZVNjb3BlOm51bGwsYmluZFRvQ29udHJvbGxlcjpudWxsfTtFKGwuc2NvcGUpJiYoITA9PT1sLmJpbmRUb0NvbnRyb2xsZXI/KHMuYmluZFRvQ29udHJvbGxlcj1kKGwuc2NvcGUsbSwhMCkscy5pc29sYXRlU2NvcGU9e30pOnMuaXNvbGF0ZVNjb3BlPVxuZChsLnNjb3BlLG0sITEpKTtFKGwuYmluZFRvQ29udHJvbGxlcikmJihzLmJpbmRUb0NvbnRyb2xsZXI9ZChsLmJpbmRUb0NvbnRyb2xsZXIsbSwhMCkpO2lmKEUocy5iaW5kVG9Db250cm9sbGVyKSl7dmFyIFA9bC5jb250cm9sbGVyLFM9bC5jb250cm9sbGVyQXM7aWYoIVApdGhyb3cgamEoXCJub2N0cmxcIixtKTtpZighV2MoUCxTKSl0aHJvdyBqYShcIm5vaWRlbnRcIixtKTt9dmFyIG1hPWsuJCRiaW5kaW5ncz1zO0UobWEuaXNvbGF0ZVNjb3BlKSYmKGguJCRpc29sYXRlQmluZGluZ3M9bWEuaXNvbGF0ZVNjb3BlKTtoLiQkbW9kdWxlTmFtZT1lLiQkbW9kdWxlTmFtZTtmLnB1c2goaCl9Y2F0Y2goSyl7YyhLKX19KTtyZXR1cm4gZn1dKSksZVtiXS5wdXNoKGYpKTpuKGIsc2MocykpO3JldHVybiB0aGlzfTt0aGlzLmNvbXBvbmVudD1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gZShiKXtyZXR1cm4gRChiKXx8TChiKT9mdW5jdGlvbihjLGQpe3JldHVybiBhLmludm9rZShiLFxudGhpcyx7JGVsZW1lbnQ6YywkYXR0cnM6ZH0pfTpifXZhciBmPWIudGVtcGxhdGV8fGIudGVtcGxhdGVVcmw/Yi50ZW1wbGF0ZTpcIlwiO3JldHVybntjb250cm9sbGVyOmQsY29udHJvbGxlckFzOldjKGIuY29udHJvbGxlcil8fGIuY29udHJvbGxlckFzfHxcIiRjdHJsXCIsdGVtcGxhdGU6ZShmKSx0ZW1wbGF0ZVVybDplKGIudGVtcGxhdGVVcmwpLHRyYW5zY2x1ZGU6Yi50cmFuc2NsdWRlLHNjb3BlOnt9LGJpbmRUb0NvbnRyb2xsZXI6Yi5iaW5kaW5nc3x8e30scmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpiLnJlcXVpcmV9fXZhciBkPWIuY29udHJvbGxlcnx8ZnVuY3Rpb24oKXt9O24oYixmdW5jdGlvbihhLGIpe1wiJFwiPT09Yi5jaGFyQXQoMCkmJihjW2JdPWEpfSk7Yy4kaW5qZWN0PVtcIiRpbmplY3RvclwiXTtyZXR1cm4gdGhpcy5kaXJlY3RpdmUoYSxjKX07dGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYi5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdChhKSxcbnRoaXMpOmIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSk/KGIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KGEpLHRoaXMpOmIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KCl9O3ZhciBtPSEwO3RoaXMuZGVidWdJbmZvRW5hYmxlZD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8obT1hLHRoaXMpOm19O3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiR0ZW1wbGF0ZVJlcXVlc3RcIixcIiRwYXJzZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRyb290U2NvcGVcIixcIiRzY2VcIixcIiRhbmltYXRlXCIsXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSxiLGMsZCxwLHcsdSxsYSx6LEEpe2Z1bmN0aW9uIFEoYSxiLGMpe2JhLmlubmVySFRNTD1cIjxzcGFuIFwiK2IrXCI+XCI7Yj1iYS5maXJzdENoaWxkLmF0dHJpYnV0ZXM7dmFyIGQ9YlswXTtiLnJlbW92ZU5hbWVkSXRlbShkLm5hbWUpO1xuZC52YWx1ZT1jO2EuYXR0cmlidXRlcy5zZXROYW1lZEl0ZW0oZCl9ZnVuY3Rpb24gJChhLGIpe3RyeXthLmFkZENsYXNzKGIpfWNhdGNoKGMpe319ZnVuY3Rpb24gTShhLGIsYyxkLGUpe2EgaW5zdGFuY2VvZiBDfHwoYT1DKGEpKTtmb3IodmFyIGY9L1xcUysvLGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspe3ZhciBrPWFbZ107ay5ub2RlVHlwZT09PVBhJiZrLm5vZGVWYWx1ZS5tYXRjaChmKSYmT2MoayxhW2ddPVcuY3JlYXRlRWxlbWVudChcInNwYW5cIikpfXZhciBsPVAoYSxiLGEsYyxkLGUpO00uJCRhZGRTY29wZUNsYXNzKGEpO3ZhciBtPW51bGw7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtzYihiLFwic2NvcGVcIik7ZSYmZS5uZWVkc05ld1Njb3BlJiYoYj1iLiRwYXJlbnQuJG5ldygpKTtkPWR8fHt9O3ZhciBmPWQucGFyZW50Qm91bmRUcmFuc2NsdWRlRm4sZz1kLnRyYW5zY2x1ZGVDb250cm9sbGVycztkPWQuZnV0dXJlUGFyZW50RWxlbWVudDtmJiZmLiQkYm91bmRUcmFuc2NsdWRlJiZcbihmPWYuJCRib3VuZFRyYW5zY2x1ZGUpO218fChtPShkPWQmJmRbMF0pP1wiZm9yZWlnbm9iamVjdFwiIT09cmEoZCkmJmdhLmNhbGwoZCkubWF0Y2goL1NWRy8pP1wic3ZnXCI6XCJodG1sXCI6XCJodG1sXCIpO2Q9XCJodG1sXCIhPT1tP0MoVShtLEMoXCI8ZGl2PlwiKS5hcHBlbmQoYSkuaHRtbCgpKSk6Yz9SYS5jbG9uZS5jYWxsKGEpOmE7aWYoZylmb3IodmFyIGggaW4gZylkLmRhdGEoXCIkXCIraCtcIkNvbnRyb2xsZXJcIixnW2hdLmluc3RhbmNlKTtNLiQkYWRkU2NvcGVJbmZvKGQsYik7YyYmYyhkLGIpO2wmJmwoYixkLGQsZik7cmV0dXJuIGR9fWZ1bmN0aW9uIFAoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxjLGQsZSl7dmFyIGYsayxsLG0scCxzLHU7aWYoQSlmb3IodT1BcnJheShjLmxlbmd0aCksbT0wO208aC5sZW5ndGg7bSs9MylmPWhbbV0sdVtmXT1jW2ZdO2Vsc2UgdT1jO209MDtmb3IocD1oLmxlbmd0aDttPHA7KWs9dVtoW20rK11dLGM9aFttKytdLGY9aFttKytdLGM/KGMuc2NvcGU/KGw9XG5hLiRuZXcoKSxNLiQkYWRkU2NvcGVJbmZvKEMoayksbCkpOmw9YSxzPWMudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ/UyhhLGMudHJhbnNjbHVkZSxlKTohYy50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQmJmU/ZTohZSYmYj9TKGEsYik6bnVsbCxjKGYsbCxrLGQscykpOmYmJmYoYSxrLmNoaWxkTm9kZXMsdixlKX1mb3IodmFyIGg9W10sayxsLG0scCxBLHM9MDtzPGEubGVuZ3RoO3MrKyl7az1uZXcgbmE7bD1tYShhW3NdLFtdLGssMD09PXM/ZDp2LGUpOyhmPWwubGVuZ3RoP3kobCxhW3NdLGssYixjLG51bGwsW10sW10sZik6bnVsbCkmJmYuc2NvcGUmJk0uJCRhZGRTY29wZUNsYXNzKGsuJCRlbGVtZW50KTtrPWYmJmYudGVybWluYWx8fCEobT1hW3NdLmNoaWxkTm9kZXMpfHwhbS5sZW5ndGg/bnVsbDpQKG0sZj8oZi50cmFuc2NsdWRlT25UaGlzRWxlbWVudHx8IWYudGVtcGxhdGVPblRoaXNFbGVtZW50KSYmZi50cmFuc2NsdWRlOmIpO2lmKGZ8fGspaC5wdXNoKHMsZixrKSxwPSEwLEE9XG5BfHxmO2Y9bnVsbH1yZXR1cm4gcD9nOm51bGx9ZnVuY3Rpb24gUyhhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oZCxlLGYsZyxoKXtkfHwoZD1hLiRuZXcoITEsaCksZC4kJHRyYW5zY2x1ZGVkPSEwKTtyZXR1cm4gYihkLGUse3BhcmVudEJvdW5kVHJhbnNjbHVkZUZuOmMsdHJhbnNjbHVkZUNvbnRyb2xsZXJzOmYsZnV0dXJlUGFyZW50RWxlbWVudDpnfSl9LGU9ZC4kJHNsb3RzPVooKSxmO2ZvcihmIGluIGIuJCRzbG90cyllW2ZdPWIuJCRzbG90c1tmXT9TKGEsYi4kJHNsb3RzW2ZdLGMpOm51bGw7cmV0dXJuIGR9ZnVuY3Rpb24gbWEoYSxiLGMsZCxlKXt2YXIgaD1jLiRhdHRyLGs7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgMTpIKGIsdmEocmEoYSkpLFwiRVwiLGQsZSk7Zm9yKHZhciBsLG0scCxzPWEuYXR0cmlidXRlcyxBPTAsdT1zJiZzLmxlbmd0aDtBPHU7QSsrKXt2YXIgdD0hMSx3PSExO2w9c1tBXTtrPWwubmFtZTttPVgobC52YWx1ZSk7bD12YShrKTtpZihwPXBhLnRlc3QobCkpaz1cbmsucmVwbGFjZShYYyxcIlwiKS5zdWJzdHIoOCkucmVwbGFjZSgvXyguKS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pOyhsPWwubWF0Y2godWEpKSYmTyhsWzFdKSYmKHQ9ayx3PWsuc3Vic3RyKDAsay5sZW5ndGgtNSkrXCJlbmRcIixrPWsuc3Vic3RyKDAsay5sZW5ndGgtNikpO2w9dmEoay50b0xvd2VyQ2FzZSgpKTtoW2xdPWs7aWYocHx8IWMuaGFzT3duUHJvcGVydHkobCkpY1tsXT1tLFRjKGEsbCkmJihjW2xdPSEwKTtZKGEsYixtLGwscCk7SChiLGwsXCJBXCIsZCxlLHQsdyl9YT1hLmNsYXNzTmFtZTtFKGEpJiYoYT1hLmFuaW1WYWwpO2lmKEYoYSkmJlwiXCIhPT1hKWZvcig7az1nLmV4ZWMoYSk7KWw9dmEoa1syXSksSChiLGwsXCJDXCIsZCxlKSYmKGNbbF09WChrWzNdKSksYT1hLnN1YnN0cihrLmluZGV4K2tbMF0ubGVuZ3RoKTticmVhaztjYXNlIFBhOmlmKDExPT09eGEpZm9yKDthLnBhcmVudE5vZGUmJmEubmV4dFNpYmxpbmcmJmEubmV4dFNpYmxpbmcubm9kZVR5cGU9PT1cblBhOylhLm5vZGVWYWx1ZSs9YS5uZXh0U2libGluZy5ub2RlVmFsdWUsYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEubmV4dFNpYmxpbmcpO04oYixhLm5vZGVWYWx1ZSk7YnJlYWs7Y2FzZSA4OnRyeXtpZihrPWYuZXhlYyhhLm5vZGVWYWx1ZSkpbD12YShrWzFdKSxIKGIsbCxcIk1cIixkLGUpJiYoY1tsXT1YKGtbMl0pKX1jYXRjaChNKXt9fWIuc29ydCh5YSk7cmV0dXJuIGJ9ZnVuY3Rpb24gcShhLGIsYyl7dmFyIGQ9W10sZT0wO2lmKGImJmEuaGFzQXR0cmlidXRlJiZhLmhhc0F0dHJpYnV0ZShiKSl7ZG97aWYoIWEpdGhyb3cgamEoXCJ1dGVyZGlyXCIsYixjKTsxPT1hLm5vZGVUeXBlJiYoYS5oYXNBdHRyaWJ1dGUoYikmJmUrKyxhLmhhc0F0dHJpYnV0ZShjKSYmZS0tKTtkLnB1c2goYSk7YT1hLm5leHRTaWJsaW5nfXdoaWxlKDA8ZSl9ZWxzZSBkLnB1c2goYSk7cmV0dXJuIEMoZCl9ZnVuY3Rpb24gWWMoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZixnLGgpe2U9cShlWzBdLGIsXG5jKTtyZXR1cm4gYShkLGUsZixnLGgpfX1mdW5jdGlvbiBhYyhhLGIsYyxkLGUsZil7aWYoYSlyZXR1cm4gTShiLGMsZCxlLGYpO3ZhciBnO3JldHVybiBmdW5jdGlvbigpe2d8fChnPU0oYixjLGQsZSxmKSxiPWM9Zj1udWxsKTtyZXR1cm4gZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHkoYSxiLGQsZSxmLGcsaCxsLG0pe2Z1bmN0aW9uIHAoYSxiLGMsZCl7aWYoYSl7YyYmKGE9WWMoYSxjLGQpKTthLnJlcXVpcmU9Si5yZXF1aXJlO2EuZGlyZWN0aXZlTmFtZT1IO2lmKFA9PT1KfHxKLiQkaXNvbGF0ZVNjb3BlKWE9Y2EoYSx7aXNvbGF0ZVNjb3BlOiEwfSk7aC5wdXNoKGEpfWlmKGIpe2MmJihiPVljKGIsYyxkKSk7Yi5yZXF1aXJlPUoucmVxdWlyZTtiLmRpcmVjdGl2ZU5hbWU9SDtpZihQPT09Snx8Si4kJGlzb2xhdGVTY29wZSliPWNhKGIse2lzb2xhdGVTY29wZTohMH0pO2wucHVzaChiKX19ZnVuY3Rpb24gcyhhLGIsYyxkKXt2YXIgZTtpZihGKGIpKXt2YXIgZj1cbmIubWF0Y2goayk7Yj1iLnN1YnN0cmluZyhmWzBdLmxlbmd0aCk7dmFyIGc9ZlsxXXx8ZlszXSxmPVwiP1wiPT09ZlsyXTtcIl5eXCI9PT1nP2M9Yy5wYXJlbnQoKTplPShlPWQmJmRbYl0pJiZlLmluc3RhbmNlO2lmKCFlKXt2YXIgaD1cIiRcIitiK1wiQ29udHJvbGxlclwiO2U9Zz9jLmluaGVyaXRlZERhdGEoaCk6Yy5kYXRhKGgpfWlmKCFlJiYhZil0aHJvdyBqYShcImN0cmVxXCIsYixhKTt9ZWxzZSBpZihMKGIpKWZvcihlPVtdLGc9MCxmPWIubGVuZ3RoO2c8ZjtnKyspZVtnXT1zKGEsYltnXSxjLGQpO2Vsc2UgRShiKSYmKGU9e30sbihiLGZ1bmN0aW9uKGIsZil7ZVtmXT1zKGEsYixjLGQpfSkpO3JldHVybiBlfHxudWxsfWZ1bmN0aW9uIEEoYSxiLGMsZCxlLGYpe3ZhciBnPVooKSxoO2ZvcihoIGluIGQpe3ZhciBrPWRbaF0sbD17JHNjb3BlOms9PT1QfHxrLiQkaXNvbGF0ZVNjb3BlP2U6ZiwkZWxlbWVudDphLCRhdHRyczpiLCR0cmFuc2NsdWRlOmN9LG09ay5jb250cm9sbGVyO1wiQFwiPT1tJiZcbihtPWJbay5uYW1lXSk7bD13KG0sbCwhMCxrLmNvbnRyb2xsZXJBcyk7Z1trLm5hbWVdPWw7Qnx8YS5kYXRhKFwiJFwiK2submFtZStcIkNvbnRyb2xsZXJcIixsLmluc3RhbmNlKX1yZXR1cm4gZ31mdW5jdGlvbiB1KGEsYyxlLGYsZyl7ZnVuY3Rpb24gayhhLGIsYyxkKXt2YXIgZTtiYihhKXx8KGQ9YyxjPWIsYj1hLGE9dik7QiYmKGU9bWEpO2N8fChjPUI/ei5wYXJlbnQoKTp6KTtpZihkKXt2YXIgZj1nLiQkc2xvdHNbZF07aWYoZilyZXR1cm4gZihhLGIsZSxjLEViKTtpZih4KGYpKXRocm93IGphKFwibm9zbG90XCIsZCx0YSh6KSk7fWVsc2UgcmV0dXJuIGcoYSxiLGUsYyxFYil9dmFyIG0scCx0LHcsbWEsUyx6LEphO2I9PT1lPyhmPWQsej1kLiQkZWxlbWVudCk6KHo9QyhlKSxmPW5ldyBuYSh6LGQpKTt0PWM7UD93PWMuJG5ldyghMCk6USYmKHQ9Yy4kcGFyZW50KTtnJiYoUz1rLFMuJCRib3VuZFRyYW5zY2x1ZGU9ZyxTLmlzU2xvdEZpbGxlZD1mdW5jdGlvbihhKXtyZXR1cm4hIWcuJCRzbG90c1thXX0pO1xuSSYmKG1hPUEoeixmLFMsSSx3LGMpKTtQJiYoTS4kJGFkZFNjb3BlSW5mbyh6LHcsITAsISgkJiYoJD09PVB8fCQ9PT1QLiQkb3JpZ2luYWxEaXJlY3RpdmUpKSksTS4kJGFkZFNjb3BlQ2xhc3MoeiwhMCksdy4kJGlzb2xhdGVCaW5kaW5ncz1QLiQkaXNvbGF0ZUJpbmRpbmdzLChKYT1pYShjLGYsdyx3LiQkaXNvbGF0ZUJpbmRpbmdzLFApKSYmdy4kb24oXCIkZGVzdHJveVwiLEphKSk7Zm9yKHAgaW4gbWEpe0phPUlbcF07dmFyIEs9bWFbcF0sbGE9SmEuJCRiaW5kaW5ncy5iaW5kVG9Db250cm9sbGVyO0suaWRlbnRpZmllciYmbGEmJihtPWlhKHQsZixLLmluc3RhbmNlLGxhLEphKSk7dmFyIHE9SygpO3EhPT1LLmluc3RhbmNlJiYoSy5pbnN0YW5jZT1xLHouZGF0YShcIiRcIitKYS5uYW1lK1wiQ29udHJvbGxlclwiLHEpLG0mJm0oKSxtPWlhKHQsZixLLmluc3RhbmNlLGxhLEphKSl9bihJLGZ1bmN0aW9uKGEsYil7dmFyIGM9YS5yZXF1aXJlO2EuYmluZFRvQ29udHJvbGxlciYmIUwoYykmJlxuRShjKSYmVChtYVtiXS5pbnN0YW5jZSxzKGIsYyx6LG1hKSl9KTtuKG1hLGZ1bmN0aW9uKGEpe0QoYS5pbnN0YW5jZS4kb25Jbml0KSYmYS5pbnN0YW5jZS4kb25Jbml0KCl9KTttPTA7Zm9yKHA9aC5sZW5ndGg7bTxwO20rKyl0PWhbbV0sa2EodCx0Lmlzb2xhdGVTY29wZT93OmMseixmLHQucmVxdWlyZSYmcyh0LmRpcmVjdGl2ZU5hbWUsdC5yZXF1aXJlLHosbWEpLFMpO3ZhciBFYj1jO1AmJihQLnRlbXBsYXRlfHxudWxsPT09UC50ZW1wbGF0ZVVybCkmJihFYj13KTthJiZhKEViLGUuY2hpbGROb2Rlcyx2LGcpO2ZvcihtPWwubGVuZ3RoLTE7MDw9bTttLS0pdD1sW21dLGthKHQsdC5pc29sYXRlU2NvcGU/dzpjLHosZix0LnJlcXVpcmUmJnModC5kaXJlY3RpdmVOYW1lLHQucmVxdWlyZSx6LG1hKSxTKX1tPW18fHt9O2Zvcih2YXIgdD0tTnVtYmVyLk1BWF9WQUxVRSxRPW0ubmV3U2NvcGVEaXJlY3RpdmUsST1tLmNvbnRyb2xsZXJEaXJlY3RpdmVzLFA9bS5uZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsXG4kPW0udGVtcGxhdGVEaXJlY3RpdmUsUz1tLm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsej0hMSxsYT0hMSxCPW0uaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUsZWE9ZC4kJGVsZW1lbnQ9QyhiKSxKLEgsRyx5YT1lLE8sTj0hMSxGYj0hMSxmYSxSPTAsVmE9YS5sZW5ndGg7UjxWYTtSKyspe0o9YVtSXTt2YXIgWT1KLiQkc3RhcnQsYmE9Si4kJGVuZDtZJiYoZWE9cShiLFksYmEpKTtHPXY7aWYodD5KLnByaW9yaXR5KWJyZWFrO2lmKGZhPUouc2NvcGUpSi50ZW1wbGF0ZVVybHx8KEUoZmEpPyhXYShcIm5ldy9pc29sYXRlZCBzY29wZVwiLFB8fFEsSixlYSksUD1KKTpXYShcIm5ldy9pc29sYXRlZCBzY29wZVwiLFAsSixlYSkpLFE9UXx8SjtIPUoubmFtZTtpZighTiYmKEoucmVwbGFjZSYmKEoudGVtcGxhdGVVcmx8fEoudGVtcGxhdGUpfHxKLnRyYW5zY2x1ZGUmJiFKLiQkdGxiKSl7Zm9yKGZhPVIrMTtOPWFbZmErK107KWlmKE4udHJhbnNjbHVkZSYmIU4uJCR0bGJ8fE4ucmVwbGFjZSYmXG4oTi50ZW1wbGF0ZVVybHx8Ti50ZW1wbGF0ZSkpe0ZiPSEwO2JyZWFrfU49ITB9IUoudGVtcGxhdGVVcmwmJkouY29udHJvbGxlciYmKGZhPUouY29udHJvbGxlcixJPUl8fFooKSxXYShcIidcIitIK1wiJyBjb250cm9sbGVyXCIsSVtIXSxKLGVhKSxJW0hdPUopO2lmKGZhPUoudHJhbnNjbHVkZSlpZih6PSEwLEouJCR0bGJ8fChXYShcInRyYW5zY2x1c2lvblwiLFMsSixlYSksUz1KKSxcImVsZW1lbnRcIj09ZmEpQj0hMCx0PUoucHJpb3JpdHksRz1lYSxlYT1kLiQkZWxlbWVudD1DKFcuY3JlYXRlQ29tbWVudChcIiBcIitIK1wiOiBcIitkW0hdK1wiIFwiKSksYj1lYVswXSxhYShmLHdhLmNhbGwoRywwKSxiKSx5YT1hYyhGYixHLGUsdCxnJiZnLm5hbWUse25vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6U30pO2Vsc2V7dmFyIFY9WigpO0c9QyhZYihiKSkuY29udGVudHMoKTtpZihFKGZhKSl7Rz1bXTt2YXIgaGE9WigpLGRhPVooKTtuKGZhLGZ1bmN0aW9uKGEsYil7dmFyIGM9XCI/XCI9PT1hLmNoYXJBdCgwKTtcbmE9Yz9hLnN1YnN0cmluZygxKTphO2hhW2FdPWI7VltiXT1udWxsO2RhW2JdPWN9KTtuKGVhLmNvbnRlbnRzKCksZnVuY3Rpb24oYSl7dmFyIGI9aGFbdmEocmEoYSkpXTtiPyhkYVtiXT0hMCxWW2JdPVZbYl18fFtdLFZbYl0ucHVzaChhKSk6Ry5wdXNoKGEpfSk7bihkYSxmdW5jdGlvbihhLGIpe2lmKCFhKXRocm93IGphKFwicmVxc2xvdFwiLGIpO30pO2Zvcih2YXIgZ2EgaW4gVilWW2dhXSYmKFZbZ2FdPWFjKEZiLFZbZ2FdLGUpKX1lYS5lbXB0eSgpO3lhPWFjKEZiLEcsZSx2LHYse25lZWRzTmV3U2NvcGU6Si4kJGlzb2xhdGVTY29wZXx8Si4kJG5ld1Njb3BlfSk7eWEuJCRzbG90cz1WfWlmKEoudGVtcGxhdGUpaWYobGE9ITAsV2EoXCJ0ZW1wbGF0ZVwiLCQsSixlYSksJD1KLGZhPUQoSi50ZW1wbGF0ZSk/Si50ZW1wbGF0ZShlYSxkKTpKLnRlbXBsYXRlLGZhPXFhKGZhKSxKLnJlcGxhY2Upe2c9SjtHPVdiLnRlc3QoZmEpP1pjKFUoSi50ZW1wbGF0ZU5hbWVzcGFjZSxYKGZhKSkpOltdO1xuYj1HWzBdO2lmKDEhPUcubGVuZ3RofHwxIT09Yi5ub2RlVHlwZSl0aHJvdyBqYShcInRwbHJ0XCIsSCxcIlwiKTthYShmLGVhLGIpO1ZhPXskYXR0cjp7fX07ZmE9bWEoYixbXSxWYSk7dmFyIG9hPWEuc3BsaWNlKFIrMSxhLmxlbmd0aC0oUisxKSk7KFB8fFEpJiYkYyhmYSxQLFEpO2E9YS5jb25jYXQoZmEpLmNvbmNhdChvYSk7YWQoZCxWYSk7VmE9YS5sZW5ndGh9ZWxzZSBlYS5odG1sKGZhKTtpZihKLnRlbXBsYXRlVXJsKWxhPSEwLFdhKFwidGVtcGxhdGVcIiwkLEosZWEpLCQ9SixKLnJlcGxhY2UmJihnPUopLHU9JGYoYS5zcGxpY2UoUixhLmxlbmd0aC1SKSxlYSxkLGYseiYmeWEsaCxsLHtjb250cm9sbGVyRGlyZWN0aXZlczpJLG5ld1Njb3BlRGlyZWN0aXZlOlEhPT1KJiZRLG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTpQLHRlbXBsYXRlRGlyZWN0aXZlOiQsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpTfSksVmE9YS5sZW5ndGg7ZWxzZSBpZihKLmNvbXBpbGUpdHJ5e089Si5jb21waWxlKGVhLFxuZCx5YSksRChPKT9wKG51bGwsTyxZLGJhKTpPJiZwKE8ucHJlLE8ucG9zdCxZLGJhKX1jYXRjaChwYSl7YyhwYSx0YShlYSkpfUoudGVybWluYWwmJih1LnRlcm1pbmFsPSEwLHQ9TWF0aC5tYXgodCxKLnByaW9yaXR5KSl9dS5zY29wZT1RJiYhMD09PVEuc2NvcGU7dS50cmFuc2NsdWRlT25UaGlzRWxlbWVudD16O3UudGVtcGxhdGVPblRoaXNFbGVtZW50PWxhO3UudHJhbnNjbHVkZT15YTttLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlPUI7cmV0dXJuIHV9ZnVuY3Rpb24gJGMoYSxiLGMpe2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylhW2RdPVNiKGFbZF0seyQkaXNvbGF0ZVNjb3BlOmIsJCRuZXdTY29wZTpjfSl9ZnVuY3Rpb24gSChiLGQsZixnLGgsayxsKXtpZihkPT09aClyZXR1cm4gbnVsbDtoPW51bGw7aWYoZS5oYXNPd25Qcm9wZXJ0eShkKSl7dmFyIG07ZD1hLmdldChkK1wiRGlyZWN0aXZlXCIpO2Zvcih2YXIgcD0wLEE9ZC5sZW5ndGg7cDxBO3ArKyl0cnl7bT1cbmRbcF0sKHgoZyl8fGc+bS5wcmlvcml0eSkmJi0xIT1tLnJlc3RyaWN0LmluZGV4T2YoZikmJihrJiYobT1TYihtLHskJHN0YXJ0OmssJCRlbmQ6bH0pKSxiLnB1c2gobSksaD1tKX1jYXRjaCh0KXtjKHQpfX1yZXR1cm4gaH1mdW5jdGlvbiBPKGIpe2lmKGUuaGFzT3duUHJvcGVydHkoYikpZm9yKHZhciBjPWEuZ2V0KGIrXCJEaXJlY3RpdmVcIiksZD0wLGY9Yy5sZW5ndGg7ZDxmO2QrKylpZihiPWNbZF0sYi5tdWx0aUVsZW1lbnQpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gYWQoYSxiKXt2YXIgYz1iLiRhdHRyLGQ9YS4kYXR0cixlPWEuJCRlbGVtZW50O24oYSxmdW5jdGlvbihkLGUpe1wiJFwiIT1lLmNoYXJBdCgwKSYmKGJbZV0mJmJbZV0hPT1kJiYoZCs9KFwic3R5bGVcIj09PWU/XCI7XCI6XCIgXCIpK2JbZV0pLGEuJHNldChlLGQsITAsY1tlXSkpfSk7bihiLGZ1bmN0aW9uKGIsZil7XCJjbGFzc1wiPT1mPygkKGUsYiksYVtcImNsYXNzXCJdPShhW1wiY2xhc3NcIl0/YVtcImNsYXNzXCJdK1wiIFwiOlwiXCIpK1xuYik6XCJzdHlsZVwiPT1mPyhlLmF0dHIoXCJzdHlsZVwiLGUuYXR0cihcInN0eWxlXCIpK1wiO1wiK2IpLGEuc3R5bGU9KGEuc3R5bGU/YS5zdHlsZStcIjtcIjpcIlwiKStiKTpcIiRcIj09Zi5jaGFyQXQoMCl8fGEuaGFzT3duUHJvcGVydHkoZil8fChhW2ZdPWIsZFtmXT1jW2ZdKX0pfWZ1bmN0aW9uICRmKGEsYixjLGUsZixnLGgsayl7dmFyIGw9W10sbSxwLHM9YlswXSxBPWEuc2hpZnQoKSx1PVNiKEEse3RlbXBsYXRlVXJsOm51bGwsdHJhbnNjbHVkZTpudWxsLHJlcGxhY2U6bnVsbCwkJG9yaWdpbmFsRGlyZWN0aXZlOkF9KSx3PUQoQS50ZW1wbGF0ZVVybCk/QS50ZW1wbGF0ZVVybChiLGMpOkEudGVtcGxhdGVVcmwsUT1BLnRlbXBsYXRlTmFtZXNwYWNlO2IuZW1wdHkoKTtkKHcpLnRoZW4oZnVuY3Rpb24oZCl7dmFyIHQsSTtkPXFhKGQpO2lmKEEucmVwbGFjZSl7ZD1XYi50ZXN0KGQpP1pjKFUoUSxYKGQpKSk6W107dD1kWzBdO2lmKDEhPWQubGVuZ3RofHwxIT09dC5ub2RlVHlwZSl0aHJvdyBqYShcInRwbHJ0XCIsXG5BLm5hbWUsdyk7ZD17JGF0dHI6e319O2FhKGUsYix0KTt2YXIgTT1tYSh0LFtdLGQpO0UoQS5zY29wZSkmJiRjKE0sITApO2E9TS5jb25jYXQoYSk7YWQoYyxkKX1lbHNlIHQ9cyxiLmh0bWwoZCk7YS51bnNoaWZ0KHUpO209eShhLHQsYyxmLGIsQSxnLGgsayk7bihlLGZ1bmN0aW9uKGEsYyl7YT09dCYmKGVbY109YlswXSl9KTtmb3IocD1QKGJbMF0uY2hpbGROb2RlcyxmKTtsLmxlbmd0aDspe2Q9bC5zaGlmdCgpO0k9bC5zaGlmdCgpO3ZhciB6PWwuc2hpZnQoKSxLPWwuc2hpZnQoKSxNPWJbMF07aWYoIWQuJCRkZXN0cm95ZWQpe2lmKEkhPT1zKXt2YXIgbGE9SS5jbGFzc05hbWU7ay5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSYmQS5yZXBsYWNlfHwoTT1ZYih0KSk7YWEoeixDKEkpLE0pOyQoQyhNKSxsYSl9ST1tLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P1MoZCxtLnRyYW5zY2x1ZGUsSyk6SzttKHAsZCxNLGUsSSl9fWw9bnVsbH0pO3JldHVybiBmdW5jdGlvbihhLGIsXG5jLGQsZSl7YT1lO2IuJCRkZXN0cm95ZWR8fChsP2wucHVzaChiLGMsZCxhKToobS50cmFuc2NsdWRlT25UaGlzRWxlbWVudCYmKGE9UyhiLG0udHJhbnNjbHVkZSxlKSksbShwLGIsYyxkLGEpKSl9fWZ1bmN0aW9uIHlhKGEsYil7dmFyIGM9Yi5wcmlvcml0eS1hLnByaW9yaXR5O3JldHVybiAwIT09Yz9jOmEubmFtZSE9PWIubmFtZT9hLm5hbWU8Yi5uYW1lPy0xOjE6YS5pbmRleC1iLmluZGV4fWZ1bmN0aW9uIFdhKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuIGE/XCIgKG1vZHVsZTogXCIrYStcIilcIjpcIlwifWlmKGIpdGhyb3cgamEoXCJtdWx0aWRpclwiLGIubmFtZSxlKGIuJCRtb2R1bGVOYW1lKSxjLm5hbWUsZShjLiQkbW9kdWxlTmFtZSksYSx0YShkKSk7fWZ1bmN0aW9uIE4oYSxjKXt2YXIgZD1iKGMsITApO2QmJmEucHVzaCh7cHJpb3JpdHk6MCxjb21waWxlOmZ1bmN0aW9uKGEpe2E9YS5wYXJlbnQoKTt2YXIgYj0hIWEubGVuZ3RoO2ImJk0uJCRhZGRCaW5kaW5nQ2xhc3MoYSk7XG5yZXR1cm4gZnVuY3Rpb24oYSxjKXt2YXIgZT1jLnBhcmVudCgpO2J8fE0uJCRhZGRCaW5kaW5nQ2xhc3MoZSk7TS4kJGFkZEJpbmRpbmdJbmZvKGUsZC5leHByZXNzaW9ucyk7YS4kd2F0Y2goZCxmdW5jdGlvbihhKXtjWzBdLm5vZGVWYWx1ZT1hfSl9fX0pfWZ1bmN0aW9uIFUoYSxiKXthPUcoYXx8XCJodG1sXCIpO3N3aXRjaChhKXtjYXNlIFwic3ZnXCI6Y2FzZSBcIm1hdGhcIjp2YXIgYz1XLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yy5pbm5lckhUTUw9XCI8XCIrYStcIj5cIitiK1wiPC9cIithK1wiPlwiO3JldHVybiBjLmNoaWxkTm9kZXNbMF0uY2hpbGROb2RlcztkZWZhdWx0OnJldHVybiBifX1mdW5jdGlvbiBSKGEsYil7aWYoXCJzcmNkb2NcIj09YilyZXR1cm4gbGEuSFRNTDt2YXIgYz1yYShhKTtpZihcInhsaW5rSHJlZlwiPT1ifHxcImZvcm1cIj09YyYmXCJhY3Rpb25cIj09Ynx8XCJpbWdcIiE9YyYmKFwic3JjXCI9PWJ8fFwibmdTcmNcIj09YikpcmV0dXJuIGxhLlJFU09VUkNFX1VSTH1mdW5jdGlvbiBZKGEsYyxkLGUsXG5mKXt2YXIgZz1SKGEsZSk7Zj1oW2VdfHxmO3ZhciBrPWIoZCwhMCxnLGYpO2lmKGspe2lmKFwibXVsdGlwbGVcIj09PWUmJlwic2VsZWN0XCI9PT1yYShhKSl0aHJvdyBqYShcInNlbG11bHRpXCIsdGEoYSkpO2MucHVzaCh7cHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYyxoKXtjPWguJCRvYnNlcnZlcnN8fChoLiQkb2JzZXJ2ZXJzPVooKSk7aWYobC50ZXN0KGUpKXRocm93IGphKFwibm9kb21ldmVudHNcIik7dmFyIG09aFtlXTttIT09ZCYmKGs9bSYmYihtLCEwLGcsZiksZD1tKTtrJiYoaFtlXT1rKGEpLChjW2VdfHwoY1tlXT1bXSkpLiQkaW50ZXI9ITAsKGguJCRvYnNlcnZlcnMmJmguJCRvYnNlcnZlcnNbZV0uJCRzY29wZXx8YSkuJHdhdGNoKGssZnVuY3Rpb24oYSxiKXtcImNsYXNzXCI9PT1lJiZhIT1iP2guJHVwZGF0ZUNsYXNzKGEsYik6aC4kc2V0KGUsYSl9KSl9fX19KX19ZnVuY3Rpb24gYWEoYSxiLGMpe3ZhciBkPWJbMF0sZT1iLmxlbmd0aCxcbmY9ZC5wYXJlbnROb2RlLGcsaDtpZihhKWZvcihnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKWlmKGFbZ109PWQpe2FbZysrXT1jO2g9ZytlLTE7Zm9yKHZhciBrPWEubGVuZ3RoO2c8aztnKyssaCsrKWg8az9hW2ddPWFbaF06ZGVsZXRlIGFbZ107YS5sZW5ndGgtPWUtMTthLmNvbnRleHQ9PT1kJiYoYS5jb250ZXh0PWMpO2JyZWFrfWYmJmYucmVwbGFjZUNoaWxkKGMsZCk7YT1XLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmb3IoZz0wO2c8ZTtnKyspYS5hcHBlbmRDaGlsZChiW2ddKTtDLmhhc0RhdGEoZCkmJihDLmRhdGEoYyxDLmRhdGEoZCkpLEMoZCkub2ZmKFwiJGRlc3Ryb3lcIikpO0MuY2xlYW5EYXRhKGEucXVlcnlTZWxlY3RvckFsbChcIipcIikpO2ZvcihnPTE7ZzxlO2crKylkZWxldGUgYltnXTtiWzBdPWM7Yi5sZW5ndGg9MX1mdW5jdGlvbiBjYShhLGIpe3JldHVybiBUKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhLGIpfWZ1bmN0aW9uIGthKGEsXG5iLGQsZSxmLGcpe3RyeXthKGIsZCxlLGYsZyl9Y2F0Y2goaCl7YyhoLHRhKGQpKX19ZnVuY3Rpb24gaWEoYSxjLGQsZSxmKXt2YXIgZz1bXTtuKGUsZnVuY3Rpb24oZSxoKXt2YXIgaz1lLmF0dHJOYW1lLGw9ZS5vcHRpb25hbCxtLEEscyx0O3N3aXRjaChlLm1vZGUpe2Nhc2UgXCJAXCI6bHx8c2EuY2FsbChjLGspfHwoZFtoXT1jW2tdPXZvaWQgMCk7Yy4kb2JzZXJ2ZShrLGZ1bmN0aW9uKGEpe0YoYSkmJihkW2hdPWEpfSk7Yy4kJG9ic2VydmVyc1trXS4kJHNjb3BlPWE7bT1jW2tdO0YobSk/ZFtoXT1iKG0pKGEpOk5hKG0pJiYoZFtoXT1tKTticmVhaztjYXNlIFwiPVwiOmlmKCFzYS5jYWxsKGMsaykpe2lmKGwpYnJlYWs7Y1trXT12b2lkIDB9aWYobCYmIWNba10pYnJlYWs7QT1wKGNba10pO3Q9QS5saXRlcmFsP29hOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifHxhIT09YSYmYiE9PWJ9O3M9QS5hc3NpZ258fGZ1bmN0aW9uKCl7bT1kW2hdPUEoYSk7dGhyb3cgamEoXCJub25hc3NpZ25cIixcbmNba10sayxmLm5hbWUpO307bT1kW2hdPUEoYSk7bD1mdW5jdGlvbihiKXt0KGIsZFtoXSl8fCh0KGIsbSk/cyhhLGI9ZFtoXSk6ZFtoXT1iKTtyZXR1cm4gbT1ifTtsLiRzdGF0ZWZ1bD0hMDtsPWUuY29sbGVjdGlvbj9hLiR3YXRjaENvbGxlY3Rpb24oY1trXSxsKTphLiR3YXRjaChwKGNba10sbCksbnVsbCxBLmxpdGVyYWwpO2cucHVzaChsKTticmVhaztjYXNlIFwiPFwiOmlmKCFzYS5jYWxsKGMsaykpe2lmKGwpYnJlYWs7Y1trXT12b2lkIDB9aWYobCYmIWNba10pYnJlYWs7QT1wKGNba10pO2RbaF09QShhKTtsPWEuJHdhdGNoKEEsZnVuY3Rpb24oYSl7ZFtoXT1hfSxBLmxpdGVyYWwpO2cucHVzaChsKTticmVhaztjYXNlIFwiJlwiOkE9Yy5oYXNPd25Qcm9wZXJ0eShrKT9wKGNba10pOkI7aWYoQT09PUImJmwpYnJlYWs7ZFtoXT1mdW5jdGlvbihiKXtyZXR1cm4gQShhLGIpfX19KTtyZXR1cm4gZy5sZW5ndGgmJmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1nLmxlbmd0aDthPGI7KythKWdbYV0oKX19XG52YXIgVj0vXlxcdy8sYmE9Vy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG5hPWZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9T2JqZWN0LmtleXMoYiksZCxlLGY7ZD0wO2ZvcihlPWMubGVuZ3RoO2Q8ZTtkKyspZj1jW2RdLHRoaXNbZl09YltmXX1lbHNlIHRoaXMuJGF0dHI9e307dGhpcy4kJGVsZW1lbnQ9YX07bmEucHJvdG90eXBlPXskbm9ybWFsaXplOnZhLCRhZGRDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZ6LmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxhLmxlbmd0aCYmei5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHVwZGF0ZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YmQoYSxiKTtjJiZjLmxlbmd0aCYmei5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxjKTsoYz1iZChiLGEpKSYmYy5sZW5ndGgmJnoucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsYyl9LCRzZXQ6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9XG5UYyh0aGlzLiQkZWxlbWVudFswXSxhKSxnPWNkW2FdLGg9YTtmPyh0aGlzLiQkZWxlbWVudC5wcm9wKGEsYiksZT1mKTpnJiYodGhpc1tnXT1iLGg9Zyk7dGhpc1thXT1iO2U/dGhpcy4kYXR0clthXT1lOihlPXRoaXMuJGF0dHJbYV0pfHwodGhpcy4kYXR0clthXT1lPUJjKGEsXCItXCIpKTtmPXJhKHRoaXMuJCRlbGVtZW50KTtpZihcImFcIj09PWYmJihcImhyZWZcIj09PWF8fFwieGxpbmtIcmVmXCI9PT1hKXx8XCJpbWdcIj09PWYmJlwic3JjXCI9PT1hKXRoaXNbYV09Yj1BKGIsXCJzcmNcIj09PWEpO2Vsc2UgaWYoXCJpbWdcIj09PWYmJlwic3Jjc2V0XCI9PT1hKXtmb3IodmFyIGY9XCJcIixnPVgoYiksaz0vKFxccytcXGQreFxccyosfFxccytcXGQrd1xccyosfFxccyssfCxcXHMrKS8saz0vXFxzLy50ZXN0KGcpP2s6LygsKS8sZz1nLnNwbGl0KGspLGs9TWF0aC5mbG9vcihnLmxlbmd0aC8yKSxsPTA7bDxrO2wrKyl2YXIgbT0yKmwsZj1mK0EoWChnW21dKSwhMCksZj1mKyhcIiBcIitYKGdbbSsxXSkpO2c9WChnWzIqbF0pLnNwbGl0KC9cXHMvKTtcbmYrPUEoWChnWzBdKSwhMCk7Mj09PWcubGVuZ3RoJiYoZis9XCIgXCIrWChnWzFdKSk7dGhpc1thXT1iPWZ9ITEhPT1kJiYobnVsbD09PWJ8fHgoYik/dGhpcy4kJGVsZW1lbnQucmVtb3ZlQXR0cihlKTpWLnRlc3QoZSk/dGhpcy4kJGVsZW1lbnQuYXR0cihlLGIpOlEodGhpcy4kJGVsZW1lbnRbMF0sZSxiKSk7KGE9dGhpcy4kJG9ic2VydmVycykmJm4oYVtoXSxmdW5jdGlvbihhKXt0cnl7YShiKX1jYXRjaChkKXtjKGQpfX0pfSwkb2JzZXJ2ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLiQkb2JzZXJ2ZXJzfHwoYy4kJG9ic2VydmVycz1aKCkpLGU9ZFthXXx8KGRbYV09W10pO2UucHVzaChiKTt1LiRldmFsQXN5bmMoZnVuY3Rpb24oKXtlLiQkaW50ZXJ8fCFjLmhhc093blByb3BlcnR5KGEpfHx4KGNbYV0pfHxiKGNbYV0pfSk7cmV0dXJuIGZ1bmN0aW9uKCl7Y2IoZSxiKX19fTt2YXIgaGE9Yi5zdGFydFN5bWJvbCgpLGRhPWIuZW5kU3ltYm9sKCkscWE9XCJ7e1wiPT1oYSYmXCJ9fVwiPT1cbmRhP2FiOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xce1xcey9nLGhhKS5yZXBsYWNlKC99fS9nLGRhKX0scGE9L15uZ0F0dHJbQS1aXS8sdWE9L14oLispU3RhcnQkLztNLiQkYWRkQmluZGluZ0luZm89bT9mdW5jdGlvbihhLGIpe3ZhciBjPWEuZGF0YShcIiRiaW5kaW5nXCIpfHxbXTtMKGIpP2M9Yy5jb25jYXQoYik6Yy5wdXNoKGIpO2EuZGF0YShcIiRiaW5kaW5nXCIsYyl9OkI7TS4kJGFkZEJpbmRpbmdDbGFzcz1tP2Z1bmN0aW9uKGEpeyQoYSxcIm5nLWJpbmRpbmdcIil9OkI7TS4kJGFkZFNjb3BlSW5mbz1tP2Z1bmN0aW9uKGEsYixjLGQpe2EuZGF0YShjP2Q/XCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiOlwiJGlzb2xhdGVTY29wZVwiOlwiJHNjb3BlXCIsYil9OkI7TS4kJGFkZFNjb3BlQ2xhc3M9bT9mdW5jdGlvbihhLGIpeyQoYSxiP1wibmctaXNvbGF0ZS1zY29wZVwiOlwibmctc2NvcGVcIil9OkI7cmV0dXJuIE19XX1mdW5jdGlvbiB2YShhKXtyZXR1cm4gZ2IoYS5yZXBsYWNlKFhjLFxuXCJcIikpfWZ1bmN0aW9uIGJkKGEsYil7dmFyIGQ9XCJcIixjPWEuc3BsaXQoL1xccysvKSxlPWIuc3BsaXQoL1xccysvKSxmPTA7YTpmb3IoO2Y8Yy5sZW5ndGg7ZisrKXtmb3IodmFyIGc9Y1tmXSxoPTA7aDxlLmxlbmd0aDtoKyspaWYoZz09ZVtoXSljb250aW51ZSBhO2QrPSgwPGQubGVuZ3RoP1wiIFwiOlwiXCIpK2d9cmV0dXJuIGR9ZnVuY3Rpb24gWmMoYSl7YT1DKGEpO3ZhciBiPWEubGVuZ3RoO2lmKDE+PWIpcmV0dXJuIGE7Zm9yKDtiLS07KTg9PT1hW2JdLm5vZGVUeXBlJiZhZy5jYWxsKGEsYiwxKTtyZXR1cm4gYX1mdW5jdGlvbiBXYyhhLGIpe2lmKGImJkYoYikpcmV0dXJuIGI7aWYoRihhKSl7dmFyIGQ9ZGQuZXhlYyhhKTtpZihkKXJldHVybiBkWzNdfX1mdW5jdGlvbiBmZigpe3ZhciBhPXt9LGI9ITE7dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihiLGMpe1RhKGIsXCJjb250cm9sbGVyXCIpO0UoYik/VChhLGIpOmFbYl09Y307dGhpcy5hbGxvd0dsb2JhbHM9ZnVuY3Rpb24oKXtiPSEwfTt0aGlzLiRnZXQ9XG5bXCIkaW5qZWN0b3JcIixcIiR3aW5kb3dcIixmdW5jdGlvbihkLGMpe2Z1bmN0aW9uIGUoYSxiLGMsZCl7aWYoIWF8fCFFKGEuJHNjb3BlKSl0aHJvdyBIKFwiJGNvbnRyb2xsZXJcIikoXCJub3NjcFwiLGQsYik7YS4kc2NvcGVbYl09Y31yZXR1cm4gZnVuY3Rpb24oZixnLGgsayl7dmFyIGwsbSxyO2g9ITA9PT1oO2smJkYoaykmJihyPWspO2lmKEYoZikpe2s9Zi5tYXRjaChkZCk7aWYoIWspdGhyb3cgYmcoXCJjdHJsZm10XCIsZik7bT1rWzFdO3I9cnx8a1szXTtmPWEuaGFzT3duUHJvcGVydHkobSk/YVttXTpEYyhnLiRzY29wZSxtLCEwKXx8KGI/RGMoYyxtLCEwKTp2KTtTYShmLG0sITApfWlmKGgpcmV0dXJuIGg9KEwoZik/ZltmLmxlbmd0aC0xXTpmKS5wcm90b3R5cGUsbD1PYmplY3QuY3JlYXRlKGh8fG51bGwpLHImJmUoZyxyLGwsbXx8Zi5uYW1lKSxUKGZ1bmN0aW9uKCl7dmFyIGE9ZC5pbnZva2UoZixsLGcsbSk7YSE9PWwmJihFKGEpfHxEKGEpKSYmKGw9YSxyJiZlKGcscixsLG18fGYubmFtZSkpO1xucmV0dXJuIGx9LHtpbnN0YW5jZTpsLGlkZW50aWZpZXI6cn0pO2w9ZC5pbnN0YW50aWF0ZShmLGcsbSk7ciYmZShnLHIsbCxtfHxmLm5hbWUpO3JldHVybiBsfX1dfWZ1bmN0aW9uIGdmKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixmdW5jdGlvbihhKXtyZXR1cm4gQyhhLmRvY3VtZW50KX1dfWZ1bmN0aW9uIGhmKCl7dGhpcy4kZ2V0PVtcIiRsb2dcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixkKXthLmVycm9yLmFwcGx5KGEsYXJndW1lbnRzKX19XX1mdW5jdGlvbiBiYyhhKXtyZXR1cm4gRShhKT9WKGEpP2EudG9JU09TdHJpbmcoKTplYihhKTphfWZ1bmN0aW9uIG5mKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe2lmKCFhKXJldHVyblwiXCI7dmFyIGI9W107cmMoYSxmdW5jdGlvbihhLGMpe251bGw9PT1hfHx4KGEpfHwoTChhKT9uKGEsZnVuY3Rpb24oYSxkKXtiLnB1c2goaGEoYykrXCI9XCIraGEoYmMoYSkpKX0pOmIucHVzaChoYShjKStcIj1cIitoYShiYyhhKSkpKX0pO1xucmV0dXJuIGIuam9pbihcIiZcIil9fX1mdW5jdGlvbiBvZigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsZSxmKXtudWxsPT09YXx8eChhKXx8KEwoYSk/bihhLGZ1bmN0aW9uKGEsYyl7YihhLGUrXCJbXCIrKEUoYSk/YzpcIlwiKStcIl1cIil9KTpFKGEpJiYhVihhKT9yYyhhLGZ1bmN0aW9uKGEsYyl7YihhLGUrKGY/XCJcIjpcIltcIikrYysoZj9cIlwiOlwiXVwiKSl9KTpkLnB1c2goaGEoZSkrXCI9XCIraGEoYmMoYSkpKSl9aWYoIWEpcmV0dXJuXCJcIjt2YXIgZD1bXTtiKGEsXCJcIiwhMCk7cmV0dXJuIGQuam9pbihcIiZcIil9fX1mdW5jdGlvbiBjYyhhLGIpe2lmKEYoYSkpe3ZhciBkPWEucmVwbGFjZShjZyxcIlwiKS50cmltKCk7aWYoZCl7dmFyIGM9YihcIkNvbnRlbnQtVHlwZVwiKTsoYz1jJiYwPT09Yy5pbmRleE9mKGVkKSl8fChjPShjPWQubWF0Y2goZGcpKSYmZWdbY1swXV0udGVzdChkKSk7YyYmKGE9d2MoZCkpfX1yZXR1cm4gYX1mdW5jdGlvbiBmZChhKXt2YXIgYj1cblooKSxkO0YoYSk/bihhLnNwbGl0KFwiXFxuXCIpLGZ1bmN0aW9uKGEpe2Q9YS5pbmRleE9mKFwiOlwiKTt2YXIgZT1HKFgoYS5zdWJzdHIoMCxkKSkpO2E9WChhLnN1YnN0cihkKzEpKTtlJiYoYltlXT1iW2VdP2JbZV0rXCIsIFwiK2E6YSl9KTpFKGEpJiZuKGEsZnVuY3Rpb24oYSxkKXt2YXIgZj1HKGQpLGc9WChhKTtmJiYoYltmXT1iW2ZdP2JbZl0rXCIsIFwiK2c6Zyl9KTtyZXR1cm4gYn1mdW5jdGlvbiBnZChhKXt2YXIgYjtyZXR1cm4gZnVuY3Rpb24oZCl7Ynx8KGI9ZmQoYSkpO3JldHVybiBkPyhkPWJbRyhkKV0sdm9pZCAwPT09ZCYmKGQ9bnVsbCksZCk6Yn19ZnVuY3Rpb24gaGQoYSxiLGQsYyl7aWYoRChjKSlyZXR1cm4gYyhhLGIsZCk7bihjLGZ1bmN0aW9uKGMpe2E9YyhhLGIsZCl9KTtyZXR1cm4gYX1mdW5jdGlvbiBtZigpe3ZhciBhPXRoaXMuZGVmYXVsdHM9e3RyYW5zZm9ybVJlc3BvbnNlOltjY10sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oYSl7cmV0dXJuIEUoYSkmJlwiW29iamVjdCBGaWxlXVwiIT09XG5nYS5jYWxsKGEpJiZcIltvYmplY3QgQmxvYl1cIiE9PWdhLmNhbGwoYSkmJlwiW29iamVjdCBGb3JtRGF0YV1cIiE9PWdhLmNhbGwoYSk/ZWIoYSk6YX1dLGhlYWRlcnM6e2NvbW1vbjp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qXCJ9LHBvc3Q6bmEoZGMpLHB1dDpuYShkYykscGF0Y2g6bmEoZGMpfSx4c3JmQ29va2llTmFtZTpcIlhTUkYtVE9LRU5cIix4c3JmSGVhZGVyTmFtZTpcIlgtWFNSRi1UT0tFTlwiLHBhcmFtU2VyaWFsaXplcjpcIiRodHRwUGFyYW1TZXJpYWxpemVyXCJ9LGI9ITE7dGhpcy51c2VBcHBseUFzeW5jPWZ1bmN0aW9uKGEpe3JldHVybiB5KGEpPyhiPSEhYSx0aGlzKTpifTt2YXIgZD0hMDt0aGlzLnVzZUxlZ2FjeVByb21pc2VFeHRlbnNpb25zPWZ1bmN0aW9uKGEpe3JldHVybiB5KGEpPyhkPSEhYSx0aGlzKTpkfTt2YXIgYz10aGlzLmludGVyY2VwdG9ycz1bXTt0aGlzLiRnZXQ9W1wiJGh0dHBCYWNrZW5kXCIsXCIkJGNvb2tpZVJlYWRlclwiLFwiJGNhY2hlRmFjdG9yeVwiLFxuXCIkcm9vdFNjb3BlXCIsXCIkcVwiLFwiJGluamVjdG9yXCIsZnVuY3Rpb24oZSxmLGcsaCxrLGwpe2Z1bmN0aW9uIG0oYil7ZnVuY3Rpb24gYyhhKXt2YXIgYj1UKHt9LGEpO2IuZGF0YT1oZChhLmRhdGEsYS5oZWFkZXJzLGEuc3RhdHVzLGYudHJhbnNmb3JtUmVzcG9uc2UpO2E9YS5zdGF0dXM7cmV0dXJuIDIwMDw9YSYmMzAwPmE/YjprLnJlamVjdChiKX1mdW5jdGlvbiBlKGEsYil7dmFyIGMsZD17fTtuKGEsZnVuY3Rpb24oYSxlKXtEKGEpPyhjPWEoYiksbnVsbCE9YyYmKGRbZV09YykpOmRbZV09YX0pO3JldHVybiBkfWlmKCFFKGIpKXRocm93IEgoXCIkaHR0cFwiKShcImJhZHJlcVwiLGIpO2lmKCFGKGIudXJsKSl0aHJvdyBIKFwiJGh0dHBcIikoXCJiYWRyZXFcIixiLnVybCk7dmFyIGY9VCh7bWV0aG9kOlwiZ2V0XCIsdHJhbnNmb3JtUmVxdWVzdDphLnRyYW5zZm9ybVJlcXVlc3QsdHJhbnNmb3JtUmVzcG9uc2U6YS50cmFuc2Zvcm1SZXNwb25zZSxwYXJhbVNlcmlhbGl6ZXI6YS5wYXJhbVNlcmlhbGl6ZXJ9LFxuYik7Zi5oZWFkZXJzPWZ1bmN0aW9uKGIpe3ZhciBjPWEuaGVhZGVycyxkPVQoe30sYi5oZWFkZXJzKSxmLGcsaCxjPVQoe30sYy5jb21tb24sY1tHKGIubWV0aG9kKV0pO2E6Zm9yKGYgaW4gYyl7Zz1HKGYpO2ZvcihoIGluIGQpaWYoRyhoKT09PWcpY29udGludWUgYTtkW2ZdPWNbZl19cmV0dXJuIGUoZCxuYShiKSl9KGIpO2YubWV0aG9kPXViKGYubWV0aG9kKTtmLnBhcmFtU2VyaWFsaXplcj1GKGYucGFyYW1TZXJpYWxpemVyKT9sLmdldChmLnBhcmFtU2VyaWFsaXplcik6Zi5wYXJhbVNlcmlhbGl6ZXI7dmFyIGc9W2Z1bmN0aW9uKGIpe3ZhciBkPWIuaGVhZGVycyxlPWhkKGIuZGF0YSxnZChkKSx2LGIudHJhbnNmb3JtUmVxdWVzdCk7eChlKSYmbihkLGZ1bmN0aW9uKGEsYil7XCJjb250ZW50LXR5cGVcIj09PUcoYikmJmRlbGV0ZSBkW2JdfSk7eChiLndpdGhDcmVkZW50aWFscykmJiF4KGEud2l0aENyZWRlbnRpYWxzKSYmKGIud2l0aENyZWRlbnRpYWxzPWEud2l0aENyZWRlbnRpYWxzKTtcbnJldHVybiByKGIsZSkudGhlbihjLGMpfSx2XSxoPWsud2hlbihmKTtmb3IobihLLGZ1bmN0aW9uKGEpeyhhLnJlcXVlc3R8fGEucmVxdWVzdEVycm9yKSYmZy51bnNoaWZ0KGEucmVxdWVzdCxhLnJlcXVlc3RFcnJvcik7KGEucmVzcG9uc2V8fGEucmVzcG9uc2VFcnJvcikmJmcucHVzaChhLnJlc3BvbnNlLGEucmVzcG9uc2VFcnJvcil9KTtnLmxlbmd0aDspe2I9Zy5zaGlmdCgpO3ZhciBtPWcuc2hpZnQoKSxoPWgudGhlbihiLG0pfWQ/KGguc3VjY2Vzcz1mdW5jdGlvbihhKXtTYShhLFwiZm5cIik7aC50aGVuKGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxmKX0pO3JldHVybiBofSxoLmVycm9yPWZ1bmN0aW9uKGEpe1NhKGEsXCJmblwiKTtoLnRoZW4obnVsbCxmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsZil9KTtyZXR1cm4gaH0pOihoLnN1Y2Nlc3M9aWQoXCJzdWNjZXNzXCIpLGguZXJyb3I9aWQoXCJlcnJvclwiKSk7cmV0dXJuIGh9ZnVuY3Rpb24gcihjLFxuZCl7ZnVuY3Rpb24gZyhhLGMsZCxlKXtmdW5jdGlvbiBmKCl7bChjLGEsZCxlKX1LJiYoMjAwPD1hJiYzMDA+YT9LLnB1dChTLFthLGMsZmQoZCksZV0pOksucmVtb3ZlKFMpKTtiP2guJGFwcGx5QXN5bmMoZik6KGYoKSxoLiQkcGhhc2V8fGguJGFwcGx5KCkpfWZ1bmN0aW9uIGwoYSxiLGQsZSl7Yj0tMTw9Yj9iOjA7KDIwMDw9YiYmMzAwPmI/QS5yZXNvbHZlOkEucmVqZWN0KSh7ZGF0YTphLHN0YXR1czpiLGhlYWRlcnM6Z2QoZCksY29uZmlnOmMsc3RhdHVzVGV4dDplfSl9ZnVuY3Rpb24gcihhKXtsKGEuZGF0YSxhLnN0YXR1cyxuYShhLmhlYWRlcnMoKSksYS5zdGF0dXNUZXh0KX1mdW5jdGlvbiB6KCl7dmFyIGE9bS5wZW5kaW5nUmVxdWVzdHMuaW5kZXhPZihjKTstMSE9PWEmJm0ucGVuZGluZ1JlcXVlc3RzLnNwbGljZShhLDEpfXZhciBBPWsuZGVmZXIoKSxRPUEucHJvbWlzZSxLLE0sUD1jLmhlYWRlcnMsUz1zKGMudXJsLGMucGFyYW1TZXJpYWxpemVyKGMucGFyYW1zKSk7XG5tLnBlbmRpbmdSZXF1ZXN0cy5wdXNoKGMpO1EudGhlbih6LHopOyFjLmNhY2hlJiYhYS5jYWNoZXx8ITE9PT1jLmNhY2hlfHxcIkdFVFwiIT09Yy5tZXRob2QmJlwiSlNPTlBcIiE9PWMubWV0aG9kfHwoSz1FKGMuY2FjaGUpP2MuY2FjaGU6RShhLmNhY2hlKT9hLmNhY2hlOkkpO0smJihNPUsuZ2V0KFMpLHkoTSk/TSYmRChNLnRoZW4pP00udGhlbihyLHIpOkwoTSk/bChNWzFdLE1bMF0sbmEoTVsyXSksTVszXSk6bChNLDIwMCx7fSxcIk9LXCIpOksucHV0KFMsUSkpO3goTSkmJigoTT1qZChjLnVybCk/ZigpW2MueHNyZkNvb2tpZU5hbWV8fGEueHNyZkNvb2tpZU5hbWVdOnYpJiYoUFtjLnhzcmZIZWFkZXJOYW1lfHxhLnhzcmZIZWFkZXJOYW1lXT1NKSxlKGMubWV0aG9kLFMsZCxnLFAsYy50aW1lb3V0LGMud2l0aENyZWRlbnRpYWxzLGMucmVzcG9uc2VUeXBlKSk7cmV0dXJuIFF9ZnVuY3Rpb24gcyhhLGIpezA8Yi5sZW5ndGgmJihhKz0oLTE9PWEuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCIpK2IpO1xucmV0dXJuIGF9dmFyIEk9ZyhcIiRodHRwXCIpO2EucGFyYW1TZXJpYWxpemVyPUYoYS5wYXJhbVNlcmlhbGl6ZXIpP2wuZ2V0KGEucGFyYW1TZXJpYWxpemVyKTphLnBhcmFtU2VyaWFsaXplcjt2YXIgSz1bXTtuKGMsZnVuY3Rpb24oYSl7Sy51bnNoaWZ0KEYoYSk/bC5nZXQoYSk6bC5pbnZva2UoYSkpfSk7bS5wZW5kaW5nUmVxdWVzdHM9W107KGZ1bmN0aW9uKGEpe24oYXJndW1lbnRzLGZ1bmN0aW9uKGEpe21bYV09ZnVuY3Rpb24oYixjKXtyZXR1cm4gbShUKHt9LGN8fHt9LHttZXRob2Q6YSx1cmw6Yn0pKX19KX0pKFwiZ2V0XCIsXCJkZWxldGVcIixcImhlYWRcIixcImpzb25wXCIpOyhmdW5jdGlvbihhKXtuKGFyZ3VtZW50cyxmdW5jdGlvbihhKXttW2FdPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gbShUKHt9LGR8fHt9LHttZXRob2Q6YSx1cmw6YixkYXRhOmN9KSl9fSl9KShcInBvc3RcIixcInB1dFwiLFwicGF0Y2hcIik7bS5kZWZhdWx0cz1hO3JldHVybiBtfV19ZnVuY3Rpb24gcWYoKXt0aGlzLiRnZXQ9XG5mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgTy5YTUxIdHRwUmVxdWVzdH19fWZ1bmN0aW9uIHBmKCl7dGhpcy4kZ2V0PVtcIiRicm93c2VyXCIsXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixcIiR4aHJGYWN0b3J5XCIsZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuIGZnKGEsYyxhLmRlZmVyLGIuYW5ndWxhci5jYWxsYmFja3MsZFswXSl9XX1mdW5jdGlvbiBmZyhhLGIsZCxjLGUpe2Z1bmN0aW9uIGYoYSxiLGQpe3ZhciBmPWUuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxtPW51bGw7Zi50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7Zi5zcmM9YTtmLmFzeW5jPSEwO209ZnVuY3Rpb24oYSl7Zi5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLG0sITEpO2YucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsbSwhMSk7ZS5ib2R5LnJlbW92ZUNoaWxkKGYpO2Y9bnVsbDt2YXIgZz0tMSxJPVwidW5rbm93blwiO2EmJihcImxvYWRcIiE9PWEudHlwZXx8Y1tiXS5jYWxsZWR8fChhPXt0eXBlOlwiZXJyb3JcIn0pLFxuST1hLnR5cGUsZz1cImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCk7ZCYmZChnLEkpfTtmLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbSwhMSk7Zi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixtLCExKTtlLmJvZHkuYXBwZW5kQ2hpbGQoZik7cmV0dXJuIG19cmV0dXJuIGZ1bmN0aW9uKGUsaCxrLGwsbSxyLHMsSSl7ZnVuY3Rpb24gSygpe3cmJncoKTt1JiZ1LmFib3J0KCl9ZnVuY3Rpb24gdChiLGMsZSxmLGcpe3koeikmJmQuY2FuY2VsKHopO3c9dT1udWxsO2IoYyxlLGYsZyk7YS4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KEIpfWEuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCgpO2g9aHx8YS51cmwoKTtpZihcImpzb25wXCI9PUcoZSkpe3ZhciBwPVwiX1wiKyhjLmNvdW50ZXIrKykudG9TdHJpbmcoMzYpO2NbcF09ZnVuY3Rpb24oYSl7Y1twXS5kYXRhPWE7Y1twXS5jYWxsZWQ9ITB9O3ZhciB3PWYoaC5yZXBsYWNlKFwiSlNPTl9DQUxMQkFDS1wiLFwiYW5ndWxhci5jYWxsYmFja3MuXCIrXG5wKSxwLGZ1bmN0aW9uKGEsYil7dChsLGEsY1twXS5kYXRhLFwiXCIsYik7Y1twXT1CfSl9ZWxzZXt2YXIgdT1iKGUsaCk7dS5vcGVuKGUsaCwhMCk7bihtLGZ1bmN0aW9uKGEsYil7eShhKSYmdS5zZXRSZXF1ZXN0SGVhZGVyKGIsYSl9KTt1Lm9ubG9hZD1mdW5jdGlvbigpe3ZhciBhPXUuc3RhdHVzVGV4dHx8XCJcIixiPVwicmVzcG9uc2VcImluIHU/dS5yZXNwb25zZTp1LnJlc3BvbnNlVGV4dCxjPTEyMjM9PT11LnN0YXR1cz8yMDQ6dS5zdGF0dXM7MD09PWMmJihjPWI/MjAwOlwiZmlsZVwiPT16YShoKS5wcm90b2NvbD80MDQ6MCk7dChsLGMsYix1LmdldEFsbFJlc3BvbnNlSGVhZGVycygpLGEpfTtlPWZ1bmN0aW9uKCl7dChsLC0xLG51bGwsbnVsbCxcIlwiKX07dS5vbmVycm9yPWU7dS5vbmFib3J0PWU7cyYmKHUud2l0aENyZWRlbnRpYWxzPSEwKTtpZihJKXRyeXt1LnJlc3BvbnNlVHlwZT1JfWNhdGNoKGxhKXtpZihcImpzb25cIiE9PUkpdGhyb3cgbGE7fXUuc2VuZCh4KGspP251bGw6ayl9aWYoMDxcbnIpdmFyIHo9ZChLLHIpO2Vsc2UgciYmRChyLnRoZW4pJiZyLnRoZW4oSyl9fWZ1bmN0aW9uIGtmKCl7dmFyIGE9XCJ7e1wiLGI9XCJ9fVwiO3RoaXMuc3RhcnRTeW1ib2w9ZnVuY3Rpb24oYil7cmV0dXJuIGI/KGE9Yix0aGlzKTphfTt0aGlzLmVuZFN5bWJvbD1mdW5jdGlvbihhKXtyZXR1cm4gYT8oYj1hLHRoaXMpOmJ9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkc2NlXCIsZnVuY3Rpb24oZCxjLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuXCJcXFxcXFxcXFxcXFxcIithfWZ1bmN0aW9uIGcoYyl7cmV0dXJuIGMucmVwbGFjZShyLGEpLnJlcGxhY2UocyxiKX1mdW5jdGlvbiBoKGEsYixjLGQpe3ZhciBlO3JldHVybiBlPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe2UoKTtyZXR1cm4gZChhKX0sYixjKX1mdW5jdGlvbiBrKGYsayxyLHApe2Z1bmN0aW9uIHMoYSl7dHJ5e3ZhciBiPWE7YT1yP2UuZ2V0VHJ1c3RlZChyLGIpOmUudmFsdWVPZihiKTt2YXIgZDtpZihwJiYheShhKSlkPVxuYTtlbHNlIGlmKG51bGw9PWEpZD1cIlwiO2Vsc2V7c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwic3RyaW5nXCI6YnJlYWs7Y2FzZSBcIm51bWJlclwiOmE9XCJcIithO2JyZWFrO2RlZmF1bHQ6YT1lYihhKX1kPWF9cmV0dXJuIGR9Y2F0Y2goZyl7YyhLYS5pbnRlcnIoZixnKSl9fWlmKCFmLmxlbmd0aHx8LTE9PT1mLmluZGV4T2YoYSkpe3ZhciB1O2t8fChrPWcoZiksdT1iYShrKSx1LmV4cD1mLHUuZXhwcmVzc2lvbnM9W10sdS4kJHdhdGNoRGVsZWdhdGU9aCk7cmV0dXJuIHV9cD0hIXA7dmFyIG4seixBPTAsUT1bXSwkPVtdO3U9Zi5sZW5ndGg7Zm9yKHZhciBNPVtdLFA9W107QTx1OylpZigtMSE9KG49Zi5pbmRleE9mKGEsQSkpJiYtMSE9KHo9Zi5pbmRleE9mKGIsbitsKSkpQSE9PW4mJk0ucHVzaChnKGYuc3Vic3RyaW5nKEEsbikpKSxBPWYuc3Vic3RyaW5nKG4rbCx6KSxRLnB1c2goQSksJC5wdXNoKGQoQSxzKSksQT16K20sUC5wdXNoKE0ubGVuZ3RoKSxNLnB1c2goXCJcIik7ZWxzZXtBIT09dSYmXG5NLnB1c2goZyhmLnN1YnN0cmluZyhBKSkpO2JyZWFrfXImJjE8TS5sZW5ndGgmJkthLnRocm93Tm9jb25jYXQoZik7aWYoIWt8fFEubGVuZ3RoKXt2YXIgUz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPVEubGVuZ3RoO2I8YztiKyspe2lmKHAmJngoYVtiXSkpcmV0dXJuO01bUFtiXV09YVtiXX1yZXR1cm4gTS5qb2luKFwiXCIpfTtyZXR1cm4gVChmdW5jdGlvbihhKXt2YXIgYj0wLGQ9US5sZW5ndGgsZT1BcnJheShkKTt0cnl7Zm9yKDtiPGQ7YisrKWVbYl09JFtiXShhKTtyZXR1cm4gUyhlKX1jYXRjaChnKXtjKEthLmludGVycihmLGcpKX19LHtleHA6ZixleHByZXNzaW9uczpRLCQkd2F0Y2hEZWxlZ2F0ZTpmdW5jdGlvbihhLGIpe3ZhciBjO3JldHVybiBhLiR3YXRjaEdyb3VwKCQsZnVuY3Rpb24oZCxlKXt2YXIgZj1TKGQpO0QoYikmJmIuY2FsbCh0aGlzLGYsZCE9PWU/YzpmLGEpO2M9Zn0pfX0pfX12YXIgbD1hLmxlbmd0aCxtPWIubGVuZ3RoLHI9bmV3IFJlZ0V4cChhLnJlcGxhY2UoLy4vZyxcbmYpLFwiZ1wiKSxzPW5ldyBSZWdFeHAoYi5yZXBsYWNlKC8uL2csZiksXCJnXCIpO2suc3RhcnRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYX07ay5lbmRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYn07cmV0dXJuIGt9XX1mdW5jdGlvbiBsZigpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkd2luZG93XCIsXCIkcVwiLFwiJCRxXCIsXCIkYnJvd3NlclwiLGZ1bmN0aW9uKGEsYixkLGMsZSl7ZnVuY3Rpb24gZihmLGssbCxtKXtmdW5jdGlvbiByKCl7cz9mLmFwcGx5KG51bGwsSSk6ZihwKX12YXIgcz00PGFyZ3VtZW50cy5sZW5ndGgsST1zP3dhLmNhbGwoYXJndW1lbnRzLDQpOltdLEs9Yi5zZXRJbnRlcnZhbCx0PWIuY2xlYXJJbnRlcnZhbCxwPTAsdz15KG0pJiYhbSx1PSh3P2M6ZCkuZGVmZXIoKSxuPXUucHJvbWlzZTtsPXkobCk/bDowO24uJCRpbnRlcnZhbElkPUsoZnVuY3Rpb24oKXt3P2UuZGVmZXIocik6YS4kZXZhbEFzeW5jKHIpO3Uubm90aWZ5KHArKyk7MDxsJiZwPj1sJiYodS5yZXNvbHZlKHApLFxudChuLiQkaW50ZXJ2YWxJZCksZGVsZXRlIGdbbi4kJGludGVydmFsSWRdKTt3fHxhLiRhcHBseSgpfSxrKTtnW24uJCRpbnRlcnZhbElkXT11O3JldHVybiBufXZhciBnPXt9O2YuY2FuY2VsPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLiQkaW50ZXJ2YWxJZCBpbiBnPyhnW2EuJCRpbnRlcnZhbElkXS5yZWplY3QoXCJjYW5jZWxlZFwiKSxiLmNsZWFySW50ZXJ2YWwoYS4kJGludGVydmFsSWQpLGRlbGV0ZSBnW2EuJCRpbnRlcnZhbElkXSwhMCk6ITF9O3JldHVybiBmfV19ZnVuY3Rpb24gZWMoYSl7YT1hLnNwbGl0KFwiL1wiKTtmb3IodmFyIGI9YS5sZW5ndGg7Yi0tOylhW2JdPXFiKGFbYl0pO3JldHVybiBhLmpvaW4oXCIvXCIpfWZ1bmN0aW9uIGtkKGEsYil7dmFyIGQ9emEoYSk7Yi4kJHByb3RvY29sPWQucHJvdG9jb2w7Yi4kJGhvc3Q9ZC5ob3N0bmFtZTtiLiQkcG9ydD1jYShkLnBvcnQpfHxnZ1tkLnByb3RvY29sXXx8bnVsbH1mdW5jdGlvbiBsZChhLGIpe3ZhciBkPVwiL1wiIT09YS5jaGFyQXQoMCk7XG5kJiYoYT1cIi9cIithKTt2YXIgYz16YShhKTtiLiQkcGF0aD1kZWNvZGVVUklDb21wb25lbnQoZCYmXCIvXCI9PT1jLnBhdGhuYW1lLmNoYXJBdCgwKT9jLnBhdGhuYW1lLnN1YnN0cmluZygxKTpjLnBhdGhuYW1lKTtiLiQkc2VhcmNoPXpjKGMuc2VhcmNoKTtiLiQkaGFzaD1kZWNvZGVVUklDb21wb25lbnQoYy5oYXNoKTtiLiQkcGF0aCYmXCIvXCIhPWIuJCRwYXRoLmNoYXJBdCgwKSYmKGIuJCRwYXRoPVwiL1wiK2IuJCRwYXRoKX1mdW5jdGlvbiBwYShhLGIpe2lmKDA9PT1iLmluZGV4T2YoYSkpcmV0dXJuIGIuc3Vic3RyKGEubGVuZ3RoKX1mdW5jdGlvbiBJYShhKXt2YXIgYj1hLmluZGV4T2YoXCIjXCIpO3JldHVybi0xPT1iP2E6YS5zdWJzdHIoMCxiKX1mdW5jdGlvbiBrYihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oIy4rKXwjJC8sXCIkMVwiKX1mdW5jdGlvbiBmYyhhLGIsZCl7dGhpcy4kJGh0bWw1PSEwO2Q9ZHx8XCJcIjtrZChhLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihhKXt2YXIgZD1wYShiLFxuYSk7aWYoIUYoZCkpdGhyb3cgR2IoXCJpcHRocHJmeFwiLGEsYik7bGQoZCx0aGlzKTt0aGlzLiQkcGF0aHx8KHRoaXMuJCRwYXRoPVwiL1wiKTt0aGlzLiQkY29tcG9zZSgpfTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBhPVViKHRoaXMuJCRzZWFyY2gpLGQ9dGhpcy4kJGhhc2g/XCIjXCIrcWIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1lYyh0aGlzLiQkcGF0aCkrKGE/XCI/XCIrYTpcIlwiKStkO3RoaXMuJCRhYnNVcmw9Yit0aGlzLiQkdXJsLnN1YnN0cigxKX07dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihjLGUpe2lmKGUmJlwiI1wiPT09ZVswXSlyZXR1cm4gdGhpcy5oYXNoKGUuc2xpY2UoMSkpLCEwO3ZhciBmLGc7eShmPXBhKGEsYykpPyhnPWYsZz15KGY9cGEoZCxmKSk/YisocGEoXCIvXCIsZil8fGYpOmErZyk6eShmPXBhKGIsYykpP2c9YitmOmI9PWMrXCIvXCImJihnPWIpO2cmJnRoaXMuJCRwYXJzZShnKTtyZXR1cm4hIWd9fWZ1bmN0aW9uIGdjKGEsYixkKXtrZChhLHRoaXMpO1xudGhpcy4kJHBhcnNlPWZ1bmN0aW9uKGMpe3ZhciBlPXBhKGEsYyl8fHBhKGIsYyksZjt4KGUpfHxcIiNcIiE9PWUuY2hhckF0KDApP3RoaXMuJCRodG1sNT9mPWU6KGY9XCJcIix4KGUpJiYoYT1jLHRoaXMucmVwbGFjZSgpKSk6KGY9cGEoZCxlKSx4KGYpJiYoZj1lKSk7bGQoZix0aGlzKTtjPXRoaXMuJCRwYXRoO3ZhciBlPWEsZz0vXlxcL1tBLVpdOihcXC8uKikvOzA9PT1mLmluZGV4T2YoZSkmJihmPWYucmVwbGFjZShlLFwiXCIpKTtnLmV4ZWMoZil8fChjPShmPWcuZXhlYyhjKSk/ZlsxXTpjKTt0aGlzLiQkcGF0aD1jO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGI9VWIodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cIiNcIitxYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPWVjKHRoaXMuJCRwYXRoKSsoYj9cIj9cIitiOlwiXCIpK2U7dGhpcy4kJGFic1VybD1hKyh0aGlzLiQkdXJsP2QrdGhpcy4kJHVybDpcIlwiKX07dGhpcy4kJHBhcnNlTGlua1VybD1cbmZ1bmN0aW9uKGIsZCl7cmV0dXJuIElhKGEpPT1JYShiKT8odGhpcy4kJHBhcnNlKGIpLCEwKTohMX19ZnVuY3Rpb24gbWQoYSxiLGQpe3RoaXMuJCRodG1sNT0hMDtnYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihjLGUpe2lmKGUmJlwiI1wiPT09ZVswXSlyZXR1cm4gdGhpcy5oYXNoKGUuc2xpY2UoMSkpLCEwO3ZhciBmLGc7YT09SWEoYyk/Zj1jOihnPXBhKGIsYykpP2Y9YStkK2c6Yj09PWMrXCIvXCImJihmPWIpO2YmJnRoaXMuJCRwYXJzZShmKTtyZXR1cm4hIWZ9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGI9VWIodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cIiNcIitxYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPWVjKHRoaXMuJCRwYXRoKSsoYj9cIj9cIitiOlwiXCIpK2U7dGhpcy4kJGFic1VybD1hK2QrdGhpcy4kJHVybH19ZnVuY3Rpb24gSGIoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYV19fWZ1bmN0aW9uIG5kKGEsXG5iKXtyZXR1cm4gZnVuY3Rpb24oZCl7aWYoeChkKSlyZXR1cm4gdGhpc1thXTt0aGlzW2FdPWIoZCk7dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc319ZnVuY3Rpb24gcmYoKXt2YXIgYT1cIlwiLGI9e2VuYWJsZWQ6ITEscmVxdWlyZUJhc2U6ITAscmV3cml0ZUxpbmtzOiEwfTt0aGlzLmhhc2hQcmVmaXg9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGE9Yix0aGlzKTphfTt0aGlzLmh0bWw1TW9kZT1mdW5jdGlvbihhKXtyZXR1cm4gTmEoYSk/KGIuZW5hYmxlZD1hLHRoaXMpOkUoYSk/KE5hKGEuZW5hYmxlZCkmJihiLmVuYWJsZWQ9YS5lbmFibGVkKSxOYShhLnJlcXVpcmVCYXNlKSYmKGIucmVxdWlyZUJhc2U9YS5yZXF1aXJlQmFzZSksTmEoYS5yZXdyaXRlTGlua3MpJiYoYi5yZXdyaXRlTGlua3M9YS5yZXdyaXRlTGlua3MpLHRoaXMpOmJ9O3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHNuaWZmZXJcIixcIiRyb290RWxlbWVudFwiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGQsXG5jLGUsZixnKXtmdW5jdGlvbiBoKGEsYixkKXt2YXIgZT1sLnVybCgpLGY9bC4kJHN0YXRlO3RyeXtjLnVybChhLGIsZCksbC4kJHN0YXRlPWMuc3RhdGUoKX1jYXRjaChnKXt0aHJvdyBsLnVybChlKSxsLiQkc3RhdGU9ZixnO319ZnVuY3Rpb24gayhhLGIpe2QuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixsLmFic1VybCgpLGEsbC4kJHN0YXRlLGIpfXZhciBsLG07bT1jLmJhc2VIcmVmKCk7dmFyIHI9Yy51cmwoKSxzO2lmKGIuZW5hYmxlZCl7aWYoIW0mJmIucmVxdWlyZUJhc2UpdGhyb3cgR2IoXCJub2Jhc2VcIik7cz1yLnN1YnN0cmluZygwLHIuaW5kZXhPZihcIi9cIixyLmluZGV4T2YoXCIvL1wiKSsyKSkrKG18fFwiL1wiKTttPWUuaGlzdG9yeT9mYzptZH1lbHNlIHM9SWEociksbT1nYzt2YXIgST1zLnN1YnN0cigwLElhKHMpLmxhc3RJbmRleE9mKFwiL1wiKSsxKTtsPW5ldyBtKHMsSSxcIiNcIithKTtsLiQkcGFyc2VMaW5rVXJsKHIscik7bC4kJHN0YXRlPWMuc3RhdGUoKTtcbnZhciBuPS9eXFxzKihqYXZhc2NyaXB0fG1haWx0byk6L2k7Zi5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7aWYoYi5yZXdyaXRlTGlua3MmJiFhLmN0cmxLZXkmJiFhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiYyIT1hLndoaWNoJiYyIT1hLmJ1dHRvbil7Zm9yKHZhciBlPUMoYS50YXJnZXQpO1wiYVwiIT09cmEoZVswXSk7KWlmKGVbMF09PT1mWzBdfHwhKGU9ZS5wYXJlbnQoKSlbMF0pcmV0dXJuO3ZhciBoPWUucHJvcChcImhyZWZcIiksaz1lLmF0dHIoXCJocmVmXCIpfHxlLmF0dHIoXCJ4bGluazpocmVmXCIpO0UoaCkmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWgudG9TdHJpbmcoKSYmKGg9emEoaC5hbmltVmFsKS5ocmVmKTtuLnRlc3QoaCl8fCFofHxlLmF0dHIoXCJ0YXJnZXRcIil8fGEuaXNEZWZhdWx0UHJldmVudGVkKCl8fCFsLiQkcGFyc2VMaW5rVXJsKGgsayl8fChhLnByZXZlbnREZWZhdWx0KCksbC5hYnNVcmwoKSE9Yy51cmwoKSYmKGQuJGFwcGx5KCksZy5hbmd1bGFyW1wiZmYtNjg0MjA4LXByZXZlbnREZWZhdWx0XCJdPVxuITApKX19KTtrYihsLmFic1VybCgpKSE9a2IocikmJmMudXJsKGwuYWJzVXJsKCksITApO3ZhciB0PSEwO2Mub25VcmxDaGFuZ2UoZnVuY3Rpb24oYSxiKXt4KHBhKEksYSkpP2cubG9jYXRpb24uaHJlZj1hOihkLiRldmFsQXN5bmMoZnVuY3Rpb24oKXt2YXIgYz1sLmFic1VybCgpLGU9bC4kJHN0YXRlLGY7YT1rYihhKTtsLiQkcGFyc2UoYSk7bC4kJHN0YXRlPWI7Zj1kLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdGFydFwiLGEsYyxiLGUpLmRlZmF1bHRQcmV2ZW50ZWQ7bC5hYnNVcmwoKT09PWEmJihmPyhsLiQkcGFyc2UoYyksbC4kJHN0YXRlPWUsaChjLCExLGUpKToodD0hMSxrKGMsZSkpKX0pLGQuJCRwaGFzZXx8ZC4kZGlnZXN0KCkpfSk7ZC4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYT1rYihjLnVybCgpKSxiPWtiKGwuYWJzVXJsKCkpLGY9Yy5zdGF0ZSgpLGc9bC4kJHJlcGxhY2UsbT1hIT09Ynx8bC4kJGh0bWw1JiZlLmhpc3RvcnkmJmYhPT1sLiQkc3RhdGU7aWYodHx8XG5tKXQ9ITEsZC4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIGI9bC5hYnNVcmwoKSxjPWQuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsYixhLGwuJCRzdGF0ZSxmKS5kZWZhdWx0UHJldmVudGVkO2wuYWJzVXJsKCk9PT1iJiYoYz8obC4kJHBhcnNlKGEpLGwuJCRzdGF0ZT1mKToobSYmaChiLGcsZj09PWwuJCRzdGF0ZT9udWxsOmwuJCRzdGF0ZSksayhhLGYpKSl9KTtsLiQkcmVwbGFjZT0hMX0pO3JldHVybiBsfV19ZnVuY3Rpb24gc2YoKXt2YXIgYT0hMCxiPXRoaXM7dGhpcy5kZWJ1Z0VuYWJsZWQ9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGE9Yix0aGlzKTphfTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGMoYSl7YSBpbnN0YW5jZW9mIEVycm9yJiYoYS5zdGFjaz9hPWEubWVzc2FnZSYmLTE9PT1hLnN0YWNrLmluZGV4T2YoYS5tZXNzYWdlKT9cIkVycm9yOiBcIithLm1lc3NhZ2UrXCJcXG5cIithLnN0YWNrOmEuc3RhY2s6YS5zb3VyY2VVUkwmJlxuKGE9YS5tZXNzYWdlK1wiXFxuXCIrYS5zb3VyY2VVUkwrXCI6XCIrYS5saW5lKSk7cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXt2YXIgYj1kLmNvbnNvbGV8fHt9LGU9YlthXXx8Yi5sb2d8fEI7YT0hMTt0cnl7YT0hIWUuYXBwbHl9Y2F0Y2goayl7fXJldHVybiBhP2Z1bmN0aW9uKCl7dmFyIGE9W107bihhcmd1bWVudHMsZnVuY3Rpb24oYil7YS5wdXNoKGMoYikpfSk7cmV0dXJuIGUuYXBwbHkoYixhKX06ZnVuY3Rpb24oYSxiKXtlKGEsbnVsbD09Yj9cIlwiOmIpfX1yZXR1cm57bG9nOmUoXCJsb2dcIiksaW5mbzplKFwiaW5mb1wiKSx3YXJuOmUoXCJ3YXJuXCIpLGVycm9yOmUoXCJlcnJvclwiKSxkZWJ1ZzpmdW5jdGlvbigpe3ZhciBjPWUoXCJkZWJ1Z1wiKTtyZXR1cm4gZnVuY3Rpb24oKXthJiZjLmFwcGx5KGIsYXJndW1lbnRzKX19KCl9fV19ZnVuY3Rpb24gWGEoYSxiKXtpZihcIl9fZGVmaW5lR2V0dGVyX19cIj09PWF8fFwiX19kZWZpbmVTZXR0ZXJfX1wiPT09YXx8XCJfX2xvb2t1cEdldHRlcl9fXCI9PT1hfHxcIl9fbG9va3VwU2V0dGVyX19cIj09PVxuYXx8XCJfX3Byb3RvX19cIj09PWEpdGhyb3cga2EoXCJpc2VjZmxkXCIsYik7cmV0dXJuIGF9ZnVuY3Rpb24gaGcoYSl7cmV0dXJuIGErXCJcIn1mdW5jdGlvbiBBYShhLGIpe2lmKGEpe2lmKGEuY29uc3RydWN0b3I9PT1hKXRocm93IGthKFwiaXNlY2ZuXCIsYik7aWYoYS53aW5kb3c9PT1hKXRocm93IGthKFwiaXNlY3dpbmRvd1wiLGIpO2lmKGEuY2hpbGRyZW4mJihhLm5vZGVOYW1lfHxhLnByb3AmJmEuYXR0ciYmYS5maW5kKSl0aHJvdyBrYShcImlzZWNkb21cIixiKTtpZihhPT09T2JqZWN0KXRocm93IGthKFwiaXNlY29ialwiLGIpO31yZXR1cm4gYX1mdW5jdGlvbiBvZChhLGIpe2lmKGEpe2lmKGEuY29uc3RydWN0b3I9PT1hKXRocm93IGthKFwiaXNlY2ZuXCIsYik7aWYoYT09PWlnfHxhPT09amd8fGE9PT1rZyl0aHJvdyBrYShcImlzZWNmZlwiLGIpO319ZnVuY3Rpb24gSWIoYSxiKXtpZihhJiYoYT09PSgwKS5jb25zdHJ1Y3Rvcnx8YT09PSghMSkuY29uc3RydWN0b3J8fGE9PT1cIlwiLmNvbnN0cnVjdG9yfHxcbmE9PT17fS5jb25zdHJ1Y3Rvcnx8YT09PVtdLmNvbnN0cnVjdG9yfHxhPT09RnVuY3Rpb24uY29uc3RydWN0b3IpKXRocm93IGthKFwiaXNlY2FmXCIsYik7fWZ1bmN0aW9uIGxnKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhP2E6Yn1mdW5jdGlvbiBwZChhLGIpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYT9iOlwidW5kZWZpbmVkXCI9PT10eXBlb2YgYj9hOmErYn1mdW5jdGlvbiBSKGEsYil7dmFyIGQsYztzd2l0Y2goYS50eXBlKXtjYXNlIHEuUHJvZ3JhbTpkPSEwO24oYS5ib2R5LGZ1bmN0aW9uKGEpe1IoYS5leHByZXNzaW9uLGIpO2Q9ZCYmYS5leHByZXNzaW9uLmNvbnN0YW50fSk7YS5jb25zdGFudD1kO2JyZWFrO2Nhc2UgcS5MaXRlcmFsOmEuY29uc3RhbnQ9ITA7YS50b1dhdGNoPVtdO2JyZWFrO2Nhc2UgcS5VbmFyeUV4cHJlc3Npb246UihhLmFyZ3VtZW50LGIpO2EuY29uc3RhbnQ9YS5hcmd1bWVudC5jb25zdGFudDthLnRvV2F0Y2g9YS5hcmd1bWVudC50b1dhdGNoO1xuYnJlYWs7Y2FzZSBxLkJpbmFyeUV4cHJlc3Npb246UihhLmxlZnQsYik7UihhLnJpZ2h0LGIpO2EuY29uc3RhbnQ9YS5sZWZ0LmNvbnN0YW50JiZhLnJpZ2h0LmNvbnN0YW50O2EudG9XYXRjaD1hLmxlZnQudG9XYXRjaC5jb25jYXQoYS5yaWdodC50b1dhdGNoKTticmVhaztjYXNlIHEuTG9naWNhbEV4cHJlc3Npb246UihhLmxlZnQsYik7UihhLnJpZ2h0LGIpO2EuY29uc3RhbnQ9YS5sZWZ0LmNvbnN0YW50JiZhLnJpZ2h0LmNvbnN0YW50O2EudG9XYXRjaD1hLmNvbnN0YW50P1tdOlthXTticmVhaztjYXNlIHEuQ29uZGl0aW9uYWxFeHByZXNzaW9uOlIoYS50ZXN0LGIpO1IoYS5hbHRlcm5hdGUsYik7UihhLmNvbnNlcXVlbnQsYik7YS5jb25zdGFudD1hLnRlc3QuY29uc3RhbnQmJmEuYWx0ZXJuYXRlLmNvbnN0YW50JiZhLmNvbnNlcXVlbnQuY29uc3RhbnQ7YS50b1dhdGNoPWEuY29uc3RhbnQ/W106W2FdO2JyZWFrO2Nhc2UgcS5JZGVudGlmaWVyOmEuY29uc3RhbnQ9ITE7YS50b1dhdGNoPVxuW2FdO2JyZWFrO2Nhc2UgcS5NZW1iZXJFeHByZXNzaW9uOlIoYS5vYmplY3QsYik7YS5jb21wdXRlZCYmUihhLnByb3BlcnR5LGIpO2EuY29uc3RhbnQ9YS5vYmplY3QuY29uc3RhbnQmJighYS5jb21wdXRlZHx8YS5wcm9wZXJ0eS5jb25zdGFudCk7YS50b1dhdGNoPVthXTticmVhaztjYXNlIHEuQ2FsbEV4cHJlc3Npb246ZD1hLmZpbHRlcj8hYihhLmNhbGxlZS5uYW1lKS4kc3RhdGVmdWw6ITE7Yz1bXTtuKGEuYXJndW1lbnRzLGZ1bmN0aW9uKGEpe1IoYSxiKTtkPWQmJmEuY29uc3RhbnQ7YS5jb25zdGFudHx8Yy5wdXNoLmFwcGx5KGMsYS50b1dhdGNoKX0pO2EuY29uc3RhbnQ9ZDthLnRvV2F0Y2g9YS5maWx0ZXImJiFiKGEuY2FsbGVlLm5hbWUpLiRzdGF0ZWZ1bD9jOlthXTticmVhaztjYXNlIHEuQXNzaWdubWVudEV4cHJlc3Npb246UihhLmxlZnQsYik7UihhLnJpZ2h0LGIpO2EuY29uc3RhbnQ9YS5sZWZ0LmNvbnN0YW50JiZhLnJpZ2h0LmNvbnN0YW50O2EudG9XYXRjaD1bYV07XG5icmVhaztjYXNlIHEuQXJyYXlFeHByZXNzaW9uOmQ9ITA7Yz1bXTtuKGEuZWxlbWVudHMsZnVuY3Rpb24oYSl7UihhLGIpO2Q9ZCYmYS5jb25zdGFudDthLmNvbnN0YW50fHxjLnB1c2guYXBwbHkoYyxhLnRvV2F0Y2gpfSk7YS5jb25zdGFudD1kO2EudG9XYXRjaD1jO2JyZWFrO2Nhc2UgcS5PYmplY3RFeHByZXNzaW9uOmQ9ITA7Yz1bXTtuKGEucHJvcGVydGllcyxmdW5jdGlvbihhKXtSKGEudmFsdWUsYik7ZD1kJiZhLnZhbHVlLmNvbnN0YW50O2EudmFsdWUuY29uc3RhbnR8fGMucHVzaC5hcHBseShjLGEudmFsdWUudG9XYXRjaCl9KTthLmNvbnN0YW50PWQ7YS50b1dhdGNoPWM7YnJlYWs7Y2FzZSBxLlRoaXNFeHByZXNzaW9uOmEuY29uc3RhbnQ9ITE7YS50b1dhdGNoPVtdO2JyZWFrO2Nhc2UgcS5Mb2NhbHNFeHByZXNzaW9uOmEuY29uc3RhbnQ9ITEsYS50b1dhdGNoPVtdfX1mdW5jdGlvbiBxZChhKXtpZigxPT1hLmxlbmd0aCl7YT1hWzBdLmV4cHJlc3Npb247dmFyIGI9YS50b1dhdGNoO1xucmV0dXJuIDEhPT1iLmxlbmd0aD9iOmJbMF0hPT1hP2I6dn19ZnVuY3Rpb24gcmQoYSl7cmV0dXJuIGEudHlwZT09PXEuSWRlbnRpZmllcnx8YS50eXBlPT09cS5NZW1iZXJFeHByZXNzaW9ufWZ1bmN0aW9uIHNkKGEpe2lmKDE9PT1hLmJvZHkubGVuZ3RoJiZyZChhLmJvZHlbMF0uZXhwcmVzc2lvbikpcmV0dXJue3R5cGU6cS5Bc3NpZ25tZW50RXhwcmVzc2lvbixsZWZ0OmEuYm9keVswXS5leHByZXNzaW9uLHJpZ2h0Ont0eXBlOnEuTkdWYWx1ZVBhcmFtZXRlcn0sb3BlcmF0b3I6XCI9XCJ9fWZ1bmN0aW9uIHRkKGEpe3JldHVybiAwPT09YS5ib2R5Lmxlbmd0aHx8MT09PWEuYm9keS5sZW5ndGgmJihhLmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlPT09cS5MaXRlcmFsfHxhLmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlPT09cS5BcnJheUV4cHJlc3Npb258fGEuYm9keVswXS5leHByZXNzaW9uLnR5cGU9PT1xLk9iamVjdEV4cHJlc3Npb24pfWZ1bmN0aW9uIHVkKGEsYil7dGhpcy5hc3RCdWlsZGVyPVxuYTt0aGlzLiRmaWx0ZXI9Yn1mdW5jdGlvbiB2ZChhLGIpe3RoaXMuYXN0QnVpbGRlcj1hO3RoaXMuJGZpbHRlcj1ifWZ1bmN0aW9uIEpiKGEpe3JldHVyblwiY29uc3RydWN0b3JcIj09YX1mdW5jdGlvbiBoYyhhKXtyZXR1cm4gRChhLnZhbHVlT2YpP2EudmFsdWVPZigpOm1nLmNhbGwoYSl9ZnVuY3Rpb24gdGYoKXt2YXIgYT1aKCksYj1aKCk7dGhpcy4kZ2V0PVtcIiRmaWx0ZXJcIixmdW5jdGlvbihkKXtmdW5jdGlvbiBjKGMsZixyKXt2YXIgdSxuLHo7cj1yfHxLO3N3aXRjaCh0eXBlb2YgYyl7Y2FzZSBcInN0cmluZ1wiOno9Yz1jLnRyaW0oKTt2YXIgQT1yP2I6YTt1PUFbel07aWYoIXUpe1wiOlwiPT09Yy5jaGFyQXQoMCkmJlwiOlwiPT09Yy5jaGFyQXQoMSkmJihuPSEwLGM9Yy5zdWJzdHJpbmcoMikpO3U9cj9JOnM7dmFyIFE9bmV3IGljKHUpO3U9KG5ldyBqYyhRLGQsdSkpLnBhcnNlKGMpO3UuY29uc3RhbnQ/dS4kJHdhdGNoRGVsZWdhdGU9bDpuP3UuJCR3YXRjaERlbGVnYXRlPXUubGl0ZXJhbD9cbms6aDp1LmlucHV0cyYmKHUuJCR3YXRjaERlbGVnYXRlPWcpO3ImJih1PWUodSkpO0Fbel09dX1yZXR1cm4gbSh1LGYpO2Nhc2UgXCJmdW5jdGlvblwiOnJldHVybiBtKGMsZik7ZGVmYXVsdDpyZXR1cm4gbShCLGYpfX1mdW5jdGlvbiBlKGEpe2Z1bmN0aW9uIGIoYyxkLGUsZil7dmFyIGc9SztLPSEwO3RyeXtyZXR1cm4gYShjLGQsZSxmKX1maW5hbGx5e0s9Z319aWYoIWEpcmV0dXJuIGE7Yi4kJHdhdGNoRGVsZWdhdGU9YS4kJHdhdGNoRGVsZWdhdGU7Yi5hc3NpZ249ZShhLmFzc2lnbik7Yi5jb25zdGFudD1hLmNvbnN0YW50O2IubGl0ZXJhbD1hLmxpdGVyYWw7Zm9yKHZhciBjPTA7YS5pbnB1dHMmJmM8YS5pbnB1dHMubGVuZ3RoOysrYylhLmlucHV0c1tjXT1lKGEuaW5wdXRzW2NdKTtiLmlucHV0cz1hLmlucHV0cztyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIG51bGw9PWF8fG51bGw9PWI/YT09PWI6XCJvYmplY3RcIj09PXR5cGVvZiBhJiYoYT1oYyhhKSxcIm9iamVjdFwiPT09XG50eXBlb2YgYSk/ITE6YT09PWJ8fGEhPT1hJiZiIT09Yn1mdW5jdGlvbiBnKGEsYixjLGQsZSl7dmFyIGc9ZC5pbnB1dHMsaDtpZigxPT09Zy5sZW5ndGgpe3ZhciBrPWYsZz1nWzBdO3JldHVybiBhLiR3YXRjaChmdW5jdGlvbihhKXt2YXIgYj1nKGEpO2YoYixrKXx8KGg9ZChhLHYsdixbYl0pLGs9YiYmaGMoYikpO3JldHVybiBofSxiLGMsZSl9Zm9yKHZhciBsPVtdLG09W10scj0wLHM9Zy5sZW5ndGg7cjxzO3IrKylsW3JdPWYsbVtyXT1udWxsO3JldHVybiBhLiR3YXRjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0wLGU9Zy5sZW5ndGg7YzxlO2MrKyl7dmFyIGs9Z1tjXShhKTtpZihifHwoYj0hZihrLGxbY10pKSltW2NdPWssbFtjXT1rJiZoYyhrKX1iJiYoaD1kKGEsdix2LG0pKTtyZXR1cm4gaH0sYixjLGUpfWZ1bmN0aW9uIGgoYSxiLGMsZCl7dmFyIGUsZjtyZXR1cm4gZT1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe2Y9YTtcbkQoYikmJmIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3koYSkmJmQuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7eShmKSYmZSgpfSl9LGMpfWZ1bmN0aW9uIGsoYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj0hMDtuKGEsZnVuY3Rpb24oYSl7eShhKXx8KGI9ITEpfSk7cmV0dXJuIGJ9dmFyIGYsZztyZXR1cm4gZj1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe2c9YTtEKGIpJiZiLmNhbGwodGhpcyxhLGMsZCk7ZShhKSYmZC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtlKGcpJiZmKCl9KX0sYyl9ZnVuY3Rpb24gbChhLGIsYyxkKXt2YXIgZTtyZXR1cm4gZT1hLiR3YXRjaChmdW5jdGlvbihhKXtlKCk7cmV0dXJuIGQoYSl9LGIsYyl9ZnVuY3Rpb24gbShhLGIpe2lmKCFiKXJldHVybiBhO3ZhciBjPWEuJCR3YXRjaERlbGVnYXRlLGQ9ITEsYz1jIT09ayYmYyE9PWg/ZnVuY3Rpb24oYyxlLGYsZyl7Zj1kJiZnP2dbMF06YShjLGUsZixnKTtyZXR1cm4gYihmLFxuYyxlKX06ZnVuY3Rpb24oYyxkLGUsZil7ZT1hKGMsZCxlLGYpO2M9YihlLGMsZCk7cmV0dXJuIHkoZSk/YzplfTthLiQkd2F0Y2hEZWxlZ2F0ZSYmYS4kJHdhdGNoRGVsZWdhdGUhPT1nP2MuJCR3YXRjaERlbGVnYXRlPWEuJCR3YXRjaERlbGVnYXRlOmIuJHN0YXRlZnVsfHwoYy4kJHdhdGNoRGVsZWdhdGU9ZyxkPSFhLmlucHV0cyxjLmlucHV0cz1hLmlucHV0cz9hLmlucHV0czpbYV0pO3JldHVybiBjfXZhciByPUVhKCkubm9VbnNhZmVFdmFsLHM9e2NzcDpyLGV4cGVuc2l2ZUNoZWNrczohMX0sST17Y3NwOnIsZXhwZW5zaXZlQ2hlY2tzOiEwfSxLPSExO2MuJCRydW5uaW5nRXhwZW5zaXZlQ2hlY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIEt9O3JldHVybiBjfV19ZnVuY3Rpb24gdmYoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihhLGIpe3JldHVybiB3ZChmdW5jdGlvbihiKXthLiRldmFsQXN5bmMoYil9LGIpfV19ZnVuY3Rpb24gd2YoKXt0aGlzLiRnZXQ9XG5bXCIkYnJvd3NlclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihhLGIpe3JldHVybiB3ZChmdW5jdGlvbihiKXthLmRlZmVyKGIpfSxiKX1dfWZ1bmN0aW9uIHdkKGEsYil7ZnVuY3Rpb24gZCgpe3RoaXMuJCRzdGF0ZT17c3RhdHVzOjB9fWZ1bmN0aW9uIGMoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7Yi5jYWxsKGEsYyl9fWZ1bmN0aW9uIGUoYyl7IWMucHJvY2Vzc1NjaGVkdWxlZCYmYy5wZW5kaW5nJiYoYy5wcm9jZXNzU2NoZWR1bGVkPSEwLGEoZnVuY3Rpb24oKXt2YXIgYSxkLGU7ZT1jLnBlbmRpbmc7Yy5wcm9jZXNzU2NoZWR1bGVkPSExO2MucGVuZGluZz12O2Zvcih2YXIgZj0wLGc9ZS5sZW5ndGg7ZjxnOysrZil7ZD1lW2ZdWzBdO2E9ZVtmXVtjLnN0YXR1c107dHJ5e0QoYSk/ZC5yZXNvbHZlKGEoYy52YWx1ZSkpOjE9PT1jLnN0YXR1cz9kLnJlc29sdmUoYy52YWx1ZSk6ZC5yZWplY3QoYy52YWx1ZSl9Y2F0Y2goaCl7ZC5yZWplY3QoaCksYihoKX19fSkpfWZ1bmN0aW9uIGYoKXt0aGlzLnByb21pc2U9XG5uZXcgZH12YXIgZz1IKFwiJHFcIixUeXBlRXJyb3IpO1QoZC5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oYSxiLGMpe2lmKHgoYSkmJngoYikmJngoYykpcmV0dXJuIHRoaXM7dmFyIGQ9bmV3IGY7dGhpcy4kJHN0YXRlLnBlbmRpbmc9dGhpcy4kJHN0YXRlLnBlbmRpbmd8fFtdO3RoaXMuJCRzdGF0ZS5wZW5kaW5nLnB1c2goW2QsYSxiLGNdKTswPHRoaXMuJCRzdGF0ZS5zdGF0dXMmJmUodGhpcy4kJHN0YXRlKTtyZXR1cm4gZC5wcm9taXNlfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGEpfSxcImZpbmFsbHlcIjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIGsoYiwhMCxhKX0sZnVuY3Rpb24oYil7cmV0dXJuIGsoYiwhMSxhKX0sYil9fSk7VChmLnByb3RvdHlwZSx7cmVzb2x2ZTpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXN8fChhPT09dGhpcy5wcm9taXNlP3RoaXMuJCRyZWplY3QoZyhcInFjeWNsZVwiLFxuYSkpOnRoaXMuJCRyZXNvbHZlKGEpKX0sJCRyZXNvbHZlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoYSl7a3x8KGs9ITAsaC4kJHJlc29sdmUoYSkpfWZ1bmN0aW9uIGYoYSl7a3x8KGs9ITAsaC4kJHJlamVjdChhKSl9dmFyIGcsaD10aGlzLGs9ITE7dHJ5e2lmKEUoYSl8fEQoYSkpZz1hJiZhLnRoZW47RChnKT8odGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPS0xLGcuY2FsbChhLGQsZixjKHRoaXMsdGhpcy5ub3RpZnkpKSk6KHRoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWEsdGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPTEsZSh0aGlzLnByb21pc2UuJCRzdGF0ZSkpfWNhdGNoKGwpe2YobCksYihsKX19LHJlamVjdDpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXN8fHRoaXMuJCRyZWplY3QoYSl9LCQkcmVqZWN0OmZ1bmN0aW9uKGEpe3RoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWE7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPTI7ZSh0aGlzLnByb21pc2UuJCRzdGF0ZSl9LFxubm90aWZ5OmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMucHJvbWlzZS4kJHN0YXRlLnBlbmRpbmc7MD49dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzJiZkJiZkLmxlbmd0aCYmYShmdW5jdGlvbigpe2Zvcih2YXIgYSxlLGY9MCxnPWQubGVuZ3RoO2Y8ZztmKyspe2U9ZFtmXVswXTthPWRbZl1bM107dHJ5e2Uubm90aWZ5KEQoYSk/YShjKTpjKX1jYXRjaChoKXtiKGgpfX19KX19KTt2YXIgaD1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBmO2I/Yy5yZXNvbHZlKGEpOmMucmVqZWN0KGEpO3JldHVybiBjLnByb21pc2V9LGs9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW51bGw7dHJ5e0QoYykmJihkPWMoKSl9Y2F0Y2goZSl7cmV0dXJuIGgoZSwhMSl9cmV0dXJuIGQmJkQoZC50aGVuKT9kLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaChhLGIpfSxmdW5jdGlvbihhKXtyZXR1cm4gaChhLCExKX0pOmgoYSxiKX0sbD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgZjtlLnJlc29sdmUoYSk7cmV0dXJuIGUucHJvbWlzZS50aGVuKGIsXG5jLGQpfSxtPWZ1bmN0aW9uKGEpe2lmKCFEKGEpKXRocm93IGcoXCJub3JzbHZyXCIsYSk7dmFyIGI9bmV3IGY7YShmdW5jdGlvbihhKXtiLnJlc29sdmUoYSl9LGZ1bmN0aW9uKGEpe2IucmVqZWN0KGEpfSk7cmV0dXJuIGIucHJvbWlzZX07bS5wcm90b3R5cGU9ZC5wcm90b3R5cGU7bS5kZWZlcj1mdW5jdGlvbigpe3ZhciBhPW5ldyBmO2EucmVzb2x2ZT1jKGEsYS5yZXNvbHZlKTthLnJlamVjdD1jKGEsYS5yZWplY3QpO2Eubm90aWZ5PWMoYSxhLm5vdGlmeSk7cmV0dXJuIGF9O20ucmVqZWN0PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBmO2IucmVqZWN0KGEpO3JldHVybiBiLnByb21pc2V9O20ud2hlbj1sO20ucmVzb2x2ZT1sO20uYWxsPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBmLGM9MCxkPUwoYSk/W106e307bihhLGZ1bmN0aW9uKGEsZSl7YysrO2woYSkudGhlbihmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHwoZFtlXT1hLC0tY3x8Yi5yZXNvbHZlKGQpKX0sZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8XG5iLnJlamVjdChhKX0pfSk7MD09PWMmJmIucmVzb2x2ZShkKTtyZXR1cm4gYi5wcm9taXNlfTtyZXR1cm4gbX1mdW5jdGlvbiBGZigpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGEsYil7dmFyIGQ9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGEud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lLGM9YS5jYW5jZWxBbmltYXRpb25GcmFtZXx8YS53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8YS53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZT0hIWQsZj1lP2Z1bmN0aW9uKGEpe3ZhciBiPWQoYSk7cmV0dXJuIGZ1bmN0aW9uKCl7YyhiKX19OmZ1bmN0aW9uKGEpe3ZhciBjPWIoYSwxNi42NiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5jYW5jZWwoYyl9fTtmLnN1cHBvcnRlZD1lO3JldHVybiBmfV19ZnVuY3Rpb24gdWYoKXtmdW5jdGlvbiBhKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9XG50aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiQkd2F0Y2hlcnNDb3VudD0wO3RoaXMuJGlkPSsrcGI7dGhpcy4kJENoaWxkU2NvcGU9bnVsbH1iLnByb3RvdHlwZT1hO3JldHVybiBifXZhciBiPTEwLGQ9SChcIiRyb290U2NvcGVcIiksYz1udWxsLGU9bnVsbDt0aGlzLmRpZ2VzdFR0bD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1hKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkcGFyc2VcIixcIiRicm93c2VyXCIsZnVuY3Rpb24oZixnLGgpe2Z1bmN0aW9uIGsoYSl7YS5jdXJyZW50U2NvcGUuJCRkZXN0cm95ZWQ9ITB9ZnVuY3Rpb24gbChhKXs5PT09eGEmJihhLiQkY2hpbGRIZWFkJiZsKGEuJCRjaGlsZEhlYWQpLGEuJCRuZXh0U2libGluZyYmbChhLiQkbmV4dFNpYmxpbmcpKTthLiRwYXJlbnQ9YS4kJG5leHRTaWJsaW5nPWEuJCRwcmV2U2libGluZz1hLiQkY2hpbGRIZWFkPVxuYS4kJGNoaWxkVGFpbD1hLiRyb290PWEuJCR3YXRjaGVycz1udWxsfWZ1bmN0aW9uIG0oKXt0aGlzLiRpZD0rK3BiO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kcm9vdD10aGlzO3RoaXMuJCRkZXN0cm95ZWQ9ITE7dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiQkd2F0Y2hlcnNDb3VudD0wO3RoaXMuJCRpc29sYXRlQmluZGluZ3M9bnVsbH1mdW5jdGlvbiByKGEpe2lmKHcuJCRwaGFzZSl0aHJvdyBkKFwiaW5wcm9nXCIsdy4kJHBoYXNlKTt3LiQkcGhhc2U9YX1mdW5jdGlvbiBzKGEsYil7ZG8gYS4kJHdhdGNoZXJzQ291bnQrPWI7d2hpbGUoYT1hLiRwYXJlbnQpfWZ1bmN0aW9uIEkoYSxiLGMpe2RvIGEuJCRsaXN0ZW5lckNvdW50W2NdLT1iLDA9PT1hLiQkbGlzdGVuZXJDb3VudFtjXSYmXG5kZWxldGUgYS4kJGxpc3RlbmVyQ291bnRbY107d2hpbGUoYT1hLiRwYXJlbnQpfWZ1bmN0aW9uIHEoKXt9ZnVuY3Rpb24gdCgpe2Zvcig7ei5sZW5ndGg7KXRyeXt6LnNoaWZ0KCkoKX1jYXRjaChhKXtmKGEpfWU9bnVsbH1mdW5jdGlvbiBwKCl7bnVsbD09PWUmJihlPWguZGVmZXIoZnVuY3Rpb24oKXt3LiRhcHBseSh0KX0pKX1tLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bSwkbmV3OmZ1bmN0aW9uKGIsYyl7dmFyIGQ7Yz1jfHx0aGlzO2I/KGQ9bmV3IG0sZC4kcm9vdD10aGlzLiRyb290KToodGhpcy4kJENoaWxkU2NvcGV8fCh0aGlzLiQkQ2hpbGRTY29wZT1hKHRoaXMpKSxkPW5ldyB0aGlzLiQkQ2hpbGRTY29wZSk7ZC4kcGFyZW50PWM7ZC4kJHByZXZTaWJsaW5nPWMuJCRjaGlsZFRhaWw7Yy4kJGNoaWxkSGVhZD8oYy4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nPWQsYy4kJGNoaWxkVGFpbD1kKTpjLiQkY2hpbGRIZWFkPWMuJCRjaGlsZFRhaWw9ZDsoYnx8YyE9dGhpcykmJmQuJG9uKFwiJGRlc3Ryb3lcIixcbmspO3JldHVybiBkfSwkd2F0Y2g6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9ZyhhKTtpZihmLiQkd2F0Y2hEZWxlZ2F0ZSlyZXR1cm4gZi4kJHdhdGNoRGVsZWdhdGUodGhpcyxiLGQsZixhKTt2YXIgaD10aGlzLGs9aC4kJHdhdGNoZXJzLGw9e2ZuOmIsbGFzdDpxLGdldDpmLGV4cDplfHxhLGVxOiEhZH07Yz1udWxsO0QoYil8fChsLmZuPUIpO2t8fChrPWguJCR3YXRjaGVycz1bXSk7ay51bnNoaWZ0KGwpO3ModGhpcywxKTtyZXR1cm4gZnVuY3Rpb24oKXswPD1jYihrLGwpJiZzKGgsLTEpO2M9bnVsbH19LCR3YXRjaEdyb3VwOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2g9ITE7az8oaz0hMSxiKGUsZSxnKSk6YihlLGQsZyl9dmFyIGQ9QXJyYXkoYS5sZW5ndGgpLGU9QXJyYXkoYS5sZW5ndGgpLGY9W10sZz10aGlzLGg9ITEsaz0hMDtpZighYS5sZW5ndGgpe3ZhciBsPSEwO2cuJGV2YWxBc3luYyhmdW5jdGlvbigpe2wmJmIoZSxlLGcpfSk7cmV0dXJuIGZ1bmN0aW9uKCl7bD1cbiExfX1pZigxPT09YS5sZW5ndGgpcmV0dXJuIHRoaXMuJHdhdGNoKGFbMF0sZnVuY3Rpb24oYSxjLGYpe2VbMF09YTtkWzBdPWM7YihlLGE9PT1jP2U6ZCxmKX0pO24oYSxmdW5jdGlvbihhLGIpe3ZhciBrPWcuJHdhdGNoKGEsZnVuY3Rpb24oYSxmKXtlW2JdPWE7ZFtiXT1mO2h8fChoPSEwLGcuJGV2YWxBc3luYyhjKSl9KTtmLnB1c2goayl9KTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IoO2YubGVuZ3RoOylmLnNoaWZ0KCkoKX19LCR3YXRjaENvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2U9YTt2YXIgYixkLGcsaDtpZigheChlKSl7aWYoRShlKSlpZihDYShlKSlmb3IoZiE9PXImJihmPXIsdT1mLmxlbmd0aD0wLGwrKyksYT1lLmxlbmd0aCx1IT09YSYmKGwrKyxmLmxlbmd0aD11PWEpLGI9MDtiPGE7YisrKWg9ZltiXSxnPWVbYl0sZD1oIT09aCYmZyE9PWcsZHx8aD09PWd8fChsKyssZltiXT1nKTtlbHNle2YhPT1zJiYoZj1zPXt9LHU9MCxsKyspO2E9MDtmb3IoYiBpbiBlKXNhLmNhbGwoZSxcbmIpJiYoYSsrLGc9ZVtiXSxoPWZbYl0sYiBpbiBmPyhkPWghPT1oJiZnIT09ZyxkfHxoPT09Z3x8KGwrKyxmW2JdPWcpKToodSsrLGZbYl09ZyxsKyspKTtpZih1PmEpZm9yKGIgaW4gbCsrLGYpc2EuY2FsbChlLGIpfHwodS0tLGRlbGV0ZSBmW2JdKX1lbHNlIGYhPT1lJiYoZj1lLGwrKyk7cmV0dXJuIGx9fWMuJHN0YXRlZnVsPSEwO3ZhciBkPXRoaXMsZSxmLGgsaz0xPGIubGVuZ3RoLGw9MCxtPWcoYSxjKSxyPVtdLHM9e30scD0hMCx1PTA7cmV0dXJuIHRoaXMuJHdhdGNoKG0sZnVuY3Rpb24oKXtwPyhwPSExLGIoZSxlLGQpKTpiKGUsaCxkKTtpZihrKWlmKEUoZSkpaWYoQ2EoZSkpe2g9QXJyYXkoZS5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKWhbYV09ZVthXX1lbHNlIGZvcihhIGluIGg9e30sZSlzYS5jYWxsKGUsYSkmJihoW2FdPWVbYV0pO2Vsc2UgaD1lfSl9LCRkaWdlc3Q6ZnVuY3Rpb24oKXt2YXIgYSxnLGssbCxtLHMscCxuLEk9Yix6LHk9W10seCxDO1xucihcIiRkaWdlc3RcIik7aC4kJGNoZWNrVXJsQ2hhbmdlKCk7dGhpcz09PXcmJm51bGwhPT1lJiYoaC5kZWZlci5jYW5jZWwoZSksdCgpKTtjPW51bGw7ZG97bj0hMTtmb3Ioej10aGlzO3UubGVuZ3RoOyl7dHJ5e0M9dS5zaGlmdCgpLEMuc2NvcGUuJGV2YWwoQy5leHByZXNzaW9uLEMubG9jYWxzKX1jYXRjaChCKXtmKEIpfWM9bnVsbH1hOmRve2lmKHM9ei4kJHdhdGNoZXJzKWZvcihwPXMubGVuZ3RoO3AtLTspdHJ5e2lmKGE9c1twXSlpZihtPWEuZ2V0LChnPW0oeikpIT09KGs9YS5sYXN0KSYmIShhLmVxP29hKGcsayk6XCJudW1iZXJcIj09PXR5cGVvZiBnJiZcIm51bWJlclwiPT09dHlwZW9mIGsmJmlzTmFOKGcpJiZpc05hTihrKSkpbj0hMCxjPWEsYS5sYXN0PWEuZXE/T2EoZyxudWxsKTpnLGw9YS5mbixsKGcsaz09PXE/ZzprLHopLDU+SSYmKHg9NC1JLHlbeF18fCh5W3hdPVtdKSx5W3hdLnB1c2goe21zZzpEKGEuZXhwKT9cImZuOiBcIisoYS5leHAubmFtZXx8YS5leHAudG9TdHJpbmcoKSk6XG5hLmV4cCxuZXdWYWw6ZyxvbGRWYWw6a30pKTtlbHNlIGlmKGE9PT1jKXtuPSExO2JyZWFrIGF9fWNhdGNoKEUpe2YoRSl9aWYoIShzPXouJCR3YXRjaGVyc0NvdW50JiZ6LiQkY2hpbGRIZWFkfHx6IT09dGhpcyYmei4kJG5leHRTaWJsaW5nKSlmb3IoO3ohPT10aGlzJiYhKHM9ei4kJG5leHRTaWJsaW5nKTspej16LiRwYXJlbnR9d2hpbGUoej1zKTtpZigobnx8dS5sZW5ndGgpJiYhSS0tKXRocm93IHcuJCRwaGFzZT1udWxsLGQoXCJpbmZkaWdcIixiLHkpO313aGlsZShufHx1Lmxlbmd0aCk7Zm9yKHcuJCRwaGFzZT1udWxsO3YubGVuZ3RoOyl0cnl7di5zaGlmdCgpKCl9Y2F0Y2goSCl7ZihIKX19LCRkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMuJCRkZXN0cm95ZWQpe3ZhciBhPXRoaXMuJHBhcmVudDt0aGlzLiRicm9hZGNhc3QoXCIkZGVzdHJveVwiKTt0aGlzLiQkZGVzdHJveWVkPSEwO3RoaXM9PT13JiZoLiQkYXBwbGljYXRpb25EZXN0cm95ZWQoKTtzKHRoaXMsLXRoaXMuJCR3YXRjaGVyc0NvdW50KTtcbmZvcih2YXIgYiBpbiB0aGlzLiQkbGlzdGVuZXJDb3VudClJKHRoaXMsdGhpcy4kJGxpc3RlbmVyQ291bnRbYl0sYik7YSYmYS4kJGNoaWxkSGVhZD09dGhpcyYmKGEuJCRjaGlsZEhlYWQ9dGhpcy4kJG5leHRTaWJsaW5nKTthJiZhLiQkY2hpbGRUYWlsPT10aGlzJiYoYS4kJGNoaWxkVGFpbD10aGlzLiQkcHJldlNpYmxpbmcpO3RoaXMuJCRwcmV2U2libGluZyYmKHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nPXRoaXMuJCRuZXh0U2libGluZyk7dGhpcy4kJG5leHRTaWJsaW5nJiYodGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nKTt0aGlzLiRkZXN0cm95PXRoaXMuJGRpZ2VzdD10aGlzLiRhcHBseT10aGlzLiRldmFsQXN5bmM9dGhpcy4kYXBwbHlBc3luYz1CO3RoaXMuJG9uPXRoaXMuJHdhdGNoPXRoaXMuJHdhdGNoR3JvdXA9ZnVuY3Rpb24oKXtyZXR1cm4gQn07dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbmV4dFNpYmxpbmc9XG5udWxsO2wodGhpcyl9fSwkZXZhbDpmdW5jdGlvbihhLGIpe3JldHVybiBnKGEpKHRoaXMsYil9LCRldmFsQXN5bmM6ZnVuY3Rpb24oYSxiKXt3LiQkcGhhc2V8fHUubGVuZ3RofHxoLmRlZmVyKGZ1bmN0aW9uKCl7dS5sZW5ndGgmJncuJGRpZ2VzdCgpfSk7dS5wdXNoKHtzY29wZTp0aGlzLGV4cHJlc3Npb246ZyhhKSxsb2NhbHM6Yn0pfSwkJHBvc3REaWdlc3Q6ZnVuY3Rpb24oYSl7di5wdXNoKGEpfSwkYXBwbHk6ZnVuY3Rpb24oYSl7dHJ5e3IoXCIkYXBwbHlcIik7dHJ5e3JldHVybiB0aGlzLiRldmFsKGEpfWZpbmFsbHl7dy4kJHBoYXNlPW51bGx9fWNhdGNoKGIpe2YoYil9ZmluYWxseXt0cnl7dy4kZGlnZXN0KCl9Y2F0Y2goYyl7dGhyb3cgZihjKSxjO319fSwkYXBwbHlBc3luYzpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Yy4kZXZhbChhKX12YXIgYz10aGlzO2EmJnoucHVzaChiKTthPWcoYSk7cCgpfSwkb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLiQkbGlzdGVuZXJzW2FdO1xuY3x8KHRoaXMuJCRsaXN0ZW5lcnNbYV09Yz1bXSk7Yy5wdXNoKGIpO3ZhciBkPXRoaXM7ZG8gZC4kJGxpc3RlbmVyQ291bnRbYV18fChkLiQkbGlzdGVuZXJDb3VudFthXT0wKSxkLiQkbGlzdGVuZXJDb3VudFthXSsrO3doaWxlKGQ9ZC4kcGFyZW50KTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuaW5kZXhPZihiKTstMSE9PWQmJihjW2RdPW51bGwsSShlLDEsYSkpfX0sJGVtaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkLGU9dGhpcyxnPSExLGg9e25hbWU6YSx0YXJnZXRTY29wZTplLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2c9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7aC5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfSxrPWRiKFtoXSxhcmd1bWVudHMsMSksbCxtO2Rve2Q9ZS4kJGxpc3RlbmVyc1thXXx8YztoLmN1cnJlbnRTY29wZT1lO2w9MDtmb3IobT1kLmxlbmd0aDtsPG07bCsrKWlmKGRbbF0pdHJ5e2RbbF0uYXBwbHkobnVsbCxcbmspfWNhdGNoKHIpe2Yocil9ZWxzZSBkLnNwbGljZShsLDEpLGwtLSxtLS07aWYoZylyZXR1cm4gaC5jdXJyZW50U2NvcGU9bnVsbCxoO2U9ZS4kcGFyZW50fXdoaWxlKGUpO2guY3VycmVudFNjb3BlPW51bGw7cmV0dXJuIGh9LCRicm9hZGNhc3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9dGhpcyxlPXtuYW1lOmEsdGFyZ2V0U2NvcGU6dGhpcyxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2UuZGVmYXVsdFByZXZlbnRlZD0hMH0sZGVmYXVsdFByZXZlbnRlZDohMX07aWYoIXRoaXMuJCRsaXN0ZW5lckNvdW50W2FdKXJldHVybiBlO2Zvcih2YXIgZz1kYihbZV0sYXJndW1lbnRzLDEpLGgsaztjPWQ7KXtlLmN1cnJlbnRTY29wZT1jO2Q9Yy4kJGxpc3RlbmVyc1thXXx8W107aD0wO2ZvcihrPWQubGVuZ3RoO2g8aztoKyspaWYoZFtoXSl0cnl7ZFtoXS5hcHBseShudWxsLGcpfWNhdGNoKGwpe2YobCl9ZWxzZSBkLnNwbGljZShoLDEpLGgtLSxrLS07aWYoIShkPWMuJCRsaXN0ZW5lckNvdW50W2FdJiZcbmMuJCRjaGlsZEhlYWR8fGMhPT10aGlzJiZjLiQkbmV4dFNpYmxpbmcpKWZvcig7YyE9PXRoaXMmJiEoZD1jLiQkbmV4dFNpYmxpbmcpOyljPWMuJHBhcmVudH1lLmN1cnJlbnRTY29wZT1udWxsO3JldHVybiBlfX07dmFyIHc9bmV3IG0sdT13LiQkYXN5bmNRdWV1ZT1bXSx2PXcuJCRwb3N0RGlnZXN0UXVldWU9W10sej13LiQkYXBwbHlBc3luY1F1ZXVlPVtdO3JldHVybiB3fV19ZnVuY3Rpb24gbmUoKXt2YXIgYT0vXlxccyooaHR0cHM/fGZ0cHxtYWlsdG98dGVsfGZpbGUpOi8sYj0vXlxccyooKGh0dHBzP3xmdHB8ZmlsZXxibG9iKTp8ZGF0YTppbWFnZVxcLykvO3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGE9Yix0aGlzKTphfTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihkLGMpe3ZhciBlPVxuYz9iOmEsZjtmPXphKGQpLmhyZWY7cmV0dXJuXCJcIj09PWZ8fGYubWF0Y2goZSk/ZDpcInVuc2FmZTpcIitmfX19ZnVuY3Rpb24gbmcoYSl7aWYoXCJzZWxmXCI9PT1hKXJldHVybiBhO2lmKEYoYSkpe2lmKC0xPGEuaW5kZXhPZihcIioqKlwiKSl0aHJvdyBCYShcIml3Y2FyZFwiLGEpO2E9eGQoYSkucmVwbGFjZShcIlxcXFwqXFxcXCpcIixcIi4qXCIpLnJlcGxhY2UoXCJcXFxcKlwiLFwiW146Ly4/JjtdKlwiKTtyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIithK1wiJFwiKX1pZigkYShhKSlyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIithLnNvdXJjZStcIiRcIik7dGhyb3cgQmEoXCJpbWF0Y2hlclwiKTt9ZnVuY3Rpb24geWQoYSl7dmFyIGI9W107eShhKSYmbihhLGZ1bmN0aW9uKGEpe2IucHVzaChuZyhhKSl9KTtyZXR1cm4gYn1mdW5jdGlvbiB5Zigpe3RoaXMuU0NFX0NPTlRFWFRTPXFhO3ZhciBhPVtcInNlbGZcIl0sYj1bXTt0aGlzLnJlc291cmNlVXJsV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPXlkKGIpKTtyZXR1cm4gYX07XG50aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0PWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPXlkKGEpKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGMoYSxiKXtyZXR1cm5cInNlbGZcIj09PWE/amQoYik6ISFhLmV4ZWMoYi5ocmVmKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWZ1bmN0aW9uKGEpe3RoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gYX19O2EmJihiLnByb3RvdHlwZT1uZXcgYSk7Yi5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCl9O2IucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpfTtyZXR1cm4gYn12YXIgZj1mdW5jdGlvbihhKXt0aHJvdyBCYShcInVuc2FmZVwiKTt9O2QuaGFzKFwiJHNhbml0aXplXCIpJiYoZj1kLmdldChcIiRzYW5pdGl6ZVwiKSk7XG52YXIgZz1lKCksaD17fTtoW3FhLkhUTUxdPWUoZyk7aFtxYS5DU1NdPWUoZyk7aFtxYS5VUkxdPWUoZyk7aFtxYS5KU109ZShnKTtoW3FhLlJFU09VUkNFX1VSTF09ZShoW3FhLlVSTF0pO3JldHVybnt0cnVzdEFzOmZ1bmN0aW9uKGEsYil7dmFyIGM9aC5oYXNPd25Qcm9wZXJ0eShhKT9oW2FdOm51bGw7aWYoIWMpdGhyb3cgQmEoXCJpY29udGV4dFwiLGEsYik7aWYobnVsbD09PWJ8fHgoYil8fFwiXCI9PT1iKXJldHVybiBiO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgYil0aHJvdyBCYShcIml0eXBlXCIsYSk7cmV0dXJuIG5ldyBjKGIpfSxnZXRUcnVzdGVkOmZ1bmN0aW9uKGQsZSl7aWYobnVsbD09PWV8fHgoZSl8fFwiXCI9PT1lKXJldHVybiBlO3ZhciBnPWguaGFzT3duUHJvcGVydHkoZCk/aFtkXTpudWxsO2lmKGcmJmUgaW5zdGFuY2VvZiBnKXJldHVybiBlLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7aWYoZD09PXFhLlJFU09VUkNFX1VSTCl7dmFyIGc9emEoZS50b1N0cmluZygpKSxyLHMsbj0hMTtcbnI9MDtmb3Iocz1hLmxlbmd0aDtyPHM7cisrKWlmKGMoYVtyXSxnKSl7bj0hMDticmVha31pZihuKWZvcihyPTAscz1iLmxlbmd0aDtyPHM7cisrKWlmKGMoYltyXSxnKSl7bj0hMTticmVha31pZihuKXJldHVybiBlO3Rocm93IEJhKFwiaW5zZWN1cmxcIixlLnRvU3RyaW5nKCkpO31pZihkPT09cWEuSFRNTClyZXR1cm4gZihlKTt0aHJvdyBCYShcInVuc2FmZVwiKTt9LHZhbHVlT2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBnP2EuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTphfX19XX1mdW5jdGlvbiB4Zigpe3ZhciBhPSEwO3RoaXMuZW5hYmxlZD1mdW5jdGlvbihiKXthcmd1bWVudHMubGVuZ3RoJiYoYT0hIWIpO3JldHVybiBhfTt0aGlzLiRnZXQ9W1wiJHBhcnNlXCIsXCIkc2NlRGVsZWdhdGVcIixmdW5jdGlvbihiLGQpe2lmKGEmJjg+eGEpdGhyb3cgQmEoXCJpZXF1aXJrc1wiKTt2YXIgYz1uYShxYSk7Yy5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYX07Yy50cnVzdEFzPWQudHJ1c3RBcztcbmMuZ2V0VHJ1c3RlZD1kLmdldFRydXN0ZWQ7Yy52YWx1ZU9mPWQudmFsdWVPZjthfHwoYy50cnVzdEFzPWMuZ2V0VHJ1c3RlZD1mdW5jdGlvbihhLGIpe3JldHVybiBifSxjLnZhbHVlT2Y9YWIpO2MucGFyc2VBcz1mdW5jdGlvbihhLGQpe3ZhciBlPWIoZCk7cmV0dXJuIGUubGl0ZXJhbCYmZS5jb25zdGFudD9lOmIoZCxmdW5jdGlvbihiKXtyZXR1cm4gYy5nZXRUcnVzdGVkKGEsYil9KX07dmFyIGU9Yy5wYXJzZUFzLGY9Yy5nZXRUcnVzdGVkLGc9Yy50cnVzdEFzO24ocWEsZnVuY3Rpb24oYSxiKXt2YXIgZD1HKGIpO2NbZ2IoXCJwYXJzZV9hc19cIitkKV09ZnVuY3Rpb24oYil7cmV0dXJuIGUoYSxiKX07Y1tnYihcImdldF90cnVzdGVkX1wiK2QpXT1mdW5jdGlvbihiKXtyZXR1cm4gZihhLGIpfTtjW2diKFwidHJ1c3RfYXNfXCIrZCldPWZ1bmN0aW9uKGIpe3JldHVybiBnKGEsYil9fSk7cmV0dXJuIGN9XX1mdW5jdGlvbiB6Zigpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixcbmZ1bmN0aW9uKGEsYil7dmFyIGQ9e30sYz1jYSgoL2FuZHJvaWQgKFxcZCspLy5leGVjKEcoKGEubmF2aWdhdG9yfHx7fSkudXNlckFnZW50KSl8fFtdKVsxXSksZT0vQm94ZWUvaS50ZXN0KChhLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCksZj1iWzBdfHx7fSxnLGg9L14oTW96fHdlYmtpdHxtcykoPz1bQS1aXSkvLGs9Zi5ib2R5JiZmLmJvZHkuc3R5bGUsbD0hMSxtPSExO2lmKGspe2Zvcih2YXIgciBpbiBrKWlmKGw9aC5leGVjKHIpKXtnPWxbMF07Zz1nLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrZy5zdWJzdHIoMSk7YnJlYWt9Z3x8KGc9XCJXZWJraXRPcGFjaXR5XCJpbiBrJiZcIndlYmtpdFwiKTtsPSEhKFwidHJhbnNpdGlvblwiaW4ga3x8ZytcIlRyYW5zaXRpb25cImluIGspO209ISEoXCJhbmltYXRpb25cImluIGt8fGcrXCJBbmltYXRpb25cImluIGspOyFjfHxsJiZtfHwobD1GKGsud2Via2l0VHJhbnNpdGlvbiksbT1GKGsud2Via2l0QW5pbWF0aW9uKSl9cmV0dXJue2hpc3Rvcnk6ISghYS5oaXN0b3J5fHxcbiFhLmhpc3RvcnkucHVzaFN0YXRlfHw0PmN8fGUpLGhhc0V2ZW50OmZ1bmN0aW9uKGEpe2lmKFwiaW5wdXRcIj09PWEmJjExPj14YSlyZXR1cm4hMTtpZih4KGRbYV0pKXt2YXIgYj1mLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZFthXT1cIm9uXCIrYSBpbiBifXJldHVybiBkW2FdfSxjc3A6RWEoKSx2ZW5kb3JQcmVmaXg6Zyx0cmFuc2l0aW9uczpsLGFuaW1hdGlvbnM6bSxhbmRyb2lkOmN9fV19ZnVuY3Rpb24gQmYoKXt2YXIgYTt0aGlzLmh0dHBPcHRpb25zPWZ1bmN0aW9uKGIpe3JldHVybiBiPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PVtcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkaHR0cFwiLFwiJHFcIixcIiRzY2VcIixmdW5jdGlvbihiLGQsYyxlKXtmdW5jdGlvbiBmKGcsaCl7Zi50b3RhbFBlbmRpbmdSZXF1ZXN0cysrO0YoZykmJmIuZ2V0KGcpfHwoZz1lLmdldFRydXN0ZWRSZXNvdXJjZVVybChnKSk7dmFyIGs9ZC5kZWZhdWx0cyYmZC5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZTtMKGspP2s9ay5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1cbmNjfSk6az09PWNjJiYoaz1udWxsKTtyZXR1cm4gZC5nZXQoZyxUKHtjYWNoZTpiLHRyYW5zZm9ybVJlc3BvbnNlOmt9LGEpKVtcImZpbmFsbHlcIl0oZnVuY3Rpb24oKXtmLnRvdGFsUGVuZGluZ1JlcXVlc3RzLS19KS50aGVuKGZ1bmN0aW9uKGEpe2IucHV0KGcsYS5kYXRhKTtyZXR1cm4gYS5kYXRhfSxmdW5jdGlvbihhKXtpZighaCl0aHJvdyBqYShcInRwbG9hZFwiLGcsYS5zdGF0dXMsYS5zdGF0dXNUZXh0KTtyZXR1cm4gYy5yZWplY3QoYSl9KX1mLnRvdGFsUGVuZGluZ1JlcXVlc3RzPTA7cmV0dXJuIGZ9XX1mdW5jdGlvbiBDZigpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJGxvY2F0aW9uXCIsZnVuY3Rpb24oYSxiLGQpe3JldHVybntmaW5kQmluZGluZ3M6ZnVuY3Rpb24oYSxiLGQpe2E9YS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibmctYmluZGluZ1wiKTt2YXIgZz1bXTtuKGEsZnVuY3Rpb24oYSl7dmFyIGM9aWEuZWxlbWVudChhKS5kYXRhKFwiJGJpbmRpbmdcIik7XG5jJiZuKGMsZnVuY3Rpb24oYyl7ZD8obmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK3hkKGIpK1wiKFxcXFxzfFxcXFx8fCQpXCIpKS50ZXN0KGMpJiZnLnB1c2goYSk6LTEhPWMuaW5kZXhPZihiKSYmZy5wdXNoKGEpfSl9KTtyZXR1cm4gZ30sZmluZE1vZGVsczpmdW5jdGlvbihhLGIsZCl7Zm9yKHZhciBnPVtcIm5nLVwiLFwiZGF0YS1uZy1cIixcIm5nXFxcXDpcIl0saD0wO2g8Zy5sZW5ndGg7KytoKXt2YXIgaz1hLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIrZ1toXStcIm1vZGVsXCIrKGQ/XCI9XCI6XCIqPVwiKSsnXCInK2IrJ1wiXScpO2lmKGsubGVuZ3RoKXJldHVybiBrfX0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZC51cmwoKX0sc2V0TG9jYXRpb246ZnVuY3Rpb24oYil7YiE9PWQudXJsKCkmJihkLnVybChiKSxhLiRkaWdlc3QoKSl9LHdoZW5TdGFibGU6ZnVuY3Rpb24oYSl7Yi5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzKGEpfX19XX1mdW5jdGlvbiBEZigpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXG5cIiRicm93c2VyXCIsXCIkcVwiLFwiJCRxXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGEsYixkLGMsZSl7ZnVuY3Rpb24gZihmLGssbCl7RChmKXx8KGw9ayxrPWYsZj1CKTt2YXIgbT13YS5jYWxsKGFyZ3VtZW50cywzKSxyPXkobCkmJiFsLHM9KHI/YzpkKS5kZWZlcigpLG49cy5wcm9taXNlLHE7cT1iLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e3MucmVzb2x2ZShmLmFwcGx5KG51bGwsbSkpfWNhdGNoKGIpe3MucmVqZWN0KGIpLGUoYil9ZmluYWxseXtkZWxldGUgZ1tuLiQkdGltZW91dElkXX1yfHxhLiRhcHBseSgpfSxrKTtuLiQkdGltZW91dElkPXE7Z1txXT1zO3JldHVybiBufXZhciBnPXt9O2YuY2FuY2VsPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLiQkdGltZW91dElkIGluIGc/KGdbYS4kJHRpbWVvdXRJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksZGVsZXRlIGdbYS4kJHRpbWVvdXRJZF0sYi5kZWZlci5jYW5jZWwoYS4kJHRpbWVvdXRJZCkpOiExfTtyZXR1cm4gZn1dfWZ1bmN0aW9uIHphKGEpe3hhJiZcbihZLnNldEF0dHJpYnV0ZShcImhyZWZcIixhKSxhPVkuaHJlZik7WS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYSk7cmV0dXJue2hyZWY6WS5ocmVmLHByb3RvY29sOlkucHJvdG9jb2w/WS5wcm90b2NvbC5yZXBsYWNlKC86JC8sXCJcIik6XCJcIixob3N0OlkuaG9zdCxzZWFyY2g6WS5zZWFyY2g/WS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sXCJcIik6XCJcIixoYXNoOlkuaGFzaD9ZLmhhc2gucmVwbGFjZSgvXiMvLFwiXCIpOlwiXCIsaG9zdG5hbWU6WS5ob3N0bmFtZSxwb3J0OlkucG9ydCxwYXRobmFtZTpcIi9cIj09PVkucGF0aG5hbWUuY2hhckF0KDApP1kucGF0aG5hbWU6XCIvXCIrWS5wYXRobmFtZX19ZnVuY3Rpb24gamQoYSl7YT1GKGEpP3phKGEpOmE7cmV0dXJuIGEucHJvdG9jb2w9PT16ZC5wcm90b2NvbCYmYS5ob3N0PT09emQuaG9zdH1mdW5jdGlvbiBFZigpe3RoaXMuJGdldD1iYShPKX1mdW5jdGlvbiBBZChhKXtmdW5jdGlvbiBiKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEpfWNhdGNoKGIpe3JldHVybiBhfX1cbnZhciBkPWFbMF18fHt9LGM9e30sZT1cIlwiO3JldHVybiBmdW5jdGlvbigpe3ZhciBhLGcsaCxrLGw7YT1kLmNvb2tpZXx8XCJcIjtpZihhIT09ZSlmb3IoZT1hLGE9ZS5zcGxpdChcIjsgXCIpLGM9e30saD0wO2g8YS5sZW5ndGg7aCsrKWc9YVtoXSxrPWcuaW5kZXhPZihcIj1cIiksMDxrJiYobD1iKGcuc3Vic3RyaW5nKDAsaykpLHgoY1tsXSkmJihjW2xdPWIoZy5zdWJzdHJpbmcoaysxKSkpKTtyZXR1cm4gY319ZnVuY3Rpb24gSWYoKXt0aGlzLiRnZXQ9QWR9ZnVuY3Rpb24gTGMoYSl7ZnVuY3Rpb24gYihkLGMpe2lmKEUoZCkpe3ZhciBlPXt9O24oZCxmdW5jdGlvbihhLGMpe2VbY109YihjLGEpfSk7cmV0dXJuIGV9cmV0dXJuIGEuZmFjdG9yeShkK1wiRmlsdGVyXCIsYyl9dGhpcy5yZWdpc3Rlcj1iO3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuZ2V0KGIrXCJGaWx0ZXJcIil9fV07YihcImN1cnJlbmN5XCIsQmQpO2IoXCJkYXRlXCIsQ2QpO1xuYihcImZpbHRlclwiLG9nKTtiKFwianNvblwiLHBnKTtiKFwibGltaXRUb1wiLHFnKTtiKFwibG93ZXJjYXNlXCIscmcpO2IoXCJudW1iZXJcIixEZCk7YihcIm9yZGVyQnlcIixFZCk7YihcInVwcGVyY2FzZVwiLHNnKX1mdW5jdGlvbiBvZygpe3JldHVybiBmdW5jdGlvbihhLGIsZCl7aWYoIUNhKGEpKXtpZihudWxsPT1hKXJldHVybiBhO3Rocm93IEgoXCJmaWx0ZXJcIikoXCJub3RhcnJheVwiLGEpO312YXIgYztzd2l0Y2goa2MoYikpe2Nhc2UgXCJmdW5jdGlvblwiOmJyZWFrO2Nhc2UgXCJib29sZWFuXCI6Y2FzZSBcIm51bGxcIjpjYXNlIFwibnVtYmVyXCI6Y2FzZSBcInN0cmluZ1wiOmM9ITA7Y2FzZSBcIm9iamVjdFwiOmI9dGcoYixkLGMpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGF9cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhLGIpfX1mdW5jdGlvbiB0ZyhhLGIsZCl7dmFyIGM9RShhKSYmXCIkXCJpbiBhOyEwPT09Yj9iPW9hOkQoYil8fChiPWZ1bmN0aW9uKGEsYil7aWYoeChhKSlyZXR1cm4hMTtpZihudWxsPT09XG5hfHxudWxsPT09YilyZXR1cm4gYT09PWI7aWYoRShiKXx8RShhKSYmIXRjKGEpKXJldHVybiExO2E9RyhcIlwiK2EpO2I9RyhcIlwiK2IpO3JldHVybi0xIT09YS5pbmRleE9mKGIpfSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBjJiYhRShlKT9MYShlLGEuJCxiLCExKTpMYShlLGEsYixkKX19ZnVuY3Rpb24gTGEoYSxiLGQsYyxlKXt2YXIgZj1rYyhhKSxnPWtjKGIpO2lmKFwic3RyaW5nXCI9PT1nJiZcIiFcIj09PWIuY2hhckF0KDApKXJldHVybiFMYShhLGIuc3Vic3RyaW5nKDEpLGQsYyk7aWYoTChhKSlyZXR1cm4gYS5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBMYShhLGIsZCxjKX0pO3N3aXRjaChmKXtjYXNlIFwib2JqZWN0XCI6dmFyIGg7aWYoYyl7Zm9yKGggaW4gYSlpZihcIiRcIiE9PWguY2hhckF0KDApJiZMYShhW2hdLGIsZCwhMCkpcmV0dXJuITA7cmV0dXJuIGU/ITE6TGEoYSxiLGQsITEpfWlmKFwib2JqZWN0XCI9PT1nKXtmb3IoaCBpbiBiKWlmKGU9YltoXSwhRChlKSYmIXgoZSkmJlxuKGY9XCIkXCI9PT1oLCFMYShmP2E6YVtoXSxlLGQsZixmKSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIGQoYSxiKTtjYXNlIFwiZnVuY3Rpb25cIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiBkKGEsYil9fWZ1bmN0aW9uIGtjKGEpe3JldHVybiBudWxsPT09YT9cIm51bGxcIjp0eXBlb2YgYX1mdW5jdGlvbiBCZChhKXt2YXIgYj1hLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihhLGMsZSl7eChjKSYmKGM9Yi5DVVJSRU5DWV9TWU0pO3goZSkmJihlPWIuUEFUVEVSTlNbMV0ubWF4RnJhYyk7cmV0dXJuIG51bGw9PWE/YTpGZChhLGIuUEFUVEVSTlNbMV0sYi5HUk9VUF9TRVAsYi5ERUNJTUFMX1NFUCxlKS5yZXBsYWNlKC9cXHUwMEE0L2csYyl9fWZ1bmN0aW9uIERkKGEpe3ZhciBiPWEuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7cmV0dXJuIG51bGw9PWE/YTpGZChhLGIuUEFUVEVSTlNbMF0sYi5HUk9VUF9TRVAsYi5ERUNJTUFMX1NFUCxjKX19ZnVuY3Rpb24gdWcoYSl7dmFyIGI9XG4wLGQsYyxlLGYsZzstMTwoYz1hLmluZGV4T2YoR2QpKSYmKGE9YS5yZXBsYWNlKEdkLFwiXCIpKTswPChlPWEuc2VhcmNoKC9lL2kpKT8oMD5jJiYoYz1lKSxjKz0rYS5zbGljZShlKzEpLGE9YS5zdWJzdHJpbmcoMCxlKSk6MD5jJiYoYz1hLmxlbmd0aCk7Zm9yKGU9MDthLmNoYXJBdChlKT09bGM7ZSsrKTtpZihlPT0oZz1hLmxlbmd0aCkpZD1bMF0sYz0xO2Vsc2V7Zm9yKGctLTthLmNoYXJBdChnKT09bGM7KWctLTtjLT1lO2Q9W107Zm9yKGY9MDtlPD1nO2UrKyxmKyspZFtmXT0rYS5jaGFyQXQoZSl9Yz5IZCYmKGQ9ZC5zcGxpY2UoMCxIZC0xKSxiPWMtMSxjPTEpO3JldHVybntkOmQsZTpiLGk6Y319ZnVuY3Rpb24gdmcoYSxiLGQsYyl7dmFyIGU9YS5kLGY9ZS5sZW5ndGgtYS5pO2I9eChiKT9NYXRoLm1pbihNYXRoLm1heChkLGYpLGMpOitiO2Q9YithLmk7Yz1lW2RdO2lmKDA8ZCllLnNwbGljZShkKTtlbHNle2EuaT0xO2UubGVuZ3RoPWQ9YisxO2Zvcih2YXIgZz0wO2c8ZDtnKyspZVtnXT1cbjB9Zm9yKDU8PWMmJmVbZC0xXSsrO2Y8YjtmKyspZS5wdXNoKDApO2lmKGI9ZS5yZWR1Y2VSaWdodChmdW5jdGlvbihhLGIsYyxkKXtiKz1hO2RbY109YiUxMDtyZXR1cm4gTWF0aC5mbG9vcihiLzEwKX0sMCkpZS51bnNoaWZ0KGIpLGEuaSsrfWZ1bmN0aW9uIEZkKGEsYixkLGMsZSl7aWYoIUYoYSkmJiFOKGEpfHxpc05hTihhKSlyZXR1cm5cIlwiO3ZhciBmPSFpc0Zpbml0ZShhKSxnPSExLGg9TWF0aC5hYnMoYSkrXCJcIixrPVwiXCI7aWYoZilrPVwiXFx1MjIxZVwiO2Vsc2V7Zz11ZyhoKTt2ZyhnLGUsYi5taW5GcmFjLGIubWF4RnJhYyk7az1nLmQ7aD1nLmk7ZT1nLmU7Zj1bXTtmb3IoZz1rLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBhJiYhYn0sITApOzA+aDspay51bnNoaWZ0KDApLGgrKzswPGg/Zj1rLnNwbGljZShoKTooZj1rLGs9WzBdKTtoPVtdO2ZvcihrLmxlbmd0aD5iLmxnU2l6ZSYmaC51bnNoaWZ0KGsuc3BsaWNlKC1iLmxnU2l6ZSkuam9pbihcIlwiKSk7ay5sZW5ndGg+Yi5nU2l6ZTspaC51bnNoaWZ0KGsuc3BsaWNlKC1iLmdTaXplKS5qb2luKFwiXCIpKTtcbmsubGVuZ3RoJiZoLnVuc2hpZnQoay5qb2luKFwiXCIpKTtrPWguam9pbihkKTtmLmxlbmd0aCYmKGsrPWMrZi5qb2luKFwiXCIpKTtlJiYoays9XCJlK1wiK2UpfXJldHVybiAwPmEmJiFnP2IubmVnUHJlK2srYi5uZWdTdWY6Yi5wb3NQcmUraytiLnBvc1N1Zn1mdW5jdGlvbiBLYihhLGIsZCl7dmFyIGM9XCJcIjswPmEmJihjPVwiLVwiLGE9LWEpO2ZvcihhPVwiXCIrYTthLmxlbmd0aDxiOylhPWxjK2E7ZCYmKGE9YS5zdWJzdHIoYS5sZW5ndGgtYikpO3JldHVybiBjK2F9ZnVuY3Rpb24gYWEoYSxiLGQsYyl7ZD1kfHwwO3JldHVybiBmdW5jdGlvbihlKXtlPWVbXCJnZXRcIithXSgpO2lmKDA8ZHx8ZT4tZCllKz1kOzA9PT1lJiYtMTI9PWQmJihlPTEyKTtyZXR1cm4gS2IoZSxiLGMpfX1mdW5jdGlvbiBMYihhLGIpe3JldHVybiBmdW5jdGlvbihkLGMpe3ZhciBlPWRbXCJnZXRcIithXSgpLGY9dWIoYj9cIlNIT1JUXCIrYTphKTtyZXR1cm4gY1tmXVtlXX19ZnVuY3Rpb24gSWQoYSl7dmFyIGI9KG5ldyBEYXRlKGEsXG4wLDEpKS5nZXREYXkoKTtyZXR1cm4gbmV3IERhdGUoYSwwLCg0Pj1iPzU6MTIpLWIpfWZ1bmN0aW9uIEpkKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgZD1JZChiLmdldEZ1bGxZZWFyKCkpO2I9K25ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkrKDQtYi5nZXREYXkoKSkpLStkO2I9MStNYXRoLnJvdW5kKGIvNjA0OEU1KTtyZXR1cm4gS2IoYixhKX19ZnVuY3Rpb24gbWMoYSxiKXtyZXR1cm4gMD49YS5nZXRGdWxsWWVhcigpP2IuRVJBU1swXTpiLkVSQVNbMV19ZnVuY3Rpb24gQ2QoYSl7ZnVuY3Rpb24gYihhKXt2YXIgYjtpZihiPWEubWF0Y2goZCkpe2E9bmV3IERhdGUoMCk7dmFyIGY9MCxnPTAsaD1iWzhdP2Euc2V0VVRDRnVsbFllYXI6YS5zZXRGdWxsWWVhcixrPWJbOF0/YS5zZXRVVENIb3VyczphLnNldEhvdXJzO2JbOV0mJihmPWNhKGJbOV0rYlsxMF0pLGc9Y2EoYls5XStiWzExXSkpO2guY2FsbChhLGNhKGJbMV0pLGNhKGJbMl0pLVxuMSxjYShiWzNdKSk7Zj1jYShiWzRdfHwwKS1mO2c9Y2EoYls1XXx8MCktZztoPWNhKGJbNl18fDApO2I9TWF0aC5yb3VuZCgxRTMqcGFyc2VGbG9hdChcIjAuXCIrKGJbN118fDApKSk7ay5jYWxsKGEsZixnLGgsYil9cmV0dXJuIGF9dmFyIGQ9L14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87cmV0dXJuIGZ1bmN0aW9uKGMsZCxmKXt2YXIgZz1cIlwiLGg9W10sayxsO2Q9ZHx8XCJtZWRpdW1EYXRlXCI7ZD1hLkRBVEVUSU1FX0ZPUk1BVFNbZF18fGQ7RihjKSYmKGM9d2cudGVzdChjKT9jYShjKTpiKGMpKTtOKGMpJiYoYz1uZXcgRGF0ZShjKSk7aWYoIVYoYyl8fCFpc0Zpbml0ZShjLmdldFRpbWUoKSkpcmV0dXJuIGM7Zm9yKDtkOykobD14Zy5leGVjKGQpKT8oaD1kYihoLGwsMSksZD1oLnBvcCgpKTooaC5wdXNoKGQpLGQ9bnVsbCk7dmFyIG09Yy5nZXRUaW1lem9uZU9mZnNldCgpO1xuZiYmKG09eGMoZixtKSxjPVRiKGMsZiwhMCkpO24oaCxmdW5jdGlvbihiKXtrPXlnW2JdO2crPWs/ayhjLGEuREFURVRJTUVfRk9STUFUUyxtKTpcIicnXCI9PT1iP1wiJ1wiOmIucmVwbGFjZSgvKF4nfCckKS9nLFwiXCIpLnJlcGxhY2UoLycnL2csXCInXCIpfSk7cmV0dXJuIGd9fWZ1bmN0aW9uIHBnKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7eChiKSYmKGI9Mik7cmV0dXJuIGViKGEsYil9fWZ1bmN0aW9uIHFnKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYixkKXtiPUluZmluaXR5PT09TWF0aC5hYnMoTnVtYmVyKGIpKT9OdW1iZXIoYik6Y2EoYik7aWYoaXNOYU4oYikpcmV0dXJuIGE7TihhKSYmKGE9YS50b1N0cmluZygpKTtpZighTChhKSYmIUYoYSkpcmV0dXJuIGE7ZD0hZHx8aXNOYU4oZCk/MDpjYShkKTtkPTA+ZD9NYXRoLm1heCgwLGEubGVuZ3RoK2QpOmQ7cmV0dXJuIDA8PWI/YS5zbGljZShkLGQrYik6MD09PWQ/YS5zbGljZShiLGEubGVuZ3RoKTphLnNsaWNlKE1hdGgubWF4KDAsZCtiKSxcbmQpfX1mdW5jdGlvbiBFZChhKXtmdW5jdGlvbiBiKGIsZCl7ZD1kPy0xOjE7cmV0dXJuIGIubWFwKGZ1bmN0aW9uKGIpe3ZhciBjPTEsaD1hYjtpZihEKGIpKWg9YjtlbHNlIGlmKEYoYikpe2lmKFwiK1wiPT1iLmNoYXJBdCgwKXx8XCItXCI9PWIuY2hhckF0KDApKWM9XCItXCI9PWIuY2hhckF0KDApPy0xOjEsYj1iLnN1YnN0cmluZygxKTtpZihcIlwiIT09YiYmKGg9YShiKSxoLmNvbnN0YW50KSl2YXIgaz1oKCksaD1mdW5jdGlvbihhKXtyZXR1cm4gYVtrXX19cmV0dXJue2dldDpoLGRlc2NlbmRpbmc6YypkfX0pfWZ1bmN0aW9uIGQoYSl7c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwibnVtYmVyXCI6Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwic3RyaW5nXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19cmV0dXJuIGZ1bmN0aW9uKGEsZSxmKXtpZihudWxsPT1hKXJldHVybiBhO2lmKCFDYShhKSl0aHJvdyBIKFwib3JkZXJCeVwiKShcIm5vdGFycmF5XCIsYSk7TChlKXx8KGU9W2VdKTswPT09ZS5sZW5ndGgmJlxuKGU9W1wiK1wiXSk7dmFyIGc9YihlLGYpO2cucHVzaCh7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319LGRlc2NlbmRpbmc6Zj8tMToxfSk7YT1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYSxmdW5jdGlvbihhLGIpe3JldHVybnt2YWx1ZTphLHByZWRpY2F0ZVZhbHVlczpnLm1hcChmdW5jdGlvbihjKXt2YXIgZT1jLmdldChhKTtjPXR5cGVvZiBlO2lmKG51bGw9PT1lKWM9XCJzdHJpbmdcIixlPVwibnVsbFwiO2Vsc2UgaWYoXCJzdHJpbmdcIj09PWMpZT1lLnRvTG93ZXJDYXNlKCk7ZWxzZSBpZihcIm9iamVjdFwiPT09YylhOntpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgZS52YWx1ZU9mJiYoZT1lLnZhbHVlT2YoKSxkKGUpKSlicmVhayBhO2lmKHRjKGUpJiYoZT1lLnRvU3RyaW5nKCksZChlKSkpYnJlYWsgYTtlPWJ9cmV0dXJue3ZhbHVlOmUsdHlwZTpjfX0pfX0pO2Euc29ydChmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9MCxlPWcubGVuZ3RoO2Q8ZTsrK2Qpe3ZhciBjPWEucHJlZGljYXRlVmFsdWVzW2RdLFxuZj1iLnByZWRpY2F0ZVZhbHVlc1tkXSxuPTA7Yy50eXBlPT09Zi50eXBlP2MudmFsdWUhPT1mLnZhbHVlJiYobj1jLnZhbHVlPGYudmFsdWU/LTE6MSk6bj1jLnR5cGU8Zi50eXBlPy0xOjE7aWYoYz1uKmdbZF0uZGVzY2VuZGluZylicmVha31yZXR1cm4gY30pO3JldHVybiBhPWEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlfSl9fWZ1bmN0aW9uIE1hKGEpe0QoYSkmJihhPXtsaW5rOmF9KTthLnJlc3RyaWN0PWEucmVzdHJpY3R8fFwiQUNcIjtyZXR1cm4gYmEoYSl9ZnVuY3Rpb24gS2QoYSxiLGQsYyxlKXt2YXIgZj10aGlzLGc9W107Zi4kZXJyb3I9e307Zi4kJHN1Y2Nlc3M9e307Zi4kcGVuZGluZz12O2YuJG5hbWU9ZShiLm5hbWV8fGIubmdGb3JtfHxcIlwiKShkKTtmLiRkaXJ0eT0hMTtmLiRwcmlzdGluZT0hMDtmLiR2YWxpZD0hMDtmLiRpbnZhbGlkPSExO2YuJHN1Ym1pdHRlZD0hMTtmLiQkcGFyZW50Rm9ybT1NYjtmLiRyb2xsYmFja1ZpZXdWYWx1ZT1mdW5jdGlvbigpe24oZyxcbmZ1bmN0aW9uKGEpe2EuJHJvbGxiYWNrVmlld1ZhbHVlKCl9KX07Zi4kY29tbWl0Vmlld1ZhbHVlPWZ1bmN0aW9uKCl7bihnLGZ1bmN0aW9uKGEpe2EuJGNvbW1pdFZpZXdWYWx1ZSgpfSl9O2YuJGFkZENvbnRyb2w9ZnVuY3Rpb24oYSl7VGEoYS4kbmFtZSxcImlucHV0XCIpO2cucHVzaChhKTthLiRuYW1lJiYoZlthLiRuYW1lXT1hKTthLiQkcGFyZW50Rm9ybT1mfTtmLiQkcmVuYW1lQ29udHJvbD1mdW5jdGlvbihhLGIpe3ZhciBjPWEuJG5hbWU7ZltjXT09PWEmJmRlbGV0ZSBmW2NdO2ZbYl09YTthLiRuYW1lPWJ9O2YuJHJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24oYSl7YS4kbmFtZSYmZlthLiRuYW1lXT09PWEmJmRlbGV0ZSBmW2EuJG5hbWVdO24oZi4kcGVuZGluZyxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsbnVsbCxhKX0pO24oZi4kZXJyb3IsZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLG51bGwsYSl9KTtuKGYuJCRzdWNjZXNzLGZ1bmN0aW9uKGIsYyl7Zi4kc2V0VmFsaWRpdHkoYyxcbm51bGwsYSl9KTtjYihnLGEpO2EuJCRwYXJlbnRGb3JtPU1ifTtMZCh7Y3RybDp0aGlzLCRlbGVtZW50OmEsc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hW2JdO2Q/LTE9PT1kLmluZGV4T2YoYykmJmQucHVzaChjKTphW2JdPVtjXX0sdW5zZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWFbYl07ZCYmKGNiKGQsYyksMD09PWQubGVuZ3RoJiZkZWxldGUgYVtiXSl9LCRhbmltYXRlOmN9KTtmLiRzZXREaXJ0eT1mdW5jdGlvbigpe2MucmVtb3ZlQ2xhc3MoYSxZYSk7Yy5hZGRDbGFzcyhhLE5iKTtmLiRkaXJ0eT0hMDtmLiRwcmlzdGluZT0hMTtmLiQkcGFyZW50Rm9ybS4kc2V0RGlydHkoKX07Zi4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtjLnNldENsYXNzKGEsWWEsTmIrXCIgbmctc3VibWl0dGVkXCIpO2YuJGRpcnR5PSExO2YuJHByaXN0aW5lPSEwO2YuJHN1Ym1pdHRlZD0hMTtuKGcsZnVuY3Rpb24oYSl7YS4kc2V0UHJpc3RpbmUoKX0pfTtmLiRzZXRVbnRvdWNoZWQ9ZnVuY3Rpb24oKXtuKGcsXG5mdW5jdGlvbihhKXthLiRzZXRVbnRvdWNoZWQoKX0pfTtmLiRzZXRTdWJtaXR0ZWQ9ZnVuY3Rpb24oKXtjLmFkZENsYXNzKGEsXCJuZy1zdWJtaXR0ZWRcIik7Zi4kc3VibWl0dGVkPSEwO2YuJCRwYXJlbnRGb3JtLiRzZXRTdWJtaXR0ZWQoKX19ZnVuY3Rpb24gbmMoYSl7YS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGIpe3JldHVybiBhLiRpc0VtcHR5KGIpP2I6Yi50b1N0cmluZygpfSl9ZnVuY3Rpb24gbGIoYSxiLGQsYyxlLGYpe3ZhciBnPUcoYlswXS50eXBlKTtpZighZS5hbmRyb2lkKXt2YXIgaD0hMTtiLm9uKFwiY29tcG9zaXRpb25zdGFydFwiLGZ1bmN0aW9uKGEpe2g9ITB9KTtiLm9uKFwiY29tcG9zaXRpb25lbmRcIixmdW5jdGlvbigpe2g9ITE7aygpfSl9dmFyIGs9ZnVuY3Rpb24oYSl7bCYmKGYuZGVmZXIuY2FuY2VsKGwpLGw9bnVsbCk7aWYoIWgpe3ZhciBlPWIudmFsKCk7YT1hJiZhLnR5cGU7XCJwYXNzd29yZFwiPT09Z3x8ZC5uZ1RyaW0mJlwiZmFsc2VcIj09PWQubmdUcmltfHxcbihlPVgoZSkpOyhjLiR2aWV3VmFsdWUhPT1lfHxcIlwiPT09ZSYmYy4kJGhhc05hdGl2ZVZhbGlkYXRvcnMpJiZjLiRzZXRWaWV3VmFsdWUoZSxhKX19O2lmKGUuaGFzRXZlbnQoXCJpbnB1dFwiKSliLm9uKFwiaW5wdXRcIixrKTtlbHNle3ZhciBsLG09ZnVuY3Rpb24oYSxiLGMpe2x8fChsPWYuZGVmZXIoZnVuY3Rpb24oKXtsPW51bGw7YiYmYi52YWx1ZT09PWN8fGsoYSl9KSl9O2Iub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5rZXlDb2RlOzkxPT09Ynx8MTU8YiYmMTk+Ynx8Mzc8PWImJjQwPj1ifHxtKGEsdGhpcyx0aGlzLnZhbHVlKX0pO2lmKGUuaGFzRXZlbnQoXCJwYXN0ZVwiKSliLm9uKFwicGFzdGUgY3V0XCIsbSl9Yi5vbihcImNoYW5nZVwiLGspO2MuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPWMuJGlzRW1wdHkoYy4kdmlld1ZhbHVlKT9cIlwiOmMuJHZpZXdWYWx1ZTtiLnZhbCgpIT09YSYmYi52YWwoYSl9fWZ1bmN0aW9uIE9iKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyl7dmFyIGUsXG5mO2lmKFYoZCkpcmV0dXJuIGQ7aWYoRihkKSl7J1wiJz09ZC5jaGFyQXQoMCkmJidcIic9PWQuY2hhckF0KGQubGVuZ3RoLTEpJiYoZD1kLnN1YnN0cmluZygxLGQubGVuZ3RoLTEpKTtpZih6Zy50ZXN0KGQpKXJldHVybiBuZXcgRGF0ZShkKTthLmxhc3RJbmRleD0wO2lmKGU9YS5leGVjKGQpKXJldHVybiBlLnNoaWZ0KCksZj1jP3t5eXl5OmMuZ2V0RnVsbFllYXIoKSxNTTpjLmdldE1vbnRoKCkrMSxkZDpjLmdldERhdGUoKSxISDpjLmdldEhvdXJzKCksbW06Yy5nZXRNaW51dGVzKCksc3M6Yy5nZXRTZWNvbmRzKCksc3NzOmMuZ2V0TWlsbGlzZWNvbmRzKCkvMUUzfTp7eXl5eToxOTcwLE1NOjEsZGQ6MSxISDowLG1tOjAsc3M6MCxzc3M6MH0sbihlLGZ1bmN0aW9uKGEsYyl7YzxiLmxlbmd0aCYmKGZbYltjXV09K2EpfSksbmV3IERhdGUoZi55eXl5LGYuTU0tMSxmLmRkLGYuSEgsZi5tbSxmLnNzfHwwLDFFMypmLnNzc3x8MCl9cmV0dXJuIE5hTn19ZnVuY3Rpb24gbWIoYSxiLGQsYyl7cmV0dXJuIGZ1bmN0aW9uKGUsXG5mLGcsaCxrLGwsbSl7ZnVuY3Rpb24gcihhKXtyZXR1cm4gYSYmIShhLmdldFRpbWUmJmEuZ2V0VGltZSgpIT09YS5nZXRUaW1lKCkpfWZ1bmN0aW9uIHMoYSl7cmV0dXJuIHkoYSkmJiFWKGEpP2QoYSl8fHY6YX1NZChlLGYsZyxoKTtsYihlLGYsZyxoLGssbCk7dmFyIG49aCYmaC4kb3B0aW9ucyYmaC4kb3B0aW9ucy50aW1lem9uZSxxO2guJCRwYXJzZXJOYW1lPWE7aC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBoLiRpc0VtcHR5KGEpP251bGw6Yi50ZXN0KGEpPyhhPWQoYSxxKSxuJiYoYT1UYihhLG4pKSxhKTp2fSk7aC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKGEmJiFWKGEpKXRocm93IG5iKFwiZGF0ZWZtdFwiLGEpO2lmKHIoYSkpcmV0dXJuKHE9YSkmJm4mJihxPVRiKHEsbiwhMCkpLG0oXCJkYXRlXCIpKGEsYyxuKTtxPW51bGw7cmV0dXJuXCJcIn0pO2lmKHkoZy5taW4pfHxnLm5nTWluKXt2YXIgdDtoLiR2YWxpZGF0b3JzLm1pbj1mdW5jdGlvbihhKXtyZXR1cm4hcihhKXx8XG54KHQpfHxkKGEpPj10fTtnLiRvYnNlcnZlKFwibWluXCIsZnVuY3Rpb24oYSl7dD1zKGEpO2guJHZhbGlkYXRlKCl9KX1pZih5KGcubWF4KXx8Zy5uZ01heCl7dmFyIHA7aC4kdmFsaWRhdG9ycy5tYXg9ZnVuY3Rpb24oYSl7cmV0dXJuIXIoYSl8fHgocCl8fGQoYSk8PXB9O2cuJG9ic2VydmUoXCJtYXhcIixmdW5jdGlvbihhKXtwPXMoYSk7aC4kdmFsaWRhdGUoKX0pfX19ZnVuY3Rpb24gTWQoYSxiLGQsYyl7KGMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzPUUoYlswXS52YWxpZGl0eSkpJiZjLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7dmFyIGM9Yi5wcm9wKFwidmFsaWRpdHlcIil8fHt9O3JldHVybiBjLmJhZElucHV0fHxjLnR5cGVNaXNtYXRjaD92OmF9KX1mdW5jdGlvbiBOZChhLGIsZCxjLGUpe2lmKHkoYykpe2E9YShjKTtpZighYS5jb25zdGFudCl0aHJvdyBuYihcImNvbnN0ZXhwclwiLGQsYyk7cmV0dXJuIGEoYil9cmV0dXJuIGV9ZnVuY3Rpb24gb2MoYSxiKXthPVwibmdDbGFzc1wiK2E7XG5yZXR1cm5bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGMoYSxiKXt2YXIgYz1bXSxkPTA7YTpmb3IoO2Q8YS5sZW5ndGg7ZCsrKXtmb3IodmFyIGU9YVtkXSxtPTA7bTxiLmxlbmd0aDttKyspaWYoZT09YlttXSljb250aW51ZSBhO2MucHVzaChlKX1yZXR1cm4gY31mdW5jdGlvbiBlKGEpe3ZhciBiPVtdO3JldHVybiBMKGEpPyhuKGEsZnVuY3Rpb24oYSl7Yj1iLmNvbmNhdChlKGEpKX0pLGIpOkYoYSk/YS5zcGxpdChcIiBcIik6RShhKT8obihhLGZ1bmN0aW9uKGEsYyl7YSYmKGI9Yi5jb25jYXQoYy5zcGxpdChcIiBcIikpKX0pLGIpOmF9cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixsaW5rOmZ1bmN0aW9uKGYsZyxoKXtmdW5jdGlvbiBrKGEsYil7dmFyIGM9Zy5kYXRhKFwiJGNsYXNzQ291bnRzXCIpfHxaKCksZD1bXTtuKGEsZnVuY3Rpb24oYSl7aWYoMDxifHxjW2FdKWNbYV09KGNbYV18fDApK2IsY1thXT09PSsoMDxiKSYmZC5wdXNoKGEpfSk7Zy5kYXRhKFwiJGNsYXNzQ291bnRzXCIsXG5jKTtyZXR1cm4gZC5qb2luKFwiIFwiKX1mdW5jdGlvbiBsKGEpe2lmKCEwPT09Ynx8Zi4kaW5kZXglMj09PWIpe3ZhciBsPWUoYXx8W10pO2lmKCFtKXt2YXIgbj1rKGwsMSk7aC4kYWRkQ2xhc3Mobil9ZWxzZSBpZighb2EoYSxtKSl7dmFyIHE9ZShtKSxuPWMobCxxKSxsPWMocSxsKSxuPWsobiwxKSxsPWsobCwtMSk7biYmbi5sZW5ndGgmJmQuYWRkQ2xhc3MoZyxuKTtsJiZsLmxlbmd0aCYmZC5yZW1vdmVDbGFzcyhnLGwpfX1tPW5hKGEpfXZhciBtO2YuJHdhdGNoKGhbYV0sbCwhMCk7aC4kb2JzZXJ2ZShcImNsYXNzXCIsZnVuY3Rpb24oYil7bChmLiRldmFsKGhbYV0pKX0pO1wibmdDbGFzc1wiIT09YSYmZi4kd2F0Y2goXCIkaW5kZXhcIixmdW5jdGlvbihjLGQpe3ZhciBnPWMmMTtpZihnIT09KGQmMSkpe3ZhciBsPWUoZi4kZXZhbChoW2FdKSk7Zz09PWI/KGc9ayhsLDEpLGguJGFkZENsYXNzKGcpKTooZz1rKGwsLTEpLGguJHJlbW92ZUNsYXNzKGcpKX19KX19fV19ZnVuY3Rpb24gTGQoYSl7ZnVuY3Rpb24gYihhLFxuYil7YiYmIWZbYV0/KGsuYWRkQ2xhc3MoZSxhKSxmW2FdPSEwKTohYiYmZlthXSYmKGsucmVtb3ZlQ2xhc3MoZSxhKSxmW2FdPSExKX1mdW5jdGlvbiBkKGEsYyl7YT1hP1wiLVwiK0JjKGEsXCItXCIpOlwiXCI7YihvYithLCEwPT09Yyk7YihPZCthLCExPT09Yyl9dmFyIGM9YS5jdHJsLGU9YS4kZWxlbWVudCxmPXt9LGc9YS5zZXQsaD1hLnVuc2V0LGs9YS4kYW5pbWF0ZTtmW09kXT0hKGZbb2JdPWUuaGFzQ2xhc3Mob2IpKTtjLiRzZXRWYWxpZGl0eT1mdW5jdGlvbihhLGUsZil7eChlKT8oYy4kcGVuZGluZ3x8KGMuJHBlbmRpbmc9e30pLGcoYy4kcGVuZGluZyxhLGYpKTooYy4kcGVuZGluZyYmaChjLiRwZW5kaW5nLGEsZiksUGQoYy4kcGVuZGluZykmJihjLiRwZW5kaW5nPXYpKTtOYShlKT9lPyhoKGMuJGVycm9yLGEsZiksZyhjLiQkc3VjY2VzcyxhLGYpKTooZyhjLiRlcnJvcixhLGYpLGgoYy4kJHN1Y2Nlc3MsYSxmKSk6KGgoYy4kZXJyb3IsYSxmKSxoKGMuJCRzdWNjZXNzLGEsZikpO1xuYy4kcGVuZGluZz8oYihRZCwhMCksYy4kdmFsaWQ9Yy4kaW52YWxpZD12LGQoXCJcIixudWxsKSk6KGIoUWQsITEpLGMuJHZhbGlkPVBkKGMuJGVycm9yKSxjLiRpbnZhbGlkPSFjLiR2YWxpZCxkKFwiXCIsYy4kdmFsaWQpKTtlPWMuJHBlbmRpbmcmJmMuJHBlbmRpbmdbYV0/djpjLiRlcnJvclthXT8hMTpjLiQkc3VjY2Vzc1thXT8hMDpudWxsO2QoYSxlKTtjLiQkcGFyZW50Rm9ybS4kc2V0VmFsaWRpdHkoYSxlLGMpfX1mdW5jdGlvbiBQZChhKXtpZihhKWZvcih2YXIgYiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuITE7cmV0dXJuITB9dmFyIEFnPS9eXFwvKC4rKVxcLyhbYS16XSopJC8sc2E9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxHPWZ1bmN0aW9uKGEpe3JldHVybiBGKGEpP2EudG9Mb3dlckNhc2UoKTphfSx1Yj1mdW5jdGlvbihhKXtyZXR1cm4gRihhKT9hLnRvVXBwZXJDYXNlKCk6YX0seGEsQyx1YSx3YT1bXS5zbGljZSxhZz1bXS5zcGxpY2UsQmc9XG5bXS5wdXNoLGdhPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsdWM9T2JqZWN0LmdldFByb3RvdHlwZU9mLERhPUgoXCJuZ1wiKSxpYT1PLmFuZ3VsYXJ8fChPLmFuZ3VsYXI9e30pLFZiLHBiPTA7eGE9Vy5kb2N1bWVudE1vZGU7Qi4kaW5qZWN0PVtdO2FiLiRpbmplY3Q9W107dmFyIEw9QXJyYXkuaXNBcnJheSxhZT0vXlxcW29iamVjdCAoPzpVaW50OHxVaW50OENsYW1wZWR8VWludDE2fFVpbnQzMnxJbnQ4fEludDE2fEludDMyfEZsb2F0MzJ8RmxvYXQ2NClBcnJheVxcXSQvLFg9ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSk/YS50cmltKCk6YX0seGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvKFstKClcXFtcXF17fSs/Ki4kXFxefCw6IzwhXFxcXF0pL2csXCJcXFxcJDFcIikucmVwbGFjZSgvXFx4MDgvZyxcIlxcXFx4MDhcIil9LEVhPWZ1bmN0aW9uKCl7aWYoIXkoRWEucnVsZXMpKXt2YXIgYT1XLnF1ZXJ5U2VsZWN0b3IoXCJbbmctY3NwXVwiKXx8Vy5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtbmctY3NwXVwiKTtcbmlmKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwibmctY3NwXCIpfHxhLmdldEF0dHJpYnV0ZShcImRhdGEtbmctY3NwXCIpO0VhLnJ1bGVzPXtub1Vuc2FmZUV2YWw6IWJ8fC0xIT09Yi5pbmRleE9mKFwibm8tdW5zYWZlLWV2YWxcIiksbm9JbmxpbmVTdHlsZTohYnx8LTEhPT1iLmluZGV4T2YoXCJuby1pbmxpbmUtc3R5bGVcIil9fWVsc2V7YT1FYTt0cnl7bmV3IEZ1bmN0aW9uKFwiXCIpLGI9ITF9Y2F0Y2goZCl7Yj0hMH1hLnJ1bGVzPXtub1Vuc2FmZUV2YWw6Yixub0lubGluZVN0eWxlOiExfX19cmV0dXJuIEVhLnJ1bGVzfSxyYj1mdW5jdGlvbigpe2lmKHkocmIubmFtZV8pKXJldHVybiByYi5uYW1lXzt2YXIgYSxiLGQ9UWEubGVuZ3RoLGMsZTtmb3IoYj0wO2I8ZDsrK2IpaWYoYz1RYVtiXSxhPVcucXVlcnlTZWxlY3RvcihcIltcIitjLnJlcGxhY2UoXCI6XCIsXCJcXFxcOlwiKStcImpxXVwiKSl7ZT1hLmdldEF0dHJpYnV0ZShjK1wianFcIik7YnJlYWt9cmV0dXJuIHJiLm5hbWVfPWV9LGRlPS86L2csUWE9W1wibmctXCIsXG5cImRhdGEtbmctXCIsXCJuZzpcIixcIngtbmctXCJdLGllPS9bQS1aXS9nLENjPSExLFBhPTMsbWU9e2Z1bGw6XCIxLjUuMFwiLG1ham9yOjEsbWlub3I6NSxkb3Q6MCxjb2RlTmFtZTpcImVubm9ibGVtZW50LWZhY2lsaXRhdGlvblwifTtVLmV4cGFuZG89XCJuZzMzOVwiO3ZhciBpYj1VLmNhY2hlPXt9LE9mPTE7VS5fZGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fX07dmFyIEpmPS8oW1xcOlxcLVxcX10rKC4pKS9nLEtmPS9ebW96KFtBLVpdKS8seWI9e21vdXNlbGVhdmU6XCJtb3VzZW91dFwiLG1vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIn0sWGI9SChcImpxTGl0ZVwiKSxOZj0vXjwoW1xcdy1dKylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sV2I9Lzx8JiM/XFx3KzsvLExmPS88KFtcXHc6LV0rKS8sTWY9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzotXSspW14+XSopXFwvPi9naSxkYT17b3B0aW9uOlsxLCc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLFxuXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07ZGEub3B0Z3JvdXA9ZGEub3B0aW9uO2RhLnRib2R5PWRhLnRmb290PWRhLmNvbGdyb3VwPWRhLmNhcHRpb249ZGEudGhlYWQ7ZGEudGg9ZGEudGQ7dmFyIFRmPU5vZGUucHJvdG90eXBlLmNvbnRhaW5zfHxmdW5jdGlvbihhKXtyZXR1cm4hISh0aGlzLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpJjE2KX0sUmE9VS5wcm90b3R5cGU9e3JlYWR5OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtkfHwoZD0hMCxhKCkpfXZhciBkPSExO1wiY29tcGxldGVcIj09PVcucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KGIpOih0aGlzLm9uKFwiRE9NQ29udGVudExvYWRlZFwiLFxuYiksVShPKS5vbihcImxvYWRcIixiKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGE9W107bih0aGlzLGZ1bmN0aW9uKGIpe2EucHVzaChcIlwiK2IpfSk7cmV0dXJuXCJbXCIrYS5qb2luKFwiLCBcIikrXCJdXCJ9LGVxOmZ1bmN0aW9uKGEpe3JldHVybiAwPD1hP0ModGhpc1thXSk6Qyh0aGlzW3RoaXMubGVuZ3RoK2FdKX0sbGVuZ3RoOjAscHVzaDpCZyxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0sRGI9e307bihcIm11bHRpcGxlIHNlbGVjdGVkIGNoZWNrZWQgZGlzYWJsZWQgcmVhZE9ubHkgcmVxdWlyZWQgb3BlblwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXtEYltHKGEpXT1hfSk7dmFyIFVjPXt9O24oXCJpbnB1dCBzZWxlY3Qgb3B0aW9uIHRleHRhcmVhIGJ1dHRvbiBmb3JtIGRldGFpbHNcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7VWNbYV09ITB9KTt2YXIgY2Q9e25nTWlubGVuZ3RoOlwibWlubGVuZ3RoXCIsbmdNYXhsZW5ndGg6XCJtYXhsZW5ndGhcIixuZ01pbjpcIm1pblwiLG5nTWF4OlwibWF4XCIsXG5uZ1BhdHRlcm46XCJwYXR0ZXJuXCJ9O24oe2RhdGE6WmIscmVtb3ZlRGF0YTpoYixoYXNEYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBpYlthLm5nMzM5XSlyZXR1cm4hMDtyZXR1cm4hMX0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGQ9YS5sZW5ndGg7YjxkO2IrKyloYihhW2JdKX19LGZ1bmN0aW9uKGEsYil7VVtiXT1hfSk7bih7ZGF0YTpaYixpbmhlcml0ZWREYXRhOkNiLHNjb3BlOmZ1bmN0aW9uKGEpe3JldHVybiBDLmRhdGEoYSxcIiRzY29wZVwiKXx8Q2IoYS5wYXJlbnROb2RlfHxhLFtcIiRpc29sYXRlU2NvcGVcIixcIiRzY29wZVwiXSl9LGlzb2xhdGVTY29wZTpmdW5jdGlvbihhKXtyZXR1cm4gQy5kYXRhKGEsXCIkaXNvbGF0ZVNjb3BlXCIpfHxDLmRhdGEoYSxcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIpfSxjb250cm9sbGVyOlJjLGluamVjdG9yOmZ1bmN0aW9uKGEpe3JldHVybiBDYihhLFwiJGluamVjdG9yXCIpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7YS5yZW1vdmVBdHRyaWJ1dGUoYil9LFxuaGFzQ2xhc3M6emIsY3NzOmZ1bmN0aW9uKGEsYixkKXtiPWdiKGIpO2lmKHkoZCkpYS5zdHlsZVtiXT1kO2Vsc2UgcmV0dXJuIGEuc3R5bGVbYl19LGF0dHI6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjPWEubm9kZVR5cGU7aWYoYyE9PVBhJiYyIT09YyYmOCE9PWMpaWYoYz1HKGIpLERiW2NdKWlmKHkoZCkpZD8oYVtiXT0hMCxhLnNldEF0dHJpYnV0ZShiLGMpKTooYVtiXT0hMSxhLnJlbW92ZUF0dHJpYnV0ZShjKSk7ZWxzZSByZXR1cm4gYVtiXXx8KGEuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oYil8fEIpLnNwZWNpZmllZD9jOnY7ZWxzZSBpZih5KGQpKWEuc2V0QXR0cmlidXRlKGIsZCk7ZWxzZSBpZihhLmdldEF0dHJpYnV0ZSlyZXR1cm4gYT1hLmdldEF0dHJpYnV0ZShiLDIpLG51bGw9PT1hP3Y6YX0scHJvcDpmdW5jdGlvbihhLGIsZCl7aWYoeShkKSlhW2JdPWQ7ZWxzZSByZXR1cm4gYVtiXX0sdGV4dDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxkKXtpZih4KGQpKXt2YXIgYz1hLm5vZGVUeXBlO1xucmV0dXJuIDE9PT1jfHxjPT09UGE/YS50ZXh0Q29udGVudDpcIlwifWEudGV4dENvbnRlbnQ9ZH1hLiRkdj1cIlwiO3JldHVybiBhfSgpLHZhbDpmdW5jdGlvbihhLGIpe2lmKHgoYikpe2lmKGEubXVsdGlwbGUmJlwic2VsZWN0XCI9PT1yYShhKSl7dmFyIGQ9W107bihhLm9wdGlvbnMsZnVuY3Rpb24oYSl7YS5zZWxlY3RlZCYmZC5wdXNoKGEudmFsdWV8fGEudGV4dCl9KTtyZXR1cm4gMD09PWQubGVuZ3RoP251bGw6ZH1yZXR1cm4gYS52YWx1ZX1hLnZhbHVlPWJ9LGh0bWw6ZnVuY3Rpb24oYSxiKXtpZih4KGIpKXJldHVybiBhLmlubmVySFRNTDt3YihhLCEwKTthLmlubmVySFRNTD1ifSxlbXB0eTpTY30sZnVuY3Rpb24oYSxiKXtVLnByb3RvdHlwZVtiXT1mdW5jdGlvbihiLGMpe3ZhciBlLGYsZz10aGlzLmxlbmd0aDtpZihhIT09U2MmJngoMj09YS5sZW5ndGgmJmEhPT16YiYmYSE9PVJjP2I6Yykpe2lmKEUoYikpe2ZvcihlPTA7ZTxnO2UrKylpZihhPT09WmIpYSh0aGlzW2VdLGIpO2Vsc2UgZm9yKGYgaW4gYilhKHRoaXNbZV0sXG5mLGJbZl0pO3JldHVybiB0aGlzfWU9YS4kZHY7Zz14KGUpP01hdGgubWluKGcsMSk6Zztmb3IoZj0wO2Y8ZztmKyspe3ZhciBoPWEodGhpc1tmXSxiLGMpO2U9ZT9lK2g6aH1yZXR1cm4gZX1mb3IoZT0wO2U8ZztlKyspYSh0aGlzW2VdLGIsYyk7cmV0dXJuIHRoaXN9fSk7bih7cmVtb3ZlRGF0YTpoYixvbjpmdW5jdGlvbihhLGIsZCxjKXtpZih5KGMpKXRocm93IFhiKFwib25hcmdzXCIpO2lmKE1jKGEpKXtjPXhiKGEsITApO3ZhciBlPWMuZXZlbnRzLGY9Yy5oYW5kbGU7Znx8KGY9Yy5oYW5kbGU9UWYoYSxlKSk7Yz0wPD1iLmluZGV4T2YoXCIgXCIpP2Iuc3BsaXQoXCIgXCIpOltiXTtmb3IodmFyIGc9Yy5sZW5ndGgsaD1mdW5jdGlvbihiLGMsZyl7dmFyIGg9ZVtiXTtofHwoaD1lW2JdPVtdLGguc3BlY2lhbEhhbmRsZXJXcmFwcGVyPWMsXCIkZGVzdHJveVwiPT09Ynx8Z3x8YS5hZGRFdmVudExpc3RlbmVyKGIsZiwhMSkpO2gucHVzaChkKX07Zy0tOyliPWNbZ10seWJbYl0/KGgoeWJbYl0sU2YpLFxuaChiLHYsITApKTpoKGIpfX0sb2ZmOlFjLG9uZTpmdW5jdGlvbihhLGIsZCl7YT1DKGEpO2Eub24oYixmdW5jdGlvbiBlKCl7YS5vZmYoYixkKTthLm9mZihiLGUpfSk7YS5vbihiLGQpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhLGIpe3ZhciBkLGM9YS5wYXJlbnROb2RlO3diKGEpO24obmV3IFUoYiksZnVuY3Rpb24oYil7ZD9jLmluc2VydEJlZm9yZShiLGQubmV4dFNpYmxpbmcpOmMucmVwbGFjZUNoaWxkKGIsYSk7ZD1ifSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO24oYS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGEpezE9PT1hLm5vZGVUeXBlJiZiLnB1c2goYSl9KTtyZXR1cm4gYn0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudERvY3VtZW50fHxhLmNoaWxkTm9kZXN8fFtdfSxhcHBlbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hLm5vZGVUeXBlO2lmKDE9PT1kfHwxMT09PWQpe2I9bmV3IFUoYik7Zm9yKHZhciBkPTAsYz1iLmxlbmd0aDtkPGM7ZCsrKWEuYXBwZW5kQ2hpbGQoYltkXSl9fSxcbnByZXBlbmQ6ZnVuY3Rpb24oYSxiKXtpZigxPT09YS5ub2RlVHlwZSl7dmFyIGQ9YS5maXJzdENoaWxkO24obmV3IFUoYiksZnVuY3Rpb24oYil7YS5pbnNlcnRCZWZvcmUoYixkKX0pfX0sd3JhcDpmdW5jdGlvbihhLGIpe09jKGEsQyhiKS5lcSgwKS5jbG9uZSgpWzBdKX0scmVtb3ZlOiRiLGRldGFjaDpmdW5jdGlvbihhKXskYihhLCEwKX0sYWZ0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hLGM9YS5wYXJlbnROb2RlO2I9bmV3IFUoYik7Zm9yKHZhciBlPTAsZj1iLmxlbmd0aDtlPGY7ZSsrKXt2YXIgZz1iW2VdO2MuaW5zZXJ0QmVmb3JlKGcsZC5uZXh0U2libGluZyk7ZD1nfX0sYWRkQ2xhc3M6QmIscmVtb3ZlQ2xhc3M6QWIsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiLGQpe2ImJm4oYi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYil7dmFyIGU9ZDt4KGUpJiYoZT0hemIoYSxiKSk7KGU/QmI6QWIpKGEsYil9KX0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50Tm9kZSkmJlxuMTEhPT1hLm5vZGVUeXBlP2E6bnVsbH0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5uZXh0RWxlbWVudFNpYmxpbmd9LGZpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpOltdfSxjbG9uZTpZYix0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIsZCl7dmFyIGMsZSxmPWIudHlwZXx8YixnPXhiKGEpO2lmKGc9KGc9ZyYmZy5ldmVudHMpJiZnW2ZdKWM9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuZGVmYXVsdFByZXZlbnRlZH0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ITB9LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmZ1bmN0aW9uKCl7cmV0dXJuITA9PT10aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZH0sXG5zdG9wUHJvcGFnYXRpb246Qix0eXBlOmYsdGFyZ2V0OmF9LGIudHlwZSYmKGM9VChjLGIpKSxiPW5hKGcpLGU9ZD9bY10uY29uY2F0KGQpOltjXSxuKGIsZnVuY3Rpb24oYil7Yy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpfHxiLmFwcGx5KGEsZSl9KX19LGZ1bmN0aW9uKGEsYil7VS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oYixjLGUpe2Zvcih2YXIgZixnPTAsaD10aGlzLmxlbmd0aDtnPGg7ZysrKXgoZik/KGY9YSh0aGlzW2ddLGIsYyxlKSx5KGYpJiYoZj1DKGYpKSk6UGMoZixhKHRoaXNbZ10sYixjLGUpKTtyZXR1cm4geShmKT9mOnRoaXN9O1UucHJvdG90eXBlLmJpbmQ9VS5wcm90b3R5cGUub247VS5wcm90b3R5cGUudW5iaW5kPVUucHJvdG90eXBlLm9mZn0pO1VhLnByb3RvdHlwZT17cHV0OmZ1bmN0aW9uKGEsYil7dGhpc1tGYShhLHRoaXMubmV4dFVpZCldPWJ9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1tGYShhLHRoaXMubmV4dFVpZCldfSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzW2E9RmEoYSx0aGlzLm5leHRVaWQpXTtkZWxldGUgdGhpc1thXTtyZXR1cm4gYn19O3ZhciBIZj1bZnVuY3Rpb24oKXt0aGlzLiRnZXQ9W2Z1bmN0aW9uKCl7cmV0dXJuIFVhfV19XSxWZj0vXihbXlxcKF0rPyk9Pi8sV2Y9L15bXlxcKF0qXFwoXFxzKihbXlxcKV0qKVxcKS9tLENnPS8sLyxEZz0vXlxccyooXz8pKFxcUys/KVxcMVxccyokLyxVZj0vKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWcsR2E9SChcIiRpbmplY3RvclwiKTtmYi4kJGFubm90YXRlPWZ1bmN0aW9uKGEsYixkKXt2YXIgYztpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSl7aWYoIShjPWEuJGluamVjdCkpe2M9W107aWYoYS5sZW5ndGgpe2lmKGIpdGhyb3cgRihkKSYmZHx8KGQ9YS5uYW1lfHxYZihhKSksR2EoXCJzdHJpY3RkaVwiLGQpO2I9VmMoYSk7bihiWzFdLnNwbGl0KENnKSxmdW5jdGlvbihhKXthLnJlcGxhY2UoRGcsZnVuY3Rpb24oYSxiLGQpe2MucHVzaChkKX0pfSl9YS4kaW5qZWN0PWN9fWVsc2UgTChhKT9cbihiPWEubGVuZ3RoLTEsU2EoYVtiXSxcImZuXCIpLGM9YS5zbGljZSgwLGIpKTpTYShhLFwiZm5cIiwhMCk7cmV0dXJuIGN9O3ZhciBSZD1IKFwiJGFuaW1hdGVcIiksJGU9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXt9fSxhZj1mdW5jdGlvbigpe3ZhciBhPW5ldyBVYSxiPVtdO3RoaXMuJGdldD1bXCIkJEFuaW1hdGVSdW5uZXJcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihkLGMpe2Z1bmN0aW9uIGUoYSxiLGMpe3ZhciBkPSExO2ImJihiPUYoYik/Yi5zcGxpdChcIiBcIik6TChiKT9iOltdLG4oYixmdW5jdGlvbihiKXtiJiYoZD0hMCxhW2JdPWMpfSkpO3JldHVybiBkfWZ1bmN0aW9uIGYoKXtuKGIsZnVuY3Rpb24oYil7dmFyIGM9YS5nZXQoYik7aWYoYyl7dmFyIGQ9WWYoYi5hdHRyKFwiY2xhc3NcIikpLGU9XCJcIixmPVwiXCI7bihjLGZ1bmN0aW9uKGEsYil7YSE9PSEhZFtiXSYmKGE/ZSs9KGUubGVuZ3RoP1wiIFwiOlwiXCIpK2I6Zis9KGYubGVuZ3RoP1wiIFwiOlwiXCIpK2IpfSk7bihiLGZ1bmN0aW9uKGEpe2UmJlxuQmIoYSxlKTtmJiZBYihhLGYpfSk7YS5yZW1vdmUoYil9fSk7Yi5sZW5ndGg9MH1yZXR1cm57ZW5hYmxlZDpCLG9uOkIsb2ZmOkIscGluOkIscHVzaDpmdW5jdGlvbihnLGgsayxsKXtsJiZsKCk7az1rfHx7fTtrLmZyb20mJmcuY3NzKGsuZnJvbSk7ay50byYmZy5jc3Moay50byk7aWYoay5hZGRDbGFzc3x8ay5yZW1vdmVDbGFzcylpZihoPWsuYWRkQ2xhc3MsbD1rLnJlbW92ZUNsYXNzLGs9YS5nZXQoZyl8fHt9LGg9ZShrLGgsITApLGw9ZShrLGwsITEpLGh8fGwpYS5wdXQoZyxrKSxiLnB1c2goZyksMT09PWIubGVuZ3RoJiZjLiQkcG9zdERpZ2VzdChmKTtnPW5ldyBkO2cuY29tcGxldGUoKTtyZXR1cm4gZ319fV19LFllPVtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7dmFyIGI9dGhpczt0aGlzLiQkcmVnaXN0ZXJlZEFuaW1hdGlvbnM9T2JqZWN0LmNyZWF0ZShudWxsKTt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKGQsYyl7aWYoZCYmXCIuXCIhPT1kLmNoYXJBdCgwKSl0aHJvdyBSZChcIm5vdGNzZWxcIixcbmQpO3ZhciBlPWQrXCItYW5pbWF0aW9uXCI7Yi4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW2Quc3Vic3RyKDEpXT1lO2EuZmFjdG9yeShlLGMpfTt0aGlzLmNsYXNzTmFtZUZpbHRlcj1mdW5jdGlvbihhKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCYmKHRoaXMuJCRjbGFzc05hbWVGaWx0ZXI9YSBpbnN0YW5jZW9mIFJlZ0V4cD9hOm51bGwpJiYvKFxccyt8XFwvKW5nLWFuaW1hdGUoXFxzK3xcXC8pLy50ZXN0KHRoaXMuJCRjbGFzc05hbWVGaWx0ZXIudG9TdHJpbmcoKSkpdGhyb3cgUmQoXCJub25nY2xzXCIsXCJuZy1hbmltYXRlXCIpO3JldHVybiB0aGlzLiQkY2xhc3NOYW1lRmlsdGVyfTt0aGlzLiRnZXQ9W1wiJCRhbmltYXRlUXVldWVcIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXtpZihkKXt2YXIgaDthOntmb3IoaD0wO2g8ZC5sZW5ndGg7aCsrKXt2YXIgaz1kW2hdO2lmKDE9PT1rLm5vZGVUeXBlKXtoPWs7YnJlYWsgYX19aD12b2lkIDB9IWh8fGgucGFyZW50Tm9kZXx8aC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nfHxcbihkPW51bGwpfWQ/ZC5hZnRlcihhKTpjLnByZXBlbmQoYSl9cmV0dXJue29uOmEub24sb2ZmOmEub2ZmLHBpbjphLnBpbixlbmFibGVkOmEuZW5hYmxlZCxjYW5jZWw6ZnVuY3Rpb24oYSl7YS5lbmQmJmEuZW5kKCl9LGVudGVyOmZ1bmN0aW9uKGUsZixnLGgpe2Y9ZiYmQyhmKTtnPWcmJkMoZyk7Zj1mfHxnLnBhcmVudCgpO2IoZSxmLGcpO3JldHVybiBhLnB1c2goZSxcImVudGVyXCIsSGEoaCkpfSxtb3ZlOmZ1bmN0aW9uKGUsZixnLGgpe2Y9ZiYmQyhmKTtnPWcmJkMoZyk7Zj1mfHxnLnBhcmVudCgpO2IoZSxmLGcpO3JldHVybiBhLnB1c2goZSxcIm1vdmVcIixIYShoKSl9LGxlYXZlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucHVzaChiLFwibGVhdmVcIixIYShjKSxmdW5jdGlvbigpe2IucmVtb3ZlKCl9KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYixjLGcpe2c9SGEoZyk7Zy5hZGRDbGFzcz1qYihnLmFkZGNsYXNzLGMpO3JldHVybiBhLnB1c2goYixcImFkZENsYXNzXCIsZyl9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGIsXG5jLGcpe2c9SGEoZyk7Zy5yZW1vdmVDbGFzcz1qYihnLnJlbW92ZUNsYXNzLGMpO3JldHVybiBhLnB1c2goYixcInJlbW92ZUNsYXNzXCIsZyl9LHNldENsYXNzOmZ1bmN0aW9uKGIsYyxnLGgpe2g9SGEoaCk7aC5hZGRDbGFzcz1qYihoLmFkZENsYXNzLGMpO2gucmVtb3ZlQ2xhc3M9amIoaC5yZW1vdmVDbGFzcyxnKTtyZXR1cm4gYS5wdXNoKGIsXCJzZXRDbGFzc1wiLGgpfSxhbmltYXRlOmZ1bmN0aW9uKGIsYyxnLGgsayl7az1IYShrKTtrLmZyb209ay5mcm9tP1Qoay5mcm9tLGMpOmM7ay50bz1rLnRvP1Qoay50byxnKTpnO2sudGVtcENsYXNzZXM9amIoay50ZW1wQ2xhc3NlcyxofHxcIm5nLWlubGluZS1hbmltYXRlXCIpO3JldHVybiBhLnB1c2goYixcImFuaW1hdGVcIixrKX19fV19XSxjZj1mdW5jdGlvbigpe3RoaXMuJGdldD1bXCIkJHJBRlwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7ZC5wdXNoKGIpOzE8ZC5sZW5ndGh8fGEoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGQubGVuZ3RoO2ErKylkW2FdKCk7XG5kPVtdfSl9dmFyIGQ9W107cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9ITE7YihmdW5jdGlvbigpe2E9ITB9KTtyZXR1cm4gZnVuY3Rpb24oZCl7YT9kKCk6YihkKX19fV19LGJmPWZ1bmN0aW9uKCl7dGhpcy4kZ2V0PVtcIiRxXCIsXCIkc25pZmZlclwiLFwiJCRhbmltYXRlQXN5bmNSdW5cIixcIiRkb2N1bWVudFwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihhLGIsZCxjLGUpe2Z1bmN0aW9uIGYoYSl7dGhpcy5zZXRIb3N0KGEpO3ZhciBiPWQoKTt0aGlzLl9kb25lQ2FsbGJhY2tzPVtdO3RoaXMuX3RpY2s9ZnVuY3Rpb24oYSl7dmFyIGQ9Y1swXTtkJiZkLmhpZGRlbj9lKGEsMCwhMSk6YihhKX07dGhpcy5fc3RhdGU9MH1mLmNoYWluPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2lmKGQ9PT1hLmxlbmd0aCliKCEwKTtlbHNlIGFbZF0oZnVuY3Rpb24oYSl7ITE9PT1hP2IoITEpOihkKyssYygpKX0pfXZhciBkPTA7YygpfTtmLmFsbD1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoZil7ZT1lJiZmOysrZD09PVxuYS5sZW5ndGgmJmIoZSl9dmFyIGQ9MCxlPSEwO24oYSxmdW5jdGlvbihhKXthLmRvbmUoYyl9KX07Zi5wcm90b3R5cGU9e3NldEhvc3Q6ZnVuY3Rpb24oYSl7dGhpcy5ob3N0PWF8fHt9fSxkb25lOmZ1bmN0aW9uKGEpezI9PT10aGlzLl9zdGF0ZT9hKCk6dGhpcy5fZG9uZUNhbGxiYWNrcy5wdXNoKGEpfSxwcm9ncmVzczpCLGdldFByb21pc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5wcm9taXNlKXt2YXIgYj10aGlzO3RoaXMucHJvbWlzZT1hKGZ1bmN0aW9uKGEsYyl7Yi5kb25lKGZ1bmN0aW9uKGIpeyExPT09Yj9jKCk6YSgpfSl9KX1yZXR1cm4gdGhpcy5wcm9taXNlfSx0aGVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpLnRoZW4oYSxiKX0sXCJjYXRjaFwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFByb21pc2UoKVtcImNhdGNoXCJdKGEpfSxcImZpbmFsbHlcIjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRQcm9taXNlKClbXCJmaW5hbGx5XCJdKGEpfSxwYXVzZTpmdW5jdGlvbigpe3RoaXMuaG9zdC5wYXVzZSYmXG50aGlzLmhvc3QucGF1c2UoKX0scmVzdW1lOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LnJlc3VtZSYmdGhpcy5ob3N0LnJlc3VtZSgpfSxlbmQ6ZnVuY3Rpb24oKXt0aGlzLmhvc3QuZW5kJiZ0aGlzLmhvc3QuZW5kKCk7dGhpcy5fcmVzb2x2ZSghMCl9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuaG9zdC5jYW5jZWwmJnRoaXMuaG9zdC5jYW5jZWwoKTt0aGlzLl9yZXNvbHZlKCExKX0sY29tcGxldGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczswPT09Yi5fc3RhdGUmJihiLl9zdGF0ZT0xLGIuX3RpY2soZnVuY3Rpb24oKXtiLl9yZXNvbHZlKGEpfSkpfSxfcmVzb2x2ZTpmdW5jdGlvbihhKXsyIT09dGhpcy5fc3RhdGUmJihuKHRoaXMuX2RvbmVDYWxsYmFja3MsZnVuY3Rpb24oYil7YihhKX0pLHRoaXMuX2RvbmVDYWxsYmFja3MubGVuZ3RoPTAsdGhpcy5fc3RhdGU9Mil9fTtyZXR1cm4gZn1dfSxaZT1mdW5jdGlvbigpe3RoaXMuJGdldD1bXCIkJHJBRlwiLFwiJHFcIixcIiQkQW5pbWF0ZVJ1bm5lclwiLFxuZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihiLGUpe2Z1bmN0aW9uIGYoKXthKGZ1bmN0aW9uKCl7Zy5hZGRDbGFzcyYmKGIuYWRkQ2xhc3MoZy5hZGRDbGFzcyksZy5hZGRDbGFzcz1udWxsKTtnLnJlbW92ZUNsYXNzJiYoYi5yZW1vdmVDbGFzcyhnLnJlbW92ZUNsYXNzKSxnLnJlbW92ZUNsYXNzPW51bGwpO2cudG8mJihiLmNzcyhnLnRvKSxnLnRvPW51bGwpO2h8fGsuY29tcGxldGUoKTtoPSEwfSk7cmV0dXJuIGt9dmFyIGc9ZXx8e307Zy4kJHByZXBhcmVkfHwoZz1PYShnKSk7Zy5jbGVhbnVwU3R5bGVzJiYoZy5mcm9tPWcudG89bnVsbCk7Zy5mcm9tJiYoYi5jc3MoZy5mcm9tKSxnLmZyb209bnVsbCk7dmFyIGgsaz1uZXcgZDtyZXR1cm57c3RhcnQ6ZixlbmQ6Zn19fV19LGphPUgoXCIkY29tcGlsZVwiKTtFYy4kaW5qZWN0PVtcIiRwcm92aWRlXCIsXCIkJHNhbml0aXplVXJpUHJvdmlkZXJcIl07dmFyIFhjPS9eKCg/Onh8ZGF0YSlbXFw6XFwtX10pL2ksYmc9SChcIiRjb250cm9sbGVyXCIpLFxuZGQ9L14oXFxTKykoXFxzK2FzXFxzKyhbXFx3JF0rKSk/JC8samY9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9W1wiJGRvY3VtZW50XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2I/IWIubm9kZVR5cGUmJmIgaW5zdGFuY2VvZiBDJiYoYj1iWzBdKTpiPWFbMF0uYm9keTtyZXR1cm4gYi5vZmZzZXRXaWR0aCsxfX1dfSxlZD1cImFwcGxpY2F0aW9uL2pzb25cIixkYz17XCJDb250ZW50LVR5cGVcIjplZCtcIjtjaGFyc2V0PXV0Zi04XCJ9LGRnPS9eXFxbfF5cXHsoPyFcXHspLyxlZz17XCJbXCI6L10kLyxcIntcIjovfSQvfSxjZz0vXlxcKVxcXVxcfScsP1xcbi8sRWc9SChcIiRodHRwXCIpLGlkPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3Rocm93IEVnKFwibGVnYWN5XCIsYSk7fX0sS2E9aWEuJGludGVycG9sYXRlTWluRXJyPUgoXCIkaW50ZXJwb2xhdGVcIik7S2EudGhyb3dOb2NvbmNhdD1mdW5jdGlvbihhKXt0aHJvdyBLYShcIm5vY29uY2F0XCIsYSk7fTtLYS5pbnRlcnI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gS2EoXCJpbnRlcnJcIixcbmEsYi50b1N0cmluZygpKX07dmFyIEZnPS9eKFteXFw/I10qKShcXD8oW14jXSopKT8oIyguKikpPyQvLGdnPXtodHRwOjgwLGh0dHBzOjQ0MyxmdHA6MjF9LEdiPUgoXCIkbG9jYXRpb25cIiksR2c9eyQkaHRtbDU6ITEsJCRyZXBsYWNlOiExLGFic1VybDpIYihcIiQkYWJzVXJsXCIpLHVybDpmdW5jdGlvbihhKXtpZih4KGEpKXJldHVybiB0aGlzLiQkdXJsO3ZhciBiPUZnLmV4ZWMoYSk7KGJbMV18fFwiXCI9PT1hKSYmdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChiWzFdKSk7KGJbMl18fGJbMV18fFwiXCI9PT1hKSYmdGhpcy5zZWFyY2goYlszXXx8XCJcIik7dGhpcy5oYXNoKGJbNV18fFwiXCIpO3JldHVybiB0aGlzfSxwcm90b2NvbDpIYihcIiQkcHJvdG9jb2xcIiksaG9zdDpIYihcIiQkaG9zdFwiKSxwb3J0OkhiKFwiJCRwb3J0XCIpLHBhdGg6bmQoXCIkJHBhdGhcIixmdW5jdGlvbihhKXthPW51bGwhPT1hP2EudG9TdHJpbmcoKTpcIlwiO3JldHVyblwiL1wiPT1hLmNoYXJBdCgwKT9hOlwiL1wiK2F9KSxzZWFyY2g6ZnVuY3Rpb24oYSxcbmIpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHRoaXMuJCRzZWFyY2g7Y2FzZSAxOmlmKEYoYSl8fE4oYSkpYT1hLnRvU3RyaW5nKCksdGhpcy4kJHNlYXJjaD16YyhhKTtlbHNlIGlmKEUoYSkpYT1PYShhLHt9KSxuKGEsZnVuY3Rpb24oYixjKXtudWxsPT1iJiZkZWxldGUgYVtjXX0pLHRoaXMuJCRzZWFyY2g9YTtlbHNlIHRocm93IEdiKFwiaXNyY2hhcmdcIik7YnJlYWs7ZGVmYXVsdDp4KGIpfHxudWxsPT09Yj9kZWxldGUgdGhpcy4kJHNlYXJjaFthXTp0aGlzLiQkc2VhcmNoW2FdPWJ9dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc30saGFzaDpuZChcIiQkaGFzaFwiLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT09YT9hLnRvU3RyaW5nKCk6XCJcIn0pLHJlcGxhY2U6ZnVuY3Rpb24oKXt0aGlzLiQkcmVwbGFjZT0hMDtyZXR1cm4gdGhpc319O24oW21kLGdjLGZjXSxmdW5jdGlvbihhKXthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEdnKTthLnByb3RvdHlwZS5zdGF0ZT1cbmZ1bmN0aW9uKGIpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLiQkc3RhdGU7aWYoYSE9PWZjfHwhdGhpcy4kJGh0bWw1KXRocm93IEdiKFwibm9zdGF0ZVwiKTt0aGlzLiQkc3RhdGU9eChiKT9udWxsOmI7cmV0dXJuIHRoaXN9fSk7dmFyIGthPUgoXCIkcGFyc2VcIiksaWc9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsamc9RnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LGtnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLFBiPVooKTtuKFwiKyAtICogLyAlID09PSAhPT0gPT0gIT0gPCA+IDw9ID49ICYmIHx8ICEgPSB8XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe1BiW2FdPSEwfSk7dmFyIEhnPXtuOlwiXFxuXCIsZjpcIlxcZlwiLHI6XCJcXHJcIix0OlwiXFx0XCIsdjpcIlxcdlwiLFwiJ1wiOlwiJ1wiLCdcIic6J1wiJ30saWM9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zPWF9O2ljLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aWMsbGV4OmZ1bmN0aW9uKGEpe3RoaXMudGV4dD1hO3RoaXMuaW5kZXg9MDtmb3IodGhpcy50b2tlbnM9XG5bXTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KWlmKGE9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSwnXCInPT09YXx8XCInXCI9PT1hKXRoaXMucmVhZFN0cmluZyhhKTtlbHNlIGlmKHRoaXMuaXNOdW1iZXIoYSl8fFwiLlwiPT09YSYmdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpdGhpcy5yZWFkTnVtYmVyKCk7ZWxzZSBpZih0aGlzLmlzSWRlbnQoYSkpdGhpcy5yZWFkSWRlbnQoKTtlbHNlIGlmKHRoaXMuaXMoYSxcIigpe31bXS4sOzo/XCIpKXRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDphfSksdGhpcy5pbmRleCsrO2Vsc2UgaWYodGhpcy5pc1doaXRlc3BhY2UoYSkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIGI9YSt0aGlzLnBlZWsoKSxkPWIrdGhpcy5wZWVrKDIpLGM9UGJbYl0sZT1QYltkXTtQYlthXXx8Y3x8ZT8oYT1lP2Q6Yz9iOmEsdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OmEsb3BlcmF0b3I6ITB9KSx0aGlzLmluZGV4Kz1cbmEubGVuZ3RoKTp0aGlzLnRocm93RXJyb3IoXCJVbmV4cGVjdGVkIG5leHQgY2hhcmFjdGVyIFwiLHRoaXMuaW5kZXgsdGhpcy5pbmRleCsxKX1yZXR1cm4gdGhpcy50b2tlbnN9LGlzOmZ1bmN0aW9uKGEsYil7cmV0dXJuLTEhPT1iLmluZGV4T2YoYSl9LHBlZWs6ZnVuY3Rpb24oYSl7YT1hfHwxO3JldHVybiB0aGlzLmluZGV4K2E8dGhpcy50ZXh0Lmxlbmd0aD90aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgrYSk6ITF9LGlzTnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVyblwiMFwiPD1hJiZcIjlcIj49YSYmXCJzdHJpbmdcIj09PXR5cGVvZiBhfSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuXCIgXCI9PT1hfHxcIlxcclwiPT09YXx8XCJcXHRcIj09PWF8fFwiXFxuXCI9PT1hfHxcIlxcdlwiPT09YXx8XCJcXHUwMGEwXCI9PT1hfSxpc0lkZW50OmZ1bmN0aW9uKGEpe3JldHVyblwiYVwiPD1hJiZcInpcIj49YXx8XCJBXCI8PWEmJlwiWlwiPj1hfHxcIl9cIj09PWF8fFwiJFwiPT09YX0saXNFeHBPcGVyYXRvcjpmdW5jdGlvbihhKXtyZXR1cm5cIi1cIj09PVxuYXx8XCIrXCI9PT1hfHx0aGlzLmlzTnVtYmVyKGEpfSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYixkKXtkPWR8fHRoaXMuaW5kZXg7Yj15KGIpP1wicyBcIitiK1wiLVwiK3RoaXMuaW5kZXgrXCIgW1wiK3RoaXMudGV4dC5zdWJzdHJpbmcoYixkKStcIl1cIjpcIiBcIitkO3Rocm93IGthKFwibGV4ZXJyXCIsYSxiLHRoaXMudGV4dCk7fSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiXCIsYj10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBkPUcodGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSk7aWYoXCIuXCI9PWR8fHRoaXMuaXNOdW1iZXIoZCkpYSs9ZDtlbHNle3ZhciBjPXRoaXMucGVlaygpO2lmKFwiZVwiPT1kJiZ0aGlzLmlzRXhwT3BlcmF0b3IoYykpYSs9ZDtlbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihkKSYmYyYmdGhpcy5pc051bWJlcihjKSYmXCJlXCI9PWEuY2hhckF0KGEubGVuZ3RoLTEpKWErPWQ7ZWxzZSBpZighdGhpcy5pc0V4cE9wZXJhdG9yKGQpfHxcbmMmJnRoaXMuaXNOdW1iZXIoYyl8fFwiZVwiIT1hLmNoYXJBdChhLmxlbmd0aC0xKSlicmVhaztlbHNlIHRoaXMudGhyb3dFcnJvcihcIkludmFsaWQgZXhwb25lbnRcIil9dGhpcy5pbmRleCsrfXRoaXMudG9rZW5zLnB1c2goe2luZGV4OmIsdGV4dDphLGNvbnN0YW50OiEwLHZhbHVlOk51bWJlcihhKX0pfSxyZWFkSWRlbnQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5pbmRleDt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgYj10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKCF0aGlzLmlzSWRlbnQoYikmJiF0aGlzLmlzTnVtYmVyKGIpKWJyZWFrO3RoaXMuaW5kZXgrK310aGlzLnRva2Vucy5wdXNoKHtpbmRleDphLHRleHQ6dGhpcy50ZXh0LnNsaWNlKGEsdGhpcy5pbmRleCksaWRlbnRpZmllcjohMH0pfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW5kZXg7dGhpcy5pbmRleCsrO2Zvcih2YXIgZD1cIlwiLGM9YSxlPSExO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBmPVxudGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSxjPWMrZjtpZihlKVwidVwiPT09Zj8oZT10aGlzLnRleHQuc3Vic3RyaW5nKHRoaXMuaW5kZXgrMSx0aGlzLmluZGV4KzUpLGUubWF0Y2goL1tcXGRhLWZdezR9L2kpfHx0aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIFtcXFxcdVwiK2UrXCJdXCIpLHRoaXMuaW5kZXgrPTQsZCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChlLDE2KSkpOmQrPUhnW2ZdfHxmLGU9ITE7ZWxzZSBpZihcIlxcXFxcIj09PWYpZT0hMDtlbHNle2lmKGY9PT1hKXt0aGlzLmluZGV4Kys7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yix0ZXh0OmMsY29uc3RhbnQ6ITAsdmFsdWU6ZH0pO3JldHVybn1kKz1mfXRoaXMuaW5kZXgrK310aGlzLnRocm93RXJyb3IoXCJVbnRlcm1pbmF0ZWQgcXVvdGVcIixiKX19O3ZhciBxPWZ1bmN0aW9uKGEsYil7dGhpcy5sZXhlcj1hO3RoaXMub3B0aW9ucz1ifTtxLlByb2dyYW09XCJQcm9ncmFtXCI7cS5FeHByZXNzaW9uU3RhdGVtZW50PVxuXCJFeHByZXNzaW9uU3RhdGVtZW50XCI7cS5Bc3NpZ25tZW50RXhwcmVzc2lvbj1cIkFzc2lnbm1lbnRFeHByZXNzaW9uXCI7cS5Db25kaXRpb25hbEV4cHJlc3Npb249XCJDb25kaXRpb25hbEV4cHJlc3Npb25cIjtxLkxvZ2ljYWxFeHByZXNzaW9uPVwiTG9naWNhbEV4cHJlc3Npb25cIjtxLkJpbmFyeUV4cHJlc3Npb249XCJCaW5hcnlFeHByZXNzaW9uXCI7cS5VbmFyeUV4cHJlc3Npb249XCJVbmFyeUV4cHJlc3Npb25cIjtxLkNhbGxFeHByZXNzaW9uPVwiQ2FsbEV4cHJlc3Npb25cIjtxLk1lbWJlckV4cHJlc3Npb249XCJNZW1iZXJFeHByZXNzaW9uXCI7cS5JZGVudGlmaWVyPVwiSWRlbnRpZmllclwiO3EuTGl0ZXJhbD1cIkxpdGVyYWxcIjtxLkFycmF5RXhwcmVzc2lvbj1cIkFycmF5RXhwcmVzc2lvblwiO3EuUHJvcGVydHk9XCJQcm9wZXJ0eVwiO3EuT2JqZWN0RXhwcmVzc2lvbj1cIk9iamVjdEV4cHJlc3Npb25cIjtxLlRoaXNFeHByZXNzaW9uPVwiVGhpc0V4cHJlc3Npb25cIjtxLkxvY2Fsc0V4cHJlc3Npb249XCJMb2NhbHNFeHByZXNzaW9uXCI7XG5xLk5HVmFsdWVQYXJhbWV0ZXI9XCJOR1ZhbHVlUGFyYW1ldGVyXCI7cS5wcm90b3R5cGU9e2FzdDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLnRva2Vucz10aGlzLmxleGVyLmxleChhKTthPXRoaXMucHJvZ3JhbSgpOzAhPT10aGlzLnRva2Vucy5sZW5ndGgmJnRoaXMudGhyb3dFcnJvcihcImlzIGFuIHVuZXhwZWN0ZWQgdG9rZW5cIix0aGlzLnRva2Vuc1swXSk7cmV0dXJuIGF9LHByb2dyYW06ZnVuY3Rpb24oKXtmb3IodmFyIGE9W107OylpZigwPHRoaXMudG9rZW5zLmxlbmd0aCYmIXRoaXMucGVlayhcIn1cIixcIilcIixcIjtcIixcIl1cIikmJmEucHVzaCh0aGlzLmV4cHJlc3Npb25TdGF0ZW1lbnQoKSksIXRoaXMuZXhwZWN0KFwiO1wiKSlyZXR1cm57dHlwZTpxLlByb2dyYW0sYm9keTphfX0sZXhwcmVzc2lvblN0YXRlbWVudDpmdW5jdGlvbigpe3JldHVybnt0eXBlOnEuRXhwcmVzc2lvblN0YXRlbWVudCxleHByZXNzaW9uOnRoaXMuZmlsdGVyQ2hhaW4oKX19LGZpbHRlckNoYWluOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVxudGhpcy5leHByZXNzaW9uKCk7dGhpcy5leHBlY3QoXCJ8XCIpOylhPXRoaXMuZmlsdGVyKGEpO3JldHVybiBhfSxleHByZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNzaWdubWVudCgpfSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXJuYXJ5KCk7dGhpcy5leHBlY3QoXCI9XCIpJiYoYT17dHlwZTpxLkFzc2lnbm1lbnRFeHByZXNzaW9uLGxlZnQ6YSxyaWdodDp0aGlzLmFzc2lnbm1lbnQoKSxvcGVyYXRvcjpcIj1cIn0pO3JldHVybiBhfSx0ZXJuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2dpY2FsT1IoKSxiLGQ7cmV0dXJuIHRoaXMuZXhwZWN0KFwiP1wiKSYmKGI9dGhpcy5leHByZXNzaW9uKCksdGhpcy5jb25zdW1lKFwiOlwiKSk/KGQ9dGhpcy5leHByZXNzaW9uKCkse3R5cGU6cS5Db25kaXRpb25hbEV4cHJlc3Npb24sdGVzdDphLGFsdGVybmF0ZTpiLGNvbnNlcXVlbnQ6ZH0pOmF9LGxvZ2ljYWxPUjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmxvZ2ljYWxBTkQoKTt0aGlzLmV4cGVjdChcInx8XCIpOylhPVxue3R5cGU6cS5Mb2dpY2FsRXhwcmVzc2lvbixvcGVyYXRvcjpcInx8XCIsbGVmdDphLHJpZ2h0OnRoaXMubG9naWNhbEFORCgpfTtyZXR1cm4gYX0sbG9naWNhbEFORDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmVxdWFsaXR5KCk7dGhpcy5leHBlY3QoXCImJlwiKTspYT17dHlwZTpxLkxvZ2ljYWxFeHByZXNzaW9uLG9wZXJhdG9yOlwiJiZcIixsZWZ0OmEscmlnaHQ6dGhpcy5lcXVhbGl0eSgpfTtyZXR1cm4gYX0sZXF1YWxpdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5yZWxhdGlvbmFsKCksYjtiPXRoaXMuZXhwZWN0KFwiPT1cIixcIiE9XCIsXCI9PT1cIixcIiE9PVwiKTspYT17dHlwZTpxLkJpbmFyeUV4cHJlc3Npb24sb3BlcmF0b3I6Yi50ZXh0LGxlZnQ6YSxyaWdodDp0aGlzLnJlbGF0aW9uYWwoKX07cmV0dXJuIGF9LHJlbGF0aW9uYWw6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5hZGRpdGl2ZSgpLGI7Yj10aGlzLmV4cGVjdChcIjxcIixcIj5cIixcIjw9XCIsXCI+PVwiKTspYT17dHlwZTpxLkJpbmFyeUV4cHJlc3Npb24sXG5vcGVyYXRvcjpiLnRleHQsbGVmdDphLHJpZ2h0OnRoaXMuYWRkaXRpdmUoKX07cmV0dXJuIGF9LGFkZGl0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubXVsdGlwbGljYXRpdmUoKSxiO2I9dGhpcy5leHBlY3QoXCIrXCIsXCItXCIpOylhPXt0eXBlOnEuQmluYXJ5RXhwcmVzc2lvbixvcGVyYXRvcjpiLnRleHQsbGVmdDphLHJpZ2h0OnRoaXMubXVsdGlwbGljYXRpdmUoKX07cmV0dXJuIGF9LG11bHRpcGxpY2F0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMudW5hcnkoKSxiO2I9dGhpcy5leHBlY3QoXCIqXCIsXCIvXCIsXCIlXCIpOylhPXt0eXBlOnEuQmluYXJ5RXhwcmVzc2lvbixvcGVyYXRvcjpiLnRleHQsbGVmdDphLHJpZ2h0OnRoaXMudW5hcnkoKX07cmV0dXJuIGF9LHVuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuKGE9dGhpcy5leHBlY3QoXCIrXCIsXCItXCIsXCIhXCIpKT97dHlwZTpxLlVuYXJ5RXhwcmVzc2lvbixvcGVyYXRvcjphLnRleHQscHJlZml4OiEwLGFyZ3VtZW50OnRoaXMudW5hcnkoKX06XG50aGlzLnByaW1hcnkoKX0scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBhO3RoaXMuZXhwZWN0KFwiKFwiKT8oYT10aGlzLmZpbHRlckNoYWluKCksdGhpcy5jb25zdW1lKFwiKVwiKSk6dGhpcy5leHBlY3QoXCJbXCIpP2E9dGhpcy5hcnJheURlY2xhcmF0aW9uKCk6dGhpcy5leHBlY3QoXCJ7XCIpP2E9dGhpcy5vYmplY3QoKTp0aGlzLmNvbnN0YW50cy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnBlZWsoKS50ZXh0KT9hPU9hKHRoaXMuY29uc3RhbnRzW3RoaXMuY29uc3VtZSgpLnRleHRdKTp0aGlzLnBlZWsoKS5pZGVudGlmaWVyP2E9dGhpcy5pZGVudGlmaWVyKCk6dGhpcy5wZWVrKCkuY29uc3RhbnQ/YT10aGlzLmNvbnN0YW50KCk6dGhpcy50aHJvd0Vycm9yKFwibm90IGEgcHJpbWFyeSBleHByZXNzaW9uXCIsdGhpcy5wZWVrKCkpO2Zvcih2YXIgYjtiPXRoaXMuZXhwZWN0KFwiKFwiLFwiW1wiLFwiLlwiKTspXCIoXCI9PT1iLnRleHQ/KGE9e3R5cGU6cS5DYWxsRXhwcmVzc2lvbixjYWxsZWU6YSxhcmd1bWVudHM6dGhpcy5wYXJzZUFyZ3VtZW50cygpfSxcbnRoaXMuY29uc3VtZShcIilcIikpOlwiW1wiPT09Yi50ZXh0PyhhPXt0eXBlOnEuTWVtYmVyRXhwcmVzc2lvbixvYmplY3Q6YSxwcm9wZXJ0eTp0aGlzLmV4cHJlc3Npb24oKSxjb21wdXRlZDohMH0sdGhpcy5jb25zdW1lKFwiXVwiKSk6XCIuXCI9PT1iLnRleHQ/YT17dHlwZTpxLk1lbWJlckV4cHJlc3Npb24sb2JqZWN0OmEscHJvcGVydHk6dGhpcy5pZGVudGlmaWVyKCksY29tcHV0ZWQ6ITF9OnRoaXMudGhyb3dFcnJvcihcIklNUE9TU0lCTEVcIik7cmV0dXJuIGF9LGZpbHRlcjpmdW5jdGlvbihhKXthPVthXTtmb3IodmFyIGI9e3R5cGU6cS5DYWxsRXhwcmVzc2lvbixjYWxsZWU6dGhpcy5pZGVudGlmaWVyKCksYXJndW1lbnRzOmEsZmlsdGVyOiEwfTt0aGlzLmV4cGVjdChcIjpcIik7KWEucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7cmV0dXJuIGJ9LHBhcnNlQXJndW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYoXCIpXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2RvIGEucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7XG53aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXJldHVybiBhfSxpZGVudGlmaWVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb25zdW1lKCk7YS5pZGVudGlmaWVyfHx0aGlzLnRocm93RXJyb3IoXCJpcyBub3QgYSB2YWxpZCBpZGVudGlmaWVyXCIsYSk7cmV0dXJue3R5cGU6cS5JZGVudGlmaWVyLG5hbWU6YS50ZXh0fX0sY29uc3RhbnQ6ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpxLkxpdGVyYWwsdmFsdWU6dGhpcy5jb25zdW1lKCkudmFsdWV9fSxhcnJheURlY2xhcmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYoXCJdXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIl1cIikpYnJlYWs7YS5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIl1cIik7cmV0dXJue3R5cGU6cS5BcnJheUV4cHJlc3Npb24sZWxlbWVudHM6YX19LG9iamVjdDpmdW5jdGlvbigpe3ZhciBhPVtdLGI7aWYoXCJ9XCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIn1cIikpYnJlYWs7XG5iPXt0eXBlOnEuUHJvcGVydHksa2luZDpcImluaXRcIn07dGhpcy5wZWVrKCkuY29uc3RhbnQ/Yi5rZXk9dGhpcy5jb25zdGFudCgpOnRoaXMucGVlaygpLmlkZW50aWZpZXI/Yi5rZXk9dGhpcy5pZGVudGlmaWVyKCk6dGhpcy50aHJvd0Vycm9yKFwiaW52YWxpZCBrZXlcIix0aGlzLnBlZWsoKSk7dGhpcy5jb25zdW1lKFwiOlwiKTtiLnZhbHVlPXRoaXMuZXhwcmVzc2lvbigpO2EucHVzaChiKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIn1cIik7cmV0dXJue3R5cGU6cS5PYmplY3RFeHByZXNzaW9uLHByb3BlcnRpZXM6YX19LHRocm93RXJyb3I6ZnVuY3Rpb24oYSxiKXt0aHJvdyBrYShcInN5bnRheFwiLGIudGV4dCxhLGIuaW5kZXgrMSx0aGlzLnRleHQsdGhpcy50ZXh0LnN1YnN0cmluZyhiLmluZGV4KSk7fSxjb25zdW1lOmZ1bmN0aW9uKGEpe2lmKDA9PT10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cga2EoXCJ1ZW9lXCIsdGhpcy50ZXh0KTt2YXIgYj10aGlzLmV4cGVjdChhKTtcbmJ8fHRoaXMudGhyb3dFcnJvcihcImlzIHVuZXhwZWN0ZWQsIGV4cGVjdGluZyBbXCIrYStcIl1cIix0aGlzLnBlZWsoKSk7cmV0dXJuIGJ9LHBlZWtUb2tlbjpmdW5jdGlvbigpe2lmKDA9PT10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cga2EoXCJ1ZW9lXCIsdGhpcy50ZXh0KTtyZXR1cm4gdGhpcy50b2tlbnNbMF19LHBlZWs6ZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuIHRoaXMucGVla0FoZWFkKDAsYSxiLGQsYyl9LHBlZWtBaGVhZDpmdW5jdGlvbihhLGIsZCxjLGUpe2lmKHRoaXMudG9rZW5zLmxlbmd0aD5hKXthPXRoaXMudG9rZW5zW2FdO3ZhciBmPWEudGV4dDtpZihmPT09Ynx8Zj09PWR8fGY9PT1jfHxmPT09ZXx8IShifHxkfHxjfHxlKSlyZXR1cm4gYX1yZXR1cm4hMX0sZXhwZWN0OmZ1bmN0aW9uKGEsYixkLGMpe3JldHVybihhPXRoaXMucGVlayhhLGIsZCxjKSk/KHRoaXMudG9rZW5zLnNoaWZ0KCksYSk6ITF9LGNvbnN0YW50czp7XCJ0cnVlXCI6e3R5cGU6cS5MaXRlcmFsLHZhbHVlOiEwfSxcblwiZmFsc2VcIjp7dHlwZTpxLkxpdGVyYWwsdmFsdWU6ITF9LFwibnVsbFwiOnt0eXBlOnEuTGl0ZXJhbCx2YWx1ZTpudWxsfSx1bmRlZmluZWQ6e3R5cGU6cS5MaXRlcmFsLHZhbHVlOnZ9LFwidGhpc1wiOnt0eXBlOnEuVGhpc0V4cHJlc3Npb259LCRsb2NhbHM6e3R5cGU6cS5Mb2NhbHNFeHByZXNzaW9ufX19O3VkLnByb3RvdHlwZT17Y29tcGlsZTpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMsYz10aGlzLmFzdEJ1aWxkZXIuYXN0KGEpO3RoaXMuc3RhdGU9e25leHRJZDowLGZpbHRlcnM6e30sZXhwZW5zaXZlQ2hlY2tzOmIsZm46e3ZhcnM6W10sYm9keTpbXSxvd246e319LGFzc2lnbjp7dmFyczpbXSxib2R5OltdLG93bjp7fX0saW5wdXRzOltdfTtSKGMsZC4kZmlsdGVyKTt2YXIgZT1cIlwiLGY7dGhpcy5zdGFnZT1cImFzc2lnblwiO2lmKGY9c2QoYykpdGhpcy5zdGF0ZS5jb21wdXRpbmc9XCJhc3NpZ25cIixlPXRoaXMubmV4dElkKCksdGhpcy5yZWN1cnNlKGYsZSksdGhpcy5yZXR1cm5fKGUpLFxuZT1cImZuLmFzc2lnbj1cIit0aGlzLmdlbmVyYXRlRnVuY3Rpb24oXCJhc3NpZ25cIixcInMsdixsXCIpO2Y9cWQoYy5ib2R5KTtkLnN0YWdlPVwiaW5wdXRzXCI7bihmLGZ1bmN0aW9uKGEsYil7dmFyIGM9XCJmblwiK2I7ZC5zdGF0ZVtjXT17dmFyczpbXSxib2R5OltdLG93bjp7fX07ZC5zdGF0ZS5jb21wdXRpbmc9Yzt2YXIgZT1kLm5leHRJZCgpO2QucmVjdXJzZShhLGUpO2QucmV0dXJuXyhlKTtkLnN0YXRlLmlucHV0cy5wdXNoKGMpO2Eud2F0Y2hJZD1ifSk7dGhpcy5zdGF0ZS5jb21wdXRpbmc9XCJmblwiO3RoaXMuc3RhZ2U9XCJtYWluXCI7dGhpcy5yZWN1cnNlKGMpO2U9J1wiJyt0aGlzLlVTRStcIiBcIit0aGlzLlNUUklDVCsnXCI7XFxuJyt0aGlzLmZpbHRlclByZWZpeCgpK1widmFyIGZuPVwiK3RoaXMuZ2VuZXJhdGVGdW5jdGlvbihcImZuXCIsXCJzLGwsYSxpXCIpK2UrdGhpcy53YXRjaEZucygpK1wicmV0dXJuIGZuO1wiO2U9KG5ldyBGdW5jdGlvbihcIiRmaWx0ZXJcIixcImVuc3VyZVNhZmVNZW1iZXJOYW1lXCIsXCJlbnN1cmVTYWZlT2JqZWN0XCIsXG5cImVuc3VyZVNhZmVGdW5jdGlvblwiLFwiZ2V0U3RyaW5nVmFsdWVcIixcImVuc3VyZVNhZmVBc3NpZ25Db250ZXh0XCIsXCJpZkRlZmluZWRcIixcInBsdXNcIixcInRleHRcIixlKSkodGhpcy4kZmlsdGVyLFhhLEFhLG9kLGhnLEliLGxnLHBkLGEpO3RoaXMuc3RhdGU9dGhpcy5zdGFnZT12O2UubGl0ZXJhbD10ZChjKTtlLmNvbnN0YW50PWMuY29uc3RhbnQ7cmV0dXJuIGV9LFVTRTpcInVzZVwiLFNUUklDVDpcInN0cmljdFwiLHdhdGNoRm5zOmZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzLnN0YXRlLmlucHV0cyxkPXRoaXM7bihiLGZ1bmN0aW9uKGIpe2EucHVzaChcInZhciBcIitiK1wiPVwiK2QuZ2VuZXJhdGVGdW5jdGlvbihiLFwic1wiKSl9KTtiLmxlbmd0aCYmYS5wdXNoKFwiZm4uaW5wdXRzPVtcIitiLmpvaW4oXCIsXCIpK1wiXTtcIik7cmV0dXJuIGEuam9pbihcIlwiKX0sZ2VuZXJhdGVGdW5jdGlvbjpmdW5jdGlvbihhLGIpe3JldHVyblwiZnVuY3Rpb24oXCIrYitcIil7XCIrdGhpcy52YXJzUHJlZml4KGEpK3RoaXMuYm9keShhKStcblwifTtcIn0sZmlsdGVyUHJlZml4OmZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzO24odGhpcy5zdGF0ZS5maWx0ZXJzLGZ1bmN0aW9uKGQsYyl7YS5wdXNoKGQrXCI9JGZpbHRlcihcIitiLmVzY2FwZShjKStcIilcIil9KTtyZXR1cm4gYS5sZW5ndGg/XCJ2YXIgXCIrYS5qb2luKFwiLFwiKStcIjtcIjpcIlwifSx2YXJzUHJlZml4OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN0YXRlW2FdLnZhcnMubGVuZ3RoP1widmFyIFwiK3RoaXMuc3RhdGVbYV0udmFycy5qb2luKFwiLFwiKStcIjtcIjpcIlwifSxib2R5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN0YXRlW2FdLmJvZHkuam9pbihcIlwiKX0scmVjdXJzZTpmdW5jdGlvbihhLGIsZCxjLGUsZil7dmFyIGcsaCxrPXRoaXMsbCxtO2M9Y3x8QjtpZighZiYmeShhLndhdGNoSWQpKWI9Ynx8dGhpcy5uZXh0SWQoKSx0aGlzLmlmXyhcImlcIix0aGlzLmxhenlBc3NpZ24oYix0aGlzLmNvbXB1dGVkTWVtYmVyKFwiaVwiLGEud2F0Y2hJZCkpLHRoaXMubGF6eVJlY3Vyc2UoYSxiLGQsXG5jLGUsITApKTtlbHNlIHN3aXRjaChhLnR5cGUpe2Nhc2UgcS5Qcm9ncmFtOm4oYS5ib2R5LGZ1bmN0aW9uKGIsYyl7ay5yZWN1cnNlKGIuZXhwcmVzc2lvbix2LHYsZnVuY3Rpb24oYSl7aD1hfSk7YyE9PWEuYm9keS5sZW5ndGgtMT9rLmN1cnJlbnQoKS5ib2R5LnB1c2goaCxcIjtcIik6ay5yZXR1cm5fKGgpfSk7YnJlYWs7Y2FzZSBxLkxpdGVyYWw6bT10aGlzLmVzY2FwZShhLnZhbHVlKTt0aGlzLmFzc2lnbihiLG0pO2MobSk7YnJlYWs7Y2FzZSBxLlVuYXJ5RXhwcmVzc2lvbjp0aGlzLnJlY3Vyc2UoYS5hcmd1bWVudCx2LHYsZnVuY3Rpb24oYSl7aD1hfSk7bT1hLm9wZXJhdG9yK1wiKFwiK3RoaXMuaWZEZWZpbmVkKGgsMCkrXCIpXCI7dGhpcy5hc3NpZ24oYixtKTtjKG0pO2JyZWFrO2Nhc2UgcS5CaW5hcnlFeHByZXNzaW9uOnRoaXMucmVjdXJzZShhLmxlZnQsdix2LGZ1bmN0aW9uKGEpe2c9YX0pO3RoaXMucmVjdXJzZShhLnJpZ2h0LHYsdixmdW5jdGlvbihhKXtoPWF9KTttPVwiK1wiPT09XG5hLm9wZXJhdG9yP3RoaXMucGx1cyhnLGgpOlwiLVwiPT09YS5vcGVyYXRvcj90aGlzLmlmRGVmaW5lZChnLDApK2Eub3BlcmF0b3IrdGhpcy5pZkRlZmluZWQoaCwwKTpcIihcIitnK1wiKVwiK2Eub3BlcmF0b3IrXCIoXCIraCtcIilcIjt0aGlzLmFzc2lnbihiLG0pO2MobSk7YnJlYWs7Y2FzZSBxLkxvZ2ljYWxFeHByZXNzaW9uOmI9Ynx8dGhpcy5uZXh0SWQoKTtrLnJlY3Vyc2UoYS5sZWZ0LGIpO2suaWZfKFwiJiZcIj09PWEub3BlcmF0b3I/YjprLm5vdChiKSxrLmxhenlSZWN1cnNlKGEucmlnaHQsYikpO2MoYik7YnJlYWs7Y2FzZSBxLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpiPWJ8fHRoaXMubmV4dElkKCk7ay5yZWN1cnNlKGEudGVzdCxiKTtrLmlmXyhiLGsubGF6eVJlY3Vyc2UoYS5hbHRlcm5hdGUsYiksay5sYXp5UmVjdXJzZShhLmNvbnNlcXVlbnQsYikpO2MoYik7YnJlYWs7Y2FzZSBxLklkZW50aWZpZXI6Yj1ifHx0aGlzLm5leHRJZCgpO2QmJihkLmNvbnRleHQ9XCJpbnB1dHNcIj09PWsuc3RhZ2U/XG5cInNcIjp0aGlzLmFzc2lnbih0aGlzLm5leHRJZCgpLHRoaXMuZ2V0SGFzT3duUHJvcGVydHkoXCJsXCIsYS5uYW1lKStcIj9sOnNcIiksZC5jb21wdXRlZD0hMSxkLm5hbWU9YS5uYW1lKTtYYShhLm5hbWUpO2suaWZfKFwiaW5wdXRzXCI9PT1rLnN0YWdlfHxrLm5vdChrLmdldEhhc093blByb3BlcnR5KFwibFwiLGEubmFtZSkpLGZ1bmN0aW9uKCl7ay5pZl8oXCJpbnB1dHNcIj09PWsuc3RhZ2V8fFwic1wiLGZ1bmN0aW9uKCl7ZSYmMSE9PWUmJmsuaWZfKGsubm90KGsubm9uQ29tcHV0ZWRNZW1iZXIoXCJzXCIsYS5uYW1lKSksay5sYXp5QXNzaWduKGsubm9uQ29tcHV0ZWRNZW1iZXIoXCJzXCIsYS5uYW1lKSxcInt9XCIpKTtrLmFzc2lnbihiLGsubm9uQ29tcHV0ZWRNZW1iZXIoXCJzXCIsYS5uYW1lKSl9KX0sYiYmay5sYXp5QXNzaWduKGIsay5ub25Db21wdXRlZE1lbWJlcihcImxcIixhLm5hbWUpKSk7KGsuc3RhdGUuZXhwZW5zaXZlQ2hlY2tzfHxKYihhLm5hbWUpKSYmay5hZGRFbnN1cmVTYWZlT2JqZWN0KGIpO2MoYik7XG5icmVhaztjYXNlIHEuTWVtYmVyRXhwcmVzc2lvbjpnPWQmJihkLmNvbnRleHQ9dGhpcy5uZXh0SWQoKSl8fHRoaXMubmV4dElkKCk7Yj1ifHx0aGlzLm5leHRJZCgpO2sucmVjdXJzZShhLm9iamVjdCxnLHYsZnVuY3Rpb24oKXtrLmlmXyhrLm5vdE51bGwoZyksZnVuY3Rpb24oKXtlJiYxIT09ZSYmay5hZGRFbnN1cmVTYWZlQXNzaWduQ29udGV4dChnKTtpZihhLmNvbXB1dGVkKWg9ay5uZXh0SWQoKSxrLnJlY3Vyc2UoYS5wcm9wZXJ0eSxoKSxrLmdldFN0cmluZ1ZhbHVlKGgpLGsuYWRkRW5zdXJlU2FmZU1lbWJlck5hbWUoaCksZSYmMSE9PWUmJmsuaWZfKGsubm90KGsuY29tcHV0ZWRNZW1iZXIoZyxoKSksay5sYXp5QXNzaWduKGsuY29tcHV0ZWRNZW1iZXIoZyxoKSxcInt9XCIpKSxtPWsuZW5zdXJlU2FmZU9iamVjdChrLmNvbXB1dGVkTWVtYmVyKGcsaCkpLGsuYXNzaWduKGIsbSksZCYmKGQuY29tcHV0ZWQ9ITAsZC5uYW1lPWgpO2Vsc2V7WGEoYS5wcm9wZXJ0eS5uYW1lKTtlJiZcbjEhPT1lJiZrLmlmXyhrLm5vdChrLm5vbkNvbXB1dGVkTWVtYmVyKGcsYS5wcm9wZXJ0eS5uYW1lKSksay5sYXp5QXNzaWduKGsubm9uQ29tcHV0ZWRNZW1iZXIoZyxhLnByb3BlcnR5Lm5hbWUpLFwie31cIikpO209ay5ub25Db21wdXRlZE1lbWJlcihnLGEucHJvcGVydHkubmFtZSk7aWYoay5zdGF0ZS5leHBlbnNpdmVDaGVja3N8fEpiKGEucHJvcGVydHkubmFtZSkpbT1rLmVuc3VyZVNhZmVPYmplY3QobSk7ay5hc3NpZ24oYixtKTtkJiYoZC5jb21wdXRlZD0hMSxkLm5hbWU9YS5wcm9wZXJ0eS5uYW1lKX19LGZ1bmN0aW9uKCl7ay5hc3NpZ24oYixcInVuZGVmaW5lZFwiKX0pO2MoYil9LCEhZSk7YnJlYWs7Y2FzZSBxLkNhbGxFeHByZXNzaW9uOmI9Ynx8dGhpcy5uZXh0SWQoKTthLmZpbHRlcj8oaD1rLmZpbHRlcihhLmNhbGxlZS5uYW1lKSxsPVtdLG4oYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7dmFyIGI9ay5uZXh0SWQoKTtrLnJlY3Vyc2UoYSxiKTtsLnB1c2goYil9KSxtPWgrXCIoXCIrXG5sLmpvaW4oXCIsXCIpK1wiKVwiLGsuYXNzaWduKGIsbSksYyhiKSk6KGg9ay5uZXh0SWQoKSxnPXt9LGw9W10say5yZWN1cnNlKGEuY2FsbGVlLGgsZyxmdW5jdGlvbigpe2suaWZfKGsubm90TnVsbChoKSxmdW5jdGlvbigpe2suYWRkRW5zdXJlU2FmZUZ1bmN0aW9uKGgpO24oYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7ay5yZWN1cnNlKGEsay5uZXh0SWQoKSx2LGZ1bmN0aW9uKGEpe2wucHVzaChrLmVuc3VyZVNhZmVPYmplY3QoYSkpfSl9KTtnLm5hbWU/KGsuc3RhdGUuZXhwZW5zaXZlQ2hlY2tzfHxrLmFkZEVuc3VyZVNhZmVPYmplY3QoZy5jb250ZXh0KSxtPWsubWVtYmVyKGcuY29udGV4dCxnLm5hbWUsZy5jb21wdXRlZCkrXCIoXCIrbC5qb2luKFwiLFwiKStcIilcIik6bT1oK1wiKFwiK2wuam9pbihcIixcIikrXCIpXCI7bT1rLmVuc3VyZVNhZmVPYmplY3QobSk7ay5hc3NpZ24oYixtKX0sZnVuY3Rpb24oKXtrLmFzc2lnbihiLFwidW5kZWZpbmVkXCIpfSk7YyhiKX0pKTticmVhaztjYXNlIHEuQXNzaWdubWVudEV4cHJlc3Npb246aD1cbnRoaXMubmV4dElkKCk7Zz17fTtpZighcmQoYS5sZWZ0KSl0aHJvdyBrYShcImx2YWxcIik7dGhpcy5yZWN1cnNlKGEubGVmdCx2LGcsZnVuY3Rpb24oKXtrLmlmXyhrLm5vdE51bGwoZy5jb250ZXh0KSxmdW5jdGlvbigpe2sucmVjdXJzZShhLnJpZ2h0LGgpO2suYWRkRW5zdXJlU2FmZU9iamVjdChrLm1lbWJlcihnLmNvbnRleHQsZy5uYW1lLGcuY29tcHV0ZWQpKTtrLmFkZEVuc3VyZVNhZmVBc3NpZ25Db250ZXh0KGcuY29udGV4dCk7bT1rLm1lbWJlcihnLmNvbnRleHQsZy5uYW1lLGcuY29tcHV0ZWQpK2Eub3BlcmF0b3IraDtrLmFzc2lnbihiLG0pO2MoYnx8bSl9KX0sMSk7YnJlYWs7Y2FzZSBxLkFycmF5RXhwcmVzc2lvbjpsPVtdO24oYS5lbGVtZW50cyxmdW5jdGlvbihhKXtrLnJlY3Vyc2UoYSxrLm5leHRJZCgpLHYsZnVuY3Rpb24oYSl7bC5wdXNoKGEpfSl9KTttPVwiW1wiK2wuam9pbihcIixcIikrXCJdXCI7dGhpcy5hc3NpZ24oYixtKTtjKG0pO2JyZWFrO2Nhc2UgcS5PYmplY3RFeHByZXNzaW9uOmw9XG5bXTtuKGEucHJvcGVydGllcyxmdW5jdGlvbihhKXtrLnJlY3Vyc2UoYS52YWx1ZSxrLm5leHRJZCgpLHYsZnVuY3Rpb24oYil7bC5wdXNoKGsuZXNjYXBlKGEua2V5LnR5cGU9PT1xLklkZW50aWZpZXI/YS5rZXkubmFtZTpcIlwiK2Eua2V5LnZhbHVlKStcIjpcIitiKX0pfSk7bT1cIntcIitsLmpvaW4oXCIsXCIpK1wifVwiO3RoaXMuYXNzaWduKGIsbSk7YyhtKTticmVhaztjYXNlIHEuVGhpc0V4cHJlc3Npb246dGhpcy5hc3NpZ24oYixcInNcIik7YyhcInNcIik7YnJlYWs7Y2FzZSBxLkxvY2Fsc0V4cHJlc3Npb246dGhpcy5hc3NpZ24oYixcImxcIik7YyhcImxcIik7YnJlYWs7Y2FzZSBxLk5HVmFsdWVQYXJhbWV0ZXI6dGhpcy5hc3NpZ24oYixcInZcIiksYyhcInZcIil9fSxnZXRIYXNPd25Qcm9wZXJ0eTpmdW5jdGlvbihhLGIpe3ZhciBkPWErXCIuXCIrYixjPXRoaXMuY3VycmVudCgpLm93bjtjLmhhc093blByb3BlcnR5KGQpfHwoY1tkXT10aGlzLm5leHRJZCghMSxhK1wiJiYoXCIrdGhpcy5lc2NhcGUoYikrXCIgaW4gXCIrXG5hK1wiKVwiKSk7cmV0dXJuIGNbZF19LGFzc2lnbjpmdW5jdGlvbihhLGIpe2lmKGEpcmV0dXJuIHRoaXMuY3VycmVudCgpLmJvZHkucHVzaChhLFwiPVwiLGIsXCI7XCIpLGF9LGZpbHRlcjpmdW5jdGlvbihhKXt0aGlzLnN0YXRlLmZpbHRlcnMuaGFzT3duUHJvcGVydHkoYSl8fCh0aGlzLnN0YXRlLmZpbHRlcnNbYV09dGhpcy5uZXh0SWQoITApKTtyZXR1cm4gdGhpcy5zdGF0ZS5maWx0ZXJzW2FdfSxpZkRlZmluZWQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm5cImlmRGVmaW5lZChcIithK1wiLFwiK3RoaXMuZXNjYXBlKGIpK1wiKVwifSxwbHVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuXCJwbHVzKFwiK2ErXCIsXCIrYitcIilcIn0scmV0dXJuXzpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2goXCJyZXR1cm4gXCIsYSxcIjtcIil9LGlmXzpmdW5jdGlvbihhLGIsZCl7aWYoITA9PT1hKWIoKTtlbHNle3ZhciBjPXRoaXMuY3VycmVudCgpLmJvZHk7Yy5wdXNoKFwiaWYoXCIsYSxcIil7XCIpO2IoKTtjLnB1c2goXCJ9XCIpO1xuZCYmKGMucHVzaChcImVsc2V7XCIpLGQoKSxjLnB1c2goXCJ9XCIpKX19LG5vdDpmdW5jdGlvbihhKXtyZXR1cm5cIiEoXCIrYStcIilcIn0sbm90TnVsbDpmdW5jdGlvbihhKXtyZXR1cm4gYStcIiE9bnVsbFwifSxub25Db21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIpe3JldHVybiBhK1wiLlwiK2J9LGNvbXB1dGVkTWVtYmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErXCJbXCIrYitcIl1cIn0sbWVtYmVyOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZD90aGlzLmNvbXB1dGVkTWVtYmVyKGEsYik6dGhpcy5ub25Db21wdXRlZE1lbWJlcihhLGIpfSxhZGRFbnN1cmVTYWZlT2JqZWN0OmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudCgpLmJvZHkucHVzaCh0aGlzLmVuc3VyZVNhZmVPYmplY3QoYSksXCI7XCIpfSxhZGRFbnN1cmVTYWZlTWVtYmVyTmFtZTpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2godGhpcy5lbnN1cmVTYWZlTWVtYmVyTmFtZShhKSxcIjtcIil9LGFkZEVuc3VyZVNhZmVGdW5jdGlvbjpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2godGhpcy5lbnN1cmVTYWZlRnVuY3Rpb24oYSksXG5cIjtcIil9LGFkZEVuc3VyZVNhZmVBc3NpZ25Db250ZXh0OmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudCgpLmJvZHkucHVzaCh0aGlzLmVuc3VyZVNhZmVBc3NpZ25Db250ZXh0KGEpLFwiO1wiKX0sZW5zdXJlU2FmZU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm5cImVuc3VyZVNhZmVPYmplY3QoXCIrYStcIix0ZXh0KVwifSxlbnN1cmVTYWZlTWVtYmVyTmFtZTpmdW5jdGlvbihhKXtyZXR1cm5cImVuc3VyZVNhZmVNZW1iZXJOYW1lKFwiK2ErXCIsdGV4dClcIn0sZW5zdXJlU2FmZUZ1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVyblwiZW5zdXJlU2FmZUZ1bmN0aW9uKFwiK2ErXCIsdGV4dClcIn0sZ2V0U3RyaW5nVmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5hc3NpZ24oYSxcImdldFN0cmluZ1ZhbHVlKFwiK2ErXCIpXCIpfSxlbnN1cmVTYWZlQXNzaWduQ29udGV4dDpmdW5jdGlvbihhKXtyZXR1cm5cImVuc3VyZVNhZmVBc3NpZ25Db250ZXh0KFwiK2ErXCIsdGV4dClcIn0sbGF6eVJlY3Vyc2U6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe3ZhciBnPVxudGhpcztyZXR1cm4gZnVuY3Rpb24oKXtnLnJlY3Vyc2UoYSxiLGQsYyxlLGYpfX0sbGF6eUFzc2lnbjpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7ZC5hc3NpZ24oYSxiKX19LHN0cmluZ0VzY2FwZVJlZ2V4Oi9bXiBhLXpBLVowLTldL2csc3RyaW5nRXNjYXBlRm46ZnVuY3Rpb24oYSl7cmV0dXJuXCJcXFxcdVwiKyhcIjAwMDBcIithLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCl9LGVzY2FwZTpmdW5jdGlvbihhKXtpZihGKGEpKXJldHVyblwiJ1wiK2EucmVwbGFjZSh0aGlzLnN0cmluZ0VzY2FwZVJlZ2V4LHRoaXMuc3RyaW5nRXNjYXBlRm4pK1wiJ1wiO2lmKE4oYSkpcmV0dXJuIGEudG9TdHJpbmcoKTtpZighMD09PWEpcmV0dXJuXCJ0cnVlXCI7aWYoITE9PT1hKXJldHVyblwiZmFsc2VcIjtpZihudWxsPT09YSlyZXR1cm5cIm51bGxcIjtpZihcInVuZGVmaW5lZFwiPT09dHlwZW9mIGEpcmV0dXJuXCJ1bmRlZmluZWRcIjt0aHJvdyBrYShcImVzY1wiKTt9LG5leHRJZDpmdW5jdGlvbihhLFxuYil7dmFyIGQ9XCJ2XCIrdGhpcy5zdGF0ZS5uZXh0SWQrKzthfHx0aGlzLmN1cnJlbnQoKS52YXJzLnB1c2goZCsoYj9cIj1cIitiOlwiXCIpKTtyZXR1cm4gZH0sY3VycmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlW3RoaXMuc3RhdGUuY29tcHV0aW5nXX19O3ZkLnByb3RvdHlwZT17Y29tcGlsZTpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMsYz10aGlzLmFzdEJ1aWxkZXIuYXN0KGEpO3RoaXMuZXhwcmVzc2lvbj1hO3RoaXMuZXhwZW5zaXZlQ2hlY2tzPWI7UihjLGQuJGZpbHRlcik7dmFyIGUsZjtpZihlPXNkKGMpKWY9dGhpcy5yZWN1cnNlKGUpO2U9cWQoYy5ib2R5KTt2YXIgZztlJiYoZz1bXSxuKGUsZnVuY3Rpb24oYSxiKXt2YXIgYz1kLnJlY3Vyc2UoYSk7YS5pbnB1dD1jO2cucHVzaChjKTthLndhdGNoSWQ9Yn0pKTt2YXIgaD1bXTtuKGMuYm9keSxmdW5jdGlvbihhKXtoLnB1c2goZC5yZWN1cnNlKGEuZXhwcmVzc2lvbikpfSk7ZT0wPT09Yy5ib2R5Lmxlbmd0aD9mdW5jdGlvbigpe306XG4xPT09Yy5ib2R5Lmxlbmd0aD9oWzBdOmZ1bmN0aW9uKGEsYil7dmFyIGM7bihoLGZ1bmN0aW9uKGQpe2M9ZChhLGIpfSk7cmV0dXJuIGN9O2YmJihlLmFzc2lnbj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGYoYSxjLGIpfSk7ZyYmKGUuaW5wdXRzPWcpO2UubGl0ZXJhbD10ZChjKTtlLmNvbnN0YW50PWMuY29uc3RhbnQ7cmV0dXJuIGV9LHJlY3Vyc2U6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjLGUsZj10aGlzLGc7aWYoYS5pbnB1dClyZXR1cm4gdGhpcy5pbnB1dHMoYS5pbnB1dCxhLndhdGNoSWQpO3N3aXRjaChhLnR5cGUpe2Nhc2UgcS5MaXRlcmFsOnJldHVybiB0aGlzLnZhbHVlKGEudmFsdWUsYik7Y2FzZSBxLlVuYXJ5RXhwcmVzc2lvbjpyZXR1cm4gZT10aGlzLnJlY3Vyc2UoYS5hcmd1bWVudCksdGhpc1tcInVuYXJ5XCIrYS5vcGVyYXRvcl0oZSxiKTtjYXNlIHEuQmluYXJ5RXhwcmVzc2lvbjpyZXR1cm4gYz10aGlzLnJlY3Vyc2UoYS5sZWZ0KSxlPXRoaXMucmVjdXJzZShhLnJpZ2h0KSxcbnRoaXNbXCJiaW5hcnlcIithLm9wZXJhdG9yXShjLGUsYik7Y2FzZSBxLkxvZ2ljYWxFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLmxlZnQpLGU9dGhpcy5yZWN1cnNlKGEucmlnaHQpLHRoaXNbXCJiaW5hcnlcIithLm9wZXJhdG9yXShjLGUsYik7Y2FzZSBxLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpyZXR1cm4gdGhpc1tcInRlcm5hcnk/OlwiXSh0aGlzLnJlY3Vyc2UoYS50ZXN0KSx0aGlzLnJlY3Vyc2UoYS5hbHRlcm5hdGUpLHRoaXMucmVjdXJzZShhLmNvbnNlcXVlbnQpLGIpO2Nhc2UgcS5JZGVudGlmaWVyOnJldHVybiBYYShhLm5hbWUsZi5leHByZXNzaW9uKSxmLmlkZW50aWZpZXIoYS5uYW1lLGYuZXhwZW5zaXZlQ2hlY2tzfHxKYihhLm5hbWUpLGIsZCxmLmV4cHJlc3Npb24pO2Nhc2UgcS5NZW1iZXJFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLm9iamVjdCwhMSwhIWQpLGEuY29tcHV0ZWR8fChYYShhLnByb3BlcnR5Lm5hbWUsZi5leHByZXNzaW9uKSxcbmU9YS5wcm9wZXJ0eS5uYW1lKSxhLmNvbXB1dGVkJiYoZT10aGlzLnJlY3Vyc2UoYS5wcm9wZXJ0eSkpLGEuY29tcHV0ZWQ/dGhpcy5jb21wdXRlZE1lbWJlcihjLGUsYixkLGYuZXhwcmVzc2lvbik6dGhpcy5ub25Db21wdXRlZE1lbWJlcihjLGUsZi5leHBlbnNpdmVDaGVja3MsYixkLGYuZXhwcmVzc2lvbik7Y2FzZSBxLkNhbGxFeHByZXNzaW9uOnJldHVybiBnPVtdLG4oYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7Zy5wdXNoKGYucmVjdXJzZShhKSl9KSxhLmZpbHRlciYmKGU9dGhpcy4kZmlsdGVyKGEuY2FsbGVlLm5hbWUpKSxhLmZpbHRlcnx8KGU9dGhpcy5yZWN1cnNlKGEuY2FsbGVlLCEwKSksYS5maWx0ZXI/ZnVuY3Rpb24oYSxjLGQsZil7Zm9yKHZhciByPVtdLG49MDtuPGcubGVuZ3RoOysrbilyLnB1c2goZ1tuXShhLGMsZCxmKSk7YT1lLmFwcGx5KHYscixmKTtyZXR1cm4gYj97Y29udGV4dDp2LG5hbWU6dix2YWx1ZTphfTphfTpmdW5jdGlvbihhLGMsZCxtKXt2YXIgcj1cbmUoYSxjLGQsbSksbjtpZihudWxsIT1yLnZhbHVlKXtBYShyLmNvbnRleHQsZi5leHByZXNzaW9uKTtvZChyLnZhbHVlLGYuZXhwcmVzc2lvbik7bj1bXTtmb3IodmFyIHE9MDtxPGcubGVuZ3RoOysrcSluLnB1c2goQWEoZ1txXShhLGMsZCxtKSxmLmV4cHJlc3Npb24pKTtuPUFhKHIudmFsdWUuYXBwbHkoci5jb250ZXh0LG4pLGYuZXhwcmVzc2lvbil9cmV0dXJuIGI/e3ZhbHVlOm59Om59O2Nhc2UgcS5Bc3NpZ25tZW50RXhwcmVzc2lvbjpyZXR1cm4gYz10aGlzLnJlY3Vyc2UoYS5sZWZ0LCEwLDEpLGU9dGhpcy5yZWN1cnNlKGEucmlnaHQpLGZ1bmN0aW9uKGEsZCxnLG0pe3ZhciByPWMoYSxkLGcsbSk7YT1lKGEsZCxnLG0pO0FhKHIudmFsdWUsZi5leHByZXNzaW9uKTtJYihyLmNvbnRleHQpO3IuY29udGV4dFtyLm5hbWVdPWE7cmV0dXJuIGI/e3ZhbHVlOmF9OmF9O2Nhc2UgcS5BcnJheUV4cHJlc3Npb246cmV0dXJuIGc9W10sbihhLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe2cucHVzaChmLnJlY3Vyc2UoYSkpfSksXG5mdW5jdGlvbihhLGMsZCxlKXtmb3IodmFyIGY9W10sbj0wO248Zy5sZW5ndGg7KytuKWYucHVzaChnW25dKGEsYyxkLGUpKTtyZXR1cm4gYj97dmFsdWU6Zn06Zn07Y2FzZSBxLk9iamVjdEV4cHJlc3Npb246cmV0dXJuIGc9W10sbihhLnByb3BlcnRpZXMsZnVuY3Rpb24oYSl7Zy5wdXNoKHtrZXk6YS5rZXkudHlwZT09PXEuSWRlbnRpZmllcj9hLmtleS5uYW1lOlwiXCIrYS5rZXkudmFsdWUsdmFsdWU6Zi5yZWN1cnNlKGEudmFsdWUpfSl9KSxmdW5jdGlvbihhLGMsZCxlKXtmb3IodmFyIGY9e30sbj0wO248Zy5sZW5ndGg7KytuKWZbZ1tuXS5rZXldPWdbbl0udmFsdWUoYSxjLGQsZSk7cmV0dXJuIGI/e3ZhbHVlOmZ9OmZ9O2Nhc2UgcS5UaGlzRXhwcmVzc2lvbjpyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGI/e3ZhbHVlOmF9OmF9O2Nhc2UgcS5Mb2NhbHNFeHByZXNzaW9uOnJldHVybiBmdW5jdGlvbihhLGMpe3JldHVybiBiP3t2YWx1ZTpjfTpjfTtjYXNlIHEuTkdWYWx1ZVBhcmFtZXRlcjpyZXR1cm4gZnVuY3Rpb24oYSxcbmMsZCxlKXtyZXR1cm4gYj97dmFsdWU6ZH06ZH19fSxcInVuYXJ5K1wiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyxlLGYpe2Q9YShkLGMsZSxmKTtkPXkoZCk/K2Q6MDtyZXR1cm4gYj97dmFsdWU6ZH06ZH19LFwidW5hcnktXCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjLGUsZil7ZD1hKGQsYyxlLGYpO2Q9eShkKT8tZDowO3JldHVybiBiP3t2YWx1ZTpkfTpkfX0sXCJ1bmFyeSFcIjpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihkLGMsZSxmKXtkPSFhKGQsYyxlLGYpO3JldHVybiBiP3t2YWx1ZTpkfTpkfX0sXCJiaW5hcnkrXCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXt2YXIgaD1hKGMsZSxmLGcpO2M9YihjLGUsZixnKTtoPXBkKGgsYyk7cmV0dXJuIGQ/e3ZhbHVlOmh9Omh9fSxcImJpbmFyeS1cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe3ZhciBoPWEoYyxlLGYsZyk7Yz1iKGMsZSxmLGcpO1xuaD0oeShoKT9oOjApLSh5KGMpP2M6MCk7cmV0dXJuIGQ/e3ZhbHVlOmh9Omh9fSxcImJpbmFyeSpcIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKSpiKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnkvXCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZykvYihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5JVwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpJWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeT09PVwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpPT09YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5IT09XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxcbmUsZixnKSE9PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeT09XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk9PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeSE9XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZykhPWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeTxcIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKTxiKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnk+XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk+YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5PD1cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixcbmcpPD1iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnk+PVwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpPj1iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnkmJlwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpJiZiKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnl8fFwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpfHxiKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJ0ZXJuYXJ5PzpcIjpmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCl7ZT1hKGUsZixnLGgpP2IoZSxmLGcsaCk6ZChlLGYsZyxoKTtyZXR1cm4gYz97dmFsdWU6ZX06ZX19LHZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGI/e2NvbnRleHQ6dixcbm5hbWU6dix2YWx1ZTphfTphfX0saWRlbnRpZmllcjpmdW5jdGlvbihhLGIsZCxjLGUpe3JldHVybiBmdW5jdGlvbihmLGcsaCxrKXtmPWcmJmEgaW4gZz9nOmY7YyYmMSE9PWMmJmYmJiFmW2FdJiYoZlthXT17fSk7Zz1mP2ZbYV06djtiJiZBYShnLGUpO3JldHVybiBkP3tjb250ZXh0OmYsbmFtZTphLHZhbHVlOmd9Omd9fSxjb21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIsZCxjLGUpe3JldHVybiBmdW5jdGlvbihmLGcsaCxrKXt2YXIgbD1hKGYsZyxoLGspLG0sbjtudWxsIT1sJiYobT1iKGYsZyxoLGspLG0rPVwiXCIsWGEobSxlKSxjJiYxIT09YyYmKEliKGwpLGwmJiFsW21dJiYobFttXT17fSkpLG49bFttXSxBYShuLGUpKTtyZXR1cm4gZD97Y29udGV4dDpsLG5hbWU6bSx2YWx1ZTpufTpufX0sbm9uQ29tcHV0ZWRNZW1iZXI6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe3JldHVybiBmdW5jdGlvbihnLGgsayxsKXtnPWEoZyxoLGssbCk7ZSYmMSE9PWUmJihJYihnKSxnJiYhZ1tiXSYmXG4oZ1tiXT17fSkpO2g9bnVsbCE9Zz9nW2JdOnY7KGR8fEpiKGIpKSYmQWEoaCxmKTtyZXR1cm4gYz97Y29udGV4dDpnLG5hbWU6Yix2YWx1ZTpofTpofX0saW5wdXRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyxlLGYpe3JldHVybiBmP2ZbYl06YShkLGMsZSl9fX07dmFyIGpjPWZ1bmN0aW9uKGEsYixkKXt0aGlzLmxleGVyPWE7dGhpcy4kZmlsdGVyPWI7dGhpcy5vcHRpb25zPWQ7dGhpcy5hc3Q9bmV3IHEodGhpcy5sZXhlcik7dGhpcy5hc3RDb21waWxlcj1kLmNzcD9uZXcgdmQodGhpcy5hc3QsYik6bmV3IHVkKHRoaXMuYXN0LGIpfTtqYy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmpjLHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFzdENvbXBpbGVyLmNvbXBpbGUoYSx0aGlzLm9wdGlvbnMuZXhwZW5zaXZlQ2hlY2tzKX19O3ZhciBtZz1PYmplY3QucHJvdG90eXBlLnZhbHVlT2YsQmE9SChcIiRzY2VcIikscWE9e0hUTUw6XCJodG1sXCIsQ1NTOlwiY3NzXCIsVVJMOlwidXJsXCIsXG5SRVNPVVJDRV9VUkw6XCJyZXNvdXJjZVVybFwiLEpTOlwianNcIn0samE9SChcIiRjb21waWxlXCIpLFk9Vy5jcmVhdGVFbGVtZW50KFwiYVwiKSx6ZD16YShPLmxvY2F0aW9uLmhyZWYpO0FkLiRpbmplY3Q9W1wiJGRvY3VtZW50XCJdO0xjLiRpbmplY3Q9W1wiJHByb3ZpZGVcIl07dmFyIEhkPTIyLEdkPVwiLlwiLGxjPVwiMFwiO0JkLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTtEZC4kaW5qZWN0PVtcIiRsb2NhbGVcIl07dmFyIHlnPXt5eXl5OmFhKFwiRnVsbFllYXJcIiw0KSx5eTphYShcIkZ1bGxZZWFyXCIsMiwwLCEwKSx5OmFhKFwiRnVsbFllYXJcIiwxKSxNTU1NOkxiKFwiTW9udGhcIiksTU1NOkxiKFwiTW9udGhcIiwhMCksTU06YWEoXCJNb250aFwiLDIsMSksTTphYShcIk1vbnRoXCIsMSwxKSxkZDphYShcIkRhdGVcIiwyKSxkOmFhKFwiRGF0ZVwiLDEpLEhIOmFhKFwiSG91cnNcIiwyKSxIOmFhKFwiSG91cnNcIiwxKSxoaDphYShcIkhvdXJzXCIsMiwtMTIpLGg6YWEoXCJIb3Vyc1wiLDEsLTEyKSxtbTphYShcIk1pbnV0ZXNcIiwyKSxtOmFhKFwiTWludXRlc1wiLFxuMSksc3M6YWEoXCJTZWNvbmRzXCIsMiksczphYShcIlNlY29uZHNcIiwxKSxzc3M6YWEoXCJNaWxsaXNlY29uZHNcIiwzKSxFRUVFOkxiKFwiRGF5XCIpLEVFRTpMYihcIkRheVwiLCEwKSxhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDEyPmEuZ2V0SG91cnMoKT9iLkFNUE1TWzBdOmIuQU1QTVNbMV19LFo6ZnVuY3Rpb24oYSxiLGQpe2E9LTEqZDtyZXR1cm4gYT0oMDw9YT9cIitcIjpcIlwiKSsoS2IoTWF0aFswPGE/XCJmbG9vclwiOlwiY2VpbFwiXShhLzYwKSwyKStLYihNYXRoLmFicyhhJTYwKSwyKSl9LHd3OkpkKDIpLHc6SmQoMSksRzptYyxHRzptYyxHR0c6bWMsR0dHRzpmdW5jdGlvbihhLGIpe3JldHVybiAwPj1hLmdldEZ1bGxZZWFyKCk/Yi5FUkFOQU1FU1swXTpiLkVSQU5BTUVTWzFdfX0seGc9LygoPzpbXnlNZEhobXNhWkV3RyddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfGQrfEgrfGgrfG0rfHMrfGF8WnxHK3x3KykpKC4qKS8sd2c9L15cXC0/XFxkKyQvO0NkLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTtcbnZhciByZz1iYShHKSxzZz1iYSh1Yik7RWQuJGluamVjdD1bXCIkcGFyc2VcIl07dmFyIG9lPWJhKHtyZXN0cmljdDpcIkVcIixjb21waWxlOmZ1bmN0aW9uKGEsYil7aWYoIWIuaHJlZiYmIWIueGxpbmtIcmVmKXJldHVybiBmdW5jdGlvbihhLGIpe2lmKFwiYVwiPT09YlswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgZT1cIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddXCI9PT1nYS5jYWxsKGIucHJvcChcImhyZWZcIikpP1wieGxpbms6aHJlZlwiOlwiaHJlZlwiO2Iub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2IuYXR0cihlKXx8YS5wcmV2ZW50RGVmYXVsdCgpfSl9fX19KSx2Yj17fTtuKERiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGQsZSl7YS4kd2F0Y2goZVtjXSxmdW5jdGlvbihhKXtlLiRzZXQoYiwhIWEpfSl9aWYoXCJtdWx0aXBsZVwiIT1hKXt2YXIgYz12YShcIm5nLVwiK2IpLGU9ZDtcImNoZWNrZWRcIj09PWEmJihlPWZ1bmN0aW9uKGEsYixlKXtlLm5nTW9kZWwhPT1lW2NdJiZkKGEsYixcbmUpfSk7dmJbY109ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MTAwLGxpbms6ZX19fX0pO24oY2QsZnVuY3Rpb24oYSxiKXt2YltiXT1mdW5jdGlvbigpe3JldHVybntwcmlvcml0eToxMDAsbGluazpmdW5jdGlvbihhLGMsZSl7aWYoXCJuZ1BhdHRlcm5cIj09PWImJlwiL1wiPT1lLm5nUGF0dGVybi5jaGFyQXQoMCkmJihjPWUubmdQYXR0ZXJuLm1hdGNoKEFnKSkpe2UuJHNldChcIm5nUGF0dGVyblwiLG5ldyBSZWdFeHAoY1sxXSxjWzJdKSk7cmV0dXJufWEuJHdhdGNoKGVbYl0sZnVuY3Rpb24oYSl7ZS4kc2V0KGIsYSl9KX19fX0pO24oW1wic3JjXCIsXCJzcmNzZXRcIixcImhyZWZcIl0sZnVuY3Rpb24oYSl7dmFyIGI9dmEoXCJuZy1cIithKTt2YltiXT1mdW5jdGlvbigpe3JldHVybntwcmlvcml0eTo5OSxsaW5rOmZ1bmN0aW9uKGQsYyxlKXt2YXIgZj1hLGc9YTtcImhyZWZcIj09PWEmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWdhLmNhbGwoYy5wcm9wKFwiaHJlZlwiKSkmJlxuKGc9XCJ4bGlua0hyZWZcIixlLiRhdHRyW2ddPVwieGxpbms6aHJlZlwiLGY9bnVsbCk7ZS4kb2JzZXJ2ZShiLGZ1bmN0aW9uKGIpe2I/KGUuJHNldChnLGIpLHhhJiZmJiZjLnByb3AoZixlW2ddKSk6XCJocmVmXCI9PT1hJiZlLiRzZXQoZyxudWxsKX0pfX19fSk7dmFyIE1iPXskYWRkQ29udHJvbDpCLCQkcmVuYW1lQ29udHJvbDpmdW5jdGlvbihhLGIpe2EuJG5hbWU9Yn0sJHJlbW92ZUNvbnRyb2w6Qiwkc2V0VmFsaWRpdHk6Qiwkc2V0RGlydHk6Qiwkc2V0UHJpc3RpbmU6Qiwkc2V0U3VibWl0dGVkOkJ9O0tkLiRpbmplY3Q9W1wiJGVsZW1lbnRcIixcIiRhdHRyc1wiLFwiJHNjb3BlXCIsXCIkYW5pbWF0ZVwiLFwiJGludGVycG9sYXRlXCJdO3ZhciBTZD1mdW5jdGlvbihhKXtyZXR1cm5bXCIkdGltZW91dFwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYixkKXtmdW5jdGlvbiBjKGEpe3JldHVyblwiXCI9PT1hP2QoJ3RoaXNbXCJcIl0nKS5hc3NpZ246ZChhKS5hc3NpZ258fEJ9cmV0dXJue25hbWU6XCJmb3JtXCIscmVzdHJpY3Q6YT9cblwiRUFDXCI6XCJFXCIscmVxdWlyZTpbXCJmb3JtXCIsXCJeXj9mb3JtXCJdLGNvbnRyb2xsZXI6S2QsY29tcGlsZTpmdW5jdGlvbihkLGYpe2QuYWRkQ2xhc3MoWWEpLmFkZENsYXNzKG9iKTt2YXIgZz1mLm5hbWU/XCJuYW1lXCI6YSYmZi5uZ0Zvcm0/XCJuZ0Zvcm1cIjohMTtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsZCxlLGYpe3ZhciBuPWZbMF07aWYoIShcImFjdGlvblwiaW4gZSkpe3ZhciBzPWZ1bmN0aW9uKGIpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7bi4kY29tbWl0Vmlld1ZhbHVlKCk7bi4kc2V0U3VibWl0dGVkKCl9KTtiLnByZXZlbnREZWZhdWx0KCl9O2RbMF0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLHMsITEpO2Qub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7YihmdW5jdGlvbigpe2RbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLHMsITEpfSwwLCExKX0pfShmWzFdfHxuLiQkcGFyZW50Rm9ybSkuJGFkZENvbnRyb2wobik7dmFyIHE9Zz9jKG4uJG5hbWUpOkI7ZyYmKHEoYSxuKSxlLiRvYnNlcnZlKGcsXG5mdW5jdGlvbihiKXtuLiRuYW1lIT09YiYmKHEoYSx2KSxuLiQkcGFyZW50Rm9ybS4kJHJlbmFtZUNvbnRyb2wobixiKSxxPWMobi4kbmFtZSkscShhLG4pKX0pKTtkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe24uJCRwYXJlbnRGb3JtLiRyZW1vdmVDb250cm9sKG4pO3EoYSx2KTtUKG4sTWIpfSl9fX19fV19LHBlPVNkKCksQ2U9U2QoITApLHpnPS9cXGR7NH0tWzAxXVxcZC1bMC0zXVxcZFRbMC0yXVxcZDpbMC01XVxcZDpbMC01XVxcZFxcLlxcZCsoWystXVswLTJdXFxkOlswLTVdXFxkfFopLyxJZz0vXlthLXpdW2EtelxcZC4rLV0qOlxcLyooPzpbXjpAXSsoPzo6W15AXSspP0ApPyg/OlteXFxzOi8/I10rfFxcW1thLWZcXGQ6XStcXF0pKD86OlxcZCspPyg/OlxcL1tePyNdKik/KD86XFw/W14jXSopPyg/OiMuKik/JC9pLEpnPS9eW2EtejAtOSEjJCUmJyorXFwvPT9eX2B7fH1+Li1dK0BbYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPyhcXC5bYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPykqJC9pLEtnPVxuL15cXHMqKFxcLXxcXCspPyhcXGQrfChcXGQqKFxcLlxcZCopKSkoW2VFXVsrLV0/XFxkKyk/XFxzKiQvLFRkPS9eKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSkkLyxVZD0vXihcXGR7NH0pLShcXGRcXGQpLShcXGRcXGQpVChcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvLHBjPS9eKFxcZHs0fSktVyhcXGRcXGQpJC8sVmQ9L14oXFxkezR9KS0oXFxkXFxkKSQvLFdkPS9eKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC8sWGQ9e3RleHQ6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe2xiKGEsYixkLGMsZSxmKTtuYyhjKX0sZGF0ZTptYihcImRhdGVcIixUZCxPYihUZCxbXCJ5eXl5XCIsXCJNTVwiLFwiZGRcIl0pLFwieXl5eS1NTS1kZFwiKSxcImRhdGV0aW1lLWxvY2FsXCI6bWIoXCJkYXRldGltZWxvY2FsXCIsVWQsT2IoVWQsXCJ5eXl5IE1NIGRkIEhIIG1tIHNzIHNzc1wiLnNwbGl0KFwiIFwiKSksXCJ5eXl5LU1NLWRkVEhIOm1tOnNzLnNzc1wiKSx0aW1lOm1iKFwidGltZVwiLFdkLE9iKFdkLFtcIkhIXCIsXCJtbVwiLFwic3NcIixcblwic3NzXCJdKSxcIkhIOm1tOnNzLnNzc1wiKSx3ZWVrOm1iKFwid2Vla1wiLHBjLGZ1bmN0aW9uKGEsYil7aWYoVihhKSlyZXR1cm4gYTtpZihGKGEpKXtwYy5sYXN0SW5kZXg9MDt2YXIgZD1wYy5leGVjKGEpO2lmKGQpe3ZhciBjPStkWzFdLGU9K2RbMl0sZj1kPTAsZz0wLGg9MCxrPUlkKGMpLGU9NyooZS0xKTtiJiYoZD1iLmdldEhvdXJzKCksZj1iLmdldE1pbnV0ZXMoKSxnPWIuZ2V0U2Vjb25kcygpLGg9Yi5nZXRNaWxsaXNlY29uZHMoKSk7cmV0dXJuIG5ldyBEYXRlKGMsMCxrLmdldERhdGUoKStlLGQsZixnLGgpfX1yZXR1cm4gTmFOfSxcInl5eXktV3d3XCIpLG1vbnRoOm1iKFwibW9udGhcIixWZCxPYihWZCxbXCJ5eXl5XCIsXCJNTVwiXSksXCJ5eXl5LU1NXCIpLG51bWJlcjpmdW5jdGlvbihhLGIsZCxjLGUsZil7TWQoYSxiLGQsYyk7bGIoYSxiLGQsYyxlLGYpO2MuJCRwYXJzZXJOYW1lPVwibnVtYmVyXCI7Yy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBjLiRpc0VtcHR5KGEpP251bGw6XG5LZy50ZXN0KGEpP3BhcnNlRmxvYXQoYSk6dn0pO2MuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtpZighYy4kaXNFbXB0eShhKSl7aWYoIU4oYSkpdGhyb3cgbmIoXCJudW1mbXRcIixhKTthPWEudG9TdHJpbmcoKX1yZXR1cm4gYX0pO2lmKHkoZC5taW4pfHxkLm5nTWluKXt2YXIgZztjLiR2YWxpZGF0b3JzLm1pbj1mdW5jdGlvbihhKXtyZXR1cm4gYy4kaXNFbXB0eShhKXx8eChnKXx8YT49Z307ZC4kb2JzZXJ2ZShcIm1pblwiLGZ1bmN0aW9uKGEpe3koYSkmJiFOKGEpJiYoYT1wYXJzZUZsb2F0KGEsMTApKTtnPU4oYSkmJiFpc05hTihhKT9hOnY7Yy4kdmFsaWRhdGUoKX0pfWlmKHkoZC5tYXgpfHxkLm5nTWF4KXt2YXIgaDtjLiR2YWxpZGF0b3JzLm1heD1mdW5jdGlvbihhKXtyZXR1cm4gYy4kaXNFbXB0eShhKXx8eChoKXx8YTw9aH07ZC4kb2JzZXJ2ZShcIm1heFwiLGZ1bmN0aW9uKGEpe3koYSkmJiFOKGEpJiYoYT1wYXJzZUZsb2F0KGEsMTApKTtoPU4oYSkmJiFpc05hTihhKT9cbmE6djtjLiR2YWxpZGF0ZSgpfSl9fSx1cmw6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe2xiKGEsYixkLGMsZSxmKTtuYyhjKTtjLiQkcGFyc2VyTmFtZT1cInVybFwiO2MuJHZhbGlkYXRvcnMudXJsPWZ1bmN0aW9uKGEsYil7dmFyIGQ9YXx8YjtyZXR1cm4gYy4kaXNFbXB0eShkKXx8SWcudGVzdChkKX19LGVtYWlsOmZ1bmN0aW9uKGEsYixkLGMsZSxmKXtsYihhLGIsZCxjLGUsZik7bmMoYyk7Yy4kJHBhcnNlck5hbWU9XCJlbWFpbFwiO2MuJHZhbGlkYXRvcnMuZW1haWw9ZnVuY3Rpb24oYSxiKXt2YXIgZD1hfHxiO3JldHVybiBjLiRpc0VtcHR5KGQpfHxKZy50ZXN0KGQpfX0scmFkaW86ZnVuY3Rpb24oYSxiLGQsYyl7eChkLm5hbWUpJiZiLmF0dHIoXCJuYW1lXCIsKytwYik7Yi5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YlswXS5jaGVja2VkJiZjLiRzZXRWaWV3VmFsdWUoZC52YWx1ZSxhJiZhLnR5cGUpfSk7Yy4kcmVuZGVyPWZ1bmN0aW9uKCl7YlswXS5jaGVja2VkPWQudmFsdWU9PWMuJHZpZXdWYWx1ZX07XG5kLiRvYnNlcnZlKFwidmFsdWVcIixjLiRyZW5kZXIpfSxjaGVja2JveDpmdW5jdGlvbihhLGIsZCxjLGUsZixnLGgpe3ZhciBrPU5kKGgsYSxcIm5nVHJ1ZVZhbHVlXCIsZC5uZ1RydWVWYWx1ZSwhMCksbD1OZChoLGEsXCJuZ0ZhbHNlVmFsdWVcIixkLm5nRmFsc2VWYWx1ZSwhMSk7Yi5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Yy4kc2V0Vmlld1ZhbHVlKGJbMF0uY2hlY2tlZCxhJiZhLnR5cGUpfSk7Yy4kcmVuZGVyPWZ1bmN0aW9uKCl7YlswXS5jaGVja2VkPWMuJHZpZXdWYWx1ZX07Yy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hMT09PWF9O2MuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gb2EoYSxrKX0pO2MuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYT9rOmx9KX0saGlkZGVuOkIsYnV0dG9uOkIsc3VibWl0OkIscmVzZXQ6QixmaWxlOkJ9LEZjPVtcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFwiJGZpbHRlclwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxiLGQsXG5jKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCI/bmdNb2RlbFwiXSxsaW5rOntwcmU6ZnVuY3Rpb24oZSxmLGcsaCl7aFswXSYmKFhkW0coZy50eXBlKV18fFhkLnRleHQpKGUsZixnLGhbMF0sYixhLGQsYyl9fX19XSxMZz0vXih0cnVlfGZhbHNlfFxcZCspJC8sVWU9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTGcudGVzdChiLm5nVmFsdWUpP2Z1bmN0aW9uKGEsYixlKXtlLiRzZXQoXCJ2YWx1ZVwiLGEuJGV2YWwoZS5uZ1ZhbHVlKSl9OmZ1bmN0aW9uKGEsYixlKXthLiR3YXRjaChlLm5nVmFsdWUsZnVuY3Rpb24oYSl7ZS4kc2V0KFwidmFsdWVcIixhKX0pfX19fSx1ZT1bXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFDXCIsY29tcGlsZTpmdW5jdGlvbihiKXthLiQkYWRkQmluZGluZ0NsYXNzKGIpO3JldHVybiBmdW5jdGlvbihiLGMsZSl7YS4kJGFkZEJpbmRpbmdJbmZvKGMsXG5lLm5nQmluZCk7Yz1jWzBdO2IuJHdhdGNoKGUubmdCaW5kLGZ1bmN0aW9uKGEpe2MudGV4dENvbnRlbnQ9eChhKT9cIlwiOmF9KX19fX1dLHdlPVtcIiRpbnRlcnBvbGF0ZVwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGIpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGQpe2IuJCRhZGRCaW5kaW5nQ2xhc3MoZCk7cmV0dXJuIGZ1bmN0aW9uKGMsZCxmKXtjPWEoZC5hdHRyKGYuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtiLiQkYWRkQmluZGluZ0luZm8oZCxjLmV4cHJlc3Npb25zKTtkPWRbMF07Zi4kb2JzZXJ2ZShcIm5nQmluZFRlbXBsYXRlXCIsZnVuY3Rpb24oYSl7ZC50ZXh0Q29udGVudD14KGEpP1wiXCI6YX0pfX19fV0sdmU9W1wiJHNjZVwiLFwiJHBhcnNlXCIsXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29tcGlsZTpmdW5jdGlvbihjLGUpe3ZhciBmPWIoZS5uZ0JpbmRIdG1sKSxnPWIoZS5uZ0JpbmRIdG1sLGZ1bmN0aW9uKGEpe3JldHVybihhfHxcIlwiKS50b1N0cmluZygpfSk7XG5kLiQkYWRkQmluZGluZ0NsYXNzKGMpO3JldHVybiBmdW5jdGlvbihiLGMsZSl7ZC4kJGFkZEJpbmRpbmdJbmZvKGMsZS5uZ0JpbmRIdG1sKTtiLiR3YXRjaChnLGZ1bmN0aW9uKCl7Yy5odG1sKGEuZ2V0VHJ1c3RlZEh0bWwoZihiKSl8fFwiXCIpfSl9fX19XSxUZT1iYSh7cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2MuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpe2EuJGV2YWwoZC5uZ0NoYW5nZSl9KX19KSx4ZT1vYyhcIlwiLCEwKSx6ZT1vYyhcIk9kZFwiLDApLHllPW9jKFwiRXZlblwiLDEpLEFlPU1hKHtjb21waWxlOmZ1bmN0aW9uKGEsYil7Yi4kc2V0KFwibmdDbG9ha1wiLHYpO2EucmVtb3ZlQ2xhc3MoXCJuZy1jbG9ha1wiKX19KSxCZT1bZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITAsY29udHJvbGxlcjpcIkBcIixwcmlvcml0eTo1MDB9fV0sS2M9e30sTWc9e2JsdXI6ITAsZm9jdXM6ITB9O24oXCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlXCIuc3BsaXQoXCIgXCIpLFxuZnVuY3Rpb24oYSl7dmFyIGI9dmEoXCJuZy1cIithKTtLY1tiXT1bXCIkcGFyc2VcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihkLGMpe3JldHVybntyZXN0cmljdDpcIkFcIixjb21waWxlOmZ1bmN0aW9uKGUsZil7dmFyIGc9ZChmW2JdLG51bGwsITApO3JldHVybiBmdW5jdGlvbihiLGQpe2Qub24oYSxmdW5jdGlvbihkKXt2YXIgZT1mdW5jdGlvbigpe2coYix7JGV2ZW50OmR9KX07TWdbYV0mJmMuJCRwaGFzZT9iLiRldmFsQXN5bmMoZSk6Yi4kYXBwbHkoZSl9KX19fX1dfSk7dmFyIEVlPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue211bHRpRWxlbWVudDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjYwMCx0ZXJtaW5hbDohMCxyZXN0cmljdDpcIkFcIiwkJHRsYjohMCxsaW5rOmZ1bmN0aW9uKGIsZCxjLGUsZil7dmFyIGcsaCxrO2IuJHdhdGNoKGMubmdJZixmdW5jdGlvbihiKXtiP2h8fGYoZnVuY3Rpb24oYixlKXtoPWU7YltiLmxlbmd0aCsrXT1XLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nSWY6IFwiK1xuYy5uZ0lmK1wiIFwiKTtnPXtjbG9uZTpifTthLmVudGVyKGIsZC5wYXJlbnQoKSxkKX0pOihrJiYoay5yZW1vdmUoKSxrPW51bGwpLGgmJihoLiRkZXN0cm95KCksaD1udWxsKSxnJiYoaz10YihnLmNsb25lKSxhLmxlYXZlKGspLnRoZW4oZnVuY3Rpb24oKXtrPW51bGx9KSxnPW51bGwpKX0pfX19XSxGZT1bXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkYW5jaG9yU2Nyb2xsXCIsXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTo0MDAsdGVybWluYWw6ITAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixjb250cm9sbGVyOmlhLm5vb3AsY29tcGlsZTpmdW5jdGlvbihjLGUpe3ZhciBmPWUubmdJbmNsdWRlfHxlLnNyYyxnPWUub25sb2FkfHxcIlwiLGg9ZS5hdXRvc2Nyb2xsO3JldHVybiBmdW5jdGlvbihjLGUsbSxuLHMpe3ZhciBxPTAsdix0LHAsdz1mdW5jdGlvbigpe3QmJih0LnJlbW92ZSgpLHQ9bnVsbCk7diYmKHYuJGRlc3Ryb3koKSx2PW51bGwpO3AmJlxuKGQubGVhdmUocCkudGhlbihmdW5jdGlvbigpe3Q9bnVsbH0pLHQ9cCxwPW51bGwpfTtjLiR3YXRjaChmLGZ1bmN0aW9uKGYpe3ZhciBtPWZ1bmN0aW9uKCl7IXkoaCl8fGgmJiFjLiRldmFsKGgpfHxiKCl9LHo9KytxO2Y/KGEoZiwhMCkudGhlbihmdW5jdGlvbihhKXtpZighYy4kJGRlc3Ryb3llZCYmej09PXEpe3ZhciBiPWMuJG5ldygpO24udGVtcGxhdGU9YTthPXMoYixmdW5jdGlvbihhKXt3KCk7ZC5lbnRlcihhLG51bGwsZSkudGhlbihtKX0pO3Y9YjtwPWE7di4kZW1pdChcIiRpbmNsdWRlQ29udGVudExvYWRlZFwiLGYpO2MuJGV2YWwoZyl9fSxmdW5jdGlvbigpe2MuJCRkZXN0cm95ZWR8fHohPT1xfHwodygpLGMuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRFcnJvclwiLGYpKX0pLGMuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWRcIixmKSk6KHcoKSxuLnRlbXBsYXRlPW51bGwpfSl9fX19XSxXZT1bXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVDQVwiLFxucHJpb3JpdHk6LTQwMCxyZXF1aXJlOlwibmdJbmNsdWRlXCIsbGluazpmdW5jdGlvbihiLGQsYyxlKXtnYS5jYWxsKGRbMF0pLm1hdGNoKC9TVkcvKT8oZC5lbXB0eSgpLGEoTmMoZS50ZW1wbGF0ZSxXKS5jaGlsZE5vZGVzKShiLGZ1bmN0aW9uKGEpe2QuYXBwZW5kKGEpfSx7ZnV0dXJlUGFyZW50RWxlbWVudDpkfSkpOihkLmh0bWwoZS50ZW1wbGF0ZSksYShkLmNvbnRlbnRzKCkpKGIpKX19fV0sR2U9TWEoe3ByaW9yaXR5OjQ1MCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGIsZCl7YS4kZXZhbChkLm5nSW5pdCl9fX19KSxTZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixwcmlvcml0eToxMDAscmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe3ZhciBlPWIuYXR0cihkLiRhdHRyLm5nTGlzdCl8fFwiLCBcIixmPVwiZmFsc2VcIiE9PWQubmdUcmltLGc9Zj9YKGUpOmU7Yy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKCF4KGEpKXt2YXIgYj1cbltdO2EmJm4oYS5zcGxpdChnKSxmdW5jdGlvbihhKXthJiZiLnB1c2goZj9YKGEpOmEpfSk7cmV0dXJuIGJ9fSk7Yy4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBMKGEpP2Euam9pbihlKTp2fSk7Yy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8IWEubGVuZ3RofX19fSxvYj1cIm5nLXZhbGlkXCIsT2Q9XCJuZy1pbnZhbGlkXCIsWWE9XCJuZy1wcmlzdGluZVwiLE5iPVwibmctZGlydHlcIixRZD1cIm5nLXBlbmRpbmdcIixuYj1IKFwibmdNb2RlbFwiKSxOZz1bXCIkc2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkYXR0cnNcIixcIiRlbGVtZW50XCIsXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsXCIkdGltZW91dFwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEsYixkLGMsZSxmLGcsaCxrLGwpe3RoaXMuJG1vZGVsVmFsdWU9dGhpcy4kdmlld1ZhbHVlPU51bWJlci5OYU47dGhpcy4kJHJhd01vZGVsVmFsdWU9djt0aGlzLiR2YWxpZGF0b3JzPXt9O3RoaXMuJGFzeW5jVmFsaWRhdG9ycz1cbnt9O3RoaXMuJHBhcnNlcnM9W107dGhpcy4kZm9ybWF0dGVycz1bXTt0aGlzLiR2aWV3Q2hhbmdlTGlzdGVuZXJzPVtdO3RoaXMuJHVudG91Y2hlZD0hMDt0aGlzLiR0b3VjaGVkPSExO3RoaXMuJHByaXN0aW5lPSEwO3RoaXMuJGRpcnR5PSExO3RoaXMuJHZhbGlkPSEwO3RoaXMuJGludmFsaWQ9ITE7dGhpcy4kZXJyb3I9e307dGhpcy4kJHN1Y2Nlc3M9e307dGhpcy4kcGVuZGluZz12O3RoaXMuJG5hbWU9bChkLm5hbWV8fFwiXCIsITEpKGEpO3RoaXMuJCRwYXJlbnRGb3JtPU1iO3ZhciBtPWUoZC5uZ01vZGVsKSxyPW0uYXNzaWduLHE9bSxJPXIsSz1udWxsLHQscD10aGlzO3RoaXMuJCRzZXRPcHRpb25zPWZ1bmN0aW9uKGEpe2lmKChwLiRvcHRpb25zPWEpJiZhLmdldHRlclNldHRlcil7dmFyIGI9ZShkLm5nTW9kZWwrXCIoKVwiKSxmPWUoZC5uZ01vZGVsK1wiKCQkJHApXCIpO3E9ZnVuY3Rpb24oYSl7dmFyIGM9bShhKTtEKGMpJiYoYz1iKGEpKTtyZXR1cm4gY307ST1mdW5jdGlvbihhLFxuYil7RChtKGEpKT9mKGEseyQkJHA6cC4kbW9kZWxWYWx1ZX0pOnIoYSxwLiRtb2RlbFZhbHVlKX19ZWxzZSBpZighbS5hc3NpZ24pdGhyb3cgbmIoXCJub25hc3NpZ25cIixkLm5nTW9kZWwsdGEoYykpO307dGhpcy4kcmVuZGVyPUI7dGhpcy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4geChhKXx8XCJcIj09PWF8fG51bGw9PT1hfHxhIT09YX07dGhpcy4kJHVwZGF0ZUVtcHR5Q2xhc3Nlcz1mdW5jdGlvbihhKXtwLiRpc0VtcHR5KGEpPyhmLnJlbW92ZUNsYXNzKGMsXCJuZy1ub3QtZW1wdHlcIiksZi5hZGRDbGFzcyhjLFwibmctZW1wdHlcIikpOihmLnJlbW92ZUNsYXNzKGMsXCJuZy1lbXB0eVwiKSxmLmFkZENsYXNzKGMsXCJuZy1ub3QtZW1wdHlcIikpfTt2YXIgdz0wO0xkKHtjdHJsOnRoaXMsJGVsZW1lbnQ6YyxzZXQ6ZnVuY3Rpb24oYSxiKXthW2JdPSEwfSx1bnNldDpmdW5jdGlvbihhLGIpe2RlbGV0ZSBhW2JdfSwkYW5pbWF0ZTpmfSk7dGhpcy4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtwLiRkaXJ0eT1cbiExO3AuJHByaXN0aW5lPSEwO2YucmVtb3ZlQ2xhc3MoYyxOYik7Zi5hZGRDbGFzcyhjLFlhKX07dGhpcy4kc2V0RGlydHk9ZnVuY3Rpb24oKXtwLiRkaXJ0eT0hMDtwLiRwcmlzdGluZT0hMTtmLnJlbW92ZUNsYXNzKGMsWWEpO2YuYWRkQ2xhc3MoYyxOYik7cC4kJHBhcmVudEZvcm0uJHNldERpcnR5KCl9O3RoaXMuJHNldFVudG91Y2hlZD1mdW5jdGlvbigpe3AuJHRvdWNoZWQ9ITE7cC4kdW50b3VjaGVkPSEwO2Yuc2V0Q2xhc3MoYyxcIm5nLXVudG91Y2hlZFwiLFwibmctdG91Y2hlZFwiKX07dGhpcy4kc2V0VG91Y2hlZD1mdW5jdGlvbigpe3AuJHRvdWNoZWQ9ITA7cC4kdW50b3VjaGVkPSExO2Yuc2V0Q2xhc3MoYyxcIm5nLXRvdWNoZWRcIixcIm5nLXVudG91Y2hlZFwiKX07dGhpcy4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtnLmNhbmNlbChLKTtwLiR2aWV3VmFsdWU9cC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7cC4kcmVuZGVyKCl9O3RoaXMuJHZhbGlkYXRlPWZ1bmN0aW9uKCl7aWYoIU4ocC4kbW9kZWxWYWx1ZSl8fFxuIWlzTmFOKHAuJG1vZGVsVmFsdWUpKXt2YXIgYT1wLiQkcmF3TW9kZWxWYWx1ZSxiPXAuJHZhbGlkLGM9cC4kbW9kZWxWYWx1ZSxkPXAuJG9wdGlvbnMmJnAuJG9wdGlvbnMuYWxsb3dJbnZhbGlkO3AuJCRydW5WYWxpZGF0b3JzKGEscC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUsZnVuY3Rpb24oZSl7ZHx8Yj09PWV8fChwLiRtb2RlbFZhbHVlPWU/YTp2LHAuJG1vZGVsVmFsdWUhPT1jJiZwLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSl9KX19O3RoaXMuJCRydW5WYWxpZGF0b3JzPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7dmFyIGM9ITA7bihwLiR2YWxpZGF0b3JzLGZ1bmN0aW9uKGQsZSl7dmFyIGc9ZChhLGIpO2M9YyYmZztmKGUsZyl9KTtyZXR1cm4gYz8hMDoobihwLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oYSxiKXtmKGIsbnVsbCl9KSwhMSl9ZnVuY3Rpb24gZSgpe3ZhciBjPVtdLGQ9ITA7bihwLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oZSxnKXt2YXIgaD1lKGEsXG5iKTtpZighaHx8IUQoaC50aGVuKSl0aHJvdyBuYihcIm5vcHJvbWlzZVwiLGgpO2YoZyx2KTtjLnB1c2goaC50aGVuKGZ1bmN0aW9uKCl7ZihnLCEwKX0sZnVuY3Rpb24oYSl7ZD0hMTtmKGcsITEpfSkpfSk7Yy5sZW5ndGg/ay5hbGwoYykudGhlbihmdW5jdGlvbigpe2coZCl9LEIpOmcoITApfWZ1bmN0aW9uIGYoYSxiKXtoPT09dyYmcC4kc2V0VmFsaWRpdHkoYSxiKX1mdW5jdGlvbiBnKGEpe2g9PT13JiZjKGEpfXcrKzt2YXIgaD13OyhmdW5jdGlvbigpe3ZhciBhPXAuJCRwYXJzZXJOYW1lfHxcInBhcnNlXCI7aWYoeCh0KSlmKGEsbnVsbCk7ZWxzZSByZXR1cm4gdHx8KG4ocC4kdmFsaWRhdG9ycyxmdW5jdGlvbihhLGIpe2YoYixudWxsKX0pLG4ocC4kYXN5bmNWYWxpZGF0b3JzLGZ1bmN0aW9uKGEsYil7ZihiLG51bGwpfSkpLGYoYSx0KSx0O3JldHVybiEwfSkoKT9kKCk/ZSgpOmcoITEpOmcoITEpfTt0aGlzLiRjb21taXRWaWV3VmFsdWU9ZnVuY3Rpb24oKXt2YXIgYT1wLiR2aWV3VmFsdWU7XG5nLmNhbmNlbChLKTtpZihwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSE9PWF8fFwiXCI9PT1hJiZwLiQkaGFzTmF0aXZlVmFsaWRhdG9ycylwLiQkdXBkYXRlRW1wdHlDbGFzc2VzKGEpLHAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWEscC4kcHJpc3RpbmUmJnRoaXMuJHNldERpcnR5KCksdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUoKX07dGhpcy4kJHBhcnNlQW5kVmFsaWRhdGU9ZnVuY3Rpb24oKXt2YXIgYj1wLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtpZih0PXgoYik/djohMClmb3IodmFyIGM9MDtjPHAuJHBhcnNlcnMubGVuZ3RoO2MrKylpZihiPXAuJHBhcnNlcnNbY10oYikseChiKSl7dD0hMTticmVha31OKHAuJG1vZGVsVmFsdWUpJiZpc05hTihwLiRtb2RlbFZhbHVlKSYmKHAuJG1vZGVsVmFsdWU9cShhKSk7dmFyIGQ9cC4kbW9kZWxWYWx1ZSxlPXAuJG9wdGlvbnMmJnAuJG9wdGlvbnMuYWxsb3dJbnZhbGlkO3AuJCRyYXdNb2RlbFZhbHVlPWI7ZSYmKHAuJG1vZGVsVmFsdWU9XG5iLHAuJG1vZGVsVmFsdWUhPT1kJiZwLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSk7cC4kJHJ1blZhbGlkYXRvcnMoYixwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSxmdW5jdGlvbihhKXtlfHwocC4kbW9kZWxWYWx1ZT1hP2I6dixwLiRtb2RlbFZhbHVlIT09ZCYmcC4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpfSl9O3RoaXMuJCR3cml0ZU1vZGVsVG9TY29wZT1mdW5jdGlvbigpe0koYSxwLiRtb2RlbFZhbHVlKTtuKHAuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsZnVuY3Rpb24oYSl7dHJ5e2EoKX1jYXRjaChjKXtiKGMpfX0pfTt0aGlzLiRzZXRWaWV3VmFsdWU9ZnVuY3Rpb24oYSxiKXtwLiR2aWV3VmFsdWU9YTtwLiRvcHRpb25zJiYhcC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHR8fHAuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChiKX07dGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0PWZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1wLiRvcHRpb25zO2QmJnkoZC5kZWJvdW5jZSkmJihkPWQuZGVib3VuY2UsXG5OKGQpP2M9ZDpOKGRbYl0pP2M9ZFtiXTpOKGRbXCJkZWZhdWx0XCJdKSYmKGM9ZFtcImRlZmF1bHRcIl0pKTtnLmNhbmNlbChLKTtjP0s9ZyhmdW5jdGlvbigpe3AuJGNvbW1pdFZpZXdWYWx1ZSgpfSxjKTpoLiQkcGhhc2U/cC4kY29tbWl0Vmlld1ZhbHVlKCk6YS4kYXBwbHkoZnVuY3Rpb24oKXtwLiRjb21taXRWaWV3VmFsdWUoKX0pfTthLiR3YXRjaChmdW5jdGlvbigpe3ZhciBiPXEoYSk7aWYoYiE9PXAuJG1vZGVsVmFsdWUmJihwLiRtb2RlbFZhbHVlPT09cC4kbW9kZWxWYWx1ZXx8Yj09PWIpKXtwLiRtb2RlbFZhbHVlPXAuJCRyYXdNb2RlbFZhbHVlPWI7dD12O2Zvcih2YXIgYz1wLiRmb3JtYXR0ZXJzLGQ9Yy5sZW5ndGgsZT1iO2QtLTspZT1jW2RdKGUpO3AuJHZpZXdWYWx1ZSE9PWUmJihwLiQkdXBkYXRlRW1wdHlDbGFzc2VzKGUpLHAuJHZpZXdWYWx1ZT1wLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZT1lLHAuJHJlbmRlcigpLHAuJCRydW5WYWxpZGF0b3JzKGIsZSxCKSl9cmV0dXJuIGJ9KX1dLFxuUmU9W1wiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOltcIm5nTW9kZWxcIixcIl4/Zm9ybVwiLFwiXj9uZ01vZGVsT3B0aW9uc1wiXSxjb250cm9sbGVyOk5nLHByaW9yaXR5OjEsY29tcGlsZTpmdW5jdGlvbihiKXtiLmFkZENsYXNzKFlhKS5hZGRDbGFzcyhcIm5nLXVudG91Y2hlZFwiKS5hZGRDbGFzcyhvYik7cmV0dXJue3ByZTpmdW5jdGlvbihhLGIsZSxmKXt2YXIgZz1mWzBdO2I9ZlsxXXx8Zy4kJHBhcmVudEZvcm07Zy4kJHNldE9wdGlvbnMoZlsyXSYmZlsyXS4kb3B0aW9ucyk7Yi4kYWRkQ29udHJvbChnKTtlLiRvYnNlcnZlKFwibmFtZVwiLGZ1bmN0aW9uKGEpe2cuJG5hbWUhPT1hJiZnLiQkcGFyZW50Rm9ybS4kJHJlbmFtZUNvbnRyb2woZyxhKX0pO2EuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2cuJCRwYXJlbnRGb3JtLiRyZW1vdmVDb250cm9sKGcpfSl9LHBvc3Q6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGc9ZlswXTtpZihnLiRvcHRpb25zJiZcbmcuJG9wdGlvbnMudXBkYXRlT24pYy5vbihnLiRvcHRpb25zLnVwZGF0ZU9uLGZ1bmN0aW9uKGEpe2cuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChhJiZhLnR5cGUpfSk7Yy5vbihcImJsdXJcIixmdW5jdGlvbihjKXtnLiR0b3VjaGVkfHwoYS4kJHBoYXNlP2IuJGV2YWxBc3luYyhnLiRzZXRUb3VjaGVkKTpiLiRhcHBseShnLiRzZXRUb3VjaGVkKSl9KX19fX19XSxPZz0vKFxccyt8XilkZWZhdWx0KFxccyt8JCkvLFZlPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXM7dGhpcy4kb3B0aW9ucz1PYShhLiRldmFsKGIubmdNb2RlbE9wdGlvbnMpKTt5KHRoaXMuJG9wdGlvbnMudXBkYXRlT24pPyh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdD0hMSx0aGlzLiRvcHRpb25zLnVwZGF0ZU9uPVgodGhpcy4kb3B0aW9ucy51cGRhdGVPbi5yZXBsYWNlKE9nLGZ1bmN0aW9uKCl7ZC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9XG4hMDtyZXR1cm5cIiBcIn0pKSk6dGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITB9XX19LEhlPU1hKHt0ZXJtaW5hbDohMCxwcmlvcml0eToxRTN9KSxQZz1IKFwibmdPcHRpb25zXCIpLFFnPS9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccytncm91cFxccytieVxccysoW1xcc1xcU10rPykpPyg/OlxccytkaXNhYmxlXFxzK3doZW5cXHMrKFtcXHNcXFNdKz8pKT9cXHMrZm9yXFxzKyg/OihbXFwkXFx3XVtcXCRcXHddKil8KD86XFwoXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqLFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKlxcKSkpXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpPyQvLFBlPVtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSxjLGQpe2Z1bmN0aW9uIGUoYSxiLGMsZCxmKXt0aGlzLnNlbGVjdFZhbHVlPWE7dGhpcy52aWV3VmFsdWU9Yjt0aGlzLmxhYmVsPWM7dGhpcy5ncm91cD1kO3RoaXMuZGlzYWJsZWQ9Zn1cbmZ1bmN0aW9uIGwoYSl7dmFyIGI7aWYoIXEmJkNhKGEpKWI9YTtlbHNle2I9W107Zm9yKHZhciBjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmXCIkXCIhPT1jLmNoYXJBdCgwKSYmYi5wdXNoKGMpfXJldHVybiBifXZhciBtPWEubWF0Y2goUWcpO2lmKCFtKXRocm93IFBnKFwiaWV4cFwiLGEsdGEoYykpO3ZhciBuPW1bNV18fG1bN10scT1tWzZdO2E9LyBhcyAvLnRlc3QobVswXSkmJm1bMV07dmFyIHY9bVs5XTtjPWIobVsyXT9tWzFdOm4pO3ZhciB5PWEmJmIoYSl8fGMsdD12JiZiKHYpLHA9dj9mdW5jdGlvbihhLGIpe3JldHVybiB0KGQsYil9OmZ1bmN0aW9uKGEpe3JldHVybiBGYShhKX0sdz1mdW5jdGlvbihhLGIpe3JldHVybiBwKGEsQihhLGIpKX0sdT1iKG1bMl18fG1bMV0pLHg9YihtWzNdfHxcIlwiKSx6PWIobVs0XXx8XCJcIiksQT1iKG1bOF0pLEM9e30sQj1xP2Z1bmN0aW9uKGEsYil7Q1txXT1iO0Nbbl09YTtyZXR1cm4gQ306ZnVuY3Rpb24oYSl7Q1tuXT1hO3JldHVybiBDfTtyZXR1cm57dHJhY2tCeTp2LFxuZ2V0VHJhY2tCeVZhbHVlOncsZ2V0V2F0Y2hhYmxlczpiKEEsZnVuY3Rpb24oYSl7dmFyIGI9W107YT1hfHxbXTtmb3IodmFyIGM9bChhKSxlPWMubGVuZ3RoLGY9MDtmPGU7ZisrKXt2YXIgZz1hPT09Yz9mOmNbZl0saz1CKGFbZ10sZyksZz1wKGFbZ10sayk7Yi5wdXNoKGcpO2lmKG1bMl18fG1bMV0pZz11KGQsayksYi5wdXNoKGcpO21bNF0mJihrPXooZCxrKSxiLnB1c2goaykpfXJldHVybiBifSksZ2V0T3B0aW9uczpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPXt9LGM9QShkKXx8W10sZj1sKGMpLGc9Zi5sZW5ndGgsbT0wO208ZzttKyspe3ZhciBuPWM9PT1mP206ZlttXSxyPUIoY1tuXSxuKSxxPXkoZCxyKSxuPXAocSxyKSxzPXUoZCxyKSx0PXgoZCxyKSxyPXooZCxyKSxxPW5ldyBlKG4scSxzLHQscik7YS5wdXNoKHEpO2Jbbl09cX1yZXR1cm57aXRlbXM6YSxzZWxlY3RWYWx1ZU1hcDpiLGdldE9wdGlvbkZyb21WaWV3VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGJbdyhhKV19LFxuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdj9pYS5jb3B5KGEudmlld1ZhbHVlKTphLnZpZXdWYWx1ZX19fX19dmFyIGM9Vy5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpLGU9Vy5jcmVhdGVFbGVtZW50KFwib3B0Z3JvdXBcIik7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHRlcm1pbmFsOiEwLHJlcXVpcmU6W1wic2VsZWN0XCIsXCJuZ01vZGVsXCJdLGxpbms6e3ByZTpmdW5jdGlvbihhLGIsYyxkKXtkWzBdLnJlZ2lzdGVyT3B0aW9uPUJ9LHBvc3Q6ZnVuY3Rpb24oYixnLGgsayl7ZnVuY3Rpb24gbChhLGIpe2EuZWxlbWVudD1iO2IuZGlzYWJsZWQ9YS5kaXNhYmxlZDthLmxhYmVsIT09Yi5sYWJlbCYmKGIubGFiZWw9YS5sYWJlbCxiLnRleHRDb250ZW50PWEubGFiZWwpO2EudmFsdWUhPT1iLnZhbHVlJiYoYi52YWx1ZT1hLnNlbGVjdFZhbHVlKX1mdW5jdGlvbiBtKGEsYixjLGQpe2ImJkcoYi5ub2RlTmFtZSk9PT1jP2M9YjooYz1kLmNsb25lTm9kZSghMSksYj9hLmluc2VydEJlZm9yZShjLFxuYik6YS5hcHBlbmRDaGlsZChjKSk7cmV0dXJuIGN9ZnVuY3Rpb24gcihhKXtmb3IodmFyIGI7YTspYj1hLm5leHRTaWJsaW5nLCRiKGEpLGE9Yn1mdW5jdGlvbiBxKGEpe3ZhciBiPXcmJndbMF0sYz1BJiZBWzBdO2lmKGJ8fGMpZm9yKDthJiYoYT09PWJ8fGE9PT1jfHw4PT09YS5ub2RlVHlwZXx8XCJvcHRpb25cIj09PXJhKGEpJiZcIlwiPT09YS52YWx1ZSk7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX1mdW5jdGlvbiB2KCl7dmFyIGE9RCYmeC5yZWFkVmFsdWUoKTtEPUUuZ2V0T3B0aW9ucygpO3ZhciBiPXt9LGQ9Z1swXS5maXJzdENoaWxkO3omJmcucHJlcGVuZCh3KTtkPXEoZCk7RC5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBmLGg7eShhLmdyb3VwKT8oZj1iW2EuZ3JvdXBdLGZ8fChmPW0oZ1swXSxkLFwib3B0Z3JvdXBcIixlKSxkPWYubmV4dFNpYmxpbmcsZi5sYWJlbD1hLmdyb3VwLGY9YlthLmdyb3VwXT17Z3JvdXBFbGVtZW50OmYsY3VycmVudE9wdGlvbkVsZW1lbnQ6Zi5maXJzdENoaWxkfSksXG5oPW0oZi5ncm91cEVsZW1lbnQsZi5jdXJyZW50T3B0aW9uRWxlbWVudCxcIm9wdGlvblwiLGMpLGwoYSxoKSxmLmN1cnJlbnRPcHRpb25FbGVtZW50PWgubmV4dFNpYmxpbmcpOihoPW0oZ1swXSxkLFwib3B0aW9uXCIsYyksbChhLGgpLGQ9aC5uZXh0U2libGluZyl9KTtPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3IoYlthXS5jdXJyZW50T3B0aW9uRWxlbWVudCl9KTtyKGQpO3QuJHJlbmRlcigpO2lmKCF0LiRpc0VtcHR5KGEpKXt2YXIgZj14LnJlYWRWYWx1ZSgpOyhFLnRyYWNrQnl8fHA/b2EoYSxmKTphPT09Zil8fCh0LiRzZXRWaWV3VmFsdWUoZiksdC4kcmVuZGVyKCkpfX12YXIgeD1rWzBdLHQ9a1sxXSxwPWgubXVsdGlwbGUsdztrPTA7Zm9yKHZhciB1PWcuY2hpbGRyZW4oKSxCPXUubGVuZ3RoO2s8QjtrKyspaWYoXCJcIj09PXVba10udmFsdWUpe3c9dS5lcShrKTticmVha312YXIgej0hIXcsQT1DKGMuY2xvbmVOb2RlKCExKSk7QS52YWwoXCI/XCIpO3ZhciBELEU9ZChoLm5nT3B0aW9ucyxcbmcsYik7cD8odC4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8MD09PWEubGVuZ3RofSx4LndyaXRlVmFsdWU9ZnVuY3Rpb24oYSl7RC5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuZWxlbWVudC5zZWxlY3RlZD0hMX0pO2EmJmEuZm9yRWFjaChmdW5jdGlvbihhKXsoYT1ELmdldE9wdGlvbkZyb21WaWV3VmFsdWUoYSkpJiYhYS5kaXNhYmxlZCYmKGEuZWxlbWVudC5zZWxlY3RlZD0hMCl9KX0seC5yZWFkVmFsdWU9ZnVuY3Rpb24oKXt2YXIgYT1nLnZhbCgpfHxbXSxiPVtdO24oYSxmdW5jdGlvbihhKXsoYT1ELnNlbGVjdFZhbHVlTWFwW2FdKSYmIWEuZGlzYWJsZWQmJmIucHVzaChELmdldFZpZXdWYWx1ZUZyb21PcHRpb24oYSkpfSk7cmV0dXJuIGJ9LEUudHJhY2tCeSYmYi4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCl7aWYoTCh0LiR2aWV3VmFsdWUpKXJldHVybiB0LiR2aWV3VmFsdWUubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBFLmdldFRyYWNrQnlWYWx1ZShhKX0pfSxcbmZ1bmN0aW9uKCl7dC4kcmVuZGVyKCl9KSk6KHgud3JpdGVWYWx1ZT1mdW5jdGlvbihhKXt2YXIgYj1ELmdldE9wdGlvbkZyb21WaWV3VmFsdWUoYSk7YiYmIWIuZGlzYWJsZWQ/Z1swXS52YWx1ZSE9PWIuc2VsZWN0VmFsdWUmJihBLnJlbW92ZSgpLHp8fHcucmVtb3ZlKCksZ1swXS52YWx1ZT1iLnNlbGVjdFZhbHVlLGIuZWxlbWVudC5zZWxlY3RlZD0hMCxiLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIixcInNlbGVjdGVkXCIpKTpudWxsPT09YXx8ej8oQS5yZW1vdmUoKSx6fHxnLnByZXBlbmQodyksZy52YWwoXCJcIiksdy5wcm9wKFwic2VsZWN0ZWRcIiwhMCksdy5hdHRyKFwic2VsZWN0ZWRcIiwhMCkpOih6fHx3LnJlbW92ZSgpLGcucHJlcGVuZChBKSxnLnZhbChcIj9cIiksQS5wcm9wKFwic2VsZWN0ZWRcIiwhMCksQS5hdHRyKFwic2VsZWN0ZWRcIiwhMCkpfSx4LnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPUQuc2VsZWN0VmFsdWVNYXBbZy52YWwoKV07cmV0dXJuIGEmJiFhLmRpc2FibGVkP1xuKHp8fHcucmVtb3ZlKCksQS5yZW1vdmUoKSxELmdldFZpZXdWYWx1ZUZyb21PcHRpb24oYSkpOm51bGx9LEUudHJhY2tCeSYmYi4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gRS5nZXRUcmFja0J5VmFsdWUodC4kdmlld1ZhbHVlKX0sZnVuY3Rpb24oKXt0LiRyZW5kZXIoKX0pKTt6Pyh3LnJlbW92ZSgpLGEodykoYiksdy5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpKTp3PUMoYy5jbG9uZU5vZGUoITEpKTt2KCk7Yi4kd2F0Y2hDb2xsZWN0aW9uKEUuZ2V0V2F0Y2hhYmxlcyx2KX19fX1dLEllPVtcIiRsb2NhbGVcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGEsYixkKXt2YXIgYz0ve30vZyxlPS9ed2hlbihNaW51cyk/KC4rKSQvO3JldHVybntsaW5rOmZ1bmN0aW9uKGYsZyxoKXtmdW5jdGlvbiBrKGEpe2cudGV4dChhfHxcIlwiKX12YXIgbD1oLmNvdW50LG09aC4kYXR0ci53aGVuJiZnLmF0dHIoaC4kYXR0ci53aGVuKSxyPWgub2Zmc2V0fHwwLHE9Zi4kZXZhbChtKXx8e30sdj1cbnt9LHk9Yi5zdGFydFN5bWJvbCgpLHQ9Yi5lbmRTeW1ib2woKSxwPXkrbCtcIi1cIityK3Qsdz1pYS5ub29wLHU7bihoLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5leGVjKGIpO2MmJihjPShjWzFdP1wiLVwiOlwiXCIpK0coY1syXSkscVtjXT1nLmF0dHIoaC4kYXR0cltiXSkpfSk7bihxLGZ1bmN0aW9uKGEsZCl7dltkXT1iKGEucmVwbGFjZShjLHApKX0pO2YuJHdhdGNoKGwsZnVuY3Rpb24oYil7dmFyIGM9cGFyc2VGbG9hdChiKSxlPWlzTmFOKGMpO2V8fGMgaW4gcXx8KGM9YS5wbHVyYWxDYXQoYy1yKSk7Yz09PXV8fGUmJk4odSkmJmlzTmFOKHUpfHwodygpLGU9dltjXSx4KGUpPyhudWxsIT1iJiZkLmRlYnVnKFwibmdQbHVyYWxpemU6IG5vIHJ1bGUgZGVmaW5lZCBmb3IgJ1wiK2MrXCInIGluIFwiK20pLHc9QixrKCkpOnc9Zi4kd2F0Y2goZSxrKSx1PWMpfSl9fX1dLEplPVtcIiRwYXJzZVwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGIpe3ZhciBkPUgoXCJuZ1JlcGVhdFwiKSxjPWZ1bmN0aW9uKGEsYixcbmMsZCxrLGwsbSl7YVtjXT1kO2smJihhW2tdPWwpO2EuJGluZGV4PWI7YS4kZmlyc3Q9MD09PWI7YS4kbGFzdD1iPT09bS0xO2EuJG1pZGRsZT0hKGEuJGZpcnN0fHxhLiRsYXN0KTthLiRvZGQ9IShhLiRldmVuPTA9PT0oYiYxKSl9O3JldHVybntyZXN0cmljdDpcIkFcIixtdWx0aUVsZW1lbnQ6ITAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxRTMsdGVybWluYWw6ITAsJCR0bGI6ITAsY29tcGlsZTpmdW5jdGlvbihlLGYpe3ZhciBnPWYubmdSZXBlYXQsaD1XLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nUmVwZWF0OiBcIitnK1wiIFwiKSxrPWcubWF0Y2goL15cXHMqKFtcXHNcXFNdKz8pXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpP1xccyokLyk7aWYoIWspdGhyb3cgZChcImlleHBcIixnKTt2YXIgbD1rWzFdLG09a1syXSxyPWtbM10scT1rWzRdLGs9bC5tYXRjaCgvXig/OihcXHMqW1xcJFxcd10rKXxcXChcXHMqKFtcXCRcXHddKylcXHMqLFxccyooW1xcJFxcd10rKVxccypcXCkpJC8pO1xuaWYoIWspdGhyb3cgZChcImlpZGV4cFwiLGwpO3ZhciB4PWtbM118fGtbMV0seT1rWzJdO2lmKHImJighL15bJGEtekEtWl9dWyRhLXpBLVowLTlfXSokLy50ZXN0KHIpfHwvXihudWxsfHVuZGVmaW5lZHx0aGlzfFxcJGluZGV4fFxcJGZpcnN0fFxcJG1pZGRsZXxcXCRsYXN0fFxcJGV2ZW58XFwkb2RkfFxcJHBhcmVudHxcXCRyb290fFxcJGlkKSQvLnRlc3QocikpKXRocm93IGQoXCJiYWRpZGVudFwiLHIpO3ZhciB0LHAsdyx1LEI9eyRpZDpGYX07cT90PWEocSk6KHc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRmEoYil9LHU9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9KTtyZXR1cm4gZnVuY3Rpb24oYSxlLGYsayxsKXt0JiYocD1mdW5jdGlvbihiLGMsZCl7eSYmKEJbeV09Yik7Qlt4XT1jO0IuJGluZGV4PWQ7cmV0dXJuIHQoYSxCKX0pO3ZhciBxPVooKTthLiR3YXRjaENvbGxlY3Rpb24obSxmdW5jdGlvbihmKXt2YXIgayxtLHM9ZVswXSx0LEI9WigpLEQsRSxILEYsTCxHLE47ciYmKGFbcl09Zik7aWYoQ2EoZikpTD1cbmYsbT1wfHx3O2Vsc2UgZm9yKE4gaW4gbT1wfHx1LEw9W10sZilzYS5jYWxsKGYsTikmJlwiJFwiIT09Ti5jaGFyQXQoMCkmJkwucHVzaChOKTtEPUwubGVuZ3RoO049QXJyYXkoRCk7Zm9yKGs9MDtrPEQ7aysrKWlmKEU9Zj09PUw/azpMW2tdLEg9ZltFXSxGPW0oRSxILGspLHFbRl0pRz1xW0ZdLGRlbGV0ZSBxW0ZdLEJbRl09RyxOW2tdPUc7ZWxzZXtpZihCW0ZdKXRocm93IG4oTixmdW5jdGlvbihhKXthJiZhLnNjb3BlJiYocVthLmlkXT1hKX0pLGQoXCJkdXBlc1wiLGcsRixIKTtOW2tdPXtpZDpGLHNjb3BlOnYsY2xvbmU6dn07QltGXT0hMH1mb3IodCBpbiBxKXtHPXFbdF07Rj10YihHLmNsb25lKTtiLmxlYXZlKEYpO2lmKEZbMF0ucGFyZW50Tm9kZSlmb3Ioaz0wLG09Ri5sZW5ndGg7azxtO2srKylGW2tdLiQkTkdfUkVNT1ZFRD0hMDtHLnNjb3BlLiRkZXN0cm95KCl9Zm9yKGs9MDtrPEQ7aysrKWlmKEU9Zj09PUw/azpMW2tdLEg9ZltFXSxHPU5ba10sRy5zY29wZSl7dD1zO2RvIHQ9XG50Lm5leHRTaWJsaW5nO3doaWxlKHQmJnQuJCROR19SRU1PVkVEKTtHLmNsb25lWzBdIT10JiZiLm1vdmUodGIoRy5jbG9uZSksbnVsbCxDKHMpKTtzPUcuY2xvbmVbRy5jbG9uZS5sZW5ndGgtMV07YyhHLnNjb3BlLGsseCxILHksRSxEKX1lbHNlIGwoZnVuY3Rpb24oYSxkKXtHLnNjb3BlPWQ7dmFyIGU9aC5jbG9uZU5vZGUoITEpO2FbYS5sZW5ndGgrK109ZTtiLmVudGVyKGEsbnVsbCxDKHMpKTtzPWU7Ry5jbG9uZT1hO0JbRy5pZF09RztjKEcuc2NvcGUsayx4LEgseSxFLEQpfSk7cT1CfSl9fX19XSxLZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihiLGQsYyl7Yi4kd2F0Y2goYy5uZ1Nob3csZnVuY3Rpb24oYil7YVtiP1wicmVtb3ZlQ2xhc3NcIjpcImFkZENsYXNzXCJdKGQsXCJuZy1oaWRlXCIse3RlbXBDbGFzc2VzOlwibmctaGlkZS1hbmltYXRlXCJ9KX0pfX19XSxEZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixcbm11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGIsZCxjKXtiLiR3YXRjaChjLm5nSGlkZSxmdW5jdGlvbihiKXthW2I/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIix7dGVtcENsYXNzZXM6XCJuZy1oaWRlLWFuaW1hdGVcIn0pfSl9fX1dLExlPU1hKGZ1bmN0aW9uKGEsYixkKXthLiR3YXRjaChkLm5nU3R5bGUsZnVuY3Rpb24oYSxkKXtkJiZhIT09ZCYmbihkLGZ1bmN0aW9uKGEsYyl7Yi5jc3MoYyxcIlwiKX0pO2EmJmIuY3NzKGEpfSwhMCl9KSxNZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXF1aXJlOlwibmdTd2l0Y2hcIixjb250cm9sbGVyOltcIiRzY29wZVwiLGZ1bmN0aW9uKCl7dGhpcy5jYXNlcz17fX1dLGxpbms6ZnVuY3Rpb24oYixkLGMsZSl7dmFyIGY9W10sZz1bXSxoPVtdLGs9W10sbD1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe2Euc3BsaWNlKGIsMSl9fTtiLiR3YXRjaChjLm5nU3dpdGNofHxjLm9uLGZ1bmN0aW9uKGIpe3ZhciBjLFxuZDtjPTA7Zm9yKGQ9aC5sZW5ndGg7YzxkOysrYylhLmNhbmNlbChoW2NdKTtjPWgubGVuZ3RoPTA7Zm9yKGQ9ay5sZW5ndGg7YzxkOysrYyl7dmFyIHE9dGIoZ1tjXS5jbG9uZSk7a1tjXS4kZGVzdHJveSgpOyhoW2NdPWEubGVhdmUocSkpLnRoZW4obChoLGMpKX1nLmxlbmd0aD0wO2subGVuZ3RoPTA7KGY9ZS5jYXNlc1tcIiFcIitiXXx8ZS5jYXNlc1tcIj9cIl0pJiZuKGYsZnVuY3Rpb24oYil7Yi50cmFuc2NsdWRlKGZ1bmN0aW9uKGMsZCl7ay5wdXNoKGQpO3ZhciBlPWIuZWxlbWVudDtjW2MubGVuZ3RoKytdPVcuY3JlYXRlQ29tbWVudChcIiBlbmQgbmdTd2l0Y2hXaGVuOiBcIik7Zy5wdXNoKHtjbG9uZTpjfSk7YS5lbnRlcihjLGUucGFyZW50KCksZSl9KX0pfSl9fX1dLE5lPU1hKHt0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjEyMDAscmVxdWlyZTpcIl5uZ1N3aXRjaFwiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGEsYixkLGMsZSl7Yy5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl09XG5jLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXXx8W107Yy5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl0ucHVzaCh7dHJhbnNjbHVkZTplLGVsZW1lbnQ6Yn0pfX0pLE9lPU1hKHt0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjEyMDAscmVxdWlyZTpcIl5uZ1N3aXRjaFwiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGEsYixkLGMsZSl7Yy5jYXNlc1tcIj9cIl09Yy5jYXNlc1tcIj9cIl18fFtdO2MuY2FzZXNbXCI/XCJdLnB1c2goe3RyYW5zY2x1ZGU6ZSxlbGVtZW50OmJ9KX19KSxSZz1IKFwibmdUcmFuc2NsdWRlXCIpLFFlPU1hKHtyZXN0cmljdDpcIkVBQ1wiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyxlKXtkLm5nVHJhbnNjbHVkZT09PWQuJGF0dHIubmdUcmFuc2NsdWRlJiYoZC5uZ1RyYW5zY2x1ZGU9XCJcIik7aWYoIWUpdGhyb3cgUmcoXCJvcnBoYW5cIix0YShiKSk7ZShmdW5jdGlvbihhKXthLmxlbmd0aCYmKGIuZW1wdHkoKSxiLmFwcGVuZChhKSl9LG51bGwsZC5uZ1RyYW5zY2x1ZGV8fFxuZC5uZ1RyYW5zY2x1ZGVTbG90KX19KSxxZT1bXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVcIix0ZXJtaW5hbDohMCxjb21waWxlOmZ1bmN0aW9uKGIsZCl7XCJ0ZXh0L25nLXRlbXBsYXRlXCI9PWQudHlwZSYmYS5wdXQoZC5pZCxiWzBdLnRleHQpfX19XSxTZz17JHNldFZpZXdWYWx1ZTpCLCRyZW5kZXI6Qn0sVGc9W1wiJGVsZW1lbnRcIixcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oYSxiLGQpe3ZhciBjPXRoaXMsZT1uZXcgVWE7Yy5uZ01vZGVsQ3RybD1TZztjLnVua25vd25PcHRpb249QyhXLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2MucmVuZGVyVW5rbm93bk9wdGlvbj1mdW5jdGlvbihiKXtiPVwiPyBcIitGYShiKStcIiA/XCI7Yy51bmtub3duT3B0aW9uLnZhbChiKTthLnByZXBlbmQoYy51bmtub3duT3B0aW9uKTthLnZhbChiKX07Yi4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Yy5yZW5kZXJVbmtub3duT3B0aW9uPUJ9KTtjLnJlbW92ZVVua25vd25PcHRpb249XG5mdW5jdGlvbigpe2MudW5rbm93bk9wdGlvbi5wYXJlbnQoKSYmYy51bmtub3duT3B0aW9uLnJlbW92ZSgpfTtjLnJlYWRWYWx1ZT1mdW5jdGlvbigpe2MucmVtb3ZlVW5rbm93bk9wdGlvbigpO3JldHVybiBhLnZhbCgpfTtjLndyaXRlVmFsdWU9ZnVuY3Rpb24oYil7Yy5oYXNPcHRpb24oYik/KGMucmVtb3ZlVW5rbm93bk9wdGlvbigpLGEudmFsKGIpLFwiXCI9PT1iJiZjLmVtcHR5T3B0aW9uLnByb3AoXCJzZWxlY3RlZFwiLCEwKSk6bnVsbD09YiYmYy5lbXB0eU9wdGlvbj8oYy5yZW1vdmVVbmtub3duT3B0aW9uKCksYS52YWwoXCJcIikpOmMucmVuZGVyVW5rbm93bk9wdGlvbihiKX07Yy5hZGRPcHRpb249ZnVuY3Rpb24oYSxiKXtpZig4IT09YlswXS5ub2RlVHlwZSl7VGEoYSwnXCJvcHRpb24gdmFsdWVcIicpO1wiXCI9PT1hJiYoYy5lbXB0eU9wdGlvbj1iKTt2YXIgZD1lLmdldChhKXx8MDtlLnB1dChhLGQrMSk7Yy5uZ01vZGVsQ3RybC4kcmVuZGVyKCk7YlswXS5oYXNBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKSYmXG4oYlswXS5zZWxlY3RlZD0hMCl9fTtjLnJlbW92ZU9wdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1lLmdldChhKTtiJiYoMT09PWI/KGUucmVtb3ZlKGEpLFwiXCI9PT1hJiYoYy5lbXB0eU9wdGlvbj12KSk6ZS5wdXQoYSxiLTEpKX07Yy5oYXNPcHRpb249ZnVuY3Rpb24oYSl7cmV0dXJuISFlLmdldChhKX07Yy5yZWdpc3Rlck9wdGlvbj1mdW5jdGlvbihhLGIsZCxlLGwpe2lmKGUpe3ZhciBtO2QuJG9ic2VydmUoXCJ2YWx1ZVwiLGZ1bmN0aW9uKGEpe3kobSkmJmMucmVtb3ZlT3B0aW9uKG0pO209YTtjLmFkZE9wdGlvbihhLGIpfSl9ZWxzZSBsP2EuJHdhdGNoKGwsZnVuY3Rpb24oYSxlKXtkLiRzZXQoXCJ2YWx1ZVwiLGEpO2UhPT1hJiZjLnJlbW92ZU9wdGlvbihlKTtjLmFkZE9wdGlvbihhLGIpfSk6Yy5hZGRPcHRpb24oZC52YWx1ZSxiKTtiLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2MucmVtb3ZlT3B0aW9uKGQudmFsdWUpO2MubmdNb2RlbEN0cmwuJHJlbmRlcigpfSl9fV0scmU9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsXG5yZXF1aXJlOltcInNlbGVjdFwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpUZyxwcmlvcml0eToxLGxpbms6e3ByZTpmdW5jdGlvbihhLGIsZCxjKXt2YXIgZT1jWzFdO2lmKGUpe3ZhciBmPWNbMF07Zi5uZ01vZGVsQ3RybD1lO2Iub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7ZS4kc2V0Vmlld1ZhbHVlKGYucmVhZFZhbHVlKCkpfSl9KTtpZihkLm11bHRpcGxlKXtmLnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPVtdO24oYi5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGIpe2Iuc2VsZWN0ZWQmJmEucHVzaChiLnZhbHVlKX0pO3JldHVybiBhfTtmLndyaXRlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGM9bmV3IFVhKGEpO24oYi5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGEpe2Euc2VsZWN0ZWQ9eShjLmdldChhLnZhbHVlKSl9KX07dmFyIGcsaD1OYU47YS4kd2F0Y2goZnVuY3Rpb24oKXtoIT09ZS4kdmlld1ZhbHVlfHxvYShnLGUuJHZpZXdWYWx1ZSl8fChnPVxubmEoZS4kdmlld1ZhbHVlKSxlLiRyZW5kZXIoKSk7aD1lLiR2aWV3VmFsdWV9KTtlLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwwPT09YS5sZW5ndGh9fX19LHBvc3Q6ZnVuY3Rpb24oYSxiLGQsYyl7dmFyIGU9Y1sxXTtpZihlKXt2YXIgZj1jWzBdO2UuJHJlbmRlcj1mdW5jdGlvbigpe2Yud3JpdGVWYWx1ZShlLiR2aWV3VmFsdWUpfX19fX19LHRlPVtcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVcIixwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbihiLGQpe2lmKHkoZC52YWx1ZSkpdmFyIGM9YShkLnZhbHVlLCEwKTtlbHNle3ZhciBlPWEoYi50ZXh0KCksITApO2V8fGQuJHNldChcInZhbHVlXCIsYi50ZXh0KCkpfXJldHVybiBmdW5jdGlvbihhLGIsZCl7dmFyIGs9Yi5wYXJlbnQoKTsoaz1rLmRhdGEoXCIkc2VsZWN0Q29udHJvbGxlclwiKXx8ay5wYXJlbnQoKS5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIikpJiZrLnJlZ2lzdGVyT3B0aW9uKGEsXG5iLGQsYyxlKX19fX1dLHNlPWJhKHtyZXN0cmljdDpcIkVcIix0ZXJtaW5hbDohMX0pLEhjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyl7YyYmKGQucmVxdWlyZWQ9ITAsYy4kdmFsaWRhdG9ycy5yZXF1aXJlZD1mdW5jdGlvbihhLGIpe3JldHVybiFkLnJlcXVpcmVkfHwhYy4kaXNFbXB0eShiKX0sZC4kb2JzZXJ2ZShcInJlcXVpcmVkXCIsZnVuY3Rpb24oKXtjLiR2YWxpZGF0ZSgpfSkpfX19LEdjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyl7aWYoYyl7dmFyIGUsZj1kLm5nUGF0dGVybnx8ZC5wYXR0ZXJuO2QuJG9ic2VydmUoXCJwYXR0ZXJuXCIsZnVuY3Rpb24oYSl7RihhKSYmMDxhLmxlbmd0aCYmKGE9bmV3IFJlZ0V4cChcIl5cIithK1wiJFwiKSk7aWYoYSYmIWEudGVzdCl0aHJvdyBIKFwibmdQYXR0ZXJuXCIpKFwibm9yZWdleHBcIixcbmYsYSx0YShiKSk7ZT1hfHx2O2MuJHZhbGlkYXRlKCl9KTtjLiR2YWxpZGF0b3JzLnBhdHRlcm49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy4kaXNFbXB0eShiKXx8eChlKXx8ZS50ZXN0KGIpfX19fX0sSmM9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGIsZCxjKXtpZihjKXt2YXIgZT0tMTtkLiRvYnNlcnZlKFwibWF4bGVuZ3RoXCIsZnVuY3Rpb24oYSl7YT1jYShhKTtlPWlzTmFOKGEpPy0xOmE7Yy4kdmFsaWRhdGUoKX0pO2MuJHZhbGlkYXRvcnMubWF4bGVuZ3RoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIDA+ZXx8Yy4kaXNFbXB0eShiKXx8Yi5sZW5ndGg8PWV9fX19fSxJYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYixkLGMpe2lmKGMpe3ZhciBlPTA7ZC4kb2JzZXJ2ZShcIm1pbmxlbmd0aFwiLGZ1bmN0aW9uKGEpe2U9Y2EoYSl8fDA7Yy4kdmFsaWRhdGUoKX0pO1xuYy4kdmFsaWRhdG9ycy5taW5sZW5ndGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy4kaXNFbXB0eShiKXx8Yi5sZW5ndGg+PWV9fX19fTtPLmFuZ3VsYXIuYm9vdHN0cmFwP2NvbnNvbGUubG9nKFwiV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLlwiKTooamUoKSxsZShpYSksaWEubW9kdWxlKFwibmdMb2NhbGVcIixbXSxbXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7YSs9XCJcIjt2YXIgYj1hLmluZGV4T2YoXCIuXCIpO3JldHVybi0xPT1iPzA6YS5sZW5ndGgtYi0xfWEudmFsdWUoXCIkbG9jYWxlXCIse0RBVEVUSU1FX0ZPUk1BVFM6e0FNUE1TOltcIkFNXCIsXCJQTVwiXSxEQVk6XCJTdW5kYXkgTW9uZGF5IFR1ZXNkYXkgV2VkbmVzZGF5IFRodXJzZGF5IEZyaWRheSBTYXR1cmRheVwiLnNwbGl0KFwiIFwiKSxFUkFOQU1FUzpbXCJCZWZvcmUgQ2hyaXN0XCIsXCJBbm5vIERvbWluaVwiXSxFUkFTOltcIkJDXCIsXCJBRFwiXSxGSVJTVERBWU9GV0VFSzo2LE1PTlRIOlwiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlclwiLnNwbGl0KFwiIFwiKSxcblNIT1JUREFZOlwiU3VuIE1vbiBUdWUgV2VkIFRodSBGcmkgU2F0XCIuc3BsaXQoXCIgXCIpLFNIT1JUTU9OVEg6XCJKYW4gRmViIE1hciBBcHIgTWF5IEp1biBKdWwgQXVnIFNlcCBPY3QgTm92IERlY1wiLnNwbGl0KFwiIFwiKSxTVEFOREFMT05FTU9OVEg6XCJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyXCIuc3BsaXQoXCIgXCIpLFdFRUtFTkRSQU5HRTpbNSw2XSxmdWxsRGF0ZTpcIkVFRUUsIE1NTU0gZCwgeVwiLGxvbmdEYXRlOlwiTU1NTSBkLCB5XCIsbWVkaXVtOlwiTU1NIGQsIHkgaDptbTpzcyBhXCIsbWVkaXVtRGF0ZTpcIk1NTSBkLCB5XCIsbWVkaXVtVGltZTpcImg6bW06c3MgYVwiLFwic2hvcnRcIjpcIk0vZC95eSBoOm1tIGFcIixzaG9ydERhdGU6XCJNL2QveXlcIixzaG9ydFRpbWU6XCJoOm1tIGFcIn0sTlVNQkVSX0ZPUk1BVFM6e0NVUlJFTkNZX1NZTTpcIiRcIixERUNJTUFMX1NFUDpcIi5cIixHUk9VUF9TRVA6XCIsXCIsXG5QQVRURVJOUzpbe2dTaXplOjMsbGdTaXplOjMsbWF4RnJhYzozLG1pbkZyYWM6MCxtaW5JbnQ6MSxuZWdQcmU6XCItXCIsbmVnU3VmOlwiXCIscG9zUHJlOlwiXCIscG9zU3VmOlwiXCJ9LHtnU2l6ZTozLGxnU2l6ZTozLG1heEZyYWM6MixtaW5GcmFjOjIsbWluSW50OjEsbmVnUHJlOlwiLVxcdTAwYTRcIixuZWdTdWY6XCJcIixwb3NQcmU6XCJcXHUwMGE0XCIscG9zU3VmOlwiXCJ9XX0saWQ6XCJlbi11c1wiLGxvY2FsZUlEOlwiZW5fVVNcIixwbHVyYWxDYXQ6ZnVuY3Rpb24oYSxjKXt2YXIgZT1hfDAsZj1jO3Y9PT1mJiYoZj1NYXRoLm1pbihiKGEpLDMpKTtNYXRoLnBvdygxMCxmKTtyZXR1cm4gMT09ZSYmMD09Zj9cIm9uZVwiOlwib3RoZXJcIn19KX1dKSxDKFcpLnJlYWR5KGZ1bmN0aW9uKCl7ZmUoVyxBYyl9KSl9KSh3aW5kb3csZG9jdW1lbnQpOyF3aW5kb3cuYW5ndWxhci4kJGNzcCgpLm5vSW5saW5lU3R5bGUmJndpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuaGVhZCkucHJlcGVuZCgnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPkBjaGFyc2V0IFwiVVRGLThcIjtbbmdcXFxcOmNsb2FrXSxbbmctY2xvYWtdLFtkYXRhLW5nLWNsb2FrXSxbeC1uZy1jbG9ha10sLm5nLWNsb2FrLC54LW5nLWNsb2FrLC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXFxcOmZvcm17ZGlzcGxheTpibG9jazt9Lm5nLWFuaW1hdGUtc2hpbXt2aXNpYmlsaXR5OmhpZGRlbjt9Lm5nLWFuY2hvcntwb3NpdGlvbjphYnNvbHV0ZTt9PC9zdHlsZT4nKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXIubWluLmpzLm1hcFxuIiwidmFyIHdhbmFrYW5hLFxuICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfTtcblxud2FuYWthbmEgPSB3YW5ha2FuYSB8fCB7fTtcblxud2FuYWthbmEudmVyc2lvbiA9IFwiMS4zLjdcIjtcblxuaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gIGRlZmluZShcIndhbmFrYW5hXCIsIFtdLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd2FuYWthbmE7XG4gIH0pO1xufVxuXG53YW5ha2FuYS5MT1dFUkNBU0VfU1RBUlQgPSAweDYxO1xuXG53YW5ha2FuYS5MT1dFUkNBU0VfRU5EID0gMHg3QTtcblxud2FuYWthbmEuVVBQRVJDQVNFX1NUQVJUID0gMHg0MTtcblxud2FuYWthbmEuVVBQRVJDQVNFX0VORCA9IDB4NUE7XG5cbndhbmFrYW5hLkhJUkFHQU5BX1NUQVJUID0gMHgzMDQxO1xuXG53YW5ha2FuYS5ISVJBR0FOQV9FTkQgPSAweDMwOTY7XG5cbndhbmFrYW5hLktBVEFLQU5BX1NUQVJUID0gMHgzMEExO1xuXG53YW5ha2FuYS5LQVRBS0FOQV9FTkQgPSAweDMwRkE7XG5cbndhbmFrYW5hLkxPV0VSQ0FTRV9GVUxMV0lEVEhfU1RBUlQgPSAweEZGNDE7XG5cbndhbmFrYW5hLkxPV0VSQ0FTRV9GVUxMV0lEVEhfRU5EID0gMHhGRjVBO1xuXG53YW5ha2FuYS5VUFBFUkNBU0VfRlVMTFdJRFRIX1NUQVJUID0gMHhGRjIxO1xuXG53YW5ha2FuYS5VUFBFUkNBU0VfRlVMTFdJRFRIX0VORCA9IDB4RkYzQTtcblxud2FuYWthbmEuZGVmYXVsdE9wdGlvbnMgPSB7XG4gIHVzZU9ic2VsZXRlS2FuYTogZmFsc2UsXG4gIElNRU1vZGU6IGZhbHNlXG59O1xuXG4vKipcbiAqIEF1dG9tYXRpY2FsbHkgc2V0cyB1cCBhbiBpbnB1dCBmaWVsZCB0byBiZSBhbiBJTUUuXG4qL1xuXG5cbndhbmFrYW5hLmJpbmQgPSBmdW5jdGlvbihpbnB1dCkge1xuICByZXR1cm4gaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB3YW5ha2FuYS5fb25JbnB1dCk7XG59O1xuXG53YW5ha2FuYS51bmJpbmQgPSBmdW5jdGlvbihpbnB1dCkge1xuICByZXR1cm4gaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB3YW5ha2FuYS5fb25JbnB1dCk7XG59O1xuXG53YW5ha2FuYS5fb25JbnB1dCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gIHZhciBpbnB1dCwgbmV3VGV4dCwgbm9ybWFsaXplZElucHV0U3RyaW5nLCByYW5nZSwgc3RhcnRpbmdDdXJzb3IsIHN0YXJ0aW5nTGVuZ3RoO1xuICBpbnB1dCA9IGV2ZW50LnRhcmdldDtcbiAgc3RhcnRpbmdDdXJzb3IgPSBpbnB1dC5zZWxlY3Rpb25TdGFydDtcbiAgc3RhcnRpbmdMZW5ndGggPSBpbnB1dC52YWx1ZS5sZW5ndGg7XG4gIG5vcm1hbGl6ZWRJbnB1dFN0cmluZyA9IHdhbmFrYW5hLl9jb252ZXJ0RnVsbHdpZHRoQ2hhcnNUb0FTQ0lJKGlucHV0LnZhbHVlKTtcbiAgbmV3VGV4dCA9IHdhbmFrYW5hLnRvS2FuYShub3JtYWxpemVkSW5wdXRTdHJpbmcsIHtcbiAgICBJTUVNb2RlOiB0cnVlXG4gIH0pO1xuICBpZiAobm9ybWFsaXplZElucHV0U3RyaW5nICE9PSBuZXdUZXh0KSB7XG4gICAgaW5wdXQudmFsdWUgPSBuZXdUZXh0O1xuICAgIGlmICh0eXBlb2YgaW5wdXQuc2VsZWN0aW9uU3RhcnQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBpbnB1dC5zZWxlY3Rpb25TdGFydCA9IGlucHV0LnNlbGVjdGlvbkVuZCA9IGlucHV0LnZhbHVlLmxlbmd0aDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dC5jcmVhdGVUZXh0UmFuZ2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICByYW5nZSA9IGlucHV0LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpO1xuICAgICAgcmV0dXJuIHJhbmdlLnNlbGVjdCgpO1xuICAgIH1cbiAgfVxufTtcblxud2FuYWthbmEuX2V4dGVuZCA9IGZ1bmN0aW9uKHRhcmdldCwgc291cmNlKSB7XG4gIHZhciBwcm9wO1xuICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICByZXR1cm4gc291cmNlO1xuICB9XG4gIGZvciAocHJvcCBpbiBzb3VyY2UpIHtcbiAgICBpZiAoKHRhcmdldFtwcm9wXSA9PSBudWxsKSAmJiAoc291cmNlW3Byb3BdICE9IG51bGwpKSB7XG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59O1xuXG4vKipcbiAqIFRha2VzIGEgY2hhcmFjdGVyIGFuZCBhIHVuaWNvZGUgcmFuZ2UuIFJldHVybnMgdHJ1ZSBpZiB0aGUgY2hhciBpcyBpbiB0aGUgcmFuZ2UuXG4qL1xuXG5cbndhbmFrYW5hLl9pc0NoYXJJblJhbmdlID0gZnVuY3Rpb24oY2hhciwgc3RhcnQsIGVuZCkge1xuICB2YXIgY29kZTtcbiAgY29kZSA9IGNoYXIuY2hhckNvZGVBdCgwKTtcbiAgcmV0dXJuIChzdGFydCA8PSBjb2RlICYmIGNvZGUgPD0gZW5kKTtcbn07XG5cbndhbmFrYW5hLl9pc0NoYXJWb3dlbCA9IGZ1bmN0aW9uKGNoYXIsIGluY2x1ZGVZKSB7XG4gIHZhciByZWdleHA7XG4gIGlmIChpbmNsdWRlWSA9PSBudWxsKSB7XG4gICAgaW5jbHVkZVkgPSB0cnVlO1xuICB9XG4gIHJlZ2V4cCA9IGluY2x1ZGVZID8gL1thZWlvdXldLyA6IC9bYWVpb3VdLztcbiAgcmV0dXJuIGNoYXIudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCkuc2VhcmNoKHJlZ2V4cCkgIT09IC0xO1xufTtcblxud2FuYWthbmEuX2lzQ2hhckNvbnNvbmFudCA9IGZ1bmN0aW9uKGNoYXIsIGluY2x1ZGVZKSB7XG4gIHZhciByZWdleHA7XG4gIGlmIChpbmNsdWRlWSA9PSBudWxsKSB7XG4gICAgaW5jbHVkZVkgPSB0cnVlO1xuICB9XG4gIHJlZ2V4cCA9IGluY2x1ZGVZID8gL1tiY2RmZ2hqa2xtbnBxcnN0dnd4eXpdLyA6IC9bYmNkZmdoamtsbW5wcXJzdHZ3eHpdLztcbiAgcmV0dXJuIGNoYXIudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCkuc2VhcmNoKHJlZ2V4cCkgIT09IC0xO1xufTtcblxud2FuYWthbmEuX2lzQ2hhckthdGFrYW5hID0gZnVuY3Rpb24oY2hhcikge1xuICByZXR1cm4gd2FuYWthbmEuX2lzQ2hhckluUmFuZ2UoY2hhciwgd2FuYWthbmEuS0FUQUtBTkFfU1RBUlQsIHdhbmFrYW5hLktBVEFLQU5BX0VORCk7XG59O1xuXG53YW5ha2FuYS5faXNDaGFySGlyYWdhbmEgPSBmdW5jdGlvbihjaGFyKSB7XG4gIHJldHVybiB3YW5ha2FuYS5faXNDaGFySW5SYW5nZShjaGFyLCB3YW5ha2FuYS5ISVJBR0FOQV9TVEFSVCwgd2FuYWthbmEuSElSQUdBTkFfRU5EKTtcbn07XG5cbndhbmFrYW5hLl9pc0NoYXJLYW5hID0gZnVuY3Rpb24oY2hhcikge1xuICByZXR1cm4gd2FuYWthbmEuX2lzQ2hhckhpcmFnYW5hKGNoYXIpIHx8IHdhbmFrYW5hLl9pc0NoYXJLYXRha2FuYShjaGFyKTtcbn07XG5cbndhbmFrYW5hLl9pc0NoYXJOb3RLYW5hID0gZnVuY3Rpb24oY2hhcikge1xuICByZXR1cm4gIXdhbmFrYW5hLl9pc0NoYXJIaXJhZ2FuYShjaGFyKSAmJiAhd2FuYWthbmEuX2lzQ2hhckthdGFrYW5hKGNoYXIpO1xufTtcblxud2FuYWthbmEuX2NvbnZlcnRGdWxsd2lkdGhDaGFyc1RvQVNDSUkgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgdmFyIGNoYXIsIGNoYXJzLCBjb2RlLCBpLCBfaSwgX2xlbjtcbiAgY2hhcnMgPSBzdHJpbmcuc3BsaXQoXCJcIik7XG4gIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IGNoYXJzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgIGNoYXIgPSBjaGFyc1tpXTtcbiAgICBjb2RlID0gY2hhci5jaGFyQ29kZUF0KDApO1xuICAgIGlmICh3YW5ha2FuYS5faXNDaGFySW5SYW5nZShjaGFyLCB3YW5ha2FuYS5MT1dFUkNBU0VfRlVMTFdJRFRIX1NUQVJULCB3YW5ha2FuYS5MT1dFUkNBU0VfRlVMTFdJRFRIX0VORCkpIHtcbiAgICAgIGNoYXJzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlIC0gd2FuYWthbmEuTE9XRVJDQVNFX0ZVTExXSURUSF9TVEFSVCArIHdhbmFrYW5hLkxPV0VSQ0FTRV9TVEFSVCk7XG4gICAgfVxuICAgIGlmICh3YW5ha2FuYS5faXNDaGFySW5SYW5nZShjaGFyLCB3YW5ha2FuYS5VUFBFUkNBU0VfRlVMTFdJRFRIX1NUQVJULCB3YW5ha2FuYS5VUFBFUkNBU0VfRlVMTFdJRFRIX0VORCkpIHtcbiAgICAgIGNoYXJzW2ldKFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSAtIHdhbmFrYW5hLlVQUEVSQ0FTRV9GVUxMV0lEVEhfU1RBUlQgKyB3YW5ha2FuYS5VUFBFUkNBU0VfU1RBUlQpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNoYXJzLmpvaW4oXCJcIik7XG59O1xuXG53YW5ha2FuYS5fa2F0YWthbmFUb0hpcmFnYW5hID0gZnVuY3Rpb24oa2F0YSkge1xuICB2YXIgY29kZSwgaGlyYSwgaGlyYUNoYXIsIGthdGFDaGFyLCBfaSwgX2xlbiwgX3JlZjtcbiAgaGlyYSA9IFtdO1xuICBfcmVmID0ga2F0YS5zcGxpdChcIlwiKTtcbiAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAga2F0YUNoYXIgPSBfcmVmW19pXTtcbiAgICBpZiAod2FuYWthbmEuX2lzQ2hhckthdGFrYW5hKGthdGFDaGFyKSkge1xuICAgICAgY29kZSA9IGthdGFDaGFyLmNoYXJDb2RlQXQoMCk7XG4gICAgICBjb2RlICs9IHdhbmFrYW5hLkhJUkFHQU5BX1NUQVJUIC0gd2FuYWthbmEuS0FUQUtBTkFfU1RBUlQ7XG4gICAgICBoaXJhQ2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG4gICAgICBoaXJhLnB1c2goaGlyYUNoYXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaXJhLnB1c2goa2F0YUNoYXIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaGlyYS5qb2luKFwiXCIpO1xufTtcblxud2FuYWthbmEuX2hpcmFnYW5hVG9LYXRha2FuYSA9IGZ1bmN0aW9uKGhpcmEpIHtcbiAgdmFyIGNvZGUsIGhpcmFDaGFyLCBrYXRhLCBrYXRhQ2hhciwgX2ksIF9sZW4sIF9yZWY7XG4gIGthdGEgPSBbXTtcbiAgX3JlZiA9IGhpcmEuc3BsaXQoXCJcIik7XG4gIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgIGhpcmFDaGFyID0gX3JlZltfaV07XG4gICAgaWYgKHdhbmFrYW5hLl9pc0NoYXJIaXJhZ2FuYShoaXJhQ2hhcikpIHtcbiAgICAgIGNvZGUgPSBoaXJhQ2hhci5jaGFyQ29kZUF0KDApO1xuICAgICAgY29kZSArPSB3YW5ha2FuYS5LQVRBS0FOQV9TVEFSVCAtIHdhbmFrYW5hLkhJUkFHQU5BX1NUQVJUO1xuICAgICAga2F0YUNoYXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpO1xuICAgICAga2F0YS5wdXNoKGthdGFDaGFyKTtcbiAgICB9IGVsc2Uge1xuICAgICAga2F0YS5wdXNoKGhpcmFDaGFyKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGthdGEuam9pbihcIlwiKTtcbn07XG5cbndhbmFrYW5hLl9oaXJhZ2FuYVRvUm9tYWppID0gZnVuY3Rpb24oaGlyYSwgb3B0aW9ucykge1xuICB2YXIgY2h1bmssIGNodW5rU2l6ZSwgY3Vyc29yLCBnZXRDaHVuaywgbGVuLCBtYXhDaHVuaywgbmV4dENoYXJJc0RvdWJsZUNvbnNvbmFudCwgcmVzZXRDaHVua1NpemUsIHJvbWEsIHJvbWFDaGFyO1xuICBvcHRpb25zID0gd2FuYWthbmEuX2V4dGVuZChvcHRpb25zLCB3YW5ha2FuYS5kZWZhdWx0T3B0aW9ucyk7XG4gIGxlbiA9IGhpcmEubGVuZ3RoO1xuICByb21hID0gW107XG4gIGN1cnNvciA9IDA7XG4gIGNodW5rU2l6ZSA9IDA7XG4gIG1heENodW5rID0gMjtcbiAgZ2V0Q2h1bmsgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGlyYS5zdWJzdHIoY3Vyc29yLCBjaHVua1NpemUpO1xuICB9O1xuICByZXNldENodW5rU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjaHVua1NpemUgPSBNYXRoLm1pbihtYXhDaHVuaywgbGVuIC0gY3Vyc29yKTtcbiAgfTtcbiAgd2hpbGUgKGN1cnNvciA8IGxlbikge1xuICAgIHJlc2V0Q2h1bmtTaXplKCk7XG4gICAgd2hpbGUgKGNodW5rU2l6ZSA+IDApIHtcbiAgICAgIGNodW5rID0gZ2V0Q2h1bmsoKTtcbiAgICAgIGlmICh3YW5ha2FuYS5pc0thdGFrYW5hKGNodW5rKSkge1xuICAgICAgICBjaHVuayA9IHdhbmFrYW5hLl9rYXRha2FuYVRvSGlyYWdhbmEoY2h1bmspO1xuICAgICAgfVxuICAgICAgaWYgKGNodW5rLmNoYXJBdCgwKSA9PT0gXCLjgaNcIiAmJiBjaHVua1NpemUgPT09IDEgJiYgY3Vyc29yIDwgKGxlbiAtIDEpKSB7XG4gICAgICAgIG5leHRDaGFySXNEb3VibGVDb25zb25hbnQgPSB0cnVlO1xuICAgICAgICByb21hQ2hhciA9IFwiXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcm9tYUNoYXIgPSB3YW5ha2FuYS5KX3RvX1JbY2h1bmtdO1xuICAgICAgaWYgKChyb21hQ2hhciAhPSBudWxsKSAmJiBuZXh0Q2hhcklzRG91YmxlQ29uc29uYW50KSB7XG4gICAgICAgIHJvbWFDaGFyID0gcm9tYUNoYXIuY2hhckF0KDApLmNvbmNhdChyb21hQ2hhcik7XG4gICAgICAgIG5leHRDaGFySXNEb3VibGVDb25zb25hbnQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChyb21hQ2hhciAhPSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2h1bmtTaXplLS07XG4gICAgfVxuICAgIGlmIChyb21hQ2hhciA9PSBudWxsKSB7XG4gICAgICByb21hQ2hhciA9IGNodW5rO1xuICAgIH1cbiAgICByb21hLnB1c2gocm9tYUNoYXIpO1xuICAgIGN1cnNvciArPSBjaHVua1NpemUgfHwgMTtcbiAgfVxuICByZXR1cm4gcm9tYS5qb2luKFwiXCIpO1xufTtcblxud2FuYWthbmEuX3JvbWFqaVRvSGlyYWdhbmEgPSBmdW5jdGlvbihyb21hLCBvcHRpb25zKSB7XG4gIHJldHVybiB3YW5ha2FuYS5fcm9tYWppVG9LYW5hKHJvbWEsIG9wdGlvbnMsIHRydWUpO1xufTtcblxud2FuYWthbmEuX3JvbWFqaVRvS2FuYSA9IGZ1bmN0aW9uKHJvbWEsIG9wdGlvbnMsIGlnbm9yZUNhc2UpIHtcbiAgdmFyIGNodW5rLCBjaHVua0xDLCBjaHVua1NpemUsIGN1cnNvciwgZ2V0Q2h1bmssIGlzQ2hhclVwcGVyQ2FzZSwga2FuYSwga2FuYUNoYXIsIGxlbiwgbWF4Q2h1bms7XG4gIGlmIChpZ25vcmVDYXNlID09IG51bGwpIHtcbiAgICBpZ25vcmVDYXNlID0gZmFsc2U7XG4gIH1cbiAgb3B0aW9ucyA9IHdhbmFrYW5hLl9leHRlbmQob3B0aW9ucywgd2FuYWthbmEuZGVmYXVsdE9wdGlvbnMpO1xuICBsZW4gPSByb21hLmxlbmd0aDtcbiAga2FuYSA9IFtdO1xuICBjdXJzb3IgPSAwO1xuICBtYXhDaHVuayA9IDM7XG4gIGdldENodW5rID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHJvbWEuc3Vic3RyKGN1cnNvciwgY2h1bmtTaXplKTtcbiAgfTtcbiAgaXNDaGFyVXBwZXJDYXNlID0gZnVuY3Rpb24oY2hhcikge1xuICAgIHJldHVybiB3YW5ha2FuYS5faXNDaGFySW5SYW5nZShjaGFyLCB3YW5ha2FuYS5VUFBFUkNBU0VfU1RBUlQsIHdhbmFrYW5hLlVQUEVSQ0FTRV9FTkQpO1xuICB9O1xuICB3aGlsZSAoY3Vyc29yIDwgbGVuKSB7XG4gICAgY2h1bmtTaXplID0gTWF0aC5taW4obWF4Q2h1bmssIGxlbiAtIGN1cnNvcik7XG4gICAgd2hpbGUgKGNodW5rU2l6ZSA+IDApIHtcbiAgICAgIGNodW5rID0gZ2V0Q2h1bmsoKTtcbiAgICAgIGNodW5rTEMgPSBjaHVuay50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKHdhbmFrYW5hLkZPVVJfQ0hBUkFDVEVSX0VER0VfQ0FTRVMsIGNodW5rTEMpID49IDAgJiYgKGxlbiAtIGN1cnNvcikgPj0gNCkge1xuICAgICAgICBjaHVua1NpemUrKztcbiAgICAgICAgY2h1bmsgPSBnZXRDaHVuaygpO1xuICAgICAgICBjaHVua0xDID0gY2h1bmsudG9Mb3dlckNhc2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjaHVua0xDLmNoYXJBdCgwKSA9PT0gXCJuXCIpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5JTUVNb2RlICYmIGNodW5rTEMuY2hhckF0KDEpID09PSBcIidcIiAmJiBjaHVua1NpemUgPT09IDIpIHtcbiAgICAgICAgICAgIGthbmFDaGFyID0gXCLjgpNcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAod2FuYWthbmEuX2lzQ2hhckNvbnNvbmFudChjaHVua0xDLmNoYXJBdCgxKSwgZmFsc2UpICYmIHdhbmFrYW5hLl9pc0NoYXJWb3dlbChjaHVua0xDLmNoYXJBdCgyKSkpIHtcbiAgICAgICAgICAgIGNodW5rU2l6ZSA9IDE7XG4gICAgICAgICAgICBjaHVuayA9IGdldENodW5rKCk7XG4gICAgICAgICAgICBjaHVua0xDID0gY2h1bmsudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNodW5rTEMuY2hhckF0KDApICE9PSBcIm5cIiAmJiB3YW5ha2FuYS5faXNDaGFyQ29uc29uYW50KGNodW5rTEMuY2hhckF0KDApKSAmJiBjaHVuay5jaGFyQXQoMCkgPT09IGNodW5rLmNoYXJBdCgxKSkge1xuICAgICAgICAgIGNodW5rU2l6ZSA9IDE7XG4gICAgICAgICAgaWYgKHdhbmFrYW5hLl9pc0NoYXJJblJhbmdlKGNodW5rLmNoYXJBdCgwKSwgd2FuYWthbmEuVVBQRVJDQVNFX1NUQVJULCB3YW5ha2FuYS5VUFBFUkNBU0VfRU5EKSkge1xuICAgICAgICAgICAgY2h1bmtMQyA9IGNodW5rID0gXCLjg4NcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2h1bmtMQyA9IGNodW5rID0gXCLjgaNcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGthbmFDaGFyID0gd2FuYWthbmEuUl90b19KW2NodW5rTENdO1xuICAgICAgaWYgKGthbmFDaGFyICE9IG51bGwpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoY2h1bmtTaXplID09PSA0KSB7XG4gICAgICAgIGNodW5rU2l6ZSAtPSAyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2h1bmtTaXplLS07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChrYW5hQ2hhciA9PSBudWxsKSB7XG4gICAgICBjaHVuayA9IHdhbmFrYW5hLl9jb252ZXJ0UHVuY3R1YXRpb24oY2h1bmspO1xuICAgICAga2FuYUNoYXIgPSBjaHVuaztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMudXNlT2JzZWxldGVLYW5hIDogdm9pZCAwKSB7XG4gICAgICBpZiAoY2h1bmtMQyA9PT0gXCJ3aVwiKSB7XG4gICAgICAgIGthbmFDaGFyID0gXCLjgpBcIjtcbiAgICAgIH1cbiAgICAgIGlmIChjaHVua0xDID09PSBcIndlXCIpIHtcbiAgICAgICAga2FuYUNoYXIgPSBcIuOCkVwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5JTUVNb2RlICYmIGNodW5rTEMuY2hhckF0KDApID09PSBcIm5cIikge1xuICAgICAgaWYgKHJvbWEuY2hhckF0KGN1cnNvciArIDEpLnRvTG93ZXJDYXNlKCkgPT09IFwieVwiICYmIHdhbmFrYW5hLl9pc0NoYXJWb3dlbChyb21hLmNoYXJBdChjdXJzb3IgKyAyKSkgPT09IGZhbHNlIHx8IGN1cnNvciA9PT0gKGxlbiAtIDEpIHx8IHdhbmFrYW5hLmlzS2FuYShyb21hLmNoYXJBdChjdXJzb3IgKyAxKSkpIHtcbiAgICAgICAga2FuYUNoYXIgPSBjaHVuay5jaGFyQXQoMCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaWdub3JlQ2FzZSkge1xuICAgICAgaWYgKGlzQ2hhclVwcGVyQ2FzZShjaHVuay5jaGFyQXQoMCkpKSB7XG4gICAgICAgIGthbmFDaGFyID0gd2FuYWthbmEuX2hpcmFnYW5hVG9LYXRha2FuYShrYW5hQ2hhcik7XG4gICAgICB9XG4gICAgfVxuICAgIGthbmEucHVzaChrYW5hQ2hhcik7XG4gICAgY3Vyc29yICs9IGNodW5rU2l6ZSB8fCAxO1xuICB9XG4gIHJldHVybiBrYW5hLmpvaW4oXCJcIik7XG59O1xuXG53YW5ha2FuYS5fY29udmVydFB1bmN0dWF0aW9uID0gZnVuY3Rpb24oaW5wdXQsIG9wdGlvbnMpIHtcbiAgaWYgKGlucHV0ID09PSAn44CAJykge1xuICAgIHJldHVybiAnICc7XG4gIH1cbiAgaWYgKGlucHV0ID09PSAnLScpIHtcbiAgICByZXR1cm4gJ+ODvCc7XG4gIH1cbiAgcmV0dXJuIGlucHV0O1xufTtcblxuLyoqXG4qIFJldHVybnMgdHJ1ZSBpZiBpbnB1dCBpcyBlbnRpcmVseSBoaXJhZ2FuYS5cbiovXG5cblxud2FuYWthbmEuaXNIaXJhZ2FuYSA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gIHZhciBjaGFycztcbiAgY2hhcnMgPSBpbnB1dC5zcGxpdChcIlwiKTtcbiAgcmV0dXJuIGNoYXJzLmV2ZXJ5KHdhbmFrYW5hLl9pc0NoYXJIaXJhZ2FuYSk7XG59O1xuXG53YW5ha2FuYS5pc0thdGFrYW5hID0gZnVuY3Rpb24oaW5wdXQpIHtcbiAgdmFyIGNoYXJzO1xuICBjaGFycyA9IGlucHV0LnNwbGl0KFwiXCIpO1xuICByZXR1cm4gY2hhcnMuZXZlcnkod2FuYWthbmEuX2lzQ2hhckthdGFrYW5hKTtcbn07XG5cbndhbmFrYW5hLmlzS2FuYSA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gIHZhciBjaGFycztcbiAgY2hhcnMgPSBpbnB1dC5zcGxpdChcIlwiKTtcbiAgcmV0dXJuIGNoYXJzLmV2ZXJ5KGZ1bmN0aW9uKGNoYXIpIHtcbiAgICByZXR1cm4gKHdhbmFrYW5hLmlzSGlyYWdhbmEoY2hhcikpIHx8ICh3YW5ha2FuYS5pc0thdGFrYW5hKGNoYXIpKTtcbiAgfSk7XG59O1xuXG53YW5ha2FuYS5pc1JvbWFqaSA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gIHZhciBjaGFycztcbiAgY2hhcnMgPSBpbnB1dC5zcGxpdChcIlwiKTtcbiAgcmV0dXJuIGNoYXJzLmV2ZXJ5KGZ1bmN0aW9uKGNoYXIpIHtcbiAgICByZXR1cm4gKCF3YW5ha2FuYS5pc0hpcmFnYW5hKGNoYXIpKSAmJiAoIXdhbmFrYW5hLmlzS2F0YWthbmEoY2hhcikpO1xuICB9KTtcbn07XG5cbndhbmFrYW5hLnRvSGlyYWdhbmEgPSBmdW5jdGlvbihpbnB1dCwgb3B0aW9ucykge1xuICBpZiAod2FuYWthbmEuaXNSb21hamkoaW5wdXQpKSB7XG4gICAgcmV0dXJuIGlucHV0ID0gd2FuYWthbmEuX3JvbWFqaVRvSGlyYWdhbmEoaW5wdXQsIG9wdGlvbnMpO1xuICB9XG4gIGlmICh3YW5ha2FuYS5pc0thdGFrYW5hKGlucHV0KSkge1xuICAgIHJldHVybiBpbnB1dCA9IHdhbmFrYW5hLl9rYXRha2FuYVRvSGlyYWdhbmEoaW5wdXQsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiBpbnB1dDtcbn07XG5cbndhbmFrYW5hLnRvS2F0YWthbmEgPSBmdW5jdGlvbihpbnB1dCwgb3B0aW9ucykge1xuICBpZiAod2FuYWthbmEuaXNIaXJhZ2FuYShpbnB1dCkpIHtcbiAgICByZXR1cm4gaW5wdXQgPSB3YW5ha2FuYS5faGlyYWdhbmFUb0thdGFrYW5hKGlucHV0LCBvcHRpb25zKTtcbiAgfVxuICBpZiAod2FuYWthbmEuaXNSb21hamkoaW5wdXQpKSB7XG4gICAgaW5wdXQgPSB3YW5ha2FuYS5fcm9tYWppVG9IaXJhZ2FuYShpbnB1dCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGlucHV0ID0gd2FuYWthbmEuX2hpcmFnYW5hVG9LYXRha2FuYShpbnB1dCwgb3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIGlucHV0O1xufTtcblxud2FuYWthbmEudG9LYW5hID0gZnVuY3Rpb24oaW5wdXQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGlucHV0ID0gd2FuYWthbmEuX3JvbWFqaVRvS2FuYShpbnB1dCwgb3B0aW9ucyk7XG59O1xuXG53YW5ha2FuYS50b1JvbWFqaSA9IGZ1bmN0aW9uKGlucHV0LCBvcHRpb25zKSB7XG4gIHJldHVybiBpbnB1dCA9IHdhbmFrYW5hLl9oaXJhZ2FuYVRvUm9tYWppKGlucHV0KTtcbn07XG5cbndhbmFrYW5hLlJfdG9fSiA9IHtcbiAgYTogJ+OBgicsXG4gIGk6ICfjgYQnLFxuICB1OiAn44GGJyxcbiAgZTogJ+OBiCcsXG4gIG86ICfjgYonLFxuICB5aTogJ+OBhCcsXG4gIHd1OiAn44GGJyxcbiAgd2h1OiAn44GGJyxcbiAgeGE6ICfjgYEnLFxuICB4aTogJ+OBgycsXG4gIHh1OiAn44GFJyxcbiAgeGU6ICfjgYcnLFxuICB4bzogJ+OBiScsXG4gIHh5aTogJ+OBgycsXG4gIHh5ZTogJ+OBhycsXG4gIHllOiAn44GE44GHJyxcbiAgd2hhOiAn44GG44GBJyxcbiAgd2hpOiAn44GG44GDJyxcbiAgd2hlOiAn44GG44GHJyxcbiAgd2hvOiAn44GG44GJJyxcbiAgd2k6ICfjgYbjgYMnLFxuICB3ZTogJ+OBhuOBhycsXG4gIHZhOiAn44KU44GBJyxcbiAgdmk6ICfjgpTjgYMnLFxuICB2dTogJ+OClCcsXG4gIHZlOiAn44KU44GHJyxcbiAgdm86ICfjgpTjgYknLFxuICB2eWE6ICfjgpTjgoMnLFxuICB2eWk6ICfjgpTjgYMnLFxuICB2eXU6ICfjgpTjgoUnLFxuICB2eWU6ICfjgpTjgYcnLFxuICB2eW86ICfjgpTjgocnLFxuICBrYTogJ+OBiycsXG4gIGtpOiAn44GNJyxcbiAga3U6ICfjgY8nLFxuICBrZTogJ+OBkScsXG4gIGtvOiAn44GTJyxcbiAgbGthOiAn44O1JyxcbiAgbGtlOiAn44O2JyxcbiAgeGthOiAn44O1JyxcbiAgeGtlOiAn44O2JyxcbiAga3lhOiAn44GN44KDJyxcbiAga3lpOiAn44GN44GDJyxcbiAga3l1OiAn44GN44KFJyxcbiAga3llOiAn44GN44GHJyxcbiAga3lvOiAn44GN44KHJyxcbiAgY2E6ICfjgYsnLFxuICBjaTogJ+OBjScsXG4gIGN1OiAn44GPJyxcbiAgY2U6ICfjgZEnLFxuICBjbzogJ+OBkycsXG4gIGxjYTogJ+ODtScsXG4gIGxjZTogJ+ODticsXG4gIHhjYTogJ+ODtScsXG4gIHhjZTogJ+ODticsXG4gIHF5YTogJ+OBj+OCgycsXG4gIHF5dTogJ+OBj+OChScsXG4gIHF5bzogJ+OBj+OChycsXG4gIHF3YTogJ+OBj+OBgScsXG4gIHF3aTogJ+OBj+OBgycsXG4gIHF3dTogJ+OBj+OBhScsXG4gIHF3ZTogJ+OBj+OBhycsXG4gIHF3bzogJ+OBj+OBiScsXG4gIHFhOiAn44GP44GBJyxcbiAgcWk6ICfjgY/jgYMnLFxuICBxZTogJ+OBj+OBhycsXG4gIHFvOiAn44GP44GJJyxcbiAga3dhOiAn44GP44GBJyxcbiAgcXlpOiAn44GP44GDJyxcbiAgcXllOiAn44GP44GHJyxcbiAgZ2E6ICfjgYwnLFxuICBnaTogJ+OBjicsXG4gIGd1OiAn44GQJyxcbiAgZ2U6ICfjgZInLFxuICBnbzogJ+OBlCcsXG4gIGd5YTogJ+OBjuOCgycsXG4gIGd5aTogJ+OBjuOBgycsXG4gIGd5dTogJ+OBjuOChScsXG4gIGd5ZTogJ+OBjuOBhycsXG4gIGd5bzogJ+OBjuOChycsXG4gIGd3YTogJ+OBkOOBgScsXG4gIGd3aTogJ+OBkOOBgycsXG4gIGd3dTogJ+OBkOOBhScsXG4gIGd3ZTogJ+OBkOOBhycsXG4gIGd3bzogJ+OBkOOBiScsXG4gIHNhOiAn44GVJyxcbiAgc2k6ICfjgZcnLFxuICBzaGk6ICfjgZcnLFxuICBzdTogJ+OBmScsXG4gIHNlOiAn44GbJyxcbiAgc286ICfjgZ0nLFxuICB6YTogJ+OBlicsXG4gIHppOiAn44GYJyxcbiAgenU6ICfjgZonLFxuICB6ZTogJ+OBnCcsXG4gIHpvOiAn44GeJyxcbiAgamk6ICfjgZgnLFxuICBzeWE6ICfjgZfjgoMnLFxuICBzeWk6ICfjgZfjgYMnLFxuICBzeXU6ICfjgZfjgoUnLFxuICBzeWU6ICfjgZfjgYcnLFxuICBzeW86ICfjgZfjgocnLFxuICBzaGE6ICfjgZfjgoMnLFxuICBzaHU6ICfjgZfjgoUnLFxuICBzaGU6ICfjgZfjgYcnLFxuICBzaG86ICfjgZfjgocnLFxuICBzaHlhOiAn44GX44KDJyxcbiAgc2h5dTogJ+OBl+OChScsXG4gIHNoeWU6ICfjgZfjgYcnLFxuICBzaHlvOiAn44GX44KHJyxcbiAgc3dhOiAn44GZ44GBJyxcbiAgc3dpOiAn44GZ44GDJyxcbiAgc3d1OiAn44GZ44GFJyxcbiAgc3dlOiAn44GZ44GHJyxcbiAgc3dvOiAn44GZ44GJJyxcbiAgenlhOiAn44GY44KDJyxcbiAgenlpOiAn44GY44GDJyxcbiAgenl1OiAn44GY44KFJyxcbiAgenllOiAn44GY44GHJyxcbiAgenlvOiAn44GY44KHJyxcbiAgamE6ICfjgZjjgoMnLFxuICBqdTogJ+OBmOOChScsXG4gIGplOiAn44GY44GHJyxcbiAgam86ICfjgZjjgocnLFxuICBqeWE6ICfjgZjjgoMnLFxuICBqeWk6ICfjgZjjgYMnLFxuICBqeXU6ICfjgZjjgoUnLFxuICBqeWU6ICfjgZjjgYcnLFxuICBqeW86ICfjgZjjgocnLFxuICB0YTogJ+OBnycsXG4gIHRpOiAn44GhJyxcbiAgdHU6ICfjgaQnLFxuICB0ZTogJ+OBpicsXG4gIHRvOiAn44GoJyxcbiAgY2hpOiAn44GhJyxcbiAgdHN1OiAn44GkJyxcbiAgbHR1OiAn44GjJyxcbiAgeHR1OiAn44GjJyxcbiAgdHlhOiAn44Gh44KDJyxcbiAgdHlpOiAn44Gh44GDJyxcbiAgdHl1OiAn44Gh44KFJyxcbiAgdHllOiAn44Gh44GHJyxcbiAgdHlvOiAn44Gh44KHJyxcbiAgY2hhOiAn44Gh44KDJyxcbiAgY2h1OiAn44Gh44KFJyxcbiAgY2hlOiAn44Gh44GHJyxcbiAgY2hvOiAn44Gh44KHJyxcbiAgY3lhOiAn44Gh44KDJyxcbiAgY3lpOiAn44Gh44GDJyxcbiAgY3l1OiAn44Gh44KFJyxcbiAgY3llOiAn44Gh44GHJyxcbiAgY3lvOiAn44Gh44KHJyxcbiAgY2h5YTogJ+OBoeOCgycsXG4gIGNoeXU6ICfjgaHjgoUnLFxuICBjaHllOiAn44Gh44GHJyxcbiAgY2h5bzogJ+OBoeOChycsXG4gIHRzYTogJ+OBpOOBgScsXG4gIHRzaTogJ+OBpOOBgycsXG4gIHRzZTogJ+OBpOOBhycsXG4gIHRzbzogJ+OBpOOBiScsXG4gIHRoYTogJ+OBpuOCgycsXG4gIHRoaTogJ+OBpuOBgycsXG4gIHRodTogJ+OBpuOChScsXG4gIHRoZTogJ+OBpuOBhycsXG4gIHRobzogJ+OBpuOChycsXG4gIHR3YTogJ+OBqOOBgScsXG4gIHR3aTogJ+OBqOOBgycsXG4gIHR3dTogJ+OBqOOBhScsXG4gIHR3ZTogJ+OBqOOBhycsXG4gIHR3bzogJ+OBqOOBiScsXG4gIGRhOiAn44GgJyxcbiAgZGk6ICfjgaInLFxuICBkdTogJ+OBpScsXG4gIGRlOiAn44GnJyxcbiAgXCJkb1wiOiAn44GpJyxcbiAgZHlhOiAn44Gi44KDJyxcbiAgZHlpOiAn44Gi44GDJyxcbiAgZHl1OiAn44Gi44KFJyxcbiAgZHllOiAn44Gi44GHJyxcbiAgZHlvOiAn44Gi44KHJyxcbiAgZGhhOiAn44Gn44KDJyxcbiAgZGhpOiAn44Gn44GDJyxcbiAgZGh1OiAn44Gn44KFJyxcbiAgZGhlOiAn44Gn44GHJyxcbiAgZGhvOiAn44Gn44KHJyxcbiAgZHdhOiAn44Gp44GBJyxcbiAgZHdpOiAn44Gp44GDJyxcbiAgZHd1OiAn44Gp44GFJyxcbiAgZHdlOiAn44Gp44GHJyxcbiAgZHdvOiAn44Gp44GJJyxcbiAgbmE6ICfjgaonLFxuICBuaTogJ+OBqycsXG4gIG51OiAn44GsJyxcbiAgbmU6ICfjga0nLFxuICBubzogJ+OBricsXG4gIG55YTogJ+OBq+OCgycsXG4gIG55aTogJ+OBq+OBgycsXG4gIG55dTogJ+OBq+OChScsXG4gIG55ZTogJ+OBq+OBhycsXG4gIG55bzogJ+OBq+OChycsXG4gIGhhOiAn44GvJyxcbiAgaGk6ICfjgbInLFxuICBodTogJ+OBtScsXG4gIGhlOiAn44G4JyxcbiAgaG86ICfjgbsnLFxuICBmdTogJ+OBtScsXG4gIGh5YTogJ+OBsuOCgycsXG4gIGh5aTogJ+OBsuOBgycsXG4gIGh5dTogJ+OBsuOChScsXG4gIGh5ZTogJ+OBsuOBhycsXG4gIGh5bzogJ+OBsuOChycsXG4gIGZ5YTogJ+OBteOCgycsXG4gIGZ5dTogJ+OBteOChScsXG4gIGZ5bzogJ+OBteOChycsXG4gIGZ3YTogJ+OBteOBgScsXG4gIGZ3aTogJ+OBteOBgycsXG4gIGZ3dTogJ+OBteOBhScsXG4gIGZ3ZTogJ+OBteOBhycsXG4gIGZ3bzogJ+OBteOBiScsXG4gIGZhOiAn44G144GBJyxcbiAgZmk6ICfjgbXjgYMnLFxuICBmZTogJ+OBteOBhycsXG4gIGZvOiAn44G144GJJyxcbiAgZnlpOiAn44G144GDJyxcbiAgZnllOiAn44G144GHJyxcbiAgYmE6ICfjgbAnLFxuICBiaTogJ+OBsycsXG4gIGJ1OiAn44G2JyxcbiAgYmU6ICfjgbknLFxuICBibzogJ+OBvCcsXG4gIGJ5YTogJ+OBs+OCgycsXG4gIGJ5aTogJ+OBs+OBgycsXG4gIGJ5dTogJ+OBs+OChScsXG4gIGJ5ZTogJ+OBs+OBhycsXG4gIGJ5bzogJ+OBs+OChycsXG4gIHBhOiAn44GxJyxcbiAgcGk6ICfjgbQnLFxuICBwdTogJ+OBtycsXG4gIHBlOiAn44G6JyxcbiAgcG86ICfjgb0nLFxuICBweWE6ICfjgbTjgoMnLFxuICBweWk6ICfjgbTjgYMnLFxuICBweXU6ICfjgbTjgoUnLFxuICBweWU6ICfjgbTjgYcnLFxuICBweW86ICfjgbTjgocnLFxuICBtYTogJ+OBvicsXG4gIG1pOiAn44G/JyxcbiAgbXU6ICfjgoAnLFxuICBtZTogJ+OCgScsXG4gIG1vOiAn44KCJyxcbiAgbXlhOiAn44G/44KDJyxcbiAgbXlpOiAn44G/44GDJyxcbiAgbXl1OiAn44G/44KFJyxcbiAgbXllOiAn44G/44GHJyxcbiAgbXlvOiAn44G/44KHJyxcbiAgeWE6ICfjgoQnLFxuICB5dTogJ+OChicsXG4gIHlvOiAn44KIJyxcbiAgeHlhOiAn44KDJyxcbiAgeHl1OiAn44KFJyxcbiAgeHlvOiAn44KHJyxcbiAgcmE6ICfjgoknLFxuICByaTogJ+OCiicsXG4gIHJ1OiAn44KLJyxcbiAgcmU6ICfjgownLFxuICBybzogJ+OCjScsXG4gIHJ5YTogJ+OCiuOCgycsXG4gIHJ5aTogJ+OCiuOBgycsXG4gIHJ5dTogJ+OCiuOChScsXG4gIHJ5ZTogJ+OCiuOBhycsXG4gIHJ5bzogJ+OCiuOChycsXG4gIGxhOiAn44KJJyxcbiAgbGk6ICfjgoonLFxuICBsdTogJ+OCiycsXG4gIGxlOiAn44KMJyxcbiAgbG86ICfjgo0nLFxuICBseWE6ICfjgorjgoMnLFxuICBseWk6ICfjgorjgYMnLFxuICBseXU6ICfjgorjgoUnLFxuICBseWU6ICfjgorjgYcnLFxuICBseW86ICfjgorjgocnLFxuICB3YTogJ+OCjycsXG4gIHdvOiAn44KSJyxcbiAgbHdlOiAn44KOJyxcbiAgeHdhOiAn44KOJyxcbiAgbjogJ+OCkycsXG4gIG5uOiAn44KTJyxcbiAgJ24gJzogJ+OCkycsXG4gIHhuOiAn44KTJyxcbiAgbHRzdTogJ+OBoydcbn07XG5cbndhbmFrYW5hLkZPVVJfQ0hBUkFDVEVSX0VER0VfQ0FTRVMgPSBbJ2x0cycsICdjaHknLCAnc2h5J107XG5cbndhbmFrYW5hLkpfdG9fUiA9IHtcbiAg44GCOiAnYScsXG4gIOOBhDogJ2knLFxuICDjgYY6ICd1JyxcbiAg44GIOiAnZScsXG4gIOOBijogJ28nLFxuICDjgpTjgYE6ICd2YScsXG4gIOOClOOBgzogJ3ZpJyxcbiAg44KUOiAndnUnLFxuICDjgpTjgYc6ICd2ZScsXG4gIOOClOOBiTogJ3ZvJyxcbiAg44GLOiAna2EnLFxuICDjgY06ICdraScsXG4gIOOBjeOCgzogJ2t5YScsXG4gIOOBjeOBgzogJ2t5aScsXG4gIOOBjeOChTogJ2t5dScsXG4gIOOBjzogJ2t1JyxcbiAg44GROiAna2UnLFxuICDjgZM6ICdrbycsXG4gIOOBjDogJ2dhJyxcbiAg44GOOiAnZ2knLFxuICDjgZA6ICdndScsXG4gIOOBkjogJ2dlJyxcbiAg44GUOiAnZ28nLFxuICDjgY7jgoM6ICdneWEnLFxuICDjgY7jgYM6ICdneWknLFxuICDjgY7jgoU6ICdneXUnLFxuICDjgY7jgYc6ICdneWUnLFxuICDjgY7jgoc6ICdneW8nLFxuICDjgZU6ICdzYScsXG4gIOOBmTogJ3N1JyxcbiAg44GbOiAnc2UnLFxuICDjgZ06ICdzbycsXG4gIOOBljogJ3phJyxcbiAg44GaOiAnenUnLFxuICDjgZw6ICd6ZScsXG4gIOOBnjogJ3pvJyxcbiAg44GXOiAnc2hpJyxcbiAg44GX44KDOiAnc2hhJyxcbiAg44GX44KFOiAnc2h1JyxcbiAg44GX44KHOiAnc2hvJyxcbiAg44GYOiAnamknLFxuICDjgZjjgoM6ICdqYScsXG4gIOOBmOOChTogJ2p1JyxcbiAg44GY44KHOiAnam8nLFxuICDjgZ86ICd0YScsXG4gIOOBoTogJ2NoaScsXG4gIOOBoeOCgzogJ2NoYScsXG4gIOOBoeOChTogJ2NodScsXG4gIOOBoeOChzogJ2NobycsXG4gIOOBpDogJ3RzdScsXG4gIOOBpjogJ3RlJyxcbiAg44GoOiAndG8nLFxuICDjgaA6ICdkYScsXG4gIOOBojogJ2RpJyxcbiAg44GlOiAnZHUnLFxuICDjgac6ICdkZScsXG4gIOOBqTogJ2RvJyxcbiAg44GqOiAnbmEnLFxuICDjgas6ICduaScsXG4gIOOBq+OCgzogJ255YScsXG4gIOOBq+OChTogJ255dScsXG4gIOOBq+OChzogJ255bycsXG4gIOOBrDogJ251JyxcbiAg44GtOiAnbmUnLFxuICDjga46ICdubycsXG4gIOOBrzogJ2hhJyxcbiAg44GyOiAnaGknLFxuICDjgbU6ICdmdScsXG4gIOOBuDogJ2hlJyxcbiAg44G7OiAnaG8nLFxuICDjgbLjgoM6ICdoeWEnLFxuICDjgbLjgoU6ICdoeXUnLFxuICDjgbLjgoc6ICdoeW8nLFxuICDjgbXjgYE6ICdmYScsXG4gIOOBteOBgzogJ2ZpJyxcbiAg44G144GHOiAnZmUnLFxuICDjgbXjgYk6ICdmbycsXG4gIOOBsDogJ2JhJyxcbiAg44GzOiAnYmknLFxuICDjgbY6ICdidScsXG4gIOOBuTogJ2JlJyxcbiAg44G8OiAnYm8nLFxuICDjgbPjgoM6ICdieWEnLFxuICDjgbPjgoU6ICdieXUnLFxuICDjgbPjgoc6ICdieW8nLFxuICDjgbE6ICdwYScsXG4gIOOBtDogJ3BpJyxcbiAg44G3OiAncHUnLFxuICDjgbo6ICdwZScsXG4gIOOBvTogJ3BvJyxcbiAg44G044KDOiAncHlhJyxcbiAg44G044KFOiAncHl1JyxcbiAg44G044KHOiAncHlvJyxcbiAg44G+OiAnbWEnLFxuICDjgb86ICdtaScsXG4gIOOCgDogJ211JyxcbiAg44KBOiAnbWUnLFxuICDjgoI6ICdtbycsXG4gIOOBv+OCgzogJ215YScsXG4gIOOBv+OChTogJ215dScsXG4gIOOBv+OChzogJ215bycsXG4gIOOChDogJ3lhJyxcbiAg44KGOiAneXUnLFxuICDjgog6ICd5bycsXG4gIOOCiTogJ3JhJyxcbiAg44KKOiAncmknLFxuICDjgos6ICdydScsXG4gIOOCjDogJ3JlJyxcbiAg44KNOiAncm8nLFxuICDjgorjgoM6ICdyeWEnLFxuICDjgorjgoU6ICdyeXUnLFxuICDjgorjgoc6ICdyeW8nLFxuICDjgo86ICd3YScsXG4gIOOCkjogJ3dvJyxcbiAg44KTOiAnbicsXG4gIOOCkDogJ3dpJyxcbiAg44KROiAnd2UnLFxuICDjgY3jgYc6ICdreWUnLFxuICDjgY3jgoc6ICdreW8nLFxuICDjgZjjgYM6ICdqeWknLFxuICDjgZjjgYc6ICdqeWUnLFxuICDjgaHjgYM6ICdjeWknLFxuICDjgaHjgYc6ICdjaGUnLFxuICDjgbLjgYM6ICdoeWknLFxuICDjgbLjgYc6ICdoeWUnLFxuICDjgbPjgYM6ICdieWknLFxuICDjgbPjgYc6ICdieWUnLFxuICDjgbTjgYM6ICdweWknLFxuICDjgbTjgYc6ICdweWUnLFxuICDjgb/jgYc6ICdteWUnLFxuICDjgb/jgYM6ICdteWknLFxuICDjgorjgYM6ICdyeWknLFxuICDjgorjgYc6ICdyeWUnLFxuICDjgavjgYM6ICdueWknLFxuICDjgavjgYc6ICdueWUnLFxuICDjgZfjgYM6ICdzeWknLFxuICDjgZfjgYc6ICdzaGUnLFxuICDjgYTjgYc6ICd5ZScsXG4gIOOBhuOBgTogJ3doYScsXG4gIOOBhuOBiTogJ3dobycsXG4gIOOBhuOBgzogJ3dpJyxcbiAg44GG44GHOiAnd2UnLFxuICDjgpTjgoM6ICd2eWEnLFxuICDjgpTjgoU6ICd2eXUnLFxuICDjgpTjgoc6ICd2eW8nLFxuICDjgZnjgYE6ICdzd2EnLFxuICDjgZnjgYM6ICdzd2knLFxuICDjgZnjgYU6ICdzd3UnLFxuICDjgZnjgYc6ICdzd2UnLFxuICDjgZnjgYk6ICdzd28nLFxuICDjgY/jgoM6ICdxeWEnLFxuICDjgY/jgoU6ICdxeXUnLFxuICDjgY/jgoc6ICdxeW8nLFxuICDjgY/jgYE6ICdxd2EnLFxuICDjgY/jgYM6ICdxd2knLFxuICDjgY/jgYU6ICdxd3UnLFxuICDjgY/jgYc6ICdxd2UnLFxuICDjgY/jgYk6ICdxd28nLFxuICDjgZDjgYE6ICdnd2EnLFxuICDjgZDjgYM6ICdnd2knLFxuICDjgZDjgYU6ICdnd3UnLFxuICDjgZDjgYc6ICdnd2UnLFxuICDjgZDjgYk6ICdnd28nLFxuICDjgaTjgYE6ICd0c2EnLFxuICDjgaTjgYM6ICd0c2knLFxuICDjgaTjgYc6ICd0c2UnLFxuICDjgaTjgYk6ICd0c28nLFxuICDjgabjgoM6ICd0aGEnLFxuICDjgabjgYM6ICd0aGknLFxuICDjgabjgoU6ICd0aHUnLFxuICDjgabjgYc6ICd0aGUnLFxuICDjgabjgoc6ICd0aG8nLFxuICDjgajjgYE6ICd0d2EnLFxuICDjgajjgYM6ICd0d2knLFxuICDjgajjgYU6ICd0d3UnLFxuICDjgajjgYc6ICd0d2UnLFxuICDjgajjgYk6ICd0d28nLFxuICDjgaLjgoM6ICdkeWEnLFxuICDjgaLjgYM6ICdkeWknLFxuICDjgaLjgoU6ICdkeXUnLFxuICDjgaLjgYc6ICdkeWUnLFxuICDjgaLjgoc6ICdkeW8nLFxuICDjgafjgoM6ICdkaGEnLFxuICDjgafjgYM6ICdkaGknLFxuICDjgafjgoU6ICdkaHUnLFxuICDjgafjgYc6ICdkaGUnLFxuICDjgafjgoc6ICdkaG8nLFxuICDjganjgYE6ICdkd2EnLFxuICDjganjgYM6ICdkd2knLFxuICDjganjgYU6ICdkd3UnLFxuICDjganjgYc6ICdkd2UnLFxuICDjganjgYk6ICdkd28nLFxuICDjgbXjgYU6ICdmd3UnLFxuICDjgbXjgoM6ICdmeWEnLFxuICDjgbXjgoU6ICdmeXUnLFxuICDjgbXjgoc6ICdmeW8nLFxuICDjgYE6ICdhJyxcbiAg44GDOiAnaScsXG4gIOOBhzogJ2UnLFxuICDjgYU6ICd1JyxcbiAg44GJOiAnbycsXG4gIOOCgzogJ3lhJyxcbiAg44KFOiAneXUnLFxuICDjgoc6ICd5bycsXG4gIOOBozogJycsXG4gIOOClTogJ2thJyxcbiAg44KWOiAna2EnLFxuICDjgo46ICd3YScsXG4gICfjgIAnOiAnICcsXG4gIOOCk+OBgjogJ25cXCdhJyxcbiAg44KT44GEOiAnblxcJ2knLFxuICDjgpPjgYY6ICduXFwndScsXG4gIOOCk+OBiDogJ25cXCdlJyxcbiAg44KT44GKOiAnblxcJ28nLFxuICDjgpPjgoQ6ICduXFwneWEnLFxuICDjgpPjgoY6ICduXFwneXUnLFxuICDjgpPjgog6ICduXFwneW8nXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHdhbmFrYW5hO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciB3YW5ha2FuYSA9IHJlcXVpcmUoXCIuLi9saWIvd2FuYWthbmEuanNcIik7XG5cbnZhciBRdWl6Q29udHJvbGxlciA9IGZ1bmN0aW9uKCRyb290U2NvcGUsIFByb2dyZXNzaW9uLCBDb25qdWdhdGlvblNlcnZpY2UpIHtcblx0XG5cdHZhciB2bSA9IHRoaXM7XG5cbiAgICB2YXIgcHJvZ3Jlc3Npb24gPSBuZXcgUHJvZ3Jlc3Npb24uU2VxdWVuY2UoQ29uanVnYXRpb25TZXJ2aWNlLmFsbCgpLCAzKTtcblxuXHRhbmd1bGFyLmV4dGVuZCh2bSwge1xuXG4gICAgICAgIHF1ZXN0aW9ucyA6IHByb2dyZXNzaW9uLFxuICAgICAgICBhbnN3ZXJlZCA6IGZhbHNlLFxuICAgICAgICBzdGF0ZSA6IFwiXCIsXG4gICAgICAgIHVzZXJJbnB1dCA6IFwiXCIsXG5cbiAgICAgICAgYXR0ZW1wdCA6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICBpZih2bS5xdWVzdGlvbnMuZ2V0Q3VycmVudCgpLmltZSkge1xuICAgICAgICAgICAgICAgIHZtLnVzZXJJbnB1dCA9IHdhbmFrYW5hLnRvS2FuYSh2bS51c2VySW5wdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih2bS5jaGVja0Fuc3dlcih2bS51c2VySW5wdXQpKXtcbiAgICAgICAgICAgICAgICB2bS5zdGF0ZSA9IFwiaGFzLXN1Y2Nlc3NcIjtcbiAgICAgICAgICAgICAgICB2bS5hbnN3ZXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZtLnN0YXRlID0gXCJoYXMtZXJyb3JcIjtcbiAgICAgICAgICAgICAgICB2bS5hbnN3ZXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcblxuICAgICAgICBuZXh0IDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIGlmKHZtLnF1ZXN0aW9ucy5uZXh0KCkpe1xuXG4gICAgICAgICAgICAgICAgdm0uYW5zd2VyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2bS5zdGF0ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgdm0udXNlcklucHV0ID0gXCJcIjtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHZtLnF1aXpGaW5pc2hlZCgpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcblxuICAgICAgICBjaGVja0Fuc3dlciA6IGZ1bmN0aW9uKGFucykge1xuICAgICAgICAgICAgcmV0dXJuIENvbmp1Z2F0aW9uU2VydmljZS5jaGVja0Fuc3dlcihcbiAgICAgICAgICAgICAgICB2bS5xdWVzdGlvbnMuZ2V0Q3VycmVudCgpLCBcbiAgICAgICAgICAgICAgICB2bS51c2VySW5wdXRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Q3VycmVudCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZtLnF1ZXN0aW9ucy5nZXRDdXJyZW50KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcXVpekZpbmlzaGVkIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwic2xpZGUtZmluaXNoZWRcIik7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgJHJvb3RTY29wZS5maW5pc2hlZCA9IHRydWU7XG5cbn07XG5cbmFuZ3VsYXIubW9kdWxlKFwiYXBwLnF1aXpcIikuY29udHJvbGxlcihcIlF1aXpDb250cm9sbGVyXCIsIFF1aXpDb250cm9sbGVyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBRdWl6Q29udHJvbGxlcjsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIFF1aXpEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkFDXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy9wYXJ0aWFscy9xdWl6Lmh0bWwnXG4gICAgfVxuXG59O1xuXG5hbmd1bGFyLm1vZHVsZShcImFwcC5xdWl6XCIpLmRpcmVjdGl2ZShcIm5nUXVpelwiLCBRdWl6RGlyZWN0aXZlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBRdWl6RGlyZWN0aXZlOyIsImFuZ3VsYXIubW9kdWxlKFwiYXBwLnF1aXpcIiwgW10pO1xuXG5tb2R1bGUuZXhwb3J0cy5RdWl6Q29udHJvbGxlciA9IHJlcXVpcmUoXCIuL2NvbnRyb2xsZXJcIik7XG5tb2R1bGUuZXhwb3J0cy5RdWl6RGlyZWN0aXZlID0gcmVxdWlyZShcIi4vZGlyZWN0aXZlXCIpO1xubW9kdWxlLmV4cG9ydHMuUHJvZ3Jlc3Npb24gPSByZXF1aXJlKFwiLi9wcm9ncmVzc2lvblwiKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgUHJvZ3Jlc3Npb24gPSBmdW5jdGlvbigpIHtcblxuICAgIHRoaXMuU2VxdWVuY2UgPSBmdW5jdGlvbihhcnJheSwgbWF4UXVlc3Rpb25zKSB7XG5cbiAgICAgICAgdGhpcy5pbmQgPSBhcnJheS5sZW5ndGgtMTtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gYXJyYXlbYXJyYXkubGVuZ3RoLTFdO1xuICAgICAgICB0aGlzLml0ZW1zID0gYXJyYXk7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB0aGlzLm1heCA9IHR5cGVvZiBtYXhRdWVzdGlvbnMgIT09ICd1bmRlZmluZWQnID8gbWF4UXVlc3Rpb25zIDogLTE7XG5cbiAgICAgICAgdGhpcy5nZXRDdXJyZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5uZXh0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8vIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgcHJvZ3Jlc3Npb24sIHJldHVybiBmYWxzZVxuXG4gICAgICAgICAgICBpZih0aGlzLmNvdW50ID09IHRoaXMubWF4KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIG9ubHkgb25lIHF1ZXN0aW9uIHRoZW4gd2VcbiAgICAgICAgICAgIC8vIGNhbid0IGdldCBhbm90aGVyIG9uZS5cblxuICAgICAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGggPT0gMSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpdGVtcyBhdCBlbmQgb2YgYXJyYXkgbW9yZSBsaWtlbHkgdG8gYmUgcGlja2VkXG4gICAgICAgICAgICAvLyB0aGFuIHRob3NlIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBpbmQgPSB0aGlzLmluZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbG9vcCB1bnRpbCB3ZSBwaWNrIGEgcXVlc3Rpb24gZGlmZmVyZW50IHRoYW4gb3VyIGN1cnJlbnQgb25lXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdoaWxlKGluZCA9PSB0aGlzLmluZCkge1xuICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5yYW5kb20oKSooTWF0aC5wb3codGhpcy5pdGVtcy5sZW5ndGgsIDIpKTtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IE1hdGguc3FydCh5KTtcbiAgICAgICAgICAgICAgICBpbmQgICA9IE1hdGgudHJ1bmMoeCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBuZXh0ICA9IHRoaXMuaXRlbXNbaW5kXTtcblxuICAgICAgICAgICAgdGhpcy5pbmQgPSBpbmQ7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBuZXh0O1xuICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgIHRoaXMudXAgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLy8gdXNlciBhbnN3ZXJlZCB0aGUgcXVlc3Rpb24gY29ycmVjdGx5LFxuICAgICAgICAgICAgLy8gc2hpZnQgaXRlbSBsZWZ0LlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih0aGlzLmluZCA9PSAwKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5pdGVtc1t0aGlzLmluZC0xXTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbdGhpcy5pbmQtMV0gPSB0aGlzLml0ZW1zW3RoaXMuaW5kXTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbdGhpcy5pbmRdID0gdDtcbiAgICAgICAgICAgIFxuICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgIHRoaXMuZG93biA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdXNlciBhbnN3ZXJlZCB0aGUgcXVlc3Rpb24gaW5jb3JyZWN0bHksXG4gICAgICAgICAgICAvLyBzaGlmdCBpdGVtIHJpZ2h0LlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih0aGlzLmluZCA9PSB0aGlzLml0ZW1zLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuaXRlbXNbdGhpcy5pbmQrMV07XG4gICAgICAgICAgICB0aGlzLml0ZW1zW3RoaXMuaW5kKzFdID0gdGhpcy5pdGVtc1t0aGlzLmluZF07XG4gICAgICAgICAgICB0aGlzLml0ZW1zW3RoaXMuaW5kXSA9IHQ7XG4gICAgICAgICAgICBcbiAgICAgICAgfTtcblxuICAgIH1cblxufTtcblxuYW5ndWxhci5tb2R1bGUoXCJhcHAucXVpelwiKS5zZXJ2aWNlKFwiUHJvZ3Jlc3Npb25cIiwgUHJvZ3Jlc3Npb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb2dyZXNzaW9uO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBTbGlkZUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XG5cbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgYW5ndWxhci5leHRlbmQodm0sIHtcblxuICAgICAgICBjdXJyZW50U2xpZGUgOiAxLFxuXG4gICAgICAgIGlzU2hvd24gOiBmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICByZXR1cm4gbiA9PSB2bS5jdXJyZW50U2xpZGU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbW92ZVRvTmV4dFNsaWRlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2bS5jdXJyZW50U2xpZGUgKz0gMTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbihcInNsaWRlLWZpbmlzaGVkXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZtLm1vdmVUb05leHRTbGlkZSgpO1xuICAgIH0pXG5cbiAgICAkcm9vdFNjb3BlLmZpbmlzaGVkID0gdHJ1ZTtcblxufTtcblxuYW5ndWxhci5tb2R1bGUoXCJhcHAuc2xpZGVzXCIpLmNvbnRyb2xsZXIoXCJTbGlkZUNvbnRyb2xsZXJcIiwgU2xpZGVDb250cm9sbGVyKTsiLCJhbmd1bGFyLm1vZHVsZShcImFwcC5zbGlkZXNcIiwgW10pO1xuXG5tb2R1bGUuZXhwb3J0cy5TbGlkZUNvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi9jb250cm9sbGVyXCIpO1xuIl19
